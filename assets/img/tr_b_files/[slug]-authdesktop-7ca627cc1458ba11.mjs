(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[11450,48035,50157,39395,68743,59786,61553,36811,40667,78857,46760,89734,86173,77560,56103],{641661:(e,t,n)=>{var i={"./":[318205,9],"./CZ":[706711,9,6711],"./CZ.js":[706711,9,6711],"./DA":[377333,9,77333],"./DA.js":[377333,9,77333],"./DE":[498302,9,98302],"./DE.js":[498302,9,98302],"./ENUK":[15662,9,15662],"./ENUK.js":[15662,9,15662],"./ENUS":[658213,9,58213],"./ENUS.js":[658213,9,58213],"./ESAR":[534894,9,34894],"./ESAR.js":[534894,9,34894],"./ESES":[195798,9,95798],"./ESES.js":[195798,9,95798],"./ESMX":[291024,9,91024],"./ESMX.js":[291024,9,91024],"./FI":[554886,9,54886],"./FI.js":[554886,9,54886],"./FR":[8218,9,8218],"./FR.js":[8218,9,8218],"./GR":[564236,9,64236],"./GR.js":[564236,9,64236],"./HI":[605117,9,5117],"./HI.js":[605117,9,5117],"./HU":[88880,9,88880],"./HU.js":[88880,9,88880],"./ID":[188428,9,88428],"./ID.js":[188428,9,88428],"./IT":[881997,9,81997],"./IT.js":[881997,9,81997],"./JP":[372456,9,72456],"./JP.js":[372456,9,72456],"./KR":[849295,9,49295],"./KR.js":[849295,9,49295],"./MS":[564142,9,64142],"./MS.js":[564142,9,64142],"./NL":[607081,9,7081],"./NL.js":[607081,9,7081],"./NO":[574849,9,74849],"./NO.js":[574849,9,74849],"./PL":[858892,9,58892],"./PL.js":[858892,9,58892],"./PTBR":[204798,9,4798],"./PTBR.js":[204798,9,4798],"./PTPT":[367343,9,67343],"./PTPT.js":[367343,9,67343],"./RO":[765171,9,65171],"./RO.js":[765171,9,65171],"./RU":[390988,9,90988],"./RU.js":[390988,9,90988],"./SK":[532792,9,32792],"./SK.js":[532792,9,32792],"./SV":[772853,9,72853],"./SV.js":[772853,9,72853],"./TH":[213755,9,13755],"./TH.js":[213755,9,13755],"./TL":[551618,9,51618],"./TL.js":[551618,9,51618],"./TR":[400571,9,571],"./TR.js":[400571,9,571],"./UA":[874132,9,74132],"./UA.js":[874132,9,74132],"./VT":[700762,9,762],"./VT.js":[700762,9,762],"./ZHCN":[28240,9,28240],"./ZHCN.js":[28240,9,28240],"./ZHTW":[859490,9,59490],"./ZHTW.js":[859490,9,59490],"./index":[318205,9],"./index.js":[318205,9],"./localeToFilename":[932466,9],"./localeToFilename.js":[932466,9],"./types":[695846,7,95846],"./types.js":[695846,7,95846]};function o(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return Promise.all(t.slice(2).map(n.e)).then((()=>n.t(o,16|t[1])))}o.keys=()=>Object.keys(i),o.id=641661,e.exports=o},263116:(e,t,n)=>{n.d(t,{ZP:()=>E,TA:()=>I});var i=n(667294);function o(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=n(659864),l=n(108679),d=n.n(l);function c(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}function u(e){console.warn("loadable: "+e)}var h=i.createContext();function p(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var g={initialChunks:{}},m="PENDING",f="REJECTED";var b=function(e){return e};function v(e){var t=e.defaultResolveComponent,n=void 0===t?b:t,l=e.render,u=e.onLoad;function p(e,t){void 0===t&&(t={});var p=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),b={};function v(e){return t.cacheKey?t.cacheKey(e):p.resolve?p.resolve(e):"static"}function x(e,i,o){var r=t.resolveComponent?t.resolveComponent(e,i):n(e);if(t.resolveComponent&&!(0,a.isValidElementType)(r))throw new Error("resolveComponent returned something that is not a React component!");return d()(o,r,{preload:!0}),r}var y,_=function(e){var n,i;function a(n){var i;return(i=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:v(n)},c(!n.__chunkExtractor||p.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?(!1===t.ssr||(p.requireAsync(n).catch((function(){return null})),i.loadSync(),n.__chunkExtractor.addChunk(p.chunkName(n))),s(i)):(!1!==t.ssr&&(p.isReady&&p.isReady(n)||p.chunkName&&g.initialChunks[p.chunkName(n)])&&i.loadSync(),i)}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,a.getDerivedStateFromProps=function(e,t){var n=v(e);return r({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var d=a.prototype;return d.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===f&&this.setCache(),this.state.loading&&this.loadAsync()},d.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},d.componentWillUnmount=function(){this.mounted=!1},d.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},d.getCacheKey=function(){return v(this.props)},d.getCache=function(){return b[this.getCacheKey()]},d.setCache=function(e){void 0===e&&(e=void 0),b[this.getCacheKey()]=e},d.triggerOnLoad=function(){var e=this;u&&setTimeout((function(){u(e.state.result,e.props)}))},d.loadSync=function(){if(this.state.loading)try{var e=x(p.requireSync(this.props),this.props,C);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:p.resolve(this.props),chunkName:p.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},d.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=x(t,e.props,{Loadable:C});e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},d.resolveAsync=function(){var e=this,t=this.props,n=(t.__chunkExtractor,t.forwardedRef,o(t,["__chunkExtractor","forwardedRef"])),i=this.getCache();return i||((i=p.requireAsync(n)).status=m,this.setCache(i),i.then((function(){i.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:p.resolve(e.props),chunkName:p.chunkName(e.props),error:t?t.message:t}),i.status=f}))),i},d.render=function(){var e=this.props,n=e.forwardedRef,i=e.fallback,s=(e.__chunkExtractor,o(e,["forwardedRef","fallback","__chunkExtractor"])),a=this.state,d=a.error,c=a.loading,u=a.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===m)throw this.loadAsync();if(d)throw d;var h=i||t.fallback||null;return c?h:l({fallback:h,result:u,options:t,props:r({},s,{ref:n})})},a}(i.Component),w=(y=_,function(e){return i.createElement(h.Consumer,null,(function(t){return i.createElement(y,Object.assign({__chunkExtractor:t},e))}))}),C=i.forwardRef((function(e,t){return i.createElement(w,Object.assign({forwardedRef:t},e))}));return C.preload=function(e){p.requireAsync(e)},C.load=function(e){return p.requireAsync(e)},C}return{loadable:p,lazy:function(e,t){return p(e,r({},t,{suspense:!0}))}}}var x=v({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return i.createElement(t,n)}}),y=x.loadable,_=x.lazy,w=v({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),C=w.loadable,j=w.lazy,S="undefined"!=typeof window;function I(e,t){void 0===e&&(e=function(){});var n=(void 0===t?{}:t).namespace,i=void 0===n?"":n;if(!S)return u("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(S){var r=p(i),s=document.getElementById(r);if(s){o=JSON.parse(s.textContent);var a=document.getElementById(r+"_ext");if(!a)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(a.textContent).namedChunks.forEach((function(e){g.initialChunks[e]=!0}))}}if(!o)return u("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var l=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,n=t.push.bind(t);function i(){o.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(l||(l=!0,e()))}t.push=function(){n.apply(void 0,arguments),i()},i()})).then(e)}var P=y;P.lib=C,_.lib=j;const E=P},169272:(e,t,n)=>{var i=n(310723),o=[],r=[],s=i.makeRequestCallFromTimer((function(){if(r.length)throw r.shift()}));function a(e){var t;(t=o.length?o.pop():new l).task=e,i(t)}function l(){this.task=null}e.exports=a,l.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(r.push(e),s())}finally{this.task=null,o[o.length]=this}}},310723:(e,t,n)=>{function i(e){r.length||(o(),!0),r[r.length]=e}e.exports=i;var o,r=[],s=0;function a(){for(;s<r.length;){var e=s;if(s+=1,r[e].call(),s>1024){for(var t=0,n=r.length-s;t<n;t++)r[t]=r[t+s];r.length-=s,s=0}}r.length=0,s=0,!1}var l,d,c,u=void 0!==n.g?n.g:self,h=u.MutationObserver||u.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof h?(l=1,d=new h(a),c=document.createTextNode(""),d.observe(c,{characterData:!0}),o=function(){l=-l,c.data=l}):o=p(a),i.requestFlush=o,i.makeRequestCallFromTimer=p},294184:(e,t)=>{var n;!function(){var i={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var s=o.apply(null,n);s&&e.push(s)}else if("object"===r)for(var a in n)i.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},538334:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(120975),o=n(649610),r=n(116434),s=n(325921),a=n(284125);var l=function(){function e(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=!1),this.context=t,this.isSetUp=!1,this.handleRefCountChange=function(){var e=r.store.getState().refCount>0;e&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!e&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1)};var l=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return i.createStore(o.default,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n);this.store=l,this.monitor=new s.default(l,new a.default(l)),this.backend=e(this),l.subscribe(this.handleRefCountChange)}return e.prototype.getContext=function(){return this.context},e.prototype.getMonitor=function(){return this.monitor},e.prototype.getBackend=function(){return this.backend},e.prototype.getRegistry=function(){return this.monitor.registry},e.prototype.getActions=function(){var e=this,t=this.store.dispatch;var n=r.default(this);return Object.keys(n).reduce((function(i,o){var r,s=n[o];return i[o]=(r=s,function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(e,n);void 0!==o&&t(o)}),i}),{})},e.prototype.dispatch=function(e){this.store.dispatch(e)},e}();t.default=l},325921:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(640809),o=n(952705),r=n(442520),s=n(441143),a=function(){function e(e,t){this.store=e,this.registry=t}return e.prototype.subscribeToStateChange=function(e,t){var n=this;void 0===t&&(t={handlerIds:void 0});var i=t.handlerIds;s("function"==typeof e,"listener must be a function."),s(void 0===i||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId;return this.store.subscribe((function(){var t=n.store.getState(),s=t.stateId;try{s===o||s===o+1&&!r.areDirty(t.dirtyHandlerIds,i)||e()}finally{o=s}}))},e.prototype.subscribeToOffsetChange=function(e){var t=this;s("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var i=t.store.getState().dragOffset;i!==n&&(n=i,e())}))},e.prototype.canDragSource=function(e){if(!e)return!1;var t=this.registry.getSource(e);return s(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)},e.prototype.canDropOnTarget=function(e){if(!e)return!1;var t=this.registry.getTarget(e);if(s(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),o=this.getItemType();return i.default(n,o)&&t.canDrop(this,e)},e.prototype.isDragging=function(){return Boolean(this.getItemType())},e.prototype.isDraggingSource=function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return s(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))},e.prototype.isOverTarget=function(e,t){if(void 0===t&&(t={shallow:!1}),!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(e),r=this.getItemType();if(r&&!i.default(o,r))return!1;var s=this.getTargetIds();if(!s.length)return!1;var a=s.indexOf(e);return n?a===s.length-1:a>-1},e.prototype.getItemType=function(){return this.store.getState().dragOperation.itemType},e.prototype.getItem=function(){return this.store.getState().dragOperation.item},e.prototype.getSourceId=function(){return this.store.getState().dragOperation.sourceId},e.prototype.getTargetIds=function(){return this.store.getState().dragOperation.targetIds},e.prototype.getDropResult=function(){return this.store.getState().dragOperation.dropResult},e.prototype.didDrop=function(){return this.store.getState().dragOperation.didDrop},e.prototype.isSourcePublic=function(){return this.store.getState().dragOperation.isSourcePublic},e.prototype.getInitialClientOffset=function(){return this.store.getState().dragOffset.initialClientOffset},e.prototype.getInitialSourceClientOffset=function(){return this.store.getState().dragOffset.initialSourceClientOffset},e.prototype.getClientOffset=function(){return this.store.getState().dragOffset.clientOffset},e.prototype.getSourceClientOffset=function(){return o.getSourceClientOffset(this.store.getState().dragOffset)},e.prototype.getDifferenceFromInitialOffset=function(){return o.getDifferenceFromInitialOffset(this.store.getState().dragOffset)},e}();t.default=a},284125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(4963),o=n(547227),r=n(556141),s=n(834314),a=n(441143),l=n(169272);function d(e){switch(e[0]){case"S":return r.HandlerRole.SOURCE;case"T":return r.HandlerRole.TARGET;default:a(!1,"Cannot parse handler ID: "+e)}}function c(e,t){var n=e.entries(),i=!1;do{var o=n.next(),r=o.done;if(o.value[1]===t)return!0;i=r}while(!i);return!1}var u=function(){function e(e){this.store=e,this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null}return e.prototype.addSource=function(e,t){s.validateType(e),s.validateSourceContract(t);var n=this.addHandler(r.HandlerRole.SOURCE,e,t);return this.store.dispatch(i.addSource(n)),n},e.prototype.addTarget=function(e,t){s.validateType(e,!0),s.validateTargetContract(t);var n=this.addHandler(r.HandlerRole.TARGET,e,t);return this.store.dispatch(i.addTarget(n)),n},e.prototype.containsHandler=function(e){return c(this.dragSources,e)||c(this.dropTargets,e)},e.prototype.getSource=function(e,t){return void 0===t&&(t=!1),a(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)},e.prototype.getTarget=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)},e.prototype.getSourceType=function(e){return a(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)},e.prototype.getTargetType=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)},e.prototype.isSourceId=function(e){return d(e)===r.HandlerRole.SOURCE},e.prototype.isTargetId=function(e){return d(e)===r.HandlerRole.TARGET},e.prototype.removeSource=function(e){var t=this;a(this.getSource(e),"Expected an existing source."),this.store.dispatch(i.removeSource(e)),l((function(){t.dragSources.delete(e),t.types.delete(e)}))},e.prototype.removeTarget=function(e){a(this.getTarget(e),"Expected an existing target."),this.store.dispatch(i.removeTarget(e)),this.dropTargets.delete(e),this.types.delete(e)},e.prototype.pinSource=function(e){var t=this.getSource(e);a(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t},e.prototype.unpinSource=function(){a(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null},e.prototype.addHandler=function(e,t,n){var i=function(e){var t=o.default().toString();switch(e){case r.HandlerRole.SOURCE:return"S"+t;case r.HandlerRole.TARGET:return"T"+t;default:throw new Error("Unknown Handler Role: "+e)}}(e);return this.types.set(i,t),e===r.HandlerRole.SOURCE?this.dragSources.set(i,n):e===r.HandlerRole.TARGET&&this.dropTargets.set(i,n),i},e}();t.default=u},84554:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(446714),o=n(315033),r=n(441143),s=n(59980),a={type:s.INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};t.default=function(e){return function(t,n){void 0===t&&(t=[]),void 0===n&&(n={publishSource:!0});var l=n.publishSource,d=void 0===l||l,c=n.clientOffset,u=n.getSourceClientOffset,h=e.getMonitor(),p=e.getRegistry();e.dispatch(i.setClientOffset(c)),function(e,t,n){r(!t.isDragging(),"Cannot call beginDrag while dragging.");for(var i=0,o=e;i<o.length;i++){var s=o[i];r(n.getSource(s),"Expected sourceIds to be registered.")}}(t,h,p);var g=function(e,t){for(var n=null,i=e.length-1;i>=0;i--)if(t.canDragSource(e[i])){n=e[i];break}return n}(t,h);if(null!==g){var m=null;c&&(!function(e){r("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(u),m=u(g)),e.dispatch(i.setClientOffset(c,m));var f=p.getSource(g).beginDrag(h,g);!function(e){r(o.isObject(e),"Item must be an object.")}(f),p.pinSource(g);var b=p.getSourceType(g);return{type:s.BEGIN_DRAG,payload:{itemType:b,item:f,sourceId:g,clientOffset:c||null,sourceClientOffset:m||null,isSourcePublic:!!d}}}e.dispatch(a)}}},676402:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(59980),r=n(315033),s=n(441143);t.default=function(e){return function(t){void 0===t&&(t={});var n=e.getMonitor(),a=e.getRegistry();!function(e){s(e.isDragging(),"Cannot call drop while not dragging."),s(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n),function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n).forEach((function(l,d){var c=function(e,t,n,i){var o=n.getTarget(e),a=o?o.drop(i,e):void 0;(function(e){s(void 0===e||r.isObject(e),"Drop result must either be an object or undefined.")})(a),void 0===a&&(a=0===t?{}:i.getDropResult());return a}(l,d,a,n),u={type:o.DROP,payload:{dropResult:i({},t,c)}};e.dispatch(u)}))}}},852126:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(59980),o=n(441143);t.default=function(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){o(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();return n.getSource(r,!0).endDrag(t,r),n.unpinSource(),{type:i.END_DRAG}}}},645140:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(640809),o=n(59980),r=n(441143);t.default=function(e){return function(t,n){var s=(void 0===n?{}:n).clientOffset;!function(e){r(Array.isArray(e),"Expected targetIds to be an array.")}(t);var a=t.slice(0),l=e.getMonitor(),d=e.getRegistry();return function(e,t,n){r(t.isDragging(),"Cannot call hover while not dragging."),r(!t.didDrop(),"Cannot call hover after drop.");for(var i=0;i<e.length;i++){var o=e[i];r(e.lastIndexOf(o)===i,"Expected targetIds to be unique in the passed array.");var s=n.getTarget(o);r(s,"Expected targetIds to be registered.")}}(a,l,d),function(e,t,n){for(var o=e.length-1;o>=0;o--){var r=e[o],s=t.getTargetType(r);i.default(s,n)||e.splice(o,1)}}(a,d,l.getItemType()),function(e,t,n){for(var i=0,o=e;i<o.length;i++){var r=o[i];n.getTarget(r).hover(t,r)}}(a,l,d),{type:o.HOVER,payload:{targetIds:a,clientOffset:s||null}}}}},116434:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(84554),o=n(86045),r=n(645140),s=n(676402),a=n(852126);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(59980)),t.default=function(e){return{beginDrag:i.default(e),publishDragSource:o.default(e),hover:r.default(e),drop:s.default(e),endDrag:a.default(e)}}},446714:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(59980);t.setClientOffset=function(e,t){return{type:i.INIT_COORDS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}},86045:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(59980);t.default=function(e){return function(){if(e.getMonitor().isDragging())return{type:i.PUBLISH_DRAG_SOURCE}}}},59980:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_COORDS="dnd-core/INIT_COORDS",t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",t.HOVER="dnd-core/HOVER",t.DROP="dnd-core/DROP",t.END_DRAG="dnd-core/END_DRAG"},4963:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_SOURCE="dnd-core/ADD_SOURCE",t.ADD_TARGET="dnd-core/ADD_TARGET",t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",t.REMOVE_TARGET="dnd-core/REMOVE_TARGET",t.addSource=function(e){return{type:t.ADD_SOURCE,payload:{sourceId:e}}},t.addTarget=function(e){return{type:t.ADD_TARGET,payload:{targetId:e}}},t.removeSource=function(e){return{type:t.REMOVE_SOURCE,payload:{sourceId:e}}},t.removeTarget=function(e){return{type:t.REMOVE_TARGET,payload:{targetId:e}}}},834314:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(441143);t.validateSourceContract=function(e){i("function"==typeof e.canDrag,"Expected canDrag to be a function."),i("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),i("function"==typeof e.endDrag,"Expected endDrag to be a function.")},t.validateTargetContract=function(e){i("function"==typeof e.canDrop,"Expected canDrop to be a function."),i("function"==typeof e.hover,"Expected hover to be a function."),i("function"==typeof e.drop,"Expected beginDrag to be a function.")},t.validateType=function e(t,n){n&&Array.isArray(t)?t.forEach((function(t){return e(t,!1)})):i("string"==typeof t||"symbol"==typeof t,n?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}},294662:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(538334);t.createDragDropManager=function(e,t,n){return new i.default(e,t,n)}},720369:(e,t,n)=>{function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(556141)),i(n(294662))},556141:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(t.HandlerRole||(t.HandlerRole={}))},354014:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(116434),o=n(4963),r=n(171939),s=n(442520),a=n(315033);t.default=function(e,t){switch(void 0===e&&(e=s.NONE),t.type){case i.HOVER:break;case o.ADD_SOURCE:case o.ADD_TARGET:case o.REMOVE_TARGET:case o.REMOVE_SOURCE:return s.NONE;case i.BEGIN_DRAG:case i.PUBLISH_DRAG_SOURCE:case i.END_DRAG:case i.DROP:default:return s.ALL}var n=t.payload,l=n.targetIds,d=void 0===l?[]:l,c=n.prevTargetIds,u=void 0===c?[]:c,h=a.xor(d,u);if(!(h.length>0||!r.areArraysEqual(d,u)))return s.NONE;var p=u[u.length-1],g=d[d.length-1];return p!==g&&(p&&h.push(p),g&&h.push(g)),h}},14095:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(116434),r=n(171939),s={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};t.default=function(e,t){void 0===e&&(e=s);var n=t.payload;switch(t.type){case o.INIT_COORDS:case o.BEGIN_DRAG:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case o.HOVER:return r.areCoordsEqual(e.clientOffset,n.clientOffset)?e:i({},e,{clientOffset:n.clientOffset});case o.END_DRAG:case o.DROP:return s;default:return e}}},345596:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(116434),r=n(4963),s=n(315033),a={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};t.default=function(e,t){void 0===e&&(e=a);var n=t.payload;switch(t.type){case o.BEGIN_DRAG:return i({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case o.PUBLISH_DRAG_SOURCE:return i({},e,{isSourcePublic:!0});case o.HOVER:return i({},e,{targetIds:n.targetIds});case r.REMOVE_TARGET:return-1===e.targetIds.indexOf(n.targetId)?e:i({},e,{targetIds:s.without(e.targetIds,n.targetId)});case o.DROP:return i({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case o.END_DRAG:return i({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}},649610:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(14095),r=n(345596),s=n(378508),a=n(354014),l=n(938910),d=n(315033);t.default=function(e,t){return void 0===e&&(e={}),{dirtyHandlerIds:a.default(e.dirtyHandlerIds,{type:t.type,payload:i({},t.payload,{prevTargetIds:d.get(e,"dragOperation.targetIds",[])})}),dragOffset:o.default(e.dragOffset,t),refCount:s.default(e.refCount,t),dragOperation:r.default(e.dragOperation,t),stateId:l.default(e.stateId)}}},378508:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(4963);t.default=function(e,t){switch(void 0===e&&(e=0),t.type){case i.ADD_SOURCE:case i.ADD_TARGET:return e+1;case i.REMOVE_SOURCE:case i.REMOVE_TARGET:return e-1;default:return e}}},938910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e=0),e+1}},952705:(e,t)=>{function n(e,t){return{x:e.x+t.x,y:e.y+t.y}}function i(e,t){return{x:e.x-t.x,y:e.y-t.y}}Object.defineProperty(t,"__esModule",{value:!0}),t.add=n,t.subtract=i,t.getSourceClientOffset=function(e){var t=e.clientOffset,o=e.initialClientOffset,r=e.initialSourceClientOffset;return t&&o&&r?i(n(t,r),o):null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?i(t,n):null}},442520:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(315033);t.NONE=[],t.ALL=[],t.NONE.__IS_NONE__=!0,t.ALL.__IS_ALL__=!0,t.areDirty=function(e,n){return e!==t.NONE&&(e===t.ALL||void 0===n||i.intersection(n,e).length>0)}},315033:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.isString=function(e){return"string"==typeof e},t.isObject=function(e){return"object"==typeof e},t.xor=function(e,t){var n=new Map,i=function(e){return n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(i),t.forEach(i);var o=[];return n.forEach((function(e,t){1===e&&o.push(t)})),o},t.intersection=function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))}},171939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.strictEquality=function(e,t){return e===t},t.areCoordsEqual=function(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)},t.areArraysEqual=function(e,n,i){if(void 0===i&&(i=t.strictEquality),e.length!==n.length)return!1;for(var o=0;o<e.length;++o)if(!i(e[o],n[o]))return!1;return!0}},547227:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=0;t.default=function(){return n++}},640809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}},120975:(e,t,n)=>{n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:()=>r,applyMiddleware:()=>f,bindActionCreators:()=>u,combineReducers:()=>d,compose:()=>m,createStore:()=>a});var i=n(98123),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},r={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function a(e,t,n){var o;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,d=t,c=[],u=c,h=!1;function p(){u===c&&(u=c.slice())}function g(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return d}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),u.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var n=u.indexOf(e);u.splice(n,1),c=null}}}function f(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,d=l(d,e)}finally{h=!1}for(var t=c=u,n=0;n<t.length;n++){(0,t[n])()}return e}function b(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,f({type:r.REPLACE})}function v(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[i.Z]=function(){return this},e}return f({type:r.INIT}),(o={dispatch:f,subscribe:m,getState:g,replaceReducer:b})[i.Z]=v,o}function l(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function d(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var o=t[i];0,"function"==typeof e[o]&&(n[o]=e[o])}var s,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:r.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:r.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+r.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(d){s=d}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var i=!1,o={},r=0;r<a.length;r++){var d=a[r],c=n[d],u=e[d],h=c(u,t);if(void 0===h){var p=l(d,t);throw new Error(p)}o[d]=h,i=i||h!==u}return(i=i||a.length!==Object.keys(e).length)?o:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var i in e){var o=e[i];"function"==typeof o&&(n[i]=c(o,t))}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},r=t.map((function(e){return e(o)}));return g({},n,{dispatch:i=m.apply(void 0,r)(n.dispatch)})}}}},477412:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},829932:e=>{e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}},744037:(e,t,n)=>{var i=n(698363),o=n(3674);e.exports=function(e,t){return e&&i(t,o(t),e)}},163886:(e,t,n)=>{var i=n(698363),o=n(481704);e.exports=function(e,t){return e&&i(t,o(t),e)}},285990:(e,t,n)=>{var i=n(646384),o=n(477412),r=n(234865),s=n(744037),a=n(163886),l=n(364626),d=n(200278),c=n(318805),u=n(201911),h=n(458234),p=n(946904),g=n(664160),m=n(43824),f=n(529148),b=n(738517),v=n(701469),x=n(644144),y=n(356688),_=n(513218),w=n(472928),C=n(3674),j=n(481704),S="[object Arguments]",I="[object Function]",P="[object Object]",E={};E[S]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[P]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[I]=E["[object WeakMap]"]=!1,e.exports=function e(t,n,T,D,k,O){var B,R=1&n,M=2&n,A=4&n;if(T&&(B=k?T(t,D,k,O):T(t)),void 0!==B)return B;if(!_(t))return t;var L=v(t);if(L){if(B=m(t),!R)return d(t,B)}else{var Z=g(t),N=Z==I||"[object GeneratorFunction]"==Z;if(x(t))return l(t,R);if(Z==P||Z==S||N&&!k){if(B=M||N?{}:b(t),!R)return M?u(t,a(B,t)):c(t,s(B,t))}else{if(!E[Z])return k?t:{};B=f(t,Z,R)}}O||(O=new i);var F=O.get(t);if(F)return F;O.set(t,B),w(t)?t.forEach((function(i){B.add(e(i,n,T,i,t,O))})):y(t)&&t.forEach((function(i,o){B.set(o,e(i,n,T,o,t,O))}));var z=L?void 0:(A?M?p:h:M?j:C)(t);return o(z||t,(function(i,o){z&&(i=t[o=i]),r(B,o,e(i,n,T,o,t,O))})),B}},989881:(e,t,n)=>{var i=n(247816),o=n(899291)(i);e.exports=o},121078:(e,t,n)=>{var i=n(862488),o=n(137285);e.exports=function e(t,n,r,s,a){var l=-1,d=t.length;for(r||(r=o),a||(a=[]);++l<d;){var c=t[l];n>0&&r(c)?n>1?e(c,n-1,r,s,a):i(a,c):s||(a[a.length]=c)}return a}},247816:(e,t,n)=>{var i=n(228483),o=n(3674);e.exports=function(e,t){return e&&i(e,t,o)}},297786:(e,t,n)=>{var i=n(671811),o=n(240327);e.exports=function(e,t){for(var n=0,r=(t=i(t,e)).length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}},200013:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},225588:(e,t,n)=>{var i=n(664160),o=n(637005);e.exports=function(e){return o(e)&&"[object Map]"==i(e)}},702958:(e,t,n)=>{var i=n(646384),o=n(690939);e.exports=function(e,t,n,r){var s=n.length,a=s,l=!r;if(null==e)return!a;for(e=Object(e);s--;){var d=n[s];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<a;){var c=(d=n[s])[0],u=e[c],h=d[1];if(l&&d[2]){if(void 0===u&&!(c in e))return!1}else{var p=new i;if(r)var g=r(u,h,c,e,t,p);if(!(void 0===g?o(h,u,3,r,p):g))return!1}}return!0}},829221:(e,t,n)=>{var i=n(664160),o=n(637005);e.exports=function(e){return o(e)&&"[object Set]"==i(e)}},267206:(e,t,n)=>{var i=n(191573),o=n(716432),r=n(406557),s=n(701469),a=n(139601);e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):a(e)}},269199:(e,t,n)=>{var i=n(989881),o=n(498612);e.exports=function(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}},191573:(e,t,n)=>{var i=n(702958),o=n(301499),r=n(542634);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},716432:(e,t,n)=>{var i=n(690939),o=n(227361),r=n(379095),s=n(115403),a=n(689162),l=n(542634),d=n(240327);e.exports=function(e,t){return s(e)&&a(t)?l(d(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?r(n,e):i(t,s,3)}}},882689:(e,t,n)=>{var i=n(829932),o=n(297786),r=n(267206),s=n(269199),a=n(571131),l=n(307518),d=n(285022),c=n(406557),u=n(701469);e.exports=function(e,t,n){t=t.length?i(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[c];var h=-1;t=i(t,l(r));var p=s(e,(function(e,n,o){return{criteria:i(t,(function(t){return t(e)})),index:++h,value:e}}));return a(p,(function(e,t){return d(e,t,n)}))}},840371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},379152:(e,t,n)=>{var i=n(297786);e.exports=function(e){return function(t){return i(t,e)}}},540098:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,i,o,r){for(var s=-1,a=n(t((i-e)/(o||1)),0),l=Array(a);a--;)l[r?a:++s]=e,e+=o;return l}},571131:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},880531:(e,t,n)=>{var i=n(562705),o=n(829932),r=n(701469),s=n(733448),a=i?i.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(r(t))return o(t,e)+"";if(s(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},727561:(e,t,n)=>{var i=n(567990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e}},671811:(e,t,n)=>{var i=n(701469),o=n(115403),r=n(555514),s=n(479833);e.exports=function(e,t){return i(e)?e:o(e,t)?[e]:r(s(e))}},257157:(e,t,n)=>{var i=n(274318);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},593147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},540419:(e,t,n)=>{var i=n(562705),o=i?i.prototype:void 0,r=o?o.valueOf:void 0;e.exports=function(e){return r?Object(r.call(e)):{}}},626393:(e,t,n)=>{var i=n(733448);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,r=e==e,s=i(e),a=void 0!==t,l=null===t,d=t==t,c=i(t);if(!l&&!c&&!s&&e>t||s&&a&&d&&!l&&!c||o&&a&&d||!n&&d||!r)return 1;if(!o&&!s&&!c&&e<t||c&&n&&r&&!o&&!s||l&&n&&r||!a&&r||!d)return-1}return 0}},285022:(e,t,n)=>{var i=n(626393);e.exports=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,a=r.length,l=n.length;++o<a;){var d=i(r[o],s[o]);if(d)return o>=l?d:d*("desc"==n[o]?-1:1)}return e.index-t.index}},318805:(e,t,n)=>{var i=n(698363),o=n(799551);e.exports=function(e,t){return i(e,o(e),t)}},201911:(e,t,n)=>{var i=n(698363),o=n(151442);e.exports=function(e,t){return i(e,o(e),t)}},899291:(e,t,n)=>{var i=n(498612);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!i(n))return e(n,o);for(var r=n.length,s=t?r:-1,a=Object(n);(t?s--:++s<r)&&!1!==o(a[s],s,a););return n}}},747445:(e,t,n)=>{var i=n(540098),o=n(816612),r=n(418601);e.exports=function(e){return function(t,n,s){return s&&"number"!=typeof s&&o(t,n,s)&&(n=s=void 0),t=r(t),void 0===n?(n=t,t=0):n=r(n),s=void 0===s?t<n?1:-1:r(s),i(t,n,s,e)}}},946904:(e,t,n)=>{var i=n(868866),o=n(151442),r=n(481704);e.exports=function(e){return i(e,r,o)}},301499:(e,t,n)=>{var i=n(689162),o=n(3674);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,i(s)]}return t}},151442:(e,t,n)=>{var i=n(862488),o=n(385924),r=n(799551),s=n(770479),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,r(e)),e=o(e);return t}:s;e.exports=a},900222:(e,t,n)=>{var i=n(671811),o=n(135694),r=n(701469),s=n(565776),a=n(541780),l=n(240327);e.exports=function(e,t,n){for(var d=-1,c=(t=i(t,e)).length,u=!1;++d<c;){var h=l(t[d]);if(!(u=null!=e&&n(e,h)))break;e=e[h]}return u||++d!=c?u:!!(c=null==e?0:e.length)&&a(c)&&s(h,c)&&(r(e)||o(e))}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},529148:(e,t,n)=>{var i=n(274318),o=n(257157),r=n(593147),s=n(540419),a=n(477133);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return r(e);case"[object Set]":return new l;case"[object Symbol]":return s(e)}}},137285:(e,t,n)=>{var i=n(562705),o=n(135694),r=n(701469),s=i?i.isConcatSpreadable:void 0;e.exports=function(e){return r(e)||o(e)||!!(s&&e&&e[s])}},115403:(e,t,n)=>{var i=n(701469),o=n(733448),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(s.test(e)||!r.test(e)||null!=t&&e in Object(t))}},689162:(e,t,n)=>{var i=n(513218);e.exports=function(e){return e==e&&!i(e)}},542634:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},624523:(e,t,n)=>{var i=n(288306);e.exports=function(e){var t=i(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},555514:(e,t,n)=>{var i=n(624523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=i((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,i,o){t.push(i?o.replace(r,"$1"):n||e)})),t}));e.exports=s},240327:(e,t,n)=>{var i=n(733448);e.exports=function(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},567990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},150361:(e,t,n)=>{var i=n(285990);e.exports=function(e){return i(e,5)}},23279:(e,t,n)=>{var i=n(513218),o=n(707771),r=n(14841),s=Math.max,a=Math.min;e.exports=function(e,t,n){var l,d,c,u,h,p,g=0,m=!1,f=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,i=d;return l=d=void 0,g=t,u=e.apply(i,n)}function x(e){return g=e,h=setTimeout(_,t),m?v(e):u}function y(e){var n=e-p;return void 0===p||n>=t||n<0||f&&e-g>=c}function _(){var e=o();if(y(e))return w(e);h=setTimeout(_,function(e){var n=t-(e-p);return f?a(n,c-(e-g)):n}(e))}function w(e){return h=void 0,b&&l?v(e):(l=d=void 0,u)}function C(){var e=o(),n=y(e);if(l=arguments,d=this,p=e,n){if(void 0===h)return x(p);if(f)return clearTimeout(h),h=setTimeout(_,t),v(p)}return void 0===h&&(h=setTimeout(_,t)),u}return t=r(t)||0,i(n)&&(m=!!n.leading,c=(f="maxWait"in n)?s(r(n.maxWait)||0,t):c,b="trailing"in n?!!n.trailing:b),C.cancel=function(){void 0!==h&&clearTimeout(h),g=0,l=p=d=h=void 0},C.flush=function(){return void 0===h?u:w(o())},C}},227361:(e,t,n)=>{var i=n(297786);e.exports=function(e,t,n){var o=null==e?void 0:i(e,t);return void 0===o?n:o}},379095:(e,t,n)=>{var i=n(200013),o=n(900222);e.exports=function(e,t){return null!=e&&o(e,t,i)}},356688:(e,t,n)=>{var i=n(225588),o=n(307518),r=n(531167),s=r&&r.isMap,a=s?o(s):i;e.exports=a},472928:(e,t,n)=>{var i=n(829221),o=n(307518),r=n(531167),s=r&&r.isSet,a=s?o(s):i;e.exports=a},733448:(e,t,n)=>{var i=n(644239),o=n(637005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==i(e)}},288306:(e,t,n)=>{var i=n(883369);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(o.Cache||i),n}o.Cache=i,e.exports=o},707771:(e,t,n)=>{var i=n(555639);e.exports=function(){return i.Date.now()}},139601:(e,t,n)=>{var i=n(840371),o=n(379152),r=n(115403),s=n(240327);e.exports=function(e){return r(e)?i(s(e)):o(e)}},396026:(e,t,n)=>{var i=n(747445)();e.exports=i},189734:(e,t,n)=>{var i=n(121078),o=n(882689),r=n(105976),s=n(816612),a=r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&s(e,t[0],t[1])?t=[]:n>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),o(e,i(t,1),[])}));e.exports=a},823493:(e,t,n)=>{var i=n(23279),o=n(513218);e.exports=function(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:r,maxWait:t,trailing:s})}},418601:(e,t,n)=>{var i=n(14841),o=1/0;e.exports=function(e){return e?(e=i(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},640554:(e,t,n)=>{var i=n(418601);e.exports=function(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},14841:(e,t,n)=>{var i=n(727561),o=n(513218),r=n(733448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=a.test(e);return n||l.test(e)?d(e.slice(2),n?2:8):s.test(e)?NaN:+e}},479833:(e,t,n)=>{var i=n(880531);e.exports=function(e){return null==e?"":i(e)}},860682:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(946580);t.isFirefox=i.memoize((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=i.memoize((function(){return Boolean(window.safari)}))},527594:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(946580),o=function(){function e(e){this.entered=[],this.isNodeInDocument=e}return e.prototype.enter=function(e){var t=this,n=this.entered.length;return this.entered=i.union(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0},e.prototype.leave=function(e){var t=this.entered.length;return this.entered=i.without(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length},e.prototype.reset=function(){this.entered=[]},e}();t.default=o},613087:function(e,t,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(527594),r=n(860682),s=n(796538),a=n(36076),l=n(278201),d=function(){function e(e){var t=this;this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){return s.getNodeClientOffset(t.sourceNodes.get(e))},this.endDragNativeItem=function(){t.isDraggingNativeItem()&&(t.actions.endDrag(),t.registry.removeSource(t.currentNativeHandle),t.currentNativeHandle=null,t.currentNativeSource=null)},this.isNodeInDocument=function(e){return!!document&&document.body.contains(e)||!!t.window&&t.window.document.body.contains(e)},this.endDragIfSourceWasRemovedFromDOM=function(){var e=t.currentDragSourceNode;t.isNodeInDocument(e)||t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragStartCapture=function(){t.clearCurrentDragSourceNode(),t.dragStartSourceIds=[]},this.handleTopDragStart=function(e){var n=t.dragStartSourceIds;t.dragStartSourceIds=null;var i=s.getEventClientOffset(e);t.monitor.isDragging()&&t.actions.endDrag(),t.actions.beginDrag(n||[],{publishSource:!1,getSourceClientOffset:t.getSourceClientOffset,clientOffset:i});var o=e.dataTransfer,r=a.matchNativeItemType(o);if(t.monitor.isDragging()){if(o&&"function"==typeof o.setDragImage){var l=t.monitor.getSourceId(),d=t.sourceNodes.get(l),c=t.sourcePreviewNodes.get(l)||d;if(c){var u=t.getCurrentSourcePreviewNodeOptions(),h={anchorX:u.anchorX,anchorY:u.anchorY},p={offsetX:u.offsetX,offsetY:u.offsetY},g=s.getDragPreviewOffset(d,c,i,h,p);o.setDragImage(c,g.x,g.y)}}try{o.setData("application/json",{})}catch(m){}t.setCurrentDragSourceNode(e.target),t.getCurrentSourcePreviewNodeOptions().captureDraggingState?t.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}),0)}else if(r)t.beginDragNativeItem(r);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=function(){t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(t.dragEnterTargetIds=[],t.enterLeaveCounter.enter(e.target)&&!t.monitor.isDragging()){var n=e.dataTransfer,i=a.matchNativeItemType(n);i&&t.beginDragNativeItem(i)}},this.handleTopDragEnter=function(e){var n=t.dragEnterTargetIds;(t.dragEnterTargetIds=[],t.monitor.isDragging())&&(t.altKeyPressed=e.altKey,r.isFirefox()||t.actions.hover(n,{clientOffset:s.getEventClientOffset(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){t.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var n=t.dragOverTargetIds;if(t.dragOverTargetIds=[],!t.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));t.altKeyPressed=e.altKey,t.actions.hover(n||[],{clientOffset:s.getEventClientOffset(e)}),(n||[]).some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())):t.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){t.isDraggingNativeItem()&&e.preventDefault(),t.enterLeaveCounter.leave(e.target)&&t.isDraggingNativeItem()&&t.endDragNativeItem()},this.handleTopDropCapture=function(e){t.dropTargetIds=[],e.preventDefault(),t.isDraggingNativeItem()&&t.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var n=t.dropTargetIds;t.dropTargetIds=[],t.actions.hover(n,{clientOffset:s.getEventClientOffset(e)}),t.actions.drop({dropEffect:t.getCurrentDropEffect()}),t.isDraggingNativeItem()?t.endDragNativeItem():t.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.context=e.getContext(),this.enterLeaveCounter=new o.default(this.isNodeInDocument)}return Object.defineProperty(e.prototype,"window",{get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),e.prototype.setup=function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}},e.prototype.teardown=function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))},e.prototype.connectDragPreview=function(e,t,n){var i=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){i.sourcePreviewNodes.delete(e),i.sourcePreviewNodeOptions.delete(e)}},e.prototype.connectDragSource=function(e,t,n){var i=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var o=function(t){return i.handleDragStart(t,e)},r=function(e){return i.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",r),function(){i.sourceNodes.delete(e),i.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",r),t.setAttribute("draggable","false")}},e.prototype.connectDropTarget=function(e,t){var n=this,i=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},r=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",i),t.addEventListener("dragover",o),t.addEventListener("drop",r),function(){t.removeEventListener("dragenter",i),t.removeEventListener("dragover",o),t.removeEventListener("drop",r)}},e.prototype.addEventListeners=function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.removeEventListeners=function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.getCurrentSourceNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return i({dropEffect:this.altKeyPressed?"copy":"move"},t||{})},e.prototype.getCurrentDropEffect=function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect},e.prototype.getCurrentSourcePreviewNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return i({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})},e.prototype.isDraggingNativeItem=function(){var e=this.monitor.getItemType();return Object.keys(l).some((function(t){return l[t]===e}))},e.prototype.beginDragNativeItem=function(e){this.clearCurrentDragSourceNode(),this.currentNativeSource=a.createNativeDragSource(e),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])},e.prototype.setCurrentDragSourceNode=function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)},e.prototype.clearCurrentDragSourceNode=function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)},e.prototype.handleDragStart=function(e,t){this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t)},e.prototype.handleDragEnter=function(e,t){this.dragEnterTargetIds.unshift(t)},e.prototype.handleDragOver=function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)},e.prototype.handleDrop=function(e,t){this.dropTargetIds.unshift(t)},e}();t.default=d},328775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=e.length,i=[],o=0;o<n;o++)i.push(o);i.sort((function(t,n){return e[t]<e[n]?-1:1}));var r,s,a=[],l=[],d=[];for(o=0;o<n-1;o++)r=e[o+1]-e[o],s=t[o+1]-t[o],l.push(r),a.push(s),d.push(s/r);var c=[d[0]];for(o=0;o<l.length-1;o++){var u=d[o],h=d[o+1];if(u*h<=0)c.push(0);else{r=l[o];var p=l[o+1],g=r+p;c.push(3*g/((g+p)/u+(g+r)/h))}}c.push(d[d.length-1]);var m,f=[],b=[];for(o=0;o<c.length-1;o++){m=d[o];var v=c[o],x=1/l[o];g=v+c[o+1]-m-m;f.push((m-v-g)*x),b.push(g*x*x)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=f,this.c3s=b}return e.prototype.interpolate=function(e){var t=this,n=t.xs,i=t.ys,o=t.c1s,r=t.c2s,s=t.c3s,a=n.length-1;if(e===n[a])return i[a];for(var l,d=0,c=s.length-1;d<=c;){var u=n[l=Math.floor(.5*(d+c))];if(u<e)d=l+1;else{if(!(u>e))return i[l];c=l-1}}var h=e-n[a=Math.max(0,c)],p=h*h;return i[a]+o[a]*h+r[a]*p+s[a]*h*p},e}();t.default=n},50013:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t=this;this.config=e,this.item={},Object.keys(this.config.exposeProperties).forEach((function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \""+e+'" until the drop event.'),null}})}))}return e.prototype.mutateItemByReadingDataTransfer=function(e){var t=this,n={};e&&Object.keys(this.config.exposeProperties).forEach((function(i){n[i]={value:t.config.exposeProperties[i](e,t.config.matchesTypes)}})),Object.defineProperties(this.item,n)},e.prototype.canDrag=function(){return!0},e.prototype.beginDrag=function(){return this.item},e.prototype.isDragging=function(e,t){return t===e.getSourceId()},e.prototype.endDrag=function(){},e}();t.NativeDragSource=n},345349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromDataTransfer=function(e,t,n){var i=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=i?i:n}},36076:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(226851),o=n(50013);t.createNativeDragSource=function(e){return new o.NativeDragSource(i.nativeTypesConfig[e])},t.matchNativeItemType=function(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(i.nativeTypesConfig).filter((function(e){return i.nativeTypesConfig[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}},226851:(e,t,n)=>{var i;Object.defineProperty(t,"__esModule",{value:!0});var o=n(278201),r=n(345349);t.nativeTypesConfig=((i={})[o.FILE]={exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]},i[o.URL]={exposeProperties:{urls:function(e,t){return r.getDataFromDataTransfer(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]},i[o.TEXT]={exposeProperties:{text:function(e,t){return r.getDataFromDataTransfer(e,t,"")}},matchesTypes:["Text","text/plain"]},i)},278201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},796538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(860682),o=n(328775);function r(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),i=n.top;return{x:n.left,y:i}}t.getNodeClientOffset=r,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,n,s,a){var l,d,c="IMG"===(l=t).nodeName&&(i.isFirefox()||!document.documentElement.contains(l)),u=r(c?e:t),h={x:n.x-u.x,y:n.y-u.y},p=e.offsetWidth,g=e.offsetHeight,m=s.anchorX,f=s.anchorY,b=function(e,t,n,o){var r=e?t.width:n,s=e?t.height:o;return i.isSafari()&&e&&(s/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:s}}(c,t,p,g),v=b.dragPreviewWidth,x=b.dragPreviewHeight,y=a.offsetX,_=a.offsetY,w=0===_||_;return{x:0===y||y?y:new o.default([0,.5,1],[h.x,h.x/p*v,h.x+v-p]).interpolate(m),y:w?_:(d=new o.default([0,.5,1],[h.y,h.y/g*x,h.y+x-g]).interpolate(f),i.isSafari()&&c&&(d+=(window.devicePixelRatio-1)*x),d)}}},19402:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n||((n=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n}},395141:(e,t,n)=>{var i=n(613087);n(19402).default;var o=n(278201);t.hm=o,t.ZP=function(e){return new i.default(e)}},946580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e){var t=null;return function(){return null==t&&(t=e()),t}},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.union=function(e,t){var n=new Set,i=function(e){return n.add(e)};e.forEach(i),t.forEach(i);var o=[];return n.forEach((function(e){return o.push(e)})),o}},925237:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(667294),l=n(720369),d=n(496395),c=n(489745),u=n(114774),h=n(215956);function p(e,t,n){return{dragDropManager:l.createDragDropManager(e,t,n)}}t.context=a.createContext({dragDropManager:void 0}),t.Consumer=t.context.Consumer,t.Provider=t.context.Provider,t.createChildContext=p,t.DragDropContextProvider=function(e){var n=e.children,i=s(e,["children"]),o="manager"in i?{dragDropManager:i.manager}:p(i.backend,i.context,i.debugMode);return a.createElement(t.Provider,{value:o},n)},t.DragDropContext=function(e,n,i){d.default("DragDropContext","backend",e);var s=p(e,n,i);return function(e){var n=e,i=n.displayName||n.name||"Component",l=function(l){function d(){var e=null!==l&&l.apply(this,arguments)||this;return e.ref=a.createRef(),e.getManager=function(){return s.dragDropManager},e}return o(d,l),d.prototype.getDecoratedComponentInstance=function(){return u(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},d.prototype.render=function(){return a.createElement(t.Provider,{value:s},a.createElement(n,r({},this.props,{ref:c.isRefable(n)?this.ref:null})))},d.DecoratedComponent=e,d.displayName="DragDropContext("+i+")",d}(a.Component);return h(l,e)}}},328202:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(667294),a=n(496395),l=n(925237),d=n(489745),c=n(353924),u=n(215956),h=n(114774),p=n(596774);t.default=function(e,t){return void 0===t&&(t={}),a.default("DragLayer","collect[, options]",e,t),h("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),h(c.isPlainObject(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(n){var i=n,a=t.arePropsEqual,c=void 0===a?p:a,g=i.displayName||i.name||"Component",m=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCurrentlyMounted=!1,e.ref=s.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();p(t,e.state)||e.setState(t)}},e}return o(a,t),a.prototype.getDecoratedComponentInstance=function(){return h(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},a.prototype.shouldComponentUpdate=function(e,t){return!c(e,this.props)||!p(t,this.state)},a.prototype.componentDidMount=function(){this.isCurrentlyMounted=!0,this.handleChange()},a.prototype.componentWillUnmount=function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)},a.prototype.render=function(){var e=this;return s.createElement(l.Consumer,null,(function(t){var n=t.dragDropManager;return void 0===n?null:(e.receiveDragDropManager(n),e.isCurrentlyMounted?s.createElement(i,r({},e.props,e.state,{ref:d.isRefable(i)?e.ref:null})):null)}))},a.prototype.receiveDragDropManager=function(e){if(void 0===this.manager){this.manager=e,h("object"==typeof e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",g,g);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}},a.prototype.getCurrentState=function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)},a.displayName="DragLayer("+g+")",a.DecoratedComponent=n,a}(s.Component);return u(m,n)}}},344319:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294).memo((function(e){var t=e.connect,n=e.src;if("undefined"!=typeof Image){var i=new Image;i.src=n,i.onload=function(){return t(i)}}return null}));i.displayName="DragPreviewImage",t.default=i},450793:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(496395),o=n(42742),r=n(910513),s=n(626706),a=n(391081),l=n(147277),d=n(270942),c=n(353924),u=n(114774);t.default=function(e,t,n,h){void 0===h&&(h={}),i.default("DragSource","type, spec, collect[, options]",e,t,n,h);var p=e;"function"!=typeof e&&(u(d.default(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var g=s.default(t);return u("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),function(e){return o.default({containerDisplayName:"DragSource",createHandler:g,registerHandler:r.default,createConnector:function(e){return new l.default(e)},createMonitor:function(e){return new a.default(e)},DecoratedComponent:e,getType:p,collect:n,options:h})}}},391081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(114774),o=!1,r=!1,s=function(){function e(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.sourceId=e},e.prototype.getHandlerId=function(){return this.sourceId},e.prototype.canDrag=function(){i(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}},e.prototype.isDragging=function(){if(!this.sourceId)return!1;i(!r,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return r=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{r=!1}},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.isDraggingSource=function(e){return this.internalMonitor.isDraggingSource(e)},e.prototype.isOverTarget=function(e,t){return this.internalMonitor.isOverTarget(e,t)},e.prototype.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.prototype.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.prototype.getSourceId=function(){return this.internalMonitor.getSourceId()},e.prototype.subscribeToOffsetChange=function(e){return this.internalMonitor.subscribeToOffsetChange(e)},e.prototype.canDragSource=function(e){return this.internalMonitor.canDragSource(e)},e.prototype.canDropOnTarget=function(e){return this.internalMonitor.canDropOnTarget(e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=s},206059:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(496395),o=n(42742),r=n(548537),s=n(329492),a=n(270942),l=n(596177),d=n(750986),c=n(353924),u=n(114774);t.default=function(e,t,n,h){void 0===h&&(h={}),i.default("DropTarget","type, spec, collect[, options]",e,t,n,h);var p=e;"function"!=typeof e&&(u(a.default(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var g=s.default(t);return u("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),function(e){return o.default({containerDisplayName:"DropTarget",createHandler:g,registerHandler:r.default,createMonitor:function(e){return new l.default(e)},createConnector:function(e){return new d.default(e)},DecoratedComponent:e,getType:p,collect:n,options:h})}}},596177:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(114774),o=!1,r=function(){function e(e){this.targetId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.targetId=e},e.prototype.getHandlerId=function(){return this.targetId},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.canDrop=function(){if(!this.targetId)return!1;i(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}},e.prototype.isOver=function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=r},147277:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(65435),o=n(965525),r=n(596774),s=function(){function e(e){var t=this;this.backend=e,this.hooks=i.default({dragSource:function(e,n){t.dragSourceOptions=n||null,o.isRef(e)?t.dragSourceRef=e:t.dragSourceNode=e,t.reconnectDragSource()},dragPreview:function(e,n){t.dragPreviewOptions=n||null,o.isRef(e)?t.dragPreviewRef=e:t.dragPreviewNode=e,t.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null}return e.prototype.receiveHandlerId=function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dragSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragSourceOptions",{get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreviewOptions",{get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){this.reconnectDragSource(),this.reconnectDragPreview()},e.prototype.reconnectDragSource=function(){var e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();e&&this.disconnectDragSource();var t=this.dragSource;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)):this.lastConnectedDragSource=t)},e.prototype.reconnectDragPreview=function(){var e=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();e&&this.disconnectDragPreview();var t=this.dragPreview;this.handlerId&&t&&e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))},e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.prototype.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.prototype.didDragSourceOptionsChange=function(){return!r(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.prototype.didDragPreviewOptionsChange=function(){return!r(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.prototype.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},e.prototype.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},Object.defineProperty(e.prototype,"dragSource",{get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreview",{get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current},enumerable:!0,configurable:!0}),e}();t.default=s},750986:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(65435),o=n(965525),r=n(596774),s=function(){function e(e){var t=this;this.backend=e,this.hooks=i.default({dropTarget:function(e,n){t.dropTargetOptions=n,o.isRef(e)?t.dropTargetRef=e:t.dropTargetNode=e,t.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null}return Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dropTarget},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)},e.prototype.receiveHandlerId=function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"dropTargetOptions",{get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.prototype.didOptionsChange=function(){return!r(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.prototype.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},Object.defineProperty(e.prototype,"dropTarget",{get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current},enumerable:!0,configurable:!0}),e}();t.default=s},626706:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(487943),o=(n(353924),n(114774)),r=["canDrag","beginDrag","isDragging","endDrag"],s=["beginDrag"],a=function(){function e(e,t,n){var i=this;this.spec=e,this.monitor=t,this.ref=n,this.props=null,this.beginDrag=function(){if(i.props)return i.spec.beginDrag(i.props,i.monitor,i.ref.current)}}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.canDrag=function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))},e.prototype.isDragging=function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())},e.prototype.endDrag=function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,i.getDecoratedComponent(this.ref))},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(r.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',r.join(", "),t),o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),s.forEach((function(t){o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,n){return new a(e,t,n)}}},329492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(487943),o=(n(353924),n(114774)),r=["canDrop","hover","drop"],s=function(){function e(e,t,n){this.spec=e,this.monitor=t,this.ref=n,this.props=null}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.receiveMonitor=function(e){this.monitor=e},e.prototype.canDrop=function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)},e.prototype.hover=function(){this.spec.hover&&this.spec.hover(this.props,this.monitor,i.getDecoratedComponent(this.ref))},e.prototype.drop=function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(r.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',r.join(", "),t),o("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,n){return new s(e,t,n)}}},42742:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(667294),a=n(925237),l=n(386998),d=n(489745),c=(n(353924),n(114774)),u=n(215956),h=n(596774);t.default=function(e){var t=e.DecoratedComponent,n=e.createHandler,i=e.createMonitor,p=e.createConnector,g=e.registerHandler,m=e.containerDisplayName,f=e.getType,b=e.collect,v=e.options.arePropsEqual,x=void 0===v?h:v,y=t,_=t.displayName||t.name||"Component",w=function(e){function u(t){var n=e.call(this,t)||this;return n.decoratedRef=s.createRef(),n.handleChange=function(){var e=n.getCurrentState();h(e,n.state)||n.setState(e)},n.disposable=new l.SerialDisposable,n.receiveProps(t),n.dispose(),n}return o(u,e),u.prototype.getHandlerId=function(){return this.handlerId},u.prototype.getDecoratedComponentInstance=function(){return c(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current},u.prototype.shouldComponentUpdate=function(e,t){return!x(e,this.props)||!h(t,this.state)},u.prototype.componentDidMount=function(){this.disposable=new l.SerialDisposable,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()},u.prototype.componentDidUpdate=function(e){x(this.props,e)||(this.receiveProps(this.props),this.handleChange())},u.prototype.componentWillUnmount=function(){this.dispose()},u.prototype.receiveProps=function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(f(e)))},u.prototype.receiveType=function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=g(e,this.handler,this.manager),n=t[0],i=t[1];this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new l.CompositeDisposable(new l.Disposable(o),new l.Disposable(i)))}},u.prototype.dispose=function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)},u.prototype.getCurrentState=function(){return this.handlerConnector?b(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}},u.prototype.render=function(){var e=this;return s.createElement(a.Consumer,null,(function(t){var n=t.dragDropManager;return e.receiveDragDropManager(n),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){return e.handlerConnector.reconnect()})),s.createElement(y,r({},e.props,e.getCurrentState(),{ref:d.isRefable(y)?e.decoratedRef:null}))}))},u.prototype.receiveDragDropManager=function(e){void 0===this.manager&&(c(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",_,_),void 0!==e&&(this.manager=e,this.handlerMonitor=i(e),this.handlerConnector=p(e.getBackend()),this.handler=n(this.handlerMonitor,this.decoratedRef)))},u.DecoratedComponent=t,u.displayName=m+"("+_+")",u}(s.Component);return u(w,t)}},76108:(e,t,n)=>{function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(774399)),i(n(387559)),i(n(459296))},741365:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(910513),r=n(998008),s=n(391081),a=n(147277),l=n(114774);t.useDragSourceMonitor=function(){var e=r.useDragDropManager();return[i.useMemo((function(){return new s.default(e)}),[e]),i.useMemo((function(){return new a.default(e.getBackend())}),[e])]},t.useDragHandler=function(e,t,n){var s=r.useDragDropManager(),a=i.useMemo((function(){return{beginDrag:function(){var n=e.current,i=n.begin,o=n.item;if(i){var r=i(t);return l(null==r||"object"==typeof r,"dragSpec.begin() must either return an object, undefined, or null"),r||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,i){var o=e.current.isDragging;return o?o(t):i===n.getSourceId()},endDrag:function(){var i=e.current.end;i&&i(t.getItem(),t),n.reconnect()}}}),[]);i.useEffect((function(){var i=o.default(e.current.item.type,a,s),r=i[0],l=i[1];return t.receiveHandlerId(r),n.receiveHandlerId(r),l}),[])}},787458:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(548537),r=n(998008),s=n(750986),a=n(596177);t.useDropTargetMonitor=function(){var e=r.useDragDropManager();return[i.useMemo((function(){return new a.default(e)}),[e]),i.useMemo((function(){return new s.default(e.getBackend())}),[e])]},t.useDropHandler=function(e,t,n){var s=r.useDragDropManager(),a=i.useMemo((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);i.useEffect((function(){var i=o.default(e.current.accept,a,s),r=i[0],l=i[1];return t.receiveHandlerId(r),n.receiveHandlerId(r),l}),[t,n])}},365353:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(596774),o=n(667294);t.useCollector=function(e,t,n){var r=o.useState((function(){return t(e)})),s=r[0],a=r[1],l=o.useCallback((function(){var o=t(e);i(s,o)||(a(o),n&&n())}),[s,e,n]);return[s,l]}},998008:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(925237),r=n(114774);t.useDragDropManager=function(){var e=i.useContext(o.context).dragDropManager;return r(null!=e,"Expected drag drop context"),e}},179411:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(365353);t.useMonitorOutput=function(e,t,n){var r=o.useCollector(e,t,n),s=r[0],a=r[1];return i.useEffect((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(a,{handlerIds:[t]})}),[e,a]),s}},774399:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(179411),o=n(741365),r=n(667294),s=n(114774);t.useDrag=function(e){var t=r.useRef(e);t.current=e,s(null!=e.item,"item must be defined"),s(null!=e.item.type,"item type must be defined");var n=o.useDragSourceMonitor(),a=n[0],l=n[1];o.useDragHandler(t,a,l);var d=i.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),c=r.useMemo((function(){return l.hooks.dragSource()}),[l]),u=r.useMemo((function(){return l.hooks.dragPreview()}),[l]);return r.useEffect((function(){l.dragSourceOptions=t.current.options||null,l.reconnect()}),[l]),r.useEffect((function(){l.dragPreviewOptions=t.current.previewOptions||null,l.reconnect()}),[l]),[d,c,u]}},459296:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(998008),r=n(365353);t.useDragLayer=function(e){var t=o.useDragDropManager().getMonitor(),n=r.useCollector(t,e),s=n[0],a=n[1];return i.useEffect((function(){return t.subscribeToOffsetChange(a)})),i.useEffect((function(){return t.subscribeToStateChange(a)})),s}},387559:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(179411),o=n(787458),r=n(667294),s=n(114774);t.useDrop=function(e){var t=r.useRef(e);t.current=e,s(null!=e.accept,"accept must be defined");var n=o.useDropTargetMonitor(),a=n[0],l=n[1];o.useDropHandler(t,a,l);var d=i.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),c=r.useMemo((function(){return l.hooks.dropTarget()}),[l]);return r.useEffect((function(){l.dropTargetOptions=e.options||null,l.reconnect()}),[e.options]),[d,c]}},60598:(e,t,n)=>{var i=n(925237);t.Z5=i.DragDropContext,i.DragDropContextProvider,i.Consumer,n(328202).default;var o=n(450793);t.Ej=o.default;var r=n(206059);t.GR=r.default,n(344319).default;var s=n(76108);s.useDrag,s.useDragLayer,s.useDrop},910513:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=n.getRegistry(),o=i.addSource(e,t);return[o,function(){return i.removeSource(o)}]}},548537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=n.getRegistry(),o=i.addTarget(e,t);return[o,function(){return i.removeTarget(o)}]}},496395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]}},957523:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(114774);function r(e,t){"function"==typeof e?e(t):e.current=t}t.default=function(e,t){var n=e.ref;return o("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?i.cloneElement(e,{ref:function(e){r(t,e),n&&r(n,e)}}):i.cloneElement(e,{ref:t})}},353924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e},t.noop=function(){},t.isPlainObject=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},590539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isDisposed=!1,this.disposables=e}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),e.dispose())}return t},e.prototype.clear=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(n=0;n<e;n++)t[n].dispose()}},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(n=0;n<e;n++)t[n].dispose()}},e}();t.CompositeDisposable=n},653473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(353924),o=function(){function e(e){this.isDisposed=!1,this.action=i.isFunction(e)?e:i.noop}return e.isDisposable=function(e){return e&&i.isFunction(e.dispose)},e._fixup=function(t){return e.isDisposable(t)?t:e.empty},e.create=function(t){return new e(t)},e.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},e.empty={dispose:i.noop},e}();t.Disposable=o},409591:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.isDisposed=!1}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e,n&&n.dispose()}t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}},e}();t.SerialDisposable=n},386998:(e,t,n)=>{function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(653473)),i(n(409591)),i(n(590539))},487943:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoratedComponent=function(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}},965525:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRef=function(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}},489745:(e,t)=>{function n(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.isRefForwardingComponent=n,t.isRefable=function(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||n(e);var t}},270942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){return"string"==typeof t||"symbol"==typeof t||!!n&&Array.isArray(t)&&t.every((function(t){return e(t,!1)}))}},152548:()=>{String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})},65435:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(667294),o=n(957523);function r(e){return function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!i.isValidElement(t)){var r=t;return e(r,n),r}var s=t;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}(s);var a=n?function(t){return e(t,n)}:e;return o.default(s,a)}}n(152548),t.default=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var o=r(i);t[n]=function(){return o}}})),t}},215956:(e,t,n)=>{var i=n(876618),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return i.isMemo(e)?s:a[e.$$typeof]||o}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,n,i){if("string"!=typeof n){if(g){var o=p(n);o&&o!==g&&e(t,o,i)}var s=c(n);u&&(s=s.concat(u(n)));for(var a=l(t),m=l(n),f=0;f<s.length;++f){var b=s[f];if(!(r[b]||i&&i[b]||m&&m[b]||a&&a[b])){var v=h(n,b);try{d(t,b,v)}catch(x){}}}return t}return t}},114774:e=>{e.exports=function(e,t,n,i,o,r,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,i,o,r,s,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},121255:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function f(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case c:case u:case r:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case l:return e;default:return t}}case m:case g:case o:return t}}}function b(e){return f(e)===u}t.typeOf=f,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=i,t.ForwardRef=h,t.Fragment=r,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===a||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h)},t.isAsyncMode=function(e){return b(e)||f(e)===c},t.isConcurrentMode=b,t.isContextConsumer=function(e){return f(e)===d},t.isContextProvider=function(e){return f(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return f(e)===h},t.isFragment=function(e){return f(e)===r},t.isLazy=function(e){return f(e)===m},t.isMemo=function(e){return f(e)===g},t.isPortal=function(e){return f(e)===o},t.isProfiler=function(e){return f(e)===a},t.isStrictMode=function(e){return f(e)===s},t.isSuspense=function(e){return f(e)===p}},876618:(e,t,n)=>{e.exports=n(121255)},596774:e=>{e.exports=function(e,t,n,i){var o=n?n.call(i,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<r.length;l++){var d=r[l];if(!a(d))return!1;var c=e[d],u=t[d];if(!1===(o=n?n.call(i,c,u,d):void 0)||void 0===o&&c!==u)return!1}return!0}},98123:(e,t,n)=>{n.d(t,{Z:()=>i}),e=n.hmd(e);const i=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},733237:(e,t,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]"]=function(){return n(737989).Z}},227608:(e,t,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]/invite"]=function(){return n(737989).Z}},617911:(e,t,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/[username]/[slug]/more_ideas"]=function(){return n(737989).Z}},484898:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(737614),o=n(966427);const r={getBrowser:()=>(0,o.u)(i.Z.instance.browser_name||""),isSafari(){return this.getBrowser()===o.o.SAFARI},isChrome(){return this.getBrowser()===o.o.CHROME},isFirefox(){return this.getBrowser()===o.o.FIREFOX},isEdge(){return this.getBrowser()===o.o.EDGE}}},418102:(e,t,n)=>{n.d(t,{eE:()=>a,ZP:()=>l});let i=0;class o{constructor(e,t,n){this.pubsub=e,this.target=t,this.subscriberOptions=n,this.topics={}}publish(e,t,n){return n?this.getHandler()(this.target,e,t,n):this.getHandler()(this.target,e,t),this}subscribe(...e){return this.getChannel().addSubscriber(this,e),e.forEach((e=>{this.topics[e]=!0})),this}unsubscribe(...e){return 0===e.length&&(e=this.getTopics()),e.forEach((e=>delete this.topics[e])),this.getChannel().removeSubscriber(this,e),this}getChannel(){return this.pubsub.getChannel(this.target)}getHandler(){return this.subscriberOptions.handler}getId(){return this.id||(this.id=i,i+=1),this.id}getTopics(){return Object.keys(this.topics)}}class r{constructor(e,t){this.pubsub=e,this.target=t,this.subscribers=[],this.filters={},this.messages={}}addSubscriber(e,t){const n=e.getId();return this.subscribers[n]=e,t.forEach((t=>{this.filters[t]||(this.filters[t]={}),this.filters[t][n]||(this.filters[t][n]=e)})),e}removeSubscriber(e,t){const n=e.getId();t.forEach((e=>{this.filters[e]&&delete this.filters[e][n]})),this.subscribers.length<1&&this.pubsub.clearChannel(this.target)}publish(e,t){Object.values(this.filters[e]||{}).forEach((n=>{n.publish(e,t)})),"*"!==e&&this.publish("*",t),this.messages[e]=t}unsubscribeAll(){this.subscribers.forEach((e=>{e.unsubscribe()}))}}const s={Subscriber:o,Channel:r,instance:new class{constructor(e){this.ns=e,this.channels={}}_subscribe(e,t,n){const i=new o(this,e,{handler:n});return i.subscribe(t),i}subscribe(e,t,n){return this._subscribe(e,t,n)}publish(e,t,n){this.getChannel(e).publish(t,n)}getChannel(e){return this.channels[e]||(this.channels[e]=new r(this,e)),this.channels[e]}clearChannel(e){const t=this.channels[e];t&&(t.unsubscribeAll(),delete this.channels[e])}}("local")},a=s.instance,l=s},580849:(e,t,n)=>{n.d(t,{K:()=>a});var i=n(920349),o=n(737614),r=n(202923);let s=null;const a={fromDesktopContextProps(e){const{context:t,context:{user:n={}}}=e;return{advertiser:t.advertiser?t.advertiser:null,country:t.country,countryFromHostName:t.country_from_hostname,countryFromIp:t.country_from_ip,deepLink:t.deep_link,experiments:e.experiments,fullPath:t.full_path,isAmp:!1,isAuthenticated:t.is_authenticated,isBot:"true"===t.is_bot,isSocialBot:!!t.social_bot,isManagedAdvertiser:t.is_managed_advertiser,isRTL:["ar"].includes(t.language),language:t.language,legacyAdvertiser:null,locale:t.locale,loginState:n.login_state||void 0,origin:t.origin,regionFromIp:t.region_from_ip,requestIdentifier:t.request_identifier,unauthId:t.unauth_id,userAgent:{browserName:t.browser_name,browserVersion:t.browser_version,canUseNativeApp:t.user_agent_can_use_native_app,isTablet:t.is_tablet_agent,isMobile:t.is_mobile_agent,platform:t.user_agent_platform,platformVersion:t.user_agent_platform_version&&3===t.user_agent_platform_version.length?t.user_agent_platform_version:[0,0,0],raw:t.user_agent}}},fromLegacyContext:e=>({advertiser:e.advertiser?e.advertiser:null,country:e.country,countryFromHostName:e.country_from_hostname,countryFromIp:e.country_from_ip,deepLink:e.deep_link,experiments:e.experiments,fullPath:e.full_path,isAmp:!1,isAuthenticated:e.is_authenticated,isBot:"true"===e.is_bot,isSocialBot:!!e.social_bot,isManagedAdvertiser:e.is_managed_advertiser,isRTL:["ar"].includes(e.language),language:e.language,legacyAdvertiser:e.advertiser?e.advertiser:null,locale:e.locale,loginState:e.user&&e.user.login_state||void 0,origin:e.origin,requestIdentifier:e.request_identifier,regionFromIp:e.region_from_ip,unauthId:e.unauth_id,userAgent:{browserName:e.browser_name,browserVersion:e.browser_version,canUseNativeApp:e.user_agent_can_use_native_app,isTablet:e.is_tablet_agent,isMobile:e.is_mobile_agent,platform:e.user_agent_platform,platformVersion:e.user_agent_platform_version||[0,0,0],raw:e.user_agent}}),fromGlobalContext(){if(s)return s;const e=a.fromDesktopContextProps({context:o.Z.instance,...(0,i.Z)(o.Z.instance)});var t;return t=o.Z.instance,0!==Object.keys(t).length&&(s=e),e},__private_static_provider_fallback_value:()=>({country:"US",countryFromHostName:"",countryFromIp:"",deepLink:"",fullPath:"",isAmp:!1,isAuthenticated:!1,isBot:!1,isSocialBot:!1,isManagedAdvertiser:!1,isRTL:!1,language:"en",locale:"en-US",unauthId:"asdasda",origin:"https://example.com",regionFromIp:"CA",userAgent:{browserName:"Chrome",browserVersion:"76.0.3809.132",platform:"OSX",platformVersion:[0,0,0],isTablet:!1,isMobile:!1,raw:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36"},experiments:new r.Z,advertiser:null,legacyAdvertiser:null,requestIdentifier:""})}},447186:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(85038),o=n(799881),r=n(737614),s=n(730762),a=n(241933),l=n(311866),d=n(233088),c=n(702925),u=n(804652),h=n(641483),p=n(858875);const g=new class{constructor(){var e,t,n;n={},(t="attributes")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}get(e){return e in this.attributes?this.attributes[e]:void 0}set(e,t){"object"==typeof e?Object.assign(this.attributes,e):this.attributes[e]=t}isAuthenticated(){return!!r.Z.instance.is_authenticated}isLimitedLogin(){return!!this.attributes.login_state&&2===this.attributes.login_state}attemptCrossDomainAutologin(){-1===c.Z.settings.CORS_HANDSHAKE_DOMAINS.indexOf(window.location.origin)||i.U2(p.x3)||n.e(12749).then(n.bind(n,697974)).then((({verifyLoggedInStatus:e})=>{e(r.Z.instance.unauth_id)}))}flushContextLogs(){a.Z.pause(),s.Z.getInstance().flushEvents(void 0,void 0)}logoutWithOptions(e,t,n){return(0,h.yl)(!0),this.flushContextLogs(),l.ZP.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then((()=>{(0,h.tj)("logout",{tags:{app:7===r.Z.instance.app_type_detailed?"windows_desktop":"web_denzel",reason:"user_initiated",source:t}}),d.ZP.sessionStorage.clear(),d.ZP.localStorage.clear(),i.t8(p.e7,"True",(0,i.kZ)(p.e7))})).then((()=>(0,u.D)("logoutWithOptions"))).then((()=>{if(n)for(const e in n)d.ZP.localStorage.setItem(e,n[e]);null!==e&&(0,o.Z)(e)}))}isWriteBanned(){if(this.attributes.nags&&Array.isArray(this.attributes.nags)){const e=this.attributes.nags;return e.length>0&&"write_banned"===e[0].type}return!1}}},635691:(e,t,n)=>{n.d(t,{d:()=>d,Z:()=>c});var i=n(85038),o=n(731164),r=n(311866),s=n(447186),a=n(858875);const l=function(){};Object.assign(l.prototype,{sendSubscriptionToServer(e,t,n){i.t8(a.L9.name,"allowed",8760,"/"),t&&t(),o.Z.increment("auth.web.notifications.allowed",1,{sourceLandingPage:n});let s=e.subscriptionId;if(!s){const t=e.endpoint.split("/");s=t[t.length-1]}return r.ZP.create("WebPushDeviceResource",{}).callGet({showError:!1}).then((t=>{const n=t.resource_response.data;if(!(s in n)){const t={registration_id:s,subscription_endpoint:e.endpoint};return r.ZP.create("WebPushDeviceResource",t).callCreate()}}))},subscribe(e,t,n){return o.Z.increment("auth.web.notifications.viewed",1,{sourceLandingPage:n}),navigator.serviceWorker.ready.then((r=>{var s;null==r||null===(s=r.pushManager)||void 0===s||s.subscribe({userVisibleOnly:!0}).then((t=>this.sendSubscriptionToServer(t,e,n)),(r=>{"Notification"in window&&"denied"!==Notification.permission?(i.t8(a.L9.name,"dismissed",8760,"/"),t&&t(),o.Z.increment("auth.web.notifications.dismissed",1,{sourceLandingPage:n})):(i.t8(a.L9.name,"denied",8760,"/"),e&&e(),o.Z.increment("auth.web.notifications.denied",1,{sourceLandingPage:n}))}))})).catch((()=>{}))},initializeState(){if(s.Z.isLimitedLogin())i.t8(a.L9.name,"denied",8760,"/");else if(s.Z.isAuthenticated())if("showNotification"in ServiceWorkerRegistration.prototype)if("Notification"in window&&"denied"!==Notification.permission){if("PushManager"in window)return navigator.serviceWorker.ready.then((e=>e.pushManager.getSubscription())).then((e=>{if(e)return this.sendSubscriptionToServer(e);throw i.t8(a.L9.name,"none",8760,"/"),new Error})).catch((e=>{}));i.t8(a.L9.name,"denied",8760,"/")}else i.t8(a.L9.name,"denied",8760,"/");else i.t8(a.L9.name,"denied",8760,"/");else i.t8(a.L9.name,"denied",8760,"/")}}),l.instance=function(){return l._instance||(l._instance=new l),l._instance},"undefined"!=typeof window&&window.addEventListener("load",(()=>{"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").then((()=>{l.instance().initializeState()})).catch((()=>{}))}));const d=()=>{if("undefined"!=typeof navigator&&"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&"Notification"in window&&"PushManager"in window)try{return window.Notification.permission}catch(e){return}},c=l},930090:(e,t,n)=>{n.d(t,{W$:()=>i,Df:()=>o,f4:()=>r});const i=(e,t)=>{var n;const i="object"==typeof t.owner?null===(n=t.owner)||void 0===n?void 0:n.id:t.owner;return e.isAuth&&i===e.id},o=(e,t)=>Boolean(e.isAuth&&t.collaborated_by_me),r=(e,t)=>i(e,t)?3069:3070},282972:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(561077);const o=/\{\s*(\w+)\s*\}/g,r=(e,t)=>(0,i.Z)(o,e,t);function s({args:e,format:t}){const n=(e||[]).reduce(((e,t,n)=>({...e,[n]:t.text})),{});return r(t,n)}},454690:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(238402),o=n(185062);let r;void 0===r&&(r=n.g),r._gaq=r._gaq||[];let s=[];const a=function(e){if(s.length)for(let t=0;t<s.length;t+=1){const n=s[t];r._gaq.push(["_setAccount",n]),r._gaq.push(e)}},l=function(e){if(s=e,!e.length)return;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)},d=2,c=3,u={};u.init=function(e,t){l(e),a(["_setCustomVar",1,"is_logged_in",t?"logged in":"logged out",d])},u.initSterling=function(e,{isLoggedIn:t,advertiser:n,adminUser:i,viewingUser:o}){l(e),t?(i?a(["_setCustomVar",1,"adminUser",i.toString(),c]):o&&o.id?a(["_setCustomVar",1,"viewingUser",o.id.toString(),c]):a(["_setCustomVar",1,"is_logged_in","logged in",c]),n&&n.id&&a(["_setCustomVar",3,"advertiserId",n.id,c])):a(["_setCustomVar",1,"is_logged_in","logged out",c])};const h=function(e,t){let n=e;const r=(0,o.Z)(t).q;return r&&(n+="?"+(0,i.Z)({q:r})),n};u.trackPageview=function(e){a(["_setCustomVar",2,"page_name",e,c]),a(["_trackPageview",h(r.location.pathname,r.location.search)]),a(["_setPageGroup",1,e])},u.trackEvent=function(e,t,n,i,o){a(["_trackEvent",e,t,n,i,o])},u.trackCategoryEvent=function(e,t,n){u.trackEvent(e+"_"+t,n)};const p=u},640027:(e,t,n)=>{function i(e){let t=!1;return{promise:new Promise(((n,i)=>{e.then((e=>t?i({isCanceled:!0}):n(e)),(e=>i(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}}n.d(t,{Z:()=>i})},755908:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(388279),o=n(585967),r=n(350758),s=n(785893);const a=e=>{const{requestIdentifier:t=""}=(0,o.B)();return(0,s.jsx)(r.C,{...e,timeSpentManager:i.Z,auxData:{app_instance_id:t.slice(0,8)}})}},896829:(e,t,n)=>{n.d(t,{Q:()=>l,Z:()=>d});var i=n(667294),o=n(737614),r=n(94205),s=n(730762),a=n(44062);function l(e,t){const{setViewContextData:n}=(0,a.s)();(0,i.useEffect)((()=>{if(e){var t;const i=r.Z.fromPlainObject(e);n({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data,component:e.component,element:e.element,object_id_str:e.object_id_str,aux_data:e.aux_data,clientTrackingParams:e.clientTrackingParams}),i.setEventType(13),i.setRequestIdentifier(o.Z.initialPageContext.PAGE_LOAD_REQUEST_IDENTIFIER),s.Z.getInstance().addEvent(i)}}),[t])}function d(e){const{children:t,log:n}=e;return l(n),t||null}},549135:(e,t,n)=>{n.d(t,{j:()=>l,E:()=>d});var i=n(94205),o=n(730762),r=n(439887),s=n(584489);const a=e=>{const{pins:t,location:n}=s.Z.instance.getState(),i=t&&e&&t[e];return i?(0,r.Z)(i,n)||`${i.tracking_params}~0`:void 0};function l(e,t={}){o.Z.getInstance().addEvent(((e,{element:t,eventData:n,component:o,objectId:r,view:s,viewParameter:l,viewData:d,durationNs:c,pairId:u,clientTrackingParams:h,...p})=>{const g=i.Z.fromEventType(e);return g.setElement(t),g.updateEventData(n),g.setComponent(o),r&&g.setObjectIdStr(r),g.setDurationNs(c),g.updateAuxData({...p}),g.setViewType(s),g.setViewParameter(l),g.setViewData(d),g.setPairId(u),g.setClientTrackingParams(h||a(r)),g})(e,t))}const d={flushContextEvents:e=>o.Z.getInstance().flushEvents(e),logContextEvent:({aux_data:e,clientTrackingParams:t,component:n,duration_ns:i,element:o,event_data:r,event_type:s,object_id_str:a,pair_id:d,view_data:c,view_parameter:u,view_type:h})=>{l(s,{...e,element:o,eventData:r,component:n,objectId:a,view:h,viewParameter:null!=u?u:void 0,viewData:c,durationNs:i,pairId:d,clientTrackingParams:t})},logImpression:({auxData:e,component:t,eventData:n,eventType:i,impressionType:o,objectIdStr:r,viewData:s,viewParameter:a,viewType:d})=>{l(i,{...e,component:t,eventData:{[o]:[n]},objectId:r,viewData:s,viewParameter:null!=a?a:void 0,view:d})}}},279890:(e,t,n)=>{n.d(t,{Z:()=>o});const i="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now(),o=({window:e,duration:t,run:n})=>{const o=i();let r=0,s=null;const a=()=>{const l=i()-o,d=l-r;if(t===1/0)n(0,l,d);else{const e=l/t;if(e>=1)return void n(1,l,d);n(e,l,d)}r=l,s=e.requestAnimationFrame(a)};return{start:()=>{s=e.requestAnimationFrame(a)},cancel:()=>{s&&(e.cancelAnimationFrame(s),s=null)}}}},624500:(e,t,n)=>{n.d(t,{Z:()=>c,w:()=>u});var i=n(946753);const o=e=>e._("{{ first }}","Generic message that lists 1 item","Generic message that lists 1 item (ex: Stevie)"),r=e=>e._("{{ first }} and {{ second }}","Generic message that lists 2 items","Generic message that lists 2 items (ex: Stevie and Michael)"),s=e=>e._("{{ first }}, {{ second }} and {{ third }}","Generic message that lists 3 items","Generic message that lists 3 items (ex: Stevie, Michael and Cyndi)"),a=e=>e._("{{ first }}, {{ second }}, {{ third }} and {{ fourth }}","Generic message that lists 4 items","Generic message that lists 4 items (ex: Stevie, Michael, Cyndi and Bob)"),l=e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}","Generic message that lists 5 items","Generic message that lists 5 items (ex: Stevie, Michael, Cyndi, Bob and Bruce)"),d=e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}","Generic message that lists 6 items","Generic message that lists 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and Lionel)");function c(e,t){const n={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return(0,i.nk)(o(t),n);case 2:return(0,i.nk)(r(t),n);case 3:return(0,i.nk)(s(t),n);case 4:return(0,i.nk)(a(t),n);case 5:return(0,i.nk)(l(t),n);case 6:return(0,i.nk)(d(t),n);default:return(0,i.nk)((e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others","Generic message that lists more than 6 items","Generic message that lists more than 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and 2 others)"))(t),n)}}function u(e,t){const n={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return(0,i.nk)(o(t),n);case 2:return(0,i.nk)(r(t),n);case 3:return(0,i.nk)(s(t),n);case 4:return(0,i.nk)(a(t),n);case 5:return(0,i.nk)(l(t),n);case 6:return(0,i.nk)(d(t),n);case 7:return(0,i.nk)((e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}","Generic message that lists 7 items","Generic message that lists 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and Tina)"))(t),n);default:return(0,i.nk)((e=>e._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others","Generic message that lists more than 7 items","Generic message that lists more than 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and 2 others)"))(t),n)}}},269935:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294),o=n(973935),r=n(40142),s=n(589444),a=n(241933),l=n(549135);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class u extends i.Component{constructor(e){super(e),d(this,"trackImpression",(()=>{try{this.node=(0,o.findDOMNode)(this),this.node instanceof HTMLElement&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}})),d(this,"logImpression",(e=>{const{carousel_data:t,closeupImpressionType:n,closeupNavigationType:i,componentType:o,contextLogData:r,elementType:s,impressionAuxFields:a,impressionType:d,loggingId:u,objectIdStr:h,slotIndex:p,trackCarousel:g,viewData:m,viewParameter:f,viewType:b}=this.props,v=c[d],x=v.idType,y=e.forcedExit&&"removed"===e.forcedExit?0:void 0,_={endTime:e.endTime,[x]:u,slotIndex:p,time:e.startTime,renderDuration:e.endTime-e.startTime,type:n,...a,forcedExit:y};if(g||(0,l.j)(v.eventType,{closeup_navigation_type:i,component:o,element:s,eventData:{[v.impressionType]:[_]},objectIdStr:h,view:b,viewData:m||{},viewParameter:f,...r}),t&&g){const{carousel_slots:e,index:n=0,id:i}=t;(0,l.j)(7352,{component:o,eventData:{pinCarouselSlotImpressions:[{..._,carouselDataId:Number(i),carouselSlotId:(null==e?void 0:e[n])&&Number(e[n].id),slotIndex:n}]},objectIdStr:h,view:b,viewData:m||{},viewParameter:f,...r})}})),this.impressionsFramework=e.impressionsFramework||a.Z}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&this.impressionsFramework.stop(this.node)}render(){return i.Children.only(this.props.children)}}const h=(0,r.connect)((function({pins:e},{loggingId:t}){const n=e[t||""]||{};return{carousel_data:(0,s.Z)({pin:n})}}),(()=>({})))(u)},312827:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(667294),o=(n(50351),n(85831)),r=n(505343);n(910289);function s(e){const{mountedPlacements:t,completeExperience:n,dismissExperience:s,experiences:a,fetchAllExperiences:l,fetchAllExperiencesMulti:d,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:u,viewExperience:h}=(0,r.M)(),p=e?(0,o.MQ)(a,t,e):null;return(0,i.useMemo)((()=>({completeExperience:n,dismissExperience:s,experienceForPlacement:p,fetchAllExperiences:l,fetchAllExperiencesMulti:d,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:u,viewExperience:h})),[n,s,p,l,d,c,u,h])}},778527:(e,t,n)=>{n.d(t,{ZP:()=>g});var i=n(667294),o=n(40142),r=n(618446),s=n.n(r),a=n(85831),l=n(505343),d=n(910289),c=n(585967),u=n(785893);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},g=(e,t={},n)=>r=>{const g=function(e){return t=>({experience:t.experiences[e],experiencesMulti:t.experiencesMulti?t.experiencesMulti[e]:void 0})}(e);n={...p,...n};const m=function(e,t,n=!0,r=!0,p=!1,g){class m extends i.Component{constructor(e){super(e),h(this,"state",{extraContext:void 0}),h(this,"setExtraContextState",(e=>{s()(this.state.extraContext,e)||this.setState({extraContext:e})}))}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(n,i){const{dispatch:o,experience:r,requestContext:a}=this.props;let l=i.extraContext,c=this.state.extraContext||t||{};"function"==typeof t&&(l=t(n,i.extraContext||{}),c=t(this.props,this.state.extraContext||{})),c&&Object.keys(c).length>0&&!s()(l,c)&&o((0,d.pz)([e],a.isBot,t)),!r||n.experience&&r.id===n.experience.id||o((0,d.kd)(e,c))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){const n="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},i=p&&null!=n&&n.advertiser_id?{advertiserId:n.advertiser_id}:void 0;this.props.mountPlacement(e,n,i)}render(){const{experience:e,experiencesMulti:t}=this.props,n={[p?"advertiserExperience":"experience"]:(0,a.E3)(e)?e:null};return(0,u.jsx)(g,{...this.props,setPlacementExtraContext:this.setExtraContextState,...n,experiencesMulti:t})}}function f(e){const t=(0,c.B)(),n=(0,o.useDispatch)(),{mountPlacement:i,unmountPlacement:r}=(0,l.M)();return(0,u.jsx)(m,{...e,dispatch:n,mountPlacement:i,requestContext:t,unmountPlacement:r})}return f.displayName=`withPlacement(${g.displayName||g.name||"Component"})`,f}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,n.isAdvertiserPlacement,r);return(0,o.connect)(g)(m)}},913669:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294);let o=null,r=!1,s=0;const a=()=>{o&&clearTimeout(o),r=!0,o=setTimeout((()=>{r=!1}),100)},l=()=>{const[e,t]=(0,i.useState)(!1),n=(0,i.useRef)(null);(0,i.useEffect)((()=>(0===s&&window.addEventListener("scroll",a),s+=1,()=>{n.current&&clearTimeout(n.current),s-=1,s||window.removeEventListener("scroll",a)})),[]);const o=e=>{n.current&&clearTimeout(n.current),n.current=e&&r?setTimeout((()=>o(!0)),100):setTimeout((()=>{t(e)}),32)};return{isHovering:e,hoverHandlers:(0,i.useRef)({onMouseOver:()=>o(!0),onMouseLeave:()=>o(!1)}).current}}},512806:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(667294),o=n(640027);function r(){const e=(0,i.useRef)([]),t=(0,i.useRef)({});return(0,i.useEffect)((()=>()=>{[...Object.keys(t.current).map((e=>t.current[e])),...e.current].forEach((e=>e()))}),[]),function(n,i){if(i){const e=t.current[i];e&&(e(),delete t.current[i])}const{cancel:r,promise:s}=(0,o.Z)(n);return i?t.current[i]=r:e.current.push(r),s}}},602033:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(535718),o=n(585967),r=n(221469);var s=n(855168);function a({checkExperiments:e,disableFetch:t,viewer:n}){const i=(0,s.TH)(),a=(0,s.$B)(),l=(0,o.B)(),d=function({location:{pathname:e,search:t},match:{params:n,path:i},viewer:o}){return{routeData:{matchPath:i,params:n,parsedSearch:(0,r.mB)(t),pathname:e,search:t},user:{country:o.country||void 0,id:o.id||void 0,isAuth:o.isAuth,isEmployee:!!o.isEmployee||!1,isPartner:!!o.isPartner||!1,username:o.username||void 0}}}({location:i,match:a,viewer:n}),c=!!t&&t(d),u=!(!c&&e)||e(l.experiments);return{args:d,fetchDisabled:c||!u}}var l=n(34411);function d({getOptions:e,checkExperiments:t,disableFetch:n,...o}){const r=function(){const e=(0,l.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee||!1,isPartner:!!e.isPartner||!1,username:e.username||void 0}}(),{args:s,fetchDisabled:d}=a({checkExperiments:t,disableFetch:n,viewer:r}),c=e?e(s):void 0;return(0,i.Z)({dangerouslyDisableFetch:d,options:c,...o})}},528818:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(60598),o=n(395141);const r=(0,i.Z5)(o.ZP)},194620:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(60598),o=(n(297633),n(528818)),r=n(708206);const s=e=>t=>(0,r.compose)(o.Z,(0,i.GR)(e,{},((e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()}))))(t)},610062:(e,t,n)=>{n.d(t,{Z:()=>a,l:()=>l});var i=n(40142);const o=[1000069,1000075],r={};function s(e){return o.forEach((t=>{!e[t]||void 0!==r[t]&&r[t].id===e[t].id||(r[t]=e[t])})),r}function a(e){return(0,i.connect)((e=>({lfvExperiences:s(e.experiences)})))(e)}function l(){return s((0,i.useSelector)((({experiences:e})=>e)))}},784655:(e,t,n)=>{n.d(t,{iR:()=>i,hy:()=>o,VX:()=>r,_Q:()=>s,jL:()=>a,_J:()=>l,c4:()=>d,i8:()=>c,sV:()=>u,DP:()=>h,X9:()=>p,B5:()=>g});const i=e=>!!e&&!!e.video_list,o=({story_pin_data_id:e})=>!!e,r=e=>{var t;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null===(t=e.rich_metadata)||void 0===t?void 0:t.products)&&e.rich_metadata.products.length>0||!1},s=e=>!!e.promoted_is_lead_ad,a=e=>!!e.promoter&&!e.is_downstream_promotion,l=e=>!!e.video_status&&5!==e.video_status,d=e=>!!e.creator_class,c=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,o={...n,...i};return!!o[e]&&!o[e].paused},u=e=>["email","messages","deep_linking"].includes(e),h=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,o={...n,...i};for(const r in o){const{paused:t}=o[r];if(r!==e&&!t)return!1}return!0},p=(e,t)=>{const{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,o={...n,...i};return o[e]&&o[e].currentTime},g=()=>{let e=800,t=400;return"undefined"!=typeof window&&(e=window.innerHeight,t=window.innerWidth),{windowHeight:e,windowWidth:t}}},151106:(e,t,n)=>{n.r(t),n.d(t,{BoardCollabFlyout:()=>j,default:()=>S});var i=n(667294),o=n(760001),r=n(494715),s=n(653827),a=n(174523),l=n(535718),d=n(883119),c=n(785893);function u({board:e,scrollInfo:t}){const n=(0,a.ZP)(),o=(0,l.Z)({name:"BoardCollaboratorsResource",options:{board_id:e.id},noCache:!0});if(o.isLoaded){const{owner:n}=e,{data:a,isAtEnd:l,isFetching:d,fetchMore:u}=o,h=[n,...a||[]];return(0,c.jsxs)(i.Fragment,{children:[t?(0,c.jsx)(s.Z,{scrollBuffer:3*t.container.clientHeight,scrollHeight:t.container.scrollHeight,scrollTop:t.top,isAtEnd:l,isFetching:d,fetchMore:u}):null,h.map((e=>{const{full_name:t,id:n,image_medium_url:i,username:o}=e;return(0,c.jsx)(r.Z,{imageUrl:i,linkURL:`/${o}/`,name:t,subtitle:o,title:t},n)}))]})}return(0,c.jsx)(d.$j,{accessibilityLabel:n._("Loading","Loading spinner when rendering users","Loading spinner when rendering users"),show:!0})}var h=n(40142);const p=({heading:e,description:t,disabled:n=!1,id:i,onChange:o,switched:r})=>(0,c.jsxs)(d.xu,{display:"flex",direction:"column",width:"100%",paddingX:6,paddingY:4,children:[(0,c.jsx)(d.xv,{weight:"bold",children:e}),(0,c.jsxs)(d.xu,{display:"flex",direction:"row",alignItems:"center",marginTop:3,children:[(0,c.jsx)(d.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(d.xv,{children:t})}),(0,c.jsx)(d.rs,{id:i,onChange:o,disabled:n,switched:r})]})]});var g=n(631739),m=n(451190),f=n(164756);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends i.Component{constructor(...e){super(...e),b(this,"state",{invitesEnabled:Boolean(this.props.board.collaborator_invites_enabled),requestsEnabled:Boolean(this.props.board.collaborator_requests_enabled),emailEnabled:Boolean(this.props.board.collab_board_email)}),b(this,"handleInvitesToggle",(()=>this.setState((e=>({invitesEnabled:!e.invitesEnabled}))))),b(this,"handleRequestsToggle",(()=>this.setState((e=>({requestsEnabled:!e.requestsEnabled}))))),b(this,"handleEmailToggle",(()=>this.setState((e=>({emailEnabled:!e.emailEnabled}))))),b(this,"handleSubmit",(()=>{const{onDismiss:e,board:t,updateBoard:n}=this.props,{invitesEnabled:i,requestsEnabled:o,emailEnabled:r}=this.state;n({...t,collaborator_invites_enabled:i,collaborator_requests_enabled:o,collab_board_email:r}).then((()=>e()))}))}render(){const{board:{privacy:e},onDismiss:t,isViewerOwner:n}=this.props,{invitesEnabled:i,requestsEnabled:o,emailEnabled:r}=this.state,s=[{heading:this.props.i18n._("Email notifications","Sub-heading for email notifications group board setting","Sub-heading for email notifications group board setting"),description:this.props.i18n._("Receive emails when Pins are added to this board","Description of email notifications setting","Description of email notifications setting"),disabled:!1,onChange:this.handleEmailToggle,id:"email",switched:r}],a=[...s,{heading:this.props.i18n._("Group requests","Sub-heading for group requests group board setting","Sub-heading for group requests group board setting"),description:this.props.i18n._("People can request to join this board","Description of group requests setting","Description of group requests setting"),disabled:e===g.Z.BoardPrivacy.SECRET,onChange:this.handleRequestsToggle,id:"requests",switched:o},{heading:this.props.i18n._("Group members","Sub-heading for group members group board setting","Sub-heading for group members group board setting"),description:this.props.i18n._("Group members can invite others","Description of group members setting","Description of group members setting"),disabled:!1,onChange:this.handleInvitesToggle,id:"invites",switched:i}],l=n?a:s;return(0,c.jsx)(m.Z,{accessibilityModalLabel:this.props.i18n._("Edit group settings","Label for editing group settings","Label for editing group settings"),heading:this.props.i18n._("Group board settings","Modal header for editing settings for a group board","Modal header for editing settings for a group board"),footer:(0,c.jsx)(d.xu,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:this.handleSubmit,text:this.props.i18n._("Done","Button text for being finished with editing group board settings","Button text for being finished with editing group board settings")})})}),onDismiss:t,size:"md",children:l.map((e=>{const{description:t,disabled:n,heading:i,id:o,onChange:r,switched:s}=e;return(0,c.jsx)(p,{description:t,disabled:n,heading:i,id:o,onChange:r,switched:s},o)}))})}}const x=(0,h.connect)(((e,t)=>({board:e.boards&&e.boards.content[t.boardId]})),(e=>({updateBoard:t=>e((0,f.wN)(t))})))((function(e){const t=(0,a.ZP)();return(0,c.jsx)(v,{...e,i18n:t})}));var y=n(26629),_=n(34411),w=n(855168);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j extends i.Component{constructor(...e){super(...e),C(this,"state",{contentRef:null,currentModal:null,scrollContainer:null,scrollTop:null}),C(this,"handleBoardLeave",(()=>{const{history:e,viewer:t}=this.props,n=t.isAuth?`/${t.username}`:"/";e.replace(n)})),C(this,"handleContentRef",(e=>{const{contentRef:t}=this.state;!t&&e&&(this.setState({contentRef:e}),e.focus())})),C(this,"handleScrollContainer",(e=>{const{scrollContainer:t}=this.state;!t&&e&&this.setState({scrollContainer:e})})),C(this,"handleScroll",(()=>{const{scrollContainer:e}=this.state;e&&this.setState({scrollTop:e.scrollTop})})),C(this,"handleConfirmationModalOpen",(()=>this.setState({currentModal:"confirmation"}))),C(this,"handleSettingsModalOpen",(()=>this.setState({currentModal:"settings"}))),C(this,"handleCloseModal",(()=>this.setState({currentModal:null}))),C(this,"renderCurrentModal",(()=>{const{board:{id:e,owner:t},viewer:n}=this.props,{currentModal:i}=this.state,o=n.isAuth&&n.username===t.username;switch(i){case"settings":return(0,c.jsx)(x,{boardId:e,isViewerOwner:o,onDismiss:this.handleCloseModal});default:return null}}))}renderInvite(e,t,n){const i={invite:e,onBoardLeave:t,onInviteDidUpdate:n,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(o.Z,{...i})}render(){const{anchor:e,board:t,onDismiss:n}=this.props,{currentModal:o,scrollContainer:r,scrollTop:s}=this.state,a=r?{container:r,top:s||0}:null,l=(t.access||[]).includes("write");return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.mh,{children:(0,c.jsx)(d.xu,{position:"absolute",top:!0,zIndex:new d.Ry(1),children:(0,c.jsx)(d.J2,{anchor:e,onDismiss:o?()=>{}:n,idealDirection:"down",size:"xl",positionRelativeToAnchor:!1,children:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",maxHeight:500,minWidth:360,width:"100%",children:[(0,c.jsx)(d.Le,{top:0,children:(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",height:64,paddingX:4,paddingY:4,children:[(0,c.jsx)("div",{ref:this.handleContentRef,tabIndex:"0",children:(0,c.jsx)(d.xv,{size:"lg",weight:"bold",children:this.props.i18n._("Group members","boardCollabFlyout.header","Heading for the group members flyout")})}),l&&(0,c.jsx)(d.xu,{right:!0,top:!0,position:"absolute",marginTop:2,marginEnd:2,children:(0,c.jsx)(d.hU,{accessibilityLabel:this.props.i18n._("Group board settings","boardCollabFlyout.settings.button","Icon for accessing settings on a group board"),icon:"cog",size:"lg",iconColor:"darkGray",onClick:this.handleSettingsModalOpen})})]})}),(0,c.jsx)(d.xu,{overflow:"scrollY",children:(0,c.jsx)(d.xu,{onScroll:this.handleScroll,ref:this.handleScrollContainer,children:l?(0,c.jsx)(y.Z,{board:t,scrollInfo:a,onBoardLeave:this.handleBoardLeave,renderInvite:this.renderInvite,onModalOpen:this.handleConfirmationModalOpen}):(0,c.jsx)(u,{board:t,scrollInfo:a})})})]})})})}),this.renderCurrentModal()]})}}function S(e){const t=(0,a.ZP)(),n=(0,_.Z)(),i=(0,w.k6)();return(0,c.jsx)(j,{...e,history:i,viewer:n,i18n:t})}},760001:(e,t,n)=>{n.d(t,{Z:()=>T});var i=n(667294),o=n(40142),r=n(451190),s=n(174523),a=n(946753),l=n(585967),d=n(883119),c=n(785893);function u({boardName:e,collaboratorName:t,onCancelTransferRequest:n,onDismiss:i}){const o=(0,s.ZP)(),u=(0,l.B)();return(0,c.jsx)(r.Z,{accessibilityModalLabel:o._("Board ownership transfer modal","boardCollabOwnershipTransferModal.accessibilityModalLabel","Accessibility label on board ownership transfer modal"),heading:(0,c.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(d.X6,{align:"center",size:"md",children:o._("Collaborators","boardCollabOwnershipTransferModal.heading","Heading for board ownership transfer modal")}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:u.isRTL,right:!u.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:o._("Close","boardCollabOwnershipTransferModal.iconAccessibilityLabel","Accessibility label on cancel icon button"),icon:"cancel",iconColor:"darkGray",onClick:i})})]}),footer:(0,c.jsxs)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,c.jsx)(d.iP,{fullWidth:!1,onTap:n,children:(0,c.jsx)(d.xv,{weight:"bold",children:o._("Cancel request","boardCollabOwnershipTransferModal.cancelRequest","Option to cancel board ownership transfer request")})}),(0,c.jsx)(d.zx,{color:"red",onClick:i,size:"lg",text:o._("Got it","boardCollabOwnershipTransferModal.confirmationButton","Button confirming board ownership transfer action")})]}),onDismiss:i,children:(0,c.jsx)(d.xu,{paddingX:8,children:(0,c.jsx)(d.xv,{align:"center",children:(0,a.nk)(o._("We sent {{ collaboratorName }} your request for them to own {{ boardName }}. When they accept, you can still add Pins—but you won’t be able to manage collaborators, change the name, cover photo, or description of this board.","boardCollabOwnershipTransferModal.descriptionText","Explanation of transfer request and potential permissions changes"),{collaboratorName:t,boardName:(0,c.jsx)(d.xv,{inline:!0,weight:"bold",children:e})})})})})}var h=n(629318),p=n(163880);function g({boardId:e,collaboratorId:t,collaboratorName:n,isAcceptedCollaborator:r,onDelete:a}){const l=(0,o.useDispatch)(),g=(0,s.ZP)(),m=(0,i.useRef)(null),[f,b]=(0,i.useState)(!1),[v,x]=(0,i.useState)(!1),{boardName:y,pendingOwnershipTransfer:_}=(0,h.Z)(),w=()=>{l((0,p.xx)(e,t)),b(!1)},C=function({i18n:e,isAcceptedCollaborator:t,onCancelTransferRequest:n,onDelete:i,onRequestTransfer:o,showCancelRequestOption:r,showRequestTransferOption:s}){const a=[{onSelect:i,option:{value:"Remove from board",label:e._("Remove from board","getCollaboratorDropdownItems.removeText","Text for option to remove collaborator from board")}}];return t&&(r&&a.push({onSelect:n,option:{value:"Cancel request",label:e._("Cancel request","getCollaboratorDropdownItems.cancelText","Text for option to cancel ownership transfer request")}}),s&&a.push({onSelect:o,option:{value:"Request as board owner",label:e._("Request as board owner","getCollaboratorDropdownItems.requestText","Text for option to request ownership transfer")}})),a}({i18n:g,isAcceptedCollaborator:r,onCancelTransferRequest:w,onDelete:a,onRequestTransfer:()=>{(async()=>{b(!1),await l((0,p.Cf)(e,t)),x(!0)})()},showCancelRequestOption:_===t,showRequestTransferOption:!_});return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsxs)(d.kC,{justifyContent:"center",children:[(0,c.jsx)(d.hU,{accessibilityLabel:g._("Collaborator options","boardCollabInviteOverflowButton.accessibilityLabel","Accessibility label for overflow icon button"),bgColor:"transparent",icon:"ellipsis",iconColor:"darkGray",onClick:()=>b(!f),ref:m,selected:f}),f&&(0,c.jsx)(d.Lt,{anchor:m.current,id:"board-collaborator-dropdown",idealDirection:"down",onDismiss:()=>b(!1),zIndex:new d.Ry(1e3),children:(0,c.jsx)(d.Lt.Section,{label:g._("Options","boardCollabInviteOverflowButton.dropdownSection","Options section in dropdown menu"),children:C.map((e=>(0,c.jsx)(d.Lt.Item,{onSelect:e.onSelect,option:e.option},e.option.value)))})})]}),v&&(0,c.jsx)(u,{boardName:y,collaboratorName:n,onCancelTransferRequest:()=>{w(),x(!1)},onDismiss:()=>{x(!1)}})]})}var m=n(494715),f=n(925265),b=n(34411),v=n(181307);function x({actionsDisabled:e,invite:t,isDim:n,onApprove:i,onDelete:o}){const r=(0,s.ZP)(),a=(0,b.Z)(),{access:l,board:u,status:p,invited_by_user:x,invited_user:y}=t,{pendingOwnershipTransfer:_,viewerIsOwner:w}=(0,h.Z)(),C=a.isAuth&&y.id===a.id,j=a.isAuth&&x.id===a.id,S=y.id===x.id,I="accepted"===p,P=l.includes("approve"),E=l.includes("delete"),T=r._("Approve","[button] approve another pinner's request to join the board as a collaborator","[button] approve another pinner's request to join the board as a collaborator"),D=((e,t,n)=>e?r._("Leave","[button] for a collaborator to leave a group board","[button] for a collaborator to leave a group board"):t&&!n?r._("Decline","[button] decline another pinner's request to join board as a collaborator","[button] decline another pinner's request to join board as a collaborator"):r._("Remove","[button] remove a collaborator from the board]","[button] remove a collaborator from the board]"))(C,S,I),k=E&&!P,O=E&&P,B=`/${y.username}/`,R=(0,v.tc)("web_board_ownership_transfer"),M=w&&R().anyEnabled,A=M?(0,c.jsx)(g,{boardId:u.id,collaboratorId:y.id,collaboratorName:y.full_name,onDelete:o||(()=>{}),isAcceptedCollaborator:I}):(0,c.jsx)(d.zx,{disabled:e,onClick:o,text:D,size:"lg"}),L=_===y.id,Z=M&&(void 0!==n?n:!I);return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(m.Z,{imageUrl:y.image_medium_url||"",name:y.full_name,title:y.full_name,subtitle:((e,n,i,o,s)=>{const a=t.invited_by_user.full_name;let l;return l=n?r._("Invitation pending","boardCollabInviteCell.pendingInvitationText","Subtext for collaborator with pending invitation"):i?r._("That's you","subtext for current user who requested to join this board","subtext for current user who requested to join this board"):o?r._("Invited by you","subtext for a pending collaborator who was invited by the current viewer","subtext for a pending collaborator who was invited by the current viewer"):s?r._("Requested to join","The subtext that identifies a pending collaborator has personally requested to join the board","The subtext that identifies a pending collaborator has personally requested to join the board"):(0,f.Z)(r._("Invited by {{ user_full_name }}","The subtext that identifies a pending collaborator who was invited to collaborate on the board","The subtext that identifies a pending collaborator who was invited to collaborate on the board"),{user_full_name:a}),e&&(l=l.concat(r._(" · Ownership pending","boardCollabInviteCell.pendingOwnershipText","Additional subtext for collaborator who has a pending board ownership transfer invitation"))),l})(L,Z,C,j,S),linkURL:B,isDim:!M&&(void 0!==n?n:!I),accessory:k&&A}),O&&(0,c.jsxs)(d.xu,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,disabled:e,onClick:o,text:D,size:"lg"})}),(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"red",disabled:e,onClick:i,text:T,size:"lg"})})]})]})}var y=n(454690),_=n(881220),w=n(159617);function C(e){const t=(0,s.ZP)(),{onCancel:n,onRemove:i,useGestaltModal:o}=e,a=t._("Are you sure you want to leave this group board and remove it from your profile?"," - "," -- "),l=o?d.u_:r.Z;return(0,c.jsx)(l,{accessibilityModalLabel:t._("Leave board?"," - "," -- "),heading:t._("Leave board?"," - "," -- "),onDismiss:n,size:"sm",footer:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:n,text:t._("Cancel"," - "," -- ")})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:i,text:t._("Leave"," - "," -- ")})})]}),children:(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:a})})})}class j extends i.Component{constructor(...e){var t,n,i;super(...e),i={shouldBlock:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}getBlockDescription(e,t){return"declineRequest"===e?t?(0,a.nk)(this.props.i18n._("This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.","decline another pinner's request to join board as a collaborator and block them","decline another pinner's request to join board as a collaborator and block them"),{invited_user_first_name:t}):this.props.i18n._("This will decline this person from joining this board and block them from subsequent collaboration requests.","message that explains consequences of declining a request to join board as a collaborator","message that explains consequences of declining a request to join board as a collaborator"):t?(0,a.nk)(this.props.i18n._("This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins."," - "," -- "),{invited_user_first_name:t}):this.props.i18n._("This will remove this person, people they invited, and all their Pins.","message that explains consequences of removing a collaborator","message that explains consequences of removing a collaborator")}render(){const{removeType:e,firstName:t,fullName:n,onCancel:o,onRemove:s,onRemoveAndBlock:l,useGestaltModal:u}=this.props,h="declineRequest"===e?(0,a.nk)(this.props.i18n._("Decline {{ invited_user_name }}?","[button] to decline a pinner's request to join a board as a collaborator","[button] to decline a pinner's request to join a board as a collaborator"),{invited_user_name:n}).join(""):(0,a.nk)(this.props.i18n._("Remove {{ invited_user_name }}?","[button] to remove a pinner as a collaborator from a group board","[button] to remove a pinner as a collaborator from a group board"),{invited_user_name:n}).join(""),p=this.props.i18n._("This will keep them from saving Pins to this board. You can also:","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user."),g=this.getBlockDescription(e,t),m=this.state.shouldBlock?this.props.i18n._("Block","block another pinner after denying their request to collaborate on a board","block another pinner after denying their request to collaborate on a board"):this.props.i18n._("Remove","decline another pinner's request to collaborate on a board","decline another pinner's request to collaborate on a board"),f=(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:p})}),(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{padding:5,display:"flex",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.XZ,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState((({shouldBlock:e})=>({shouldBlock:!e})))})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsxs)(d.__,{htmlFor:"banUser",children:[(0,c.jsx)(d.xv,{weight:"bold",children:(0,a.nk)(this.props.i18n._("Block {{ name }}"," - "," -- "),{name:t||""})}),(0,c.jsx)(d.xv,{size:"md",children:g})]})})]})]}),b=u?d.u_:r.Z;return(0,c.jsx)(b,{accessibilityModalLabel:h,heading:h,onDismiss:o,size:"sm",footer:(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:o,text:this.props.i18n._("Cancel"," - "," -- ")})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:this.state.shouldBlock?l:s,text:m})})]}),children:f})}}function S(e){const t=(0,s.ZP)();return(0,c.jsx)(j,{...e,i18n:t})}var I=n(475446);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E extends i.Component{constructor(...e){super(...e),P(this,"state",{currentModal:null,loading:!1}),P(this,"showRemoveSuccessToast",(()=>{const{toastManagerContext:e}=this.props,t=this.props.i18n._("Collaborator removed","BoardCollabInviteCellContainer.toast","Toast for removing a collaborator from a board");e.showOneToast((({onHide:e})=>(0,c.jsx)(_.Z,{duration:3e3,onHide:e,text:t})))})),P(this,"onDelete",(()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})})),P(this,"onApprove",(()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),e().then(t).finally((()=>{this.setState({loading:!1})}))})),P(this,"deleteBoardInvite",((e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:n,onInviteDidUpdate:i}=this.props,o=this.isViewerInvitedUser,r=o?"collaborator_decline_invite":"collaborator_delete_invite";y.Z.trackEvent(r,"click"),this.setState({currentModal:null,loading:!0}),t(o,e).then((()=>{y.Z.trackEvent(r,"success"),i(),this.showRemoveSuccessToast(),o&&n()})).catch((()=>{y.Z.trackEvent(r,"error")})).finally((()=>{this.setState({loading:!1})}))})),P(this,"handleDeleteBoardInvite",(()=>{this.deleteBoardInvite(!1)})),P(this,"handleDeleteBoardInviteAndBan",(()=>{this.deleteBoardInvite(!0)})),P(this,"handleHideModal",(()=>{this.setState({currentModal:null})}))}get isViewerInvitedUser(){const{viewer:e,invite:{invited_user:t}}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invite:{invited_user:e,invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invite:{invited_user:e},useGestaltModal:t=!1}=this.props,{currentModal:n}=this.state;return"delete"===n?this.isViewerInvitedUser?(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:w.fe+1}},children:(0,c.jsx)(C,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})}):(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:w.fe+1}},children:(0,c.jsx)(S,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})}):null}render(){const{invite:e,isDim:t}=this.props,{loading:n}=this.state;return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(x,{invite:e,isDim:t&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:n}),this.renderCurrentModal()]})}}const T=(0,o.connect)((()=>({})),((e,t)=>{const{invite:n,invite:{invited_user:{id:i},board:{id:o}}}=t;return{approveBoardCollabInvite:()=>e((0,p.q1)(o,i)),deleteBoardCollabInvite:(t,i)=>e((0,p.Jn)(n,t,i))}}))((function(e){const t=(0,s.ZP)();return(0,c.jsx)(E,{...e,toastManagerContext:(0,I.F9)(),viewer:(0,b.Z)(),i18n:t})}))},26629:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(760001),r=n(653827),s=n(174523),a=n(883119),l=n(785893);function d({fetchMore:e,invites:t,isAtEnd:n,isFetching:i,onBoardLeave:o,refreshData:d,renderInvite:c,scroll:u}){const h=(0,s.ZP)();return(0,l.jsxs)(a.xu,{children:[u&&(0,l.jsx)(r.Z,{scrollBuffer:3*u.container.clientHeight,scrollHeight:u.container.scrollHeight,scrollTop:u.top,isAtEnd:n,isFetching:i,fetchMore:e}),t.map(((e,t)=>e&&e.invited_user&&e.invited_user.id?(0,l.jsx)(a.xu,{children:c(e,o,d)},t):null)),i&&!n&&(0,l.jsx)(a.$j,{accessibilityLabel:h._("loading board invites","accessibility label for board collaborator invites loading spinner","accessibility label for board collaborator invites loading spinner"),show:!0})]})}var c=n(494715),u=n(955801),h=n(629318),p=n(535718),g=n(946753);class m extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{const{invitesPendingApproval:e,invites:t}=this.props;e.refresh(),t.refresh()},(n="handleInvitesDidUpdate")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}shouldComponentUpdate(e){const{invites:{data:t},pendingOwnershipTransfer:n}=e,{invites:{data:i},pendingOwnershipTransfer:o}=this.props;return!(i&&!(o!==n))||!!t&&i.length!==t.length}render(){var e;const{board:t,invites:n,invitesPendingApproval:r,scrollInfo:s,onBoardLeave:h,onModalOpen:p,pendingOwnershipTransfer:m,renderInvite:f}=this.props,{full_name:b,image_medium_url:v,username:x}=t.owner,y=null===(e=(n.data||[]).find((e=>e.invited_user.id===m)))||void 0===e?void 0:e.invited_user.full_name,_=m&&y?(0,g.nk)(this.props.i18n._("Requested {{ collaboratorName }} to change to board owner","boardInviteSheet.CollaboratorList.boardOwner.ownershipRequestSubtitle","Subtext for an owner of board who has sent an ownership transfer request"),{collaboratorName:y}).join(""):this.props.i18n._("Owner of this board","boardInviteSheet.CollaboratorList.boardOwner.subtitle","The subtext that identifies the owner of a board");return(0,l.jsx)(i.Fragment,{children:n.isLoaded||r.isLoaded?(0,l.jsx)(u.Z,{fetchMore:n.fetchMore,children:({onScroll:e,setRef:t})=>(0,l.jsxs)(a.xu,{width:"100%",onScroll:e,ref:t,children:[(0,l.jsx)(d,{fetchMore:r.fetchMore,invites:r.data||[],isAtEnd:r.isAtEnd,isFetching:r.isFetching,onBoardLeave:h,refreshData:this.handleInvitesDidUpdate,scroll:s,renderInvite:f}),(r.data||[]).length>0?(0,l.jsx)(a.xu,{paddingY:3,children:(0,l.jsx)(a.iz,{})}):null,(0,l.jsxs)(a.xu,{paddingY:1,children:[(0,l.jsx)(c.Z,{imageUrl:v,linkURL:`/${x}/`,name:b,subtitle:_,title:b}),(n.data||[]).map((e=>e&&e.invited_user&&e.invited_user.id?(0,l.jsx)(o.Z,{invite:e,onBoardLeave:h,onModalOpen:p,onInviteDidUpdate:n.refresh},e.invited_user.id):null))]})]})}):(0,l.jsx)(a.$j,{show:!0,accessibilityLabel:this.props.i18n._("Loading","Loading state for showing board collaborators","Loading state for showing board collaborators")})})}}function f(e){const t=(0,s.ZP)(),{pendingOwnershipTransfer:n}=(0,h.Z)(),i=(0,p.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1}}),o=(0,p.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1}});return(0,l.jsx)(m,{...e,invites:i,invitesPendingApproval:o,i18n:t,pendingOwnershipTransfer:n})}},494715:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(151101),r=n(539484),s=n(883119),a=n(785893);function l(e){const{imageUrl:t,name:n,title:l,subtitle:d,accessory:c,linkURL:u,isDim:h}=e,p={__style:{opacity:h?.5:1}},g=(0,r.Z)({url:null!=u?u:""})?"nofollow":"none";return(0,a.jsx)(i.Fragment,{children:n&&l&&(0,a.jsxs)(s.xu,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4,children:[(0,a.jsx)(s.xu,{marginEnd:2,dangerouslySetInlineStyle:p,children:(0,a.jsx)(s.iP,{role:"link",rel:g,href:u||"",rounding:"circle",children:(0,a.jsx)(o.Z,{outline:!0,size:"md",name:n,src:t})})}),(0,a.jsxs)(s.xu,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:p,children:[(0,a.jsx)(s.xv,{color:"darkGray",size:"lg",lineClamp:1,weight:"bold",children:(0,a.jsx)(s.rU,{rel:g,href:u||"",children:l})}),(0,a.jsx)(s.xv,{lineClamp:1,size:"sm",color:"gray",children:d})]}),c&&(0,a.jsx)(s.xu,{marginStart:4,children:c})]})})}},33076:(e,t,n)=>{n.d(t,{tk:()=>h,VV:()=>m,ZP:()=>b});var i=n(667294),o=n(233088),r=n(930090),s=n(883119),a=n(549135),l=n(174523),d=n(785893);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u="GroupBoardContentViewSwitcher_Settings",h=e=>e<=500,p=Object.freeze({}),g={custom:11566,newest:11564,oldest:11565,most_comments:11563,most_reactions:11562,by_pinner:11561},m=(e,t)=>{const n=o.ZP.localStorage.getItem(u)||p;return(e.isAuth&&n[e.id]||{})[t.id]||null};class f extends i.Component{constructor(...e){super(...e),c(this,"handleChange",(({event:e,value:t})=>{const n=t,{onChange:i,viewer:s,board:l}=this.props;e.stopPropagation(),window.scrollTo({top:0,left:0,behavior:"smooth"}),((e,t,n)=>{if(!e.isAuth)return;const i=o.ZP.localStorage.getItem(u)||p,r=i[e.id]||{},s={...i,[e.id]:{...r,[t.id]:n}};o.ZP.localStorage.setItem(u,s)})(s,l,n),i&&i(n),(0,a.j)(101,{view:5,viewParameter:(0,r.f4)(s,l),component:13475,element:g[n],board_id:l.id})})),c(this,"logDropdownClick",(()=>{const{board:e,viewer:t}=this.props;(0,a.j)(101,{view:5,viewParameter:(0,r.f4)(t,e),component:13486,element:11567,board_id:e.id})})),c(this,"handleKeyPress",(e=>{const{charCode:t=0}=e;32===t&&(e.preventDefault(),this.logDropdownClick())}))}render(){const{currentView:e}=this.props,t=[{value:"custom",label:this.props.i18n._("Custom","Option for users to filter their Pins in a custom order (as it currently is)","Option for users to filter their Pins in a custom order (as it currently is)")},{value:"most_reactions",label:this.props.i18n._("Most reactions","Option for users to filter their Pins by the most reactions","Option for users to filter their Pins by the most reactions")}];return(0,d.jsx)("div",{role:"listbox",tabIndex:0,onClick:this.logDropdownClick,onKeyPress:this.handleKeyPress,children:(0,d.jsx)(s.EI,{id:"gbFilterSelectlist",onChange:this.handleChange,options:t,size:"lg",value:e})})}}const b=function(e){const t=(0,l.ZP)();return(0,d.jsx)(f,{...e,i18n:t})}},497199:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{iconNode:t,title:n,subtitle:r,accessory:s}=e;return(0,o.jsxs)(i.xu,{display:"flex",alignItems:"center",paddingX:4,paddingY:2,children:[(0,o.jsx)(i.xu,{marginEnd:2,children:t}),(0,o.jsxs)(i.kC,{alignItems:"start",direction:"column",flex:"grow",justifyContent:"start",children:[(0,o.jsx)(i.xv,{color:"darkGray",size:"lg",lineClamp:1,weight:"bold",children:n}),(0,o.jsx)(i.xv,{lineClamp:1,size:"sm",color:"gray",children:r})]}),s&&(0,o.jsx)(i.xu,{children:s})]})}},629318:(e,t,n)=>{n.d(t,{k:()=>a,Z:()=>l});var i=n(762803),o=n(785893);const{Provider:r,useHook:s}=(0,i.ZP)("BoardOwnershipTransferContext");function a({boardName:e="",children:t,pendingOwnershipTransfer:n=null,viewerIsOwner:i}){return(0,o.jsx)(r,{value:{boardName:e,pendingOwnershipTransfer:n,viewerIsOwner:i},children:t})}const l=s},483957:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(451190),o=n(174523),r=n(883119),s=n(785893);function a({cancelButtonLabel:e,confirmButtonLabel:t,heading:n,message:a,onCancel:l,onConfirm:d}){const c=(0,o.ZP)(),u=n||c._("Are you sure?"," - "," -- "),h=e||c._("Cancel"," - "," -- ");return(0,s.jsx)(i.Z,{accessibilityModalLabel:u,footer:(0,s.jsxs)(r.xu,{marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(r.xu,{"data-test-id":"cancel-button",padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,onClick:l,size:"lg",text:h})}),(0,s.jsx)(r.xu,{"data-test-id":"confirm-button",padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,color:"red",onClick:d,size:"lg",text:t})})]}),heading:u,onDismiss:l,role:"alertdialog",children:(0,s.jsx)(r.xu,{padding:4,children:(0,s.jsx)(r.xv,{children:a})})})}},497231:(e,t,n)=>{n.d(t,{Z:()=>I});var i=n(667294),o=n(40142),r=n(483957),s=n(454690),a=n(311866),l=n(881220),d=n(34411),c=n(367599),u=n(380322),h=n(174523),p=n(767523),g=n(164756),m=n(159276),f=n(585967),b=n(475446),v=n(883119),x=n(708206),y=n(785893);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w extends i.Component{constructor(...e){super(...e),_(this,"state",{editMode:"main"}),_(this,"handleBoardLeave",(()=>{const{board:e,onBoardLeave:t,onClose:n}=this.props;n(),t&&t(e.id)})),_(this,"returnToMainEditMode",(()=>this.setState({editMode:"main"}))),_(this,"handleDelete",(()=>{const{board:e,deleteBoard:t,onBoardDelete:n,onClose:i,toastManagerContext:o,viewer:r,orbacActingAs:s}=this.props;t((0,m.lJ)(r,s)).then((()=>{o.showToast((({onHide:e})=>(0,y.jsx)(l.Z,{onHide:e,text:this.props.i18n._("Board deleted!","User deleted their board","User deleted their board")})))})),this.returnToMainEditMode(),i(),n&&n(e)})),_(this,"handleShowDeleteModal",(()=>{s.Z.trackEvent("board_delete","open_modal"),this.setState({editMode:"confirmDelete"})})),_(this,"handleSubmit",(e=>{var t;const{viewer:n,orbacActingAs:i,board:o,updateBoard:r,onBoardPrivacyChange:s,onBoardUpdate:l,onClose:d}=this.props,c=this.props.board.id;if((0,m.D3)(n,(null===(t=o.owner)||void 0===t?void 0:t.id)||"",i)){const t={id:c,...e};return r(t,(0,m.lJ)(n,i)).then((()=>{o.privacy!==e.privacy&&s?s():l&&l(c,t),d()}))}{const{allow_homefeed_recommendations:t,collab_board_email:n}=e;t!==o.allow_homefeed_recommendations&&r({id:c,allow_homefeed_recommendations:t});return a.ZP.create("BoardSettingsResource",{board_id:c,collab_board_email:n}).callUpdate({showError:!1}).then((()=>d())).catch((e=>{throw e.message}))}}))}render(){var e;const{board:t,categories:n,viewer:o,orbacActingAs:s,onCropChange:a,onClose:l,onToggleFlyout:d,requestContext:c}=this.props,{editMode:h}=this.state,p=this.props.i18n._("Edit your board","BoardEdit.Heading.Text","edit board heading"),g=(0,m.D3)(o,(null===(e=t.owner)||void 0===e?void 0:e.id)||"",s),f=(0,y.jsxs)(v.xu,{paddingY:8,position:"relative",children:[(0,y.jsx)(v.X6,{align:"center",size:"md",children:p}),(0,y.jsx)(v.xu,{position:"absolute",top:!0,left:c.isRTL,right:!c.isRTL,paddingY:8,paddingX:6,children:(0,y.jsx)(v.hU,{accessibilityLabel:this.props.i18n._("Close","BoardEdit.icon.cancel","Icon to close board edit modal"),icon:"cancel",iconColor:"darkGray",onClick:l})})]});return(0,y.jsxs)(i.Fragment,{children:["main"===h&&(0,y.jsx)(u.Z,{board:t,categories:n,currentUserIsOwner:g,gaCategory:"board_edit",handleBoardLeave:this.handleBoardLeave,isArchivable:!0,isDeletable:g,isEditable:g,onClose:l,onCropChange:a,onDeleteButtonClick:this.handleShowDeleteModal,onSubmit:this.handleSubmit,onToggleFlyout:d,submitText:this.props.i18n._("Done","BoardEdit.BoardEdit","Submit button text"),title:f}),"confirmDelete"===h&&(0,y.jsx)(r.Z,{confirmButtonLabel:this.props.i18n._("Delete forever","Confirms the user wants to permanently delete the board","Confirms the user wants to permanently delete the board"),cancelButtonLabel:this.props.i18n._("Cancel"," - "," -- "),message:this.props.i18n._("Once you delete a board and all its Pins, you can't undo it!"," - "," -- "),onConfirm:this.handleDelete,onCancel:this.returnToMainEditMode})]})}}const C=(0,x.compose)(b.Cl,c.ZP,(0,o.connect)(null,((e,t)=>({deleteBoard:n=>e((0,g.L1)(t.board.id,n)),updateBoard:(t,n)=>e((0,g.wN)(t,n))}))))((function(e){const t=(0,h.ZP)();return(0,y.jsx)(w,{...e,requestContext:(0,f.B)(),viewer:(0,d.Z)(),orbacActingAs:(0,p.Z)(),i18n:t})}));var j=n(451190),S=n(535718);function I({boardId:e,coverImageHeight:t,coverImageWidth:n,onBoardArchiveChange:r,onBoardPrivacyChange:s,onBoardLeave:a,onBoardDelete:l,onBoardUpdate:d,onClose:c,onCropChange:u}){const p=(0,h.ZP)(),[g,m]=(0,i.useState)(!1),{data:f}=(0,S.Z)({name:"CategoriesResource",noCache:!0});(0,S.Z)({name:"BoardResource",options:{field_set_key:"edit",board_id:e},noCache:!0});const b=(0,o.useSelector)((({boards:t})=>t.content[e]));if(!!(!b||!f))return(0,y.jsx)(j.Z,{accessibilityModalLabel:p._("Board edit","BoardEdit.BoardEditModal","Accessibility label on modal"),onDismiss:c,size:"sm",children:(0,y.jsx)(v.xu,{padding:12,children:(0,y.jsx)(v.$j,{accessibilityLabel:p._("Board edit","BoardEdit.BoardEditModal","Accessibility label on loading spinner"),show:!0})})});return(0,y.jsx)(C,{board:b,categories:f,coverImageHeight:t,coverImageWidth:n,onBoardArchiveChange:r,onBoardPrivacyChange:s,onBoardLeave:a,onBoardDelete:l,onBoardUpdate:d,onClose:()=>{g||c()},onCropChange:u,onToggleFlyout:()=>m(!g)})}},653827:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(667294);class o extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=()=>{const{isAtEnd:e,isFetching:t,fetchMore:n,scrollBuffer:i,scrollHeight:o,scrollTop:r}=this.props;e||t||r+i>o&&n()},(n="check")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},632117:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(881220),o=n(174523),r=n(946753),s=n(883119),a=n(785893);function l(e){const{boardImage:t,boardName:n,boardUrl:l,onHide:d}=e,c=(0,o.ZP)(),u=(0,a.jsx)(s.xv,{children:(0,r.nk)(c._("Now following {{ boardName }}","BoardFollowButton.FollowingToast.nowFollowing","Toast text displayed when a user follows a board"),{boardName:(0,a.jsx)(s.xv,{weight:"bold",children:n},"boardName")})});return(0,a.jsx)(i.Z,{onHide:d,text:u,href:l,imageUrl:t})}},380322:(e,t,n)=>{n.d(t,{Z:()=>ae});var i=n(667294),o=n(23219),r=n(40142),s=n(476865),a=n(451875),l=n(883119),d=n(785893);function c({handleTogglePinSelection:e,index:t,isSelected:n,pin:i}){return(0,d.jsx)(l.iP,{onTap:()=>{e(t)},rounding:a.mv,children:(0,d.jsx)(s.default,{attributionOption:"hide",blockClickEvents:!0,pin:i,pinId:i.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:n?"selected":"no-selection",surface:"BoardCoverSelectablePin",trackingParameters:{slotIndex:t}})})}var u=n(174523);const h=({boardPins:e,coverPinIndex:t,fetchMore:n,isLoaded:i,handleTogglePinSelection:o})=>{const r=(0,u.ZP)();return i?(0,d.jsx)(l.xu,{paddingY:4,children:(0,d.jsx)(l.Rk,{columnWidth:152,comp:({data:e,itemIdx:n})=>(0,d.jsx)(c,{handleTogglePinSelection:o,index:n,isSelected:t===n,pin:e}),gutterWidth:16,items:e||[],loadItems:n})}):(0,d.jsx)(l.xu,{padding:6,children:(0,d.jsx)(l.$j,{show:!0,accessibilityLabel:r._("Loading","BoardCoverEdit.Accessibility.Label","accessibility label for loading spinner")})})};var p=n(451190),g=n(311866),m=n(535718),f=n(34411),b=n(40197),v=n(159276),x=n(925265),y=n(585967);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w={border:0,top:120};class C extends i.Component{constructor(...e){super(...e),_(this,"state",{deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}}),_(this,"handleUpdateImage",(()=>{const e=this.image;if(!e)return;const t=e.offsetHeight,n=e.offsetWidth;this.setState((({holderHeight:e,holderWidth:i})=>({isSpinnerShown:!1,startBgPos:{left:-(n-i)/2,top:-(t-e)/2}})))})),_(this,"handleOnMouseUp",(()=>{this.isDragging&&(this.isDragging=!1,this.setState({startBgPos:{left:this.getBgLeft(),top:this.getBgTop()},deltaX:0,deltaY:0}),this.props.updateImgCrop(this.getCropData()))})),_(this,"isDragging",!1)}componentDidMount(){this.holder&&this.setState({holderHeight:this.holder.offsetHeight,holderWidth:this.holder.offsetWidth})}componentDidUpdate(e){e.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})}getFrameBounds(){const{frameHeight:e,frameWidth:t}=this.props,{holderHeight:n,holderWidth:i}=this.state;return{left:i/2-t/2,width:t,height:e,top:n/2-e/2}}getBgLeft(){const{frameWidth:e}=this.props,t=this.getFrameBounds(),n=this.getImgScale(),i=this._getImageDimensions(),o=i.imgHeight*n,r=i.imgWidth*n;let s=0;return o&&r&&(s=this.state.startBgPos.left+this.state.deltaX,s+r-e<t.left&&(s=t.left-r+e),s>t.left&&(s=t.left)),s}getBgTop(){const{frameHeight:e}=this.props,t=this.getFrameBounds(),n=this.getImgScale(),i=this._getImageDimensions(),o=i.imgHeight*n,r=i.imgWidth*n;let s=0;return o&&r&&(s=this.state.startBgPos.top+this.state.deltaY,s+o-e<t.top&&(s=t.top-o+e),s>t.top&&(s=t.top)),s}getImgScale(){const{frameHeight:e,frameWidth:t}=this.props,{imgHeight:n,imgWidth:i}=this._getImageDimensions(),o=this.getFrameBounds();if(n&&i){let r=n/i;return r=r>=o.height/o.width?t/i:e/n,r}return 1}getImageBounds(){const{imgHeight:e,imgWidth:t}=this._getImageDimensions();let n={};if(e&&t){const i=this.getImgScale();n={width:i*t,height:i*e}}return n}getBgBounds(){return{left:this.getBgLeft(),top:this.getBgTop()}}getCropData(){const{frameHeight:e,frameWidth:t}=this.props,n=this.getFrameBounds(),i=this.getBgBounds(),o=this.getImgScale();return{cropX:Math.round(-(i.left-n.left)/o),cropY:Math.round(-(i.top-n.top)/o),height:Math.round(e/o),width:Math.round(t/o),scale:o}}handleOnMouseDown(e){0===e.button&&(e.stopPropagation(),this.isDragging=!0,this.originX=e.pageX,this.originY=e.pageY)}handleOnMouseMove(e){this.isDragging&&this.setState({deltaX:e.pageX-(this.originX||0),deltaY:e.pageY-(this.originY||0)})}_getImageDimensions(){var e,t,n;const{pin:i}=this.props,o=null===(e=i.images)||void 0===e?void 0:e["236x"];return{imgHeight:null!==(t=null==o?void 0:o.height)&&void 0!==t?t:1,imgWidth:null!==(n=null==o?void 0:o.width)&&void 0!==n?n:1}}render(){var e,t;const{boardName:n,frameHeight:i,frameWidth:o,hideCoverNavigation:r,isFirst:s,isLast:a,isRTL:c,pin:u,showNextPin:h,showPrevPin:p}=this.props,{isSpinnerShown:g}=this.state,{imgHeight:m,imgWidth:f}=this._getImageDimensions(),b=this.getFrameBounds(),v=this.getImageBounds(),y=this.getBgBounds();let _="";return m&&f&&(_="in"),(0,d.jsxs)("div",{className:"ImageCrop",children:[(0,d.jsxs)("div",{className:"holder",ref:e=>{this.holder=e},children:[(0,d.jsx)("div",{className:"bg",style:y,children:(0,d.jsx)("img",{alt:(0,x.Z)(this.props.i18n._("Board cover for {{ boardName }}"," - "," -- "),{boardName:n}),className:_,onLoad:this.handleUpdateImage,ref:e=>{this.image=e},src:null===(e=u.images)||void 0===e||null===(t=e["236x"])||void 0===t?void 0:t.url,style:v})}),(0,d.jsxs)("div",{className:"mask",children:[(0,d.jsx)("span",{style:{top:0,left:0,right:0,height:b.top}}),(0,d.jsx)("span",{style:{top:b.top,left:b.left+o,right:0,height:i}}),(0,d.jsx)("span",{style:{top:i+b.top,left:0,right:0,bottom:0}}),(0,d.jsx)("span",{style:{top:b.top,left:0,width:b.left,height:i}})]}),(0,d.jsx)("div",{className:"frame",style:b}),(0,d.jsx)("div",{className:"drag",onMouseDown:e=>{this.handleOnMouseDown(e)},onMouseMove:e=>{this.handleOnMouseMove(e)},onMouseUp:()=>{this.handleOnMouseUp()},role:"presentation"}),(0,d.jsx)("div",{className:"spinner",style:{display:g?"":"none"}})]}),s||r?null:(0,d.jsx)(l.xu,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...w,left:c?void 0:100,right:c?100:void 0}},children:(0,d.jsx)(l.hU,{icon:"arrow-back",accessibilityLabel:this.props.i18n._("Previous","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:p})}),a||r?null:(0,d.jsx)(l.xu,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:{...w,left:c?100:void 0,right:c?void 0:100}},children:(0,d.jsx)(l.hU,{icon:"arrow-forward",accessibilityLabel:this.props.i18n._("Next","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:h})})]})}}function j(e){const t=(0,u.ZP)(),{isRTL:n}=(0,y.B)();return(0,d.jsx)(C,{...e,isRTL:!!n,i18n:t})}var S=n(767523);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return e.reduce(((e,t)=>("pin"===t.type&&e.push(t),e)),[])}function E({boardFeedResource:{data:e},coverPinId:t}){return Math.max(0,P(e||[]).findIndex((e=>e.id===t)))}class T extends i.Component{constructor(...e){super(...e),I(this,"state",{coverPinIndex:E(this.props),imgCropData:null,selectedCoverPin:null,previousBoardFeedResourceData:null}),I(this,"handleSave",(()=>{var e,t,n;const{boardId:i,dispatch:o,viewer:r,orbacActingAs:s}=this.props,{coverPinIndex:a,imgCropData:l}=this.state,d=(this.pins||[])[a],c=(0,v.lJ)(r,s);if(!d)return;const u=null===(e=d.images)||void 0===e?void 0:e["236x"],h=null==u?void 0:u.url,p=l?{crop_x:l.cropX,crop_y:l.cropY,height:l.height,width:l.width,scale:l.scale}:{crop_x:0,crop_y:0,height:null==u?void 0:u.height,width:null==u?void 0:u.width,scale:1},m={board_id:i,url:h,pin_id:d.id,pin_image_url:h,...p,...c?{orbac_subject_id:c}:Object.freeze({})},f={height:null!==(t=null==u?void 0:u.height)&&void 0!==t?t:0,width:null!==(n=null==u?void 0:u.width)&&void 0!==n?n:0,x:l?l.cropX:0,y:l?l.cropY:0};g.ZP.create("BoardResource",m).callUpdate().then((()=>{this.props.onSave(null!=h?h:""),o((0,b.Cr)(i,{custom_cover:!0,scale:l?l.scale:1,pin_id:d.id,crop:f,image_url:null!=h?h:""}))}))})),I(this,"updateImgCrop",(e=>this.setState({imgCropData:e}))),I(this,"handleShowNextPin",(()=>{const{boardFeedResource:{isAtEnd:e,isFetching:t,fetchMore:n}}=this.props,i=(this.pins||[]).length;i&&this.setState((({coverPinIndex:e})=>({coverPinIndex:(e+1)%i})),(()=>{this.pins&&this.state.coverPinIndex+5>=this.pins.length&&!e&&!t&&n()}))})),I(this,"handleShowPrevPin",(()=>{const e=(this.pins||[]).length;e&&this.setState((({coverPinIndex:t})=>({coverPinIndex:(t||e)-1})))})),I(this,"handleTogglePinSelection",(e=>{const t=this.pins||[];this.setState({coverPinIndex:e,selectedCoverPin:t[e]})})),I(this,"handleCoverEditBackButtonClick",(()=>{this.setState({selectedCoverPin:null})})),I(this,"renderBoardCoverMasonry",(()=>{const{coverPinIndex:e,selectedCoverPin:t}=this.state,{boardName:n,boardFeedResource:i,frameHeight:o,frameWidth:r}=this.props,s=this.pins||[],{data:a,fetchMore:l,isLoaded:c}=i;return t?(0,d.jsx)(j,{boardName:n,frameHeight:null!=o?o:236,frameWidth:null!=r?r:236,isFirst:!e,isLast:e===s.length-1,pin:t,showNextPin:this.handleShowNextPin,showPrevPin:this.handleShowPrevPin,updateImgCrop:this.updateImgCrop,hideCoverNavigation:!0}):(0,d.jsx)(h,{boardPins:a,coverPinIndex:e,fetchMore:l,handleTogglePinSelection:this.handleTogglePinSelection,isLoaded:c})})),I(this,"renderCoverEditHeader",(()=>(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"center",height:80,children:(0,d.jsx)(l.xu,{width:"100%",padding:4,children:(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n._("Navigate to cover picker","BoardEdit.back.button","Cover picker navigate back button"),icon:"arrow-back",iconColor:"darkGray",onClick:this.handleCoverEditBackButtonClick}),(0,d.jsx)(l.X6,{size:"md",children:this.props.i18n._("Move and scale to crop","BoardEdit.Heading.Experiment.Text","edit board heading")}),(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n._("Cancel change board cover","BoardCoverEdit.icon.cancel","Cancel board cover edit"),icon:"cancel",iconColor:"darkGray",onClick:this.props.onCancel})]})})})))}static getDerivedStateFromProps(e,t){const n=e.boardFeedResource.data,{previousBoardFeedResourceData:i}=t;return!i&&n?{previousBoardFeedResourceData:n,coverPinIndex:E(e)}:{previousBoardFeedResourceData:n}}componentDidUpdate(e){const t=this.props.boardFeedResource.data,n=e.boardFeedResource.data;(t&&n!==t&&t.length||t&&n&&t.length!==n.length)&&t.forEach((e=>{if("pin"===e.type){(new Image).src=e.url}}))}get pins(){const{boardFeedResource:{data:e}}=this.props;return e?P(e):void 0}render(){const{heading:e,onCancel:t}=this.props,{coverPinIndex:n,selectedCoverPin:i}=this.state,o=(this.pins||[])[n];return(0,d.jsx)(p.Z,{accessibilityModalLabel:this.props.i18n._("Change Board Cover","accessible label for modal to change board cover image","accessible label for modal to change board cover image"),size:"lg",heading:i?this.renderCoverEditHeader():e,onDismiss:t,footer:i&&(0,d.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,d.jsx)(l.xu,{padding:2,children:(0,d.jsx)(l.zx,{disabled:!o,onClick:this.handleSave,text:this.props.i18n._("Done","BoardCoverEdit.Button.Submit.Exp","Button for saving board cover edit")})})}),children:this.renderBoardCoverMasonry()})}}function D(e){const t=(0,u.ZP)(),n=(0,r.useDispatch)(),i=(0,m.Z)({name:"BoardFeedResource",options:{board_id:e.boardId,field_set_key:"images_only_item",filter_section_pins:!1,page_size:50}});return(0,d.jsx)(T,{...e,boardFeedResource:i,dispatch:n,i18n:t,viewer:(0,f.Z)(),orbacActingAs:(0,S.Z)()})}var k=n(483957);const O=({label:e,labelId:t})=>t?(0,d.jsx)(l.__,{htmlFor:t,children:(0,d.jsx)(l.xv,{size:"sm",children:e})}):(0,d.jsx)(l.xv,{size:"sm",children:e});function B(e){const{children:t,label:n,labelId:o}=e;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(l.xu,{marginBottom:2,children:(0,d.jsx)(O,{label:n,labelId:o})}),t]})}const R=138;function M({coverPin:e,handleShowBoardCoverEditModal:t}){const n=(0,u.ZP)(),[o,r]=(0,i.useState)(!1),{isRTL:s}=(0,y.B)();return(0,d.jsx)(B,{label:n._("Board cover","BoardForm.BoardFormCoverButton","Form label for updating board cover"),children:(0,d.jsx)(l.xu,{width:R,position:"relative",children:(0,d.jsx)(l.iP,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTap:t,rounding:4,children:null!=e&&e.custom_cover?(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(l.zd,{height:R,rounding:4,width:R,children:(0,d.jsx)(l.Ee,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||R,naturalWidth:e.size&&e.size[0]||R,src:e.image_url})}),(0,d.jsx)(l.xu,{position:"absolute",left:s,right:!s,bottom:!0,padding:2,children:(0,d.jsx)(l.xu,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:o?"white":"rgba(255, 255, 255, 0.8)"}},children:(0,d.jsx)(l.JO,{accessibilityLabel:n._("Edit board cover","BoardForm.BoardFormBoardCoverButton","Accessibility label on icon"),icon:"edit",color:"darkGray",size:16})})})]}):(0,d.jsx)(l.xu,{alignItems:"center",color:o?"darkWash":"lightGray",display:"flex",height:R,justifyContent:"center",rounding:4,width:R,children:(0,d.jsx)(l.JO,{accessibilityLabel:n._("Add cover photo","BoardForm.BoardFormCoverButton","Accessibility label on icon"),color:"darkGray",icon:"add",size:24})})})})})}function A({children:e,label:t,labelId:n,subtext:o}){return(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(l.xu,{alignItems:"start",display:"flex",justifyContent:"start",paddingY:1,children:[e,(0,d.jsx)(l.xu,{marginStart:2,children:(0,d.jsxs)(l.__,{htmlFor:n,children:[(0,d.jsx)(l.xv,{size:"lg",weight:"bold",children:t}),o]})})]})})}function L({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:n}){const i=(0,u.ZP)();return t&&(0,d.jsx)(A,{label:i._("Email notifications","BoardForm.BoardFormCollaboratorsEmailCheckbox","Form label"),labelId:"emailNotificationsCheckbox",subtext:(0,d.jsx)(l.xv,{color:"gray",size:"lg",children:i._("Get an email when someone saves Pins to this board","BoardForm.BoardFormCollaboratorsEmailCheckbox","Text explaing field on board form")}),children:(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,d.jsx)(l.xu,{marginEnd:1,children:(0,d.jsx)(l.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:n})})})})}var Z=n(16719),N=n(946753);function F({board:e,onCollaboratorInviteClick:t}){const n=(0,u.ZP)(),i=(0,Z.Z)({boardId:e.id,ownerName:e.owner.full_name,ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_key||e.owner.image_medium_url||e.owner.image_small_url||""}),o=i.slice(0,3).map((e=>e.name));let r="";switch(i.length){case 3:r=(0,N.Wc)(`${n._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames")}`,{first:`${o[0]}`,second:`${o[1]}`,last:`${o[2]}`});break;case 2:r=(0,N.Wc)(`${n._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames.")}`,{first:`${o[0]}`,second:`${o[1]}`});break;default:r=o.join(", ")}const s=i.length>3?(0,N.Wc)(n.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",i.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:r,leftCount:""+(i.length-3)}):(0,N.Wc)(`${n._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators")}`,{userNames:r});return(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,d.jsx)(l.HE,{accessibilityLabel:s,collaborators:i.map((({name:e,src:t})=>({src:null!=t&&t.endsWith("/default_75.png")?void 0:t,name:e}))),size:"md"}),(0,d.jsx)(l.hU,{accessibilityLabel:n._("Invite collaborators","BoardEdit.BoardCollaboratorsAndInviteSection","Accessibility label on button"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}var z=n(482547),H=n(702925);function U({board:e,onCollaboratorInviteClick:t}){const n=(0,u.ZP)(),i=(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,d.jsx)(l.xv,{size:"sm",inline:!0,children:n._("Collaborators"," - "," -- ")}),(0,d.jsx)(z.Z,{}),(0,d.jsx)(l.xv,{inline:!0,size:"sm",weight:"bold",children:(0,d.jsx)(l.rU,{inline:!0,target:"blank",href:H.Z.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE,children:n._("Learn more"," - "," -- ")})})]});return(0,d.jsx)(B,{alignTop:!0,label:i,labelId:"collaborators",children:(0,d.jsx)(F,{board:e,onCollaboratorInviteClick:t})})}function W({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:n}){const i=(0,u.ZP)();return t&&(0,d.jsx)(A,{label:i._("Let collaborators add people","BoardForm.BoardFormCollaboratorsInviteToggle","Form label"),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,d.jsx)(l.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:n})})}function G({description:e,descriptionValidatorErrors:t,onChange:n}){const i=(0,u.ZP)(),o="boardEditDescription";return(0,d.jsx)(B,{alignTop:!0,label:i._("Description","BoardForm.BoardFormDescription"," Form field label"),labelId:o,children:(0,d.jsx)(l.Kx,{errorMessage:t.join(", "),id:o,name:"description",onChange:n,placeholder:i._("What's your board about?"," - "," -- "),value:e})})}const V=({children:e})=>(0,d.jsx)(l.xu,{paddingX:8,role:"list",children:i.Children.map(e,((t,n)=>t&&(0,d.jsx)(l.xu,{role:"listitem",marginBottom:n===i.Children.count(e)-1?1:8,children:t},n)))});var q=n(631739);function $({isProtectedToggler:e,isToggleDisable:t,onChange:n,onCheckboxChange:o,privacy:r}){const s=(0,u.ZP)();if(!0===e)return(0,d.jsx)(A,{label:s._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected",children:(0,d.jsx)(l.xu,{paddingY:2,children:(0,d.jsx)(l.rs,{onChange:n,switched:r===q.Z.BoardPrivacy.PROTECTED,id:"protected",disabled:t})})});if(r!==q.Z.BoardPrivacy.PROTECTED){const e=s._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),n=(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(l.xv,{color:"gray",size:"lg",children:[s._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",(0,d.jsx)(l.rU,{inline:!0,target:"blank",href:H.Z.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE,children:s._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards")})]})});return(0,d.jsx)(A,{label:e,labelId:"secret",subtext:n,children:(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,d.jsx)(l.XZ,{checked:r===q.Z.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:o,disabled:t})})})}return null}function Y({allowHomefeedRecommendations:e,onCheckboxChange:t}){const n=(0,u.ZP)();return(0,d.jsx)(A,{label:n._("Personalization","BoardForm.BoardFormRecommendationToggle","form label"),labelId:"recommendation",subtext:(0,d.jsx)(l.xv,{color:"gray",size:"lg",children:n._("Show Pins inspired by this board in your home feed.","BoardForm.BoardFormRecommendationToggle","Caption for board settings to set visibility")}),children:(0,d.jsx)(l.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}function X({name:e,nameValidatorErrors:t,onChange:n}){const i=(0,u.ZP)();return(0,d.jsx)(B,{label:i._("Name","BoardForm.BoardFormTitleInput","Form field label"),labelId:"boardEditName",children:(0,d.jsx)(l.nv,{errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:n,placeholder:i._('Like "Places to Go" or "Recipes to Make"'," - "," -- "),size:"lg",value:e})})}var K=n(454690),J=n(754999),Q=n(475446),ee=n(997993);function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne=(e,t)=>(0,ee.Gy)({max:e,maxErrorString:(0,J.Z)(t._("Please enter no more than {{ maxLength }} characters.","Validation error when a string is too long","Validation error when a string is too long"),{maxLength:e})}),ie=e=>[ne(q.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],oe=e=>[(0,ee.aH)({message:e._("Don't forget to name your board!"," - "," -- ")}),ne(q.Z.MAX_CHARS_FOR_BOARD_TITLE,e)],re=({condition:e,children:t})=>e?(0,d.jsx)(l.xu,{position:"absolute",zIndex:p.b,children:t}):t;class se extends i.Component{constructor(e){super(e),te(this,"handleChangeName",(({value:e})=>{const t=(0,ee.FU)(oe(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:t})})),te(this,"handleChangeDescription",(({value:e})=>{const t=(0,ee.FU)(ie(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:t})})),te(this,"handleChangePrivacyToggle",(({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})})),te(this,"handleChangePrivateToggle",(({value:e})=>{this.setState({privacy:e?"secret":"public"})})),te(this,"handleEnableSecret",(()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})})),te(this,"handleShowSecretConfirmation",(()=>{this.setState({showSecretConfirmation:!0})})),te(this,"handleHideSecretConfirmation",(()=>{this.setState({showSecretConfirmation:!1})})),te(this,"handleChangeRecommendationToggle",(({value:e})=>{this.setState({allowHomefeedRecommendations:e})})),te(this,"handleChangeCollabBoardEmail",(({value:e})=>{this.setState({collab_board_email:e})})),te(this,"handleChangeCollaboratorInvitesEnabled",(({value:e})=>{this.setState({collaboratorInvitesEnabled:e})})),te(this,"handleCancel",(()=>{K.Z.trackEvent(this.props.gaCategory,"click_cancel"),this.props.onClose()})),te(this,"handleCheckboxChange",(e=>({event:t,checked:n})=>e({event:t,value:n}))),te(this,"handleSubmit",(e=>{const{onSubmit:t}=this.props,{collab_board_email:n,collaboratorInvitesEnabled:i,description:o,name:r,privacy:s,allowHomefeedRecommendations:a}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const l=r.trim(),d=o.trim();this.setState({submitting:!0,submitError:""}),K.Z.trackEvent(this.props.gaCategory,"click_submit"),t({name:l,collab_board_email:n,collaborator_invites_enabled:i,description:d,privacy:s,allow_homefeed_recommendations:a}).then((()=>{this.setState({submitting:!1})})).catch((e=>{let t=this.props.i18n._("Uh oh! Something went wrong."," - "," -- ");if(e.message){const{message:n,message_detail:i}=e;t=i?`${n} ${i}`:n}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})}))})),te(this,"handleShowBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!0})})),te(this,"handleHideBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!1})})),te(this,"handleShowCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!0})})),te(this,"handleHideCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!1})})),te(this,"handleSaveBoardCoverEditModal",(e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)}));const{board:{collab_board_email:t,collaborator_invites_enabled:n,description:i,name:o,pin_count:r,privacy:s,allow_homefeed_recommendations:a}}=e;this.state={collab_board_email:t,description:i,name:o,pin_count:r,privacy:s,allowHomefeedRecommendations:a,collaboratorInvitesEnabled:n,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:o,previousDescription:i,previousPrivacy:s}}static getDerivedStateFromProps(e,t){const n={};return e.board.name!==t.previousName&&(n.previousName=e.board.name,n.nameValidatorErrors=(0,ee.FU)(oe(e.i18n),e.board.name)),e.board.description!==t.previousDescription&&(n.previousDescription=e.board.description,n.descriptionValidatorErrors=(0,ee.FU)(ie(e.i18n),e.board.description)),e.board.privacy!==t.previousPrivacy&&(n.previousPrivacy=e.board.privacy),n}getFormFooter(){const{submitText:e}=this.props,{submitError:t}=this.state;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.kC,{alignItems:"stretch",justifyContent:"start",children:(0,d.jsx)(l.xu,{height:48,children:(0,d.jsx)(l.zx,{color:"red",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,d.jsx)(l.xu,{paddingX:1,children:(0,d.jsx)(l.xv,{color:"red",children:t})})]})}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:n,submitting:i}=this.state;return!t||n.length>0||e.length>0||i}render(){const{board:e,board:{archived_by_me_at:t,cover_pin:n,id:r,is_collaborative:s},coverImageHeight:a,coverImageWidth:c,currentUserIsOwner:u,handleBoardLeave:h,isAdAccount:g,isAdAccountOwner:m,isDeletable:f,isEditable:b,isNameAndSecretView:v,onClose:x,onDeleteButtonClick:y,requestContext:_,title:w,useModalWithNoLayer:C}=this.props,{allowHomefeedRecommendations:j,collab_board_email:S,collaboratorInvitesEnabled:I,description:P,descriptionValidatorErrors:E,name:T,nameValidatorErrors:O,pin_count:B,privacy:R,showBoardCoverEdit:A,showCollaboratorsModal:Z,showSecretConfirmation:F}=this.state,z=b&&B>0;let H=(0,d.jsxs)(V,{children:[z&&(0,d.jsx)(M,{coverPin:n,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,d.jsx)(X,{name:T,nameValidatorErrors:O,onChange:this.handleChangeName}),(0,d.jsx)(G,{description:P,descriptionValidatorErrors:E,onChange:this.handleChangeDescription}),u&&!!h&&(0,d.jsx)(U,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,d.jsx)(l.xu,{marginBottom:-7,children:(0,d.jsx)(l.xv,{size:"sm",children:this.props.i18n._("Settings","BoardForm.BoardForm","Section heading in board edit form")})}),(0,d.jsx)($,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:R}),!t&&(0,d.jsx)(Y,{allowHomefeedRecommendations:j,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,d.jsx)(L,{hasCollabBoardEmail:S,isCollaborative:s,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,d.jsx)(W,{collaboratorInvitesEnabled:I,isCollaborative:s,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),f&&(0,d.jsxs)(l.xu,{marginTop:-6,paddingY:4,children:[(0,d.jsx)(l.xv,{size:"sm",children:this.props.i18n._("Action","BoardForm.BoardForm.Action","Section heading in board edit form")}),(0,d.jsxs)(l.iP,{onTap:y,children:[(0,d.jsx)(l.xu,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:(0,d.jsx)(l.X6,{size:"sm",children:this.props.i18n._("Delete board","BoardForm.Delete","Delete board label")})}),(0,d.jsx)(l.xv,{size:"lg",color:"gray",children:this.props.i18n._("Delete this board and all its Pins forever.","BoardForm.BoardForm.Delete.Label","Delete board warning text")}),(0,d.jsx)(l.xv,{size:"lg",color:"gray",children:this.props.i18n._("You can't undo this!","BoardForm.BoardForm.Delete.LabelTwo","Delete board warning text")})]})]})]});u?v&&(H=(0,d.jsxs)(V,{children:[(0,d.jsx)(X,{name:T,nameValidatorErrors:O,onChange:this.handleChangeName}),(0,d.jsx)($,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,privacy:R,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)})]})):H=(0,d.jsxs)(V,{children:[!!h&&(0,d.jsx)(U,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,d.jsx)(L,{hasCollabBoardEmail:S,isCollaborative:s,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&(0,d.jsx)(Y,{allowHomefeedRecommendations:j,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,d.jsx)(l.xv,{color:"gray",size:"lg",children:(0,N.nk)(this.props.i18n._("Only the board’s owner ({{ boardOwner }}) can manage the rest of its features","BoardForm.CollaboratorPermissionsCopy","Copy on board edit form letting collaborators know of their permissions on a board"),{boardOwner:(0,d.jsx)(l.xv,{color:"gray",inline:!0,size:"lg",weight:"bold",children:e.owner.full_name})})})]});const q=C?l.u_:p.Z,K=this.props.i18n._("Change board cover","BoardForm.BoardCoverEdit.heading","Change board cover heading"),J=(0,d.jsxs)(l.xu,{paddingY:8,position:"relative",children:[(0,d.jsx)(l.X6,{align:"center",size:"md",children:K}),(0,d.jsx)(l.xu,{position:"absolute",top:!0,left:_.isRTL,right:!_.isRTL,paddingY:8,paddingX:6,children:(0,d.jsx)(l.hU,{accessibilityLabel:this.props.i18n._("Cancel change board cover","BoardForm.BoardCoverEdit.cancel","Cancel change board cover heading"),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal})})]});return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(re,{condition:!!C,children:!A&&!Z&&(0,d.jsx)(q,{accessibilityModalLabel:this.props.i18n._("Board form","BoardForm.BoardForm","Accessibility label on board form"),size:"sm",onDismiss:x,footer:this.getFormFooter(),heading:w,children:(0,d.jsx)(l.xu,{marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,d.jsx)("form",{method:"post",onSubmit:this.handleSubmit,children:H})})})}),A&&(0,d.jsx)(D,{boardId:r,boardName:T,coverPinId:null==n?void 0:n.pin_id,frameHeight:a,frameWidth:c,heading:J,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}),F&&(0,d.jsx)(k.Z,{confirmButtonLabel:this.props.i18n._("Make secret","Setting the boards visibility to secret","Setting the boards visibility to secret"),heading:this.props.i18n._("Are you sure?","Warning label asking users to be sure of their action","Warning label asking users to be sure of their action"),message:this.props.i18n._("If you make this board secret, some active ads will stop running","Explicitly warning users of the board visibility action they are doing","Explicitly warning users of the board visibility action they are doing"),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),Z&&(0,d.jsx)(o.Z,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})]})}}te(se,"defaultProps",{isNameAndSecretView:!1});const ae=(0,Q.Cl)((function(e){const t=(0,u.ZP)();return(0,d.jsx)(se,{...e,i18n:t,requestContext:(0,y.B)()})}))},254821:(e,t,n)=>{n.d(t,{Z:()=>m,T:()=>g});var i=n(667294),o=n(539484),r=n(883119),s=n(785893);function a({action:e,alignCenter:t}){const{title:n,description:i,button:a}=e,l=n&&n.text,d=i&&i.text,c=a&&a.text||"",u=a&&a.link||"",h=a&&a.link?a.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"",p=a&&c&&u.startsWith("http"),g=(0,o.Z)({url:u}),m=p&&g?"nofollow":"none";return p?(0,s.jsxs)(r.xu,{children:[(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{align:t?"center":"start",weight:"bold",children:""!==c?c:"Visit"})}),(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.rU,{rel:m,href:u,children:(0,s.jsx)(r.xv,{align:t?"center":"start",lineClamp:1,weight:"normal",underline:!0,children:h})})})]}):(0,s.jsxs)(r.xu,{children:[!!l&&(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{align:t?"center":"start",weight:"bold",children:l})}),!!d&&(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{align:t?"center":"start",children:d})})]})}const l={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},d={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function c({inModal:e,notice:t}){const{title:n,description:i,actions:o=[]}=t,c=i&&i.text||"",u=i&&i.text_tags||[],h=1===o.length,p=g(c,u);return(0,s.jsxs)(r.xu,{rounding:2,padding:6,dangerouslySetInlineStyle:{__style:e?d:l},children:[!!n&&!e&&(0,s.jsx)(r.xu,{marginBottom:2,display:"flex",children:(0,s.jsx)(r.X6,{size:"md",children:n})}),!!c&&(0,s.jsx)(r.xu,{marginBottom:4,children:(0,s.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,s.jsx)(r.xv,{overflow:"normal",align:e?"center":"start",children:p})})}),!!o.length&&(0,s.jsx)(r.xu,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row",children:o.map((t=>(0,s.jsx)(r.xu,{column:e||h?12:6,paddingY:1,paddingX:2,children:(0,s.jsx)(a,{action:t,alignCenter:e||h})},JSON.stringify(t))))})]})}function u({notice:e}){const{actions:t=[],description:n,footer:i}=e,o=g(n&&n.text||"",n&&n.text_tags||[]),a={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return(0,s.jsxs)(r.xu,{width:"100%",display:"flex",direction:"column",alignItems:"center",marginBottom:3,children:[(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",width:656,rounding:8,children:(0,s.jsxs)(r.xu,{height:"100%",width:"100%",padding:10,children:[(0,s.jsx)("span",{style:a,children:o}),(0,s.jsx)(r.xu,{marginTop:6,children:t.map((e=>{var t;const n=null===(t=e.button)||void 0===t?void 0:t.link;var i,o,l;return n&&n.startsWith("tel")?(0,s.jsxs)(r.xu,{children:[(0,s.jsx)("span",{style:{fontWeight:"600",...a},children:null===(i=e.title)||void 0===i?void 0:i.text}),(0,s.jsx)("span",{style:a,children:null===(o=e.description)||void 0===o?void 0:o.text})]}):(0,s.jsx)(r.rU,{href:n||"",children:(0,s.jsx)(r.xu,{display:"inlineBlock",children:(0,s.jsx)(r.xu,{alignItems:"center",color:"navy",display:"flex",justifyContent:"center",height:44,rounding:"pill",paddingX:12,children:(0,s.jsx)(r.xv,{color:"white",weight:"bold",children:(null===(l=e.button)||void 0===l?void 0:l.text)||""})})})})}))})]})}),!!i&&(0,s.jsx)(r.xu,{paddingY:2,width:540,children:(0,s.jsx)(r.rU,{inline:!0,target:"blank",href:i.link,children:(0,s.jsx)(r.xv,{align:"center",color:"gray",size:"sm",children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:i.text}})})},i.link)})]})}var h=n(500953),p=n(549135);function g(e,t){const n=[];let i=0;for(let o=0;o<t.length;o+=1){const a=t[o];if(5===a.tag_type&&a.link){const t=e.substring(a.offset,a.offset+a.length),o=(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:(0,s.jsx)(r.rU,{inline:!0,target:"blank",href:a.link,children:t},t)});n.push((0,s.jsx)("span",{children:e.substring(i,a.offset)})),n.push(o),i=a.offset+a.length}}return i>0&&n.push((0,s.jsx)("span",{children:e.substring(i)})),0===n.length?[(0,s.jsx)("span",{children:e})]:n}function m({inModal:e,notices:t,viewType:n,query:o,sensitivity:r}){return(0,h.Z)((()=>{n&&(0,p.j)(120,{component:13367,view:n,entered_query:o,advisory_details:null==r?void 0:r.advisory_details,advisory_level:null==r?void 0:r.advisory,severity_level:null==r?void 0:r.severity})})),(0,s.jsx)(i.Fragment,{children:t.map((t=>2===t.style?(0,s.jsx)(u,{notice:t}):(0,s.jsx)(c,{notice:t,inModal:e})))})}},869950:(e,t,n)=>{n.d(t,{St:()=>i,IR:()=>o,Fx:()=>r,Uz:()=>s});const i={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function r(e){if(null==e)return!1;let t=!!e.notices&&e.notices.length>0;var n;e.notices&&e.notices.length>0&&(null===(null===(n=e.notices[0])||void 0===n?void 0:n.title)&&(t=!1));return!!e.notice||t}function s(e){return!!e&&e.severity===o.ABUSIVE}},366787:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(51610),r=n(159617),s=n(279890),a=n(883119),l=n(785893);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.Component{constructor(...e){super(...e),d(this,"state",{animation:null,visible:!1}),d(this,"setRef",(e=>{this.element||(this.element=e,null==e||e.addEventListener("dragover",this.handleDragOver),null==e||e.addEventListener("dragleave",this.handleDragLeave))})),d(this,"handleDragOver",(()=>{const{placement:e}=this.props;if(!this.state.animation){const t="top"===e?-1:1,n=(0,s.Z)({window,duration:1/0,run:(e,n,i)=>{const o=n<500?.8:1.2000000000000002;window.scrollTo(0,window.scrollY+o*t*i)}});n.start(),this.setState({animation:n})}})),d(this,"handleDragLeave",(()=>{const{animation:e}=this.state;e&&(e.cancel(),this.setState({animation:null}))})),d(this,"element",null),d(this,"visibleTimeout",null)}componentDidMount(){this.visibleTimeout=window.setTimeout((()=>this.setState({visible:!0})),500)}componentWillUnmount(){const e=this.element,{animation:t}=this.state;e&&(e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragleave",this.handleDragLeave)),t&&t.cancel(),this.visibleTimeout&&window.clearTimeout(this.visibleTimeout)}render(){const{height:e,placement:t}=this.props,{visible:n}=this.state;return(0,l.jsx)(a.xu,{bottom:"bottom"===t,dangerouslySetInlineStyle:{__style:{zIndex:16777271,visibility:n?"visible":"hidden"}},height:e,left:!0,position:"fixed",right:!0,top:"top"===t,children:(0,l.jsx)("div",{ref:this.setRef,style:{width:"100%",height:"100%"}})})}}function u({noStickyHeader:e}){const t=e?0:r.hu;return(0,l.jsx)(o.Z,{children:(0,l.jsx)(a.mh,{children:(0,l.jsxs)(a.xu,{children:[(0,l.jsx)(c,{placement:"top",height:120+t}),(0,l.jsx)(c,{placement:"bottom",height:120})]})})})}},297633:(e,t,n)=>{n.d(t,{y:()=>a,Z:()=>c});var i=n(667294),o=n(60598),r=n(708206),s=n(785893);const a={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};const l={hover:({index:e,onDragHover:t},n,i)=>{t(e,function(e,t){const n=t.targetEl;if(!(n&&n instanceof HTMLElement))return null;const{x:i,y:o}=e.getClientOffset(),{left:r,right:s,top:a,bottom:l,width:d,height:c}=n.getBoundingClientRect();return{positionRelativeToCenter:{x:i-(r+s)/2,y:o-(a+l)/2},boundingBox:{width:d,height:c}}}(n,i))}};class d extends i.Component{render(){const{children:e,connectDragSource:t,connectDropTarget:n,isDragging:i,isDraggingInternal:o}=this.props;return t(n((0,s.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:i||o?0:1},children:e})))}}const c=(0,r.compose)((0,o.GR)((e=>e.type),l,(e=>({connectDropTarget:e.dropTarget()}))),(0,o.Ej)((e=>e.type),{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},((e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.isDragging()}))))(d)},470848:(e,t,n)=>{n.d(t,{Lz:()=>i,TI:()=>o,X3:()=>r});function i(e,t){return e.itemIndex===t.itemIndex&&e.regionWithinItem===t.regionWithinItem}function o({hoverRelativePosition:{positionRelativeToCenter:{x:e},boundingBox:{width:t}},centerEnabled:n}){const i=n?.5*t:0;return Math.abs(e)<i/2?"center":e<0?"left":"right"}function r({hoverLocation:{itemIndex:e,regionWithinItem:t},sourceIndex:n}){if("center"===t||e===n)return e;const i="left"===t;return e<n===i?e:i?e-1:e+1}},308125:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(747033),o=n(263116),r=n(785893);const s=(0,o.ZP)({resolved:{},chunkName:()=>"EditorWithMentionsInternal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>Promise.all([n.e(89333),n.e(35978)]).then(n.bind(n,473749)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return 473749}});function a(e){return(0,r.jsx)(s,{...e,fallback:(0,r.jsx)(i.Z,{})})}},747033:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);function s(){const e=(0,i.ZP)();return(0,r.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(o.$j,{accessibilityLabel:e._("Loading editor","EditorWithMentionsFallback.loading","Message shown while waiting for the editor to load"),show:!0})})}},189509:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{htmlFor:t,errorMessage:n}=e;return(0,o.jsx)(i.__,{htmlFor:t,children:(0,o.jsx)(i.xu,{marginTop:1,children:(0,o.jsx)(i.xv,{color:"red",size:"md",children:n})})})}},358873:(e,t,n)=>{n.d(t,{HW:()=>s,i3:()=>h,YW:()=>u,o2:()=>c});var i=n(667294),o=n(762803),r=n(785893);const s=660,a={educationId:null,paddingRight:0,zIndex:s};function l(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":const{educationId:n}=t.payload;return{...e,educationId:n};case"FOOTER_SET_PADDING_RIGHT":const{paddingRight:i}=t.payload;return{...e,paddingRight:i};case"FOOTER_SET_Z_INDEX":const{zIndex:o}=t.payload;return{...e,zIndex:o};default:return e}}const{Provider:d,Consumer:c,useHook:u}=(0,o.ZP)("footerContext");function h({children:e}){const[t,n]=(0,i.useReducer)(l,a);return(0,r.jsx)(d,{value:{...t,setEducationId:e=>n({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}}),setPaddingRight:e=>n({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}}),setZIndex:e=>n({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}})},children:e})}},515743:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294),o=n(281810),r=n(87398),s=n(155656),a=n(840667),l=n(883119),d=n(535258),c=n(785893);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),u(this,"masonryRef",(0,i.createRef)()),u(this,"renderItem",(e=>{const{comp:t}=this.props,{gutterWidth:n,paddingBottom:i}=this.getGutters();return(0,c.jsx)("div",{style:{paddingBottom:i,paddingLeft:n/2,paddingRight:n/2},children:(0,c.jsx)(t,{...e})})}))}componentDidUpdate(e){const{widthOffset:t,useMasonry9:n}=this.props;t!==e.widthOffset&&(n||this.masonryRef.current&&this.masonryRef.current.handleResize())}getGutters(){const{gutterWidth:e,paddingStyle:t}=this.props,n="simplified"===t;return{gutterWidth:n?d.oX:e,paddingBottom:n?16:6}}render(){const{columnWidth:e,flexible:t,items:n,layout:i,loadItems:u,masonryRef:h,measurementStore:p,scrollContainer:g,serverRender:m,useMasonry9:f,virtualize:b,inScrollOptimizationExperiment:v,isGridCentered:x,minCols:y}=this.props,{gutterWidth:_}=this.getGutters();let w,C=null;return C=f?(0,c.jsx)(a.Z,{columnWidth:e+_,gutterWidth:0,comp:this.renderItem,minCols:y,ref:e=>{this.masonryRef.current=e,h&&(h.current=e)},items:n,flexible:t,loadItems:u,measurementStore:p,scrollContainer:g,virtualize:b}):(0,c.jsx)(l.Rk,{columnWidth:e+_,gutterWidth:0,comp:this.renderItem,minCols:y,ref:e=>{this.masonryRef.current=e,h&&(h.current=e)},items:n,flexible:t,layout:i||"basic",loadItems:u,measurementStore:p,_deferScrollPositionUpdate:!!v,scrollContainer:g,virtualize:b}),x&&(w="gridCentered"),(0,c.jsxs)("div",{className:w,children:[m&&(0,c.jsx)(s.Z,{unsafeCSS:t?(0,r.Z)((e||d.xf)+_,n.length||d.g5,y||d.yc):(0,o.Z)((e||d.xf)+_,n.length||d.g5,y||d.yc)}),(0,c.jsx)("div",{children:C})]})}}u(h,"defaultProps",{gutterWidth:14,isGridCentered:!0,minCols:d.yc,paddingStyle:"simplified",useMasonry9:!1})},785705:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var i=n(667294),o=n(551687),r=n(255038),s=n(840667),a=n(883119);const l={},d=(e,t)=>{if(null!=e)return l[e]&&l[e].screenWidth===window.innerWidth||(l[e]={screenWidth:window.innerWidth,cache:t?s.Z.createMeasurementStore():a.Rk.createMeasurementStore()}),l[e].cache};var c=n(181307),u=n(778170),h=n(515743),p=n(785893);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m="undefined"!=typeof window?()=>window:void 0;class f extends i.Component{constructor(...e){super(...e),g(this,"renderItem",(e=>{const{comp:t}=this.props;return(0,p.jsx)(o.Z,{name:"MasonryPerfTimingItem",children:(0,p.jsx)(t,{...e})})})),g(this,"loadItems",(()=>{const{isFetching:e,loadItems:t}=this.props;e||t()}))}render(){const{cacheKey:e,columnWidth:t,flexible:n,gutterWidth:i,inScrollOptimizationExperiment:o,isGridCentered:r,items:s,layout:a,masonryRef:l,minCols:c,paddingStyle:u,scrollContainer:g,serverRender:f,useMasonry9:b,virtualize:v,widthOffset:x}=this.props;return(0,p.jsx)(h.Z,{columnWidth:t,comp:this.renderItem,flexible:n,gutterWidth:i,inScrollOptimizationExperiment:o,isGridCentered:r,items:s,layout:a,loadItems:this.loadItems,masonryRef:l,measurementStore:d(e,b),minCols:c,paddingStyle:u,scrollContainer:g||m,serverRender:f,useMasonry9:b,virtualize:v,widthOffset:x})}}function b({cacheKey:e,columnWidth:t,comp:n,flexible:i,gutterWidth:o,isAtEnd:s,isFetching:a,isGridCentered:l=!0,isLoaded:d,items:h,pinData:g,layout:b,loadItems:v,masonryRef:x,minCols:y,paddingStyle:_,scrollContainer:w,serverRender:C=!0,useMasonry9:j,virtualize:S,widthOffset:I,includeBackgroundImages:P,includeVideos:E}){const T=(0,u.N5)(),D=(0,c.tc)("scroll_gestalt_defer_pos_update");let k=!1;return null!=T&&T.isAuthenticated&&(k=D().anyEnabled),(0,p.jsx)(r.Z,{isAtEndOfFeed:s,pinData:g,itemCount:h.length,includeBackgroundImages:P,includeVideos:E,children:(0,p.jsx)(f,{cacheKey:e,columnWidth:t,comp:n,flexible:i,gutterWidth:o,inScrollOptimizationExperiment:k,isFetching:a,isGridCentered:l,items:h,layout:b,loadItems:v,masonryRef:x,minCols:y,paddingStyle:_,scrollContainer:w||m,serverRender:C,useMasonry9:j,virtualize:S,widthOffset:I})})}},840667:(e,t,n)=>{n.d(t,{Z:()=>H});var i=n(667294);class o{constructor(e=[],t=(()=>null)){var n,i,o;o=[],(i="items")in(n=this)?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,this.items=e,this.getItemLayoutInfo=t}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:n.g}const a="resizeanim";class l{constructor(e,t){r(this,"_window",s()),r(this,"_elementsMap",new WeakMap),r(this,"_handleScroll",(e=>{const t=e.target;if(t.className&&"function"==typeof t.className.indexOf&&t.className.indexOf("contract-trigger")<0&&t.className.indexOf("expand-trigger")<0)return;const n=e.currentTarget,i=this._elementsMap.get(n);if(!i)throw new Error("No subscription on element.");this._resetTriggers(n,i.resizeTriggers),i.animationFrameId&&window.cancelAnimationFrame(i.animationFrameId),i.animationFrameId=window.requestAnimationFrame((()=>{(!i.previousDimensions||n.offsetWidth!==i.previousDimensions.width||n.offsetHeight!==i.previousDimensions.height)&&(i.previousDimensions={width:n.offsetWidth,height:n.offsetHeight},i.resizeHandlers.forEach((t=>{t.call(n,e)})))}))})),this._window=e,this._nonce=t}_resetTriggers(e,t){const n=t.firstElementChild,i=t.lastElementChild,o=n.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,o.style.width=n.offsetWidth+1+"px",o.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}_createStyles(e){if(!e.getElementById("ResizeListener")){const t=`${"@$keyframes resizeanim { from { opacity: 0; } to { opacity: 0; } } "}.resize-triggers { ${"animation: 1ms resizeanim; "} visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }`,n=e.head||e.getElementsByTagName("head")[0],i=e.createElement("style");i.id="ResizeListener",i.type="text/css",null!=this._nonce&&i.setAttribute("nonce",this._nonce),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i)}}addResizeListener(e,t){if(e)if(e===window)window.addEventListener("resize",t,!1);else{if(!this._elementsMap.has(e)){const t=e.ownerDocument,n=this._window.getComputedStyle(e);n&&"static"===n.position&&(e.style.position="relative"),this._createStyles(t);const i=t.createElement("div");i.className="resize-triggers",i.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(i),this._resetTriggers(e,i),e.addEventListener("scroll",this._handleScroll,!0);const o=t=>{t.animationName===a&&this._resetTriggers(e,i)};i.addEventListener("animationstart",o),this._elementsMap.set(e,{resizeTriggers:i,animationHandler:o,resizeHandlers:[]})}const n=this._elementsMap.get(e);n&&n.resizeHandlers.push(t)}}removeResizeListener(e,t){if(e)if(e===window)window.removeEventListener("resize",t,!1);else{const n=this._elementsMap.get(e);if(!n)return;n.resizeHandlers.splice(n.resizeHandlers.indexOf(t),1),0===n.resizeHandlers.length&&(e.removeEventListener("scroll",this._handleScroll,!0),n.resizeTriggers.removeEventListener("animationstart",n.animationHandler),e.removeChild(n.resizeTriggers),this._elementsMap.delete(e))}}}r(l,"sharedInstance",new l(s()));var d=n(785893);function c({children:e,defaultSize:t,disableWidth:n=!1,disableHeight:o=!1,onResize:r}){const[s,a]=(0,i.useState)({width:0,height:0}),c=(0,i.useRef)(),u=(0,i.useRef)(),h=(0,i.useCallback)((()=>{if(u.current){const e=u.current.offsetHeight||0,t=u.current.offsetWidth||0,i=window.getComputedStyle(u.current)||{},l=parseInt(i.paddingLeft,10)||0,d=parseInt(i.paddingRight,10)||0,c=e-(parseInt(i.paddingTop,10)||0)-(parseInt(i.paddingBottom,10)||0),h=t-l-d;(!o&&s.height!==c||!n&&s.width!==h)&&(a({width:h,height:c}),r({width:h,height:c}))}}),[s,o,n,r,u.current]);(0,i.useEffect)((()=>{var e,t;null!==(e=c.current)&&void 0!==e&&null!==(t=e.parentNode)&&void 0!==t&&t.ownerDocument.defaultView&&c.current.parentNode instanceof c.current.parentNode.ownerDocument.defaultView.HTMLElement&&(u.current=c.current.parentNode,h())}),[]),(0,i.useEffect)((()=>(u.current&&l.sharedInstance.addResizeListener(u.current,h),()=>{u.current&&l.sharedInstance.removeResizeListener(u.current,h)})),[u.current,h]);const p={overflow:"visible",margin:"auto",display:"flex",justifyContent:"center"};return o||(p.height=0),n||(p.width=0),(0,d.jsx)("div",{className:"AutoSizer",ref:c,style:p,children:e})}var u=n(294184),h=n.n(u),p=n(618446),g=n.n(p);class m extends i.Component{constructor(...e){var t,n,i;super(...e),t=this,n="itemSizeCache",i=new WeakMap,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.componentDidRender()}shouldComponentUpdate(e){const{customSize:t,layout:n}=e,{customSize:i,layout:o}=this.props;if(!g()(i,t))return!0;if(n.items.length!==o.items.length)return!0;if(n.items.some(((e,t)=>e!==o.items[t])))return!0;const r=n.items.map(n.getItemLayoutInfo),s=o.items.map(o.getItemLayoutInfo);return!(!r.some(((e,t)=>e!==s[t]))||!r.some(((e,t)=>!g()(e,s[t]))))}componentDidUpdate(){this.componentDidRender()}componentDidRender(){const{onRenderedItems:e}=this.props;e&&e(this.itemSizeCache),this.itemSizeCache=new WeakMap}getElementHeight(e){return e&&(e.clientHeight||e.scrollHeight)||0}measureItem(e,t){t&&this.itemSizeCache.set(e,{width:t.clientWidth||t.scrollWidth||0,height:this.getElementHeight(t)||this.getElementHeight(t.children&&t.children[0])})}render(){const{renderItem:e,layout:t,customSize:n,itemsToMeasureLimit:i}=this.props,o=[],r=[];t.items.forEach(((n,s)=>{const a=t.getItemLayoutInfo(n);if(!a)return;const l="number"==typeof a.customIndex?a.customIndex:s,c=`item-${l}`;if(!a.size&&o.length<(i||1/0)){const t=e({item:n,index:l,isMeasuring:!0,constraints:a.constraints});o.push((0,d.jsx)("div",{className:"Collection-Item Collection-Item-Measuring",style:{pointerEvents:"none",position:"absolute",visibility:"hidden",top:-9999,left:-9999,...a.constraints},ref:e=>this.measureItem(n,e),children:t},c))}if(a.position){const t=e({item:n,index:l,isMeasuring:!1,constraints:a.constraints});if(!a.position)return;r.push((0,d.jsx)("div",{className:"Collection-Item",style:{position:"absolute",top:0,left:0,transform:`translate(${a.position.left}px, ${a.position.top}px)`,...a.size},children:t},c))}}));const s=n||t.size;return(0,d.jsxs)("div",{style:{position:"relative",...s},className:"Collection",children:[o,r]})}}const f=function({layout:e,overscan:t=200,scrollContainerSize:n,scrollPosition:i,children:r}){const s=i.top-t,a=i.top+n.height+t,l=i.left-t,d=i.left+n.width+t,c=e.items.filter((t=>{const n=e.getItemLayoutInfo(t);if(!n)return!1;const{size:i,position:o}=n;return!i||!o||o.top+i.height>=s&&o.top<=a&&o.left+i.width>=l&&o.left<=d})),u=new o(c,e.getItemLayoutInfo);return u.size=e.size,u.contentFilledSize=e.contentFilledSize,u.isMeasuring=e.isMeasuring,r(u,e.size?e.size:void 0)};function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends i.Component{constructor(...e){super(...e),b(this,"state",{layout:this.props.initialLayout||new o,initialItemCount:0,previousItems:[],previousContentContainerSize:this.props.contentContainerSize}),b(this,"contentContainerRef",(0,i.createRef)()),b(this,"handleItemsRendered",(e=>{this.handleItemsRenderedAnimationFrame||(this.handleItemsRenderedAnimationFrame=requestAnimationFrame((()=>{this.handleItemsRenderedAnimationFrame=null;const{getItemLayoutOptions:t,layoutEngine:n,onLayoutUpdated:i,items:r,contentContainerSize:s}=this.props,{layout:a}=this.state,l=((e,t)=>{const n=new WeakMap;let i=!1;return e.items.forEach((o=>{const r=e.getItemLayoutInfo(o),s=t.get(o);r&&s&&!g()(r.size,s)&&(n.set(o,{...r,size:s}),i=!0)})),i?new o(e.items,(t=>n.get(t)||e.getItemLayoutInfo(t))):e})(a,e);if(a===l)i&&i(a);else{const e=n.buildLayout({containerSize:s,items:r.filter(Boolean),getItemLayoutOptions:t,previousLayout:l});this.setState({layout:e})}})))})),b(this,"renderCollection",((e,t)=>{const{items:n,renderItem:i,layoutEngine:o,scrollContainerSize:r,contentContainerSize:s}=this.props,{initialItemCount:a}=this.state,l="function"==typeof o.itemsToMeasureLimit?o.itemsToMeasureLimit({initialLayout:n.length===a,layout:e,scrollContainerSize:r,contentContainerSize:s}):o.itemsToMeasureLimit||1/0;return(0,d.jsx)(m,{renderItem:i,layout:e,onRenderedItems:this.handleItemsRendered,customSize:t,itemsToMeasureLimit:l})}))}static getDerivedStateFromProps(e,t){const{items:n,getItemLayoutOptions:i,layoutEngine:o,contentContainerSize:r}=e,{previousItems:s,previousContentContainerSize:a,layout:l,initialItemCount:d}=t,c={initialItemCount:d||n.length,previousContentContainerSize:r,previousItems:n};if(!(u=s,h=n,(u===h||u.length===h.length&&u.every(((e,t)=>e===h[t])))&&g()(r,a))){return{layout:o.buildLayout({containerSize:r,items:n.filter(Boolean),getItemLayoutOptions:i,previousLayout:l}),contentContainerSize:r,...c}}var u,h;return c}componentDidMount(){const{onLayoutUpdated:e}=this.props,{layout:t}=this.state;e&&e(t)}componentWillUnmount(){this.handleItemsRenderedAnimationFrame&&cancelAnimationFrame(this.handleItemsRenderedAnimationFrame)}getLayout(){return this.state.layout}render(){const{virtualize:e,virtualOverscan:t,scrollPosition:n,scrollContainerSize:i,contentContainerSize:o}=this.props,{layout:r}=this.state;let s=null;if(e&&i&&n){const e="function"==typeof t?t({layout:r,scrollContainerSize:i,contentContainerSize:o}):t||0;s=(0,d.jsx)(f,{layout:r,scrollContainerSize:i,scrollPosition:n,overscan:e,children:this.renderCollection})}else s=this.renderCollection(r);return(0,d.jsx)("div",{className:"LayoutRenderer",children:s})}}function x(e){null!==e.id&&(window.cancelAnimationFrame(e.id),e.id=null)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}b(v,"defaultProps",{virtualOverscan:function({scrollContainerSize:e}){return 2*Math.max(e.width,e.height)}});class _{constructor(){y(this,"_mountedInstances",[]),y(this,"_originalBodyPointerEvents",null),y(this,"_disablePointerEventsTimeoutId",null),y(this,"_enablePointerEventsAfterDelayCallback",(()=>{this._enablePointerEventsIfDisabled(),this._mountedInstances.forEach((({options:e})=>{e.resetIsScrolling&&e.resetIsScrolling()}))})),y(this,"_handleScroll",(e=>{e.currentTarget===window&&null==this._originalBodyPointerEvents&&document.body&&(this._originalBodyPointerEvents=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),this._enablePointerEventsAfterDelay(),this._mountedInstances.forEach((({scrollElement:t,options:n})=>{t===e.currentTarget&&n.handleScroll()}))}))}_enablePointerEventsIfDisabled(){this._disablePointerEventsTimeoutId&&(this._disablePointerEventsTimeoutId=null,document.body&&null!=this._originalBodyPointerEvents&&(document.body.style.pointerEvents=this._originalBodyPointerEvents),this._originalBodyPointerEvents=null)}_enablePointerEventsAfterDelay(){this._disablePointerEventsTimeoutId&&x(this._disablePointerEventsTimeoutId);let e=0;this._mountedInstances.forEach((({options:t})=>{e=Math.max(e,t.scrollingResetTimeInterval)})),this._disablePointerEventsTimeoutId=function(e,t){let n;Promise.resolve().then((()=>{n=Date.now()}));const i={id:null},o=()=>{Date.now()-n>=t?e.call():i.id=window.requestAnimationFrame(o)};return i.id=window.requestAnimationFrame(o),i}(this._enablePointerEventsAfterDelayCallback,e)}registerScrollListener(e,t){this._mountedInstances.some((({scrollElement:t})=>t===e))||e.addEventListener("scroll",this._handleScroll),this._mountedInstances.push({scrollElement:e,options:t})}unregisterScrollListener(e){this._mountedInstances=this._mountedInstances.filter((({scrollElement:t})=>t!==e)),this._mountedInstances.length||(e.removeEventListener("scroll",this._handleScroll),this._disablePointerEventsTimeoutId&&(x(this._disablePointerEventsTimeoutId),this._enablePointerEventsIfDisabled()))}}y(_,"sharedInstance",new _);var w=n(823493),C=n.n(w);function j(e,t){const n=(0,i.useRef)(!0);(0,i.useEffect)(((...t)=>{if(!n.current)return e(...t);n.current=!1}),t)}const S=e=>"undefined"!=typeof window&&e===window;function I(e,t){if(e){if(S(e)){const{innerHeight:e,innerWidth:t}=window;return{height:"number"==typeof e?e:0,width:"number"==typeof t?t:0}}{const t=e.getBoundingClientRect();return{height:t.height,width:t.width}}}return t}function P(e){return S(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}const E=()=>"undefined"!=typeof window?window:void 0;function T(e,t){return e&&t?function(e,t){if(S(t)&&document.documentElement){const t=document.documentElement,n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{top:n.top-i.top,left:n.left-i.left}}{const n=P(t),i=e.getBoundingClientRect(),o=t.getBoundingClientRect();return{top:i.top+n.top-o.top,left:i.left+n.left-o.left}}}(e,t):{top:0,left:0}}function D(e,t){const n=P(e);return{left:n.left-t.left,top:n.top-t.top}}const k={Masonry:{overflowAnchor:"none"}};function O({items:e,renderItem:t,getItemLayoutOptions:n,layoutEngine:o,onLayoutUpdated:r,initialLayout:s,virtualize:a,virtualOverscan:u,scrollContainer:p,scrollTracker:g}){const[m,f]=(0,i.useState)(),b=(0,i.useCallback)((e=>{e&&e!==m&&f(e)}),[m]),{scrollContainerSize:x,scrollPosition:y}=function({scrollContainer:e=E(),scrollChild:t,scrollingResetTimeInterval:n=150,serverSize:o={width:0,height:0}}){const[r,s]=(0,i.useState)((()=>T(t,e)));j((()=>{const n=T(t,e);s(n)}),[t,e]);const[a,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)((()=>I(e,o))),[h,p]=(0,i.useState)((()=>e?D(e,r):{left:0,top:0}));j((()=>{if(e){const t=D(e,r);p(t)}}),[e,r.top,r.left]),j((()=>{e&&u(I(e,o))}),[e,o.width,o.height]);const g=(0,i.useCallback)((()=>{u(I(e,o)),s(T(t,e))}),[t,e,o]);(0,i.useEffect)((()=>(l.sharedInstance.addResizeListener(e,g),()=>{e&&l.sharedInstance.removeResizeListener(e,g)})),[e,g]);const m=(0,i.useCallback)(C()(((e,t)=>{const n=T(e,t);r.top===n.top&&r.left===n.left||s(n)}),1e3),[T,s,r,1e3]),f=(0,i.useCallback)((()=>{e&&(m(t,e),p(D(e,r)),d(!0))}),[t,e,D,p,d,r,m]),b=(0,i.useCallback)((()=>d(!1)),[]);return(0,i.useEffect)((()=>(e&&_.sharedInstance.registerScrollListener(e,{scrollingResetTimeInterval:n,handleScroll:f,handleScrollEnded:b}),()=>{e&&_.sharedInstance.unregisterScrollListener(e)})),[e,n,f,b]),{scrollContainerSize:c,scrollPosition:h,isScrolling:a}}({scrollContainer:p,scrollChild:m});(0,i.useEffect)((()=>{g&&p&&x&&g.handleContainerResized(x)}),[x.width,x.height]),(0,i.useEffect)((()=>{g&&p&&y&&g.handleContainerScrolled(y)}),[y.top,y.left]);const[w,S]=(0,i.useState)({width:0,height:0});return(0,d.jsx)("div",{className:h()("Masonry",{"Masonry-Premount":!m}),style:k.Masonry,ref:b,children:(0,d.jsx)(c,{disableHeight:!0,onResize:S,children:(0,d.jsx)(v,{items:e,renderItem:t,getItemLayoutOptions:n,layoutEngine:o,onLayoutUpdated:e=>{r&&r(e),g&&p&&g.handleLayoutUpdated(e)},initialLayout:s,scrollContainerSize:x,scrollPosition:y,contentContainerSize:w,virtualize:a,virtualOverscan:u})})})}class B{constructor({minCols:e=2,colWidth:t=250,gutter:n=20,flexible:i=false}={}){this.minCols=e,this.colWidth=t,this.gutter=n,this.flexible=i}static getColumnIndex(e){let t=0;for(let n=0;n<e.length;n+=1)e[n]<e[t]&&(t=n);return t}getColumnInfo(e){const{gutter:t,minCols:n}=this;let i=0,o=0;if(this.flexible){if(t)throw new Error("Flexible grid layouts do not support gutters.");e.width&&(o=Math.max(Math.ceil(e.width/this.colWidth),n),i=Math.floor(e.width/o))}else i=this.colWidth,e.width&&(o=Math.max(Math.floor((e.width+t)/(i+t)),n));return{width:i,count:o}}buildLayout(e){throw new Error("Subclasses must implement")}itemsToMeasureLimit({initialLayout:e,contentContainerSize:t}){return e?1/0:this.getColumnInfo(t).count||1/0}}class R extends B{buildLayout({containerSize:e,items:t,previousLayout:n}){const{width:i,count:r}=this.getColumnInfo(e),s=new Array(r).fill(0),a=new WeakMap;let l=!1;const d={width:0,height:0};t.forEach(((e,t)=>{const o=n?n.getItemLayoutInfo(e):void 0;if(r>0&&null!=o&&o.size){const n=o.size;if(!n.width||!n.height)throw new Error("Items that have been measured should always have a width and height.");const r=R.getColumnIndex(s),l=s[r],c=l+(0===l?0:this.gutter),u=r*(i+this.gutter);a.set(e,{...o,size:{...n,width:i},position:{left:u,top:c},customIndex:t}),s[r]=c+n.height,d.width<u+n.width&&(d.width=u+n.width),d.height<c+n.height&&(d.height=c+n.height)}else a.set(e,{constraints:{width:i||void 0}}),l=!0}));const c=new o(t,(e=>a.get(e)));return c.size=d,c.contentFilledSize={width:d.width,height:Math.min(...s)},c.isMeasuring=l,c}}class M extends B{buildLayout({containerSize:e,items:t,previousLayout:n}){const{width:i,count:r}=this.getColumnInfo(e),s=new WeakMap;let a=0,l=[],d=0,c=0,u=!1;const h={width:0,height:0};let p=0;for(let o=0;o<t.length;o+=1){const e=t[o],h=n?n.getItemLayoutInfo(e):void 0;if(r>0&&h&&h.size){const n=h.size;if(!n.width||!n.height)throw new Error("Items that have been measured should always have a width and height.");if(l[d%r]={item:e,itemLayoutInfo:h},n.height>c&&(c=n.height),l.length===r||o===t.length-1){for(let e=0;e<l.length;e+=1){const t=l[e],{size:n,constraints:r}=t.itemLayoutInfo;if(!n||!r)throw new Error("Row entries must already have sizes and constraints.");s.set(t.item,{size:{width:i,height:n.height},position:{left:e*(i+this.gutter),top:a},constraints:r,customIndex:o})}l.length===r&&(p=a+c),a+=c+this.gutter,l=[],c=0}d+=1}else s.set(e,{constraints:{width:i}}),u=!0}const g=new o(t,(e=>s.get(e)));return g.size=h,g.contentFilledSize={width:h.width,height:p},g.isMeasuring=u,g}}var A=n(583704);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z=({containerSize:e})=>2*e.height;class N{constructor(e,t=Z){L(this,"isMeasuring",!1),L(this,"isFetching",!1),L(this,"fetchMoreIfReady",C()((()=>{if(this.isMeasuring||this.isFetching)return;if(!this.scrollPosition||!this.containerSize||!this.layoutSize)return;const e="function"==typeof this.fetchOverscan?this.fetchOverscan({layoutSize:this.layoutSize,scrollPosition:this.scrollPosition,containerSize:this.containerSize}):this.fetchOverscan;this.layoutSize.height-this.scrollPosition.top-this.containerSize.height>=e||(this.isFetching=!0,this.fetchMore())}),100)),this.fetchMore=e,this.fetchOverscan=t}handleLayoutUpdated(e){(!this.items||this.items&&this.items.length!==e.items.length)&&(this.isFetching=!1),this.layoutSize=e.size,this.isMeasuring=!!e.isMeasuring,this.items=e.items,this.fetchMoreIfReady()}handleContainerResized(e){this.containerSize=e,this.fetchMoreIfReady()}handleContainerScrolled(e){this.scrollPosition=e,this.fetchMoreIfReady()}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z=({scrollContainerSize:e})=>.7*e.height;class H extends i.Component{static getDerivedStateFromProps({layout:e,minCols:t,columnWidth:n,gutterWidth:i,flexible:o}){return{layoutEngine:H.layoutOptionsToLayoutEngine({layout:e,minCols:t,columnWidth:n,gutterWidth:i,flexible:o})}}constructor(e){super(e),F(this,"fetchMore",(()=>new Promise((e=>{const{items:t,loadItems:n}=this.props;"function"==typeof n?setTimeout((()=>{n({from:t.length}),e(!0)})):e(!1)})))),F(this,"handleLayoutUpdated",(e=>{const{measurementStore:t}=this.state;t.layout=e})),F(this,"renderItem",(({item:e,index:t,isMeasuring:n,constraints:i})=>{const{comp:o}=this.props;return(0,d.jsx)(o,{data:e,itemIdx:t,isMeasuring:n,constraints:i})}));const{minCols:t,columnWidth:n,gutterWidth:i,flexible:r,layout:s,measurementStore:a,items:l,loadItems:c,fetchBoundsOffset:u}=e,h=a||H.createMeasurementStore(),p=H.layoutOptionsToLayoutEngine({layout:s,minCols:t,columnWidth:n,gutterWidth:i,flexible:r});h.layout=new o(l,h.layout.getItemLayoutInfo);const g="function"==typeof c?new N(this.fetchMore,(({containerSize:e})=>Math.max(0,2*e.height+u))):void 0;this.state={nonce:0,scrollTracker:g,layoutEngine:p,measurementStore:h}}updatePosition(){}reflow(){const{measurementStore:e}=this.state;e.layout=new o,this.setState((({nonce:e})=>({nonce:e+1})))}render(){const{getItemLayoutOptions:e,items:t,scrollContainer:n,virtualize:i}=this.props,{layoutEngine:o,measurementStore:r,nonce:s,scrollTracker:a}=this.state;return(0,d.jsx)(O,{items:t,renderItem:this.renderItem,getItemLayoutOptions:e,layoutEngine:o,scrollContainer:(l=n,l?"function"==typeof l?l():l:"undefined"!=typeof window?window:null),scrollTracker:a,onLayoutUpdated:this.handleLayoutUpdated,initialLayout:r.layout,virtualize:i,virtualOverscan:z},`Masonry-${s}`);var l}}F(H,"createMeasurementStore",(()=>({layout:new o}))),F(H,"defaultProps",{columnWidth:236,fetchBoundsOffset:0,layout:"default",minCols:3,virtualize:!1}),F(H,"layoutOptionsToLayoutEngine",(0,A.HP)((({layout:e,minCols:t,columnWidth:n,gutterWidth:i,flexible:o})=>new("uniformRow"===e?M:R)({minCols:t,colWidth:n,gutter:i,flexible:o}))))},281810:(e,t,n)=>{function i(e=236,t=16,n=2){let i="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute;\n  visibility: hidden;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n";for(let o=n;o<t+1;o+=1){i+=`\n@media (min-width: ${o===n?0:o*e}px) and (max-width: ${(o+1)*e-1}px) {\n  .gridCentered {\n    width: ${o*e}px;\n  }\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${o}),\n  .gridCentered .static:nth-child(-n+${o}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n}\n`}return i}n.d(t,{Z:()=>i})},87398:(e,t,n)=>{function i(e=300,t=16,n=2){let i=`\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: ${t*e}\n}\n\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute !important;\n  visibility: hidden !important;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n\n@media (min-width: ${t*e}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${t}),\n  .gridCentered .static:nth-child(-n+${t}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: ${e}px !important;\n  }\n}\n`;for(let o=n;o<t+1;o+=1){i+=`\n@media (min-width: ${o===n?0:(o-1)*e}px) and (max-width: ${o*e-1}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${o}),\n  .gridCentered .static:nth-child(-n+${o}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: calc(100% / ${o}) !important;\n  }\n}\n`}return i}n.d(t,{Z:()=>i})},395553:(e,t,n)=>{n.r(t),n.d(t,{PinRepEditButton:()=>a,default:()=>l});var i=n(174523),o=n(582418),r=n(883119),s=n(785893);function a({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:a,shouldUseLegoStyles:l,onDelete:d}){const c=(0,i.ZP)(),u=(0,s.jsx)(r.hU,{accessibilityLabel:c._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return l?(0,s.jsx)(r.zx,{fullWidth:!0,size:"lg",color:"gray",text:c._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:d,accessibilityLabel:c._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||o?(0,s.jsx)("div",{style:{...a||{}},children:u}):u}const l=(0,o.Z)(a)},476865:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(667294),o=n(40142),r=n(269935),s=n(439887),a=n(28745),l=n(538958),d=n(432921),c=n(904126),u=n(883119),h=n(785893);const p={overlay:{__style:{backgroundColor:"#000"}}};function g(e){var t,n,o,r;const{pin:{id:s,images:a,title:l,videos:g,video_status_message:m}}=e,f=m||{},b=a&&a["236x"],v=g&&(null===(t=g.video_list)||void 0===t?void 0:t[c.K.V_HLSV4]),{duration:x}=v||{};return(0,h.jsx)(i.Fragment,{children:(0,h.jsx)(u.Zb,{children:(0,h.jsxs)(u.iP,{role:"link",href:`/pin/${s}`,rounding:2,children:[(0,h.jsxs)(u.xu,{overflow:"hidden",position:"relative",rounding:2,children:[b&&(0,h.jsx)(u.Ee,{alt:l||"",color:"lightGray",naturalHeight:null!==(n=b.height)&&void 0!==n?n:1,naturalWidth:null!==(o=b.width)&&void 0!==o?o:1,src:null!==(r=b.url)&&void 0!==r?r:""}),!!x&&(0,h.jsx)(u.xu,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:(0,h.jsx)(d.Z,{duration:x})}),(0,h.jsx)(u.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:p.overlay}),(0,h.jsxs)(u.xu,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[(0,h.jsx)(u.X6,{color:"white",overflow:"normal",size:"sm",children:f.title}),(0,h.jsx)(u.xu,{marginTop:4,children:(0,h.jsx)(u.xv,{color:"white",size:"md",overflow:"normal",children:f.subtitle})})]})]}),(0,h.jsx)(u.xu,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:(0,h.jsx)(u.xu,{flex:"grow",children:l&&(0,h.jsx)(u.xu,{paddingY:1,children:(0,h.jsx)(u.xv,{inline:!0,size:"md",weight:"bold",children:l})})})})]})})})}var m=n(784655),f=n(855168),b=n(398791),v=n(560133);function x({trackingParameters:e,pin:t,pinId:n,...d}){var c,u,p;const x=(0,f.TH)(),y=(0,o.useSelector)((({pins:e})=>e[n]))||t,_=(0,s.Z)(y,x),w=(0,a.Z)(y),C=!!(w&&w.url&&w.height&&w.width)||void 0,j=w&&y.videos?y.videos.id:void 0,[S,I]=(0,i.useState)(!1),P=(0,i.useCallback)((()=>I(!0)),[]),E=(0,i.useCallback)((()=>I(!1)),[]),{componentType:T,contextLogData:D,impressionAuxFields:k,slotIndex:O,viewData:B,viewParameter:R,viewType:M}=e;return(0,h.jsx)(r.Z,{componentType:T,contextLogData:{..."undefined"!=typeof window?{pwa_type:(0,l.ZP)(window)}:{},...D,...(0,v.Kl)(y,D)},impressionAuxFields:{...k||{},isNativeVideoAndWatchable:C,videoIdStr:j,clientTrackingParams:_||`${y.tracking_params||""}-0`,imageURL:null!==(c=null===(u=y.images)||void 0===u||null===(p=u["236x"])||void 0===p?void 0:p.url)&&void 0!==c?c:"",richTypes:(0,v.GT)(y)},impressionType:"Pin",isPaused:!S,loggingId:y.id,slotIndex:O,viewData:B,viewParameter:R,viewType:M,children:(0,m._J)(y)?(0,h.jsx)(g,{pin:y}):(0,h.jsx)(b.Z,{...d,debugImpressionState:S?"started":"paused",onError:E,onLoad:P,pin:y,pinId:n,trackingParameters:{componentType:T,contextLogData:D,slotIndex:O,viewParameter:R,viewType:M}})})}},530197:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(667294),o=n(40142),r=n(209067),s=n(631739),a=n(523890),l=n(767523),d=n(535718),c=n(34411),u=n(178862),h=n(223419),p=n(159276),g=n(301314),m=n(174523),f=n(883119),b=n(164756),v=n(785893);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y({board:e,hovered:t,searchQuery:n}){const i=e.privacy===s.Z.BoardPrivacy.SECRET;return(0,v.jsxs)(f.xu,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:[(0,v.jsx)(f.xu,{flex:"grow",children:(0,v.jsx)(f.xv,{weight:"bold",children:(0,h.We)(n,e.name)})}),(0,v.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",flex:"none",children:[i&&(0,v.jsx)(r.Z,{type:"secret"}),e.is_collaborative&&(0,v.jsx)(r.Z,{type:"group"})]})]})}class _ extends i.Component{constructor(e){super(e),x(this,"getSections",(()=>{var e;if(null===(e=this.props.boardResource.data)||void 0===e||!e.all_boards)return[];const{searchQuery:t}=this.state,{boardResource:{data:{all_boards:n}}}=this.props;return t.length>=2?[{items:(0,u.j)(n,t)}]:[{items:n}]})),x(this,"createBtnDisabled",(()=>{var e;if(null===(e=this.props.boardResource.data)||void 0===e||!e.all_boards)return!1;const{boardResource:{data:{all_boards:t}}}=this.props,{searchQuery:n}=this.state;return t.some((e=>{var t;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())===n.toLowerCase()}))})),x(this,"handleBoardCreate",(e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:i}=this.props;n(),i?i(e):t({name:e,privacy:"public"}).then((e=>{const{onBoardChosen:t}=this.props;t(e)}))})),x(this,"handleBoardSelected",(e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})})),x(this,"handleSearchQueryUpdate",(e=>{this.setState({searchQuery:e})})),x(this,"renderRow",(({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return(0,v.jsx)(y,{board:e,hovered:t,searchQuery:n})})),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t,isBoardlessPinsBoard:n,isQuickCreatesBoard:i,isStoryPin:o,viewer:r}=this.props,{searchQuery:s,selectedBoard:l}=this.state;let d=this.props.i18n._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?d=i?this.props.i18n._("Choose board","BoardPickerFlyout.displayBoardName.quickCreatesBoard","Title for board picker when current board is a quick creates board"):n?this.props.i18n._("Profile","BoardPickerFlyout.displayBoarName.boardlessPins","Title indicating the pin is saved to profile"):t.name:l&&(d=l.name),(0,v.jsxs)(f.xu,{children:[(0,v.jsx)(f.$j,{accessibilityLabel:this.props.i18n._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&(0,v.jsx)(a.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:d||"",isStoryPin:o,onCreate:this.handleBoardCreate(r),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:s,sections:this.getSections()})]})}}function w(e){const t=(0,m.ZP)(),n=(0,o.useDispatch)(),i=(0,c.Z)(),r=i.isAuth?i.username:"",s=(0,o.useSelector)((({advertiser:e})=>e)),a=i.isAuth&&s&&s.owner_user_id!==i.id,u=a?s.id:null,h=a?s.owner_user_id:null,f=(0,l.Z)(),x=(0,p.Ms)(i,f),y=x||h,w=(0,d.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:y,...u&&h?{advertiser_id:u,filter:"protected",username:h}:{}},noCache:!0});return(0,v.jsx)(_,{...e,advertiser_id:u,boardResource:w,createBoard:e=>n((0,b.aX)(e,void 0,r)),invalidateBoardPickerBoardsResource:()=>{n((0,g.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker",...x?{username:x}:{username:h}}))},username:h,viewer:i,i18n:t})}},523890:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(667294),o=n(645871),r=n(354707),s=n(745252),a=n(913669),l=n(174523),d=n(883119),c=n(785893);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"setContainerRef",(e=>{this.containerRef=e})),u(this,"handleCreate",(()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()})),u(this,"handleSelectItem",(e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()})),u(this,"handleDropdownTouch",(()=>{this.setState((e=>({showFlyout:!e.showFlyout})))})),u(this,"handleHideFlyout",(e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()})),u(this,"hideFlyout",(()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})}))}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:i},isHovering:a,isStoryPin:l,onCreate:u,onSearchQueryUpdate:h,renderRow:p,searchQuery:g,sections:m,createBtnDisabled:f}=this.props,{showFlyout:b}=this.state;this.indexManager=new o.Z(m.map((e=>e.items))),this.indexManager.setSelectItem(this.handleSelectItem);const v=!g.trim()||!!f;return(0,c.jsxs)(d.xu,{ref:this.setContainerRef,flex:l?"grow":void 0,children:[(0,c.jsx)(d.iP,{fullWidth:!!l,onMouseEnter:n,onMouseLeave:i,onTap:this.handleDropdownTouch,rounding:2,children:(0,c.jsxs)(d.xu,{alignItems:"center",color:a?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:l?4:3,rounding:l?4:2,children:[(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:(0,c.jsx)(d.xv,{weight:"bold",children:e})}),(0,c.jsx)(d.JO,{accessibilityLabel:"",color:"darkGray",icon:"arrow-down",size:14})]})}),b&&(0,c.jsx)(d.xu,{position:"relative",children:(0,c.jsxs)(d.xu,{borderStyle:"sm",color:"white",direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:l?4:2,width:"100%",zIndex:new d.Ry(1),children:[(0,c.jsx)(d.xu,{children:(0,c.jsxs)(d.xu,{display:"flex",marginStart:-1,marginEnd:-1,padding:2,children:[(0,c.jsx)(d.xu,{display:"flex",flex:"grow",paddingX:1,children:(0,c.jsx)(r.Z,{hideIcon:!0,indexManager:this.indexManager,onChange:h,value:g})}),u&&(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{disabled:v,onClick:this.handleCreate,text:this.props.i18n._("Create","board or section dropdown create button","board or section dropdown create button")})})]})}),(0,c.jsx)(s.Z,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:p,sections:m})]})})]})}}function p(e){const t=(0,l.ZP)(),{isHovering:n,hoverHandlers:i}=(0,a.Z)();return(0,c.jsx)(h,{...e,i18n:t,isHovering:n,hoverHandlers:i})}},221487:(e,t,n)=>{n.d(t,{x:()=>b,Z:()=>v});var i=n(667294),o=n(40142),r=n(234316),s=n(523890),a=n(535718),l=n(178862),d=n(223419),c=n(174523),u=n(883119),h=n(785893);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g="NO_SECTION_VALUE";function m({section:e,hovered:t,searchQuery:n}){return(0,h.jsxs)(u.xu,{children:[(0,h.jsx)(u.xu,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:(0,h.jsx)(u.xu,{flex:"grow",children:(0,h.jsx)(u.xv,{weight:"bold",children:(0,d.We)(n,e.title)})})}),e.id===g&&(0,h.jsx)(u.iz,{})]})}class f extends i.Component{constructor(...e){super(...e),p(this,"state",{searchQuery:""}),p(this,"getPickerSections",(()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let i=t&&t.data||[];return i=n?i.filter((e=>e.id!==n)):[{id:g,title:this.props.i18n._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...i],e.length>=2&&(i=(0,l.j)(i,e,"title")),[{items:i}]})),p(this,"createBtnDisabled",(()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some((e=>{var n;return(null===(n=e.title)||void 0===n?void 0:n.toLowerCase())===t.toLocaleLowerCase()}))})),p(this,"handleSectionCreate",(()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:i,onSectionCreate:o}=this.props,{searchQuery:s}=this.state;o?o(s):i&&e.id&&i((0,r.Z)({boardId:e.id,name:s},this.props.i18n)).then((e=>{n&&n.refresh(),this.setState({searchQuery:""}),t(e)}))})),p(this,"handleSectionSelected",(e=>{const{onSectionChange:t}=this.props;e.id===g?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))})),p(this,"handleSearchQueryUpdate",(e=>{this.setState({searchQuery:e})})),p(this,"renderRow",(({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return(0,h.jsx)(m,{hovered:t,searchQuery:n,section:e})}))}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refresh()}}render(){const{isStoryPin:e,sectionsResource:t,selectedSectionId:n,mergingFromSectionId:i,selectedSectionName:o}=this.props,{searchQuery:r}=this.state;let a=i?this.props.i18n._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):this.props.i18n._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(n){let e;t&&t.data&&(e=t.data.find((e=>e.id===n))),a=e&&e.title||a}else o&&(a=o);return(0,h.jsxs)(u.xu,{children:[(0,h.jsx)(u.$j,{accessibilityLabel:this.props.i18n._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&(0,h.jsx)(s.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:a,isStoryPin:e,onCreate:i?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getPickerSections()})]})}}function b(e){const t=(0,c.ZP)();return(0,h.jsx)(f,{...e,dispatch:(0,o.useDispatch)(),i18n:t})}function v(e){const t=(0,a.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id},noCache:!0});return(0,h.jsx)(b,{...e,sectionsResource:t})}},354707:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(631739),r=(n(645871),n(883119)),s=n(174523),a=n(785893);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.Component{constructor(...e){super(...e),l(this,"setInputRef",(e=>{e&&(this._input=e)})),l(this,"handleKeyDown",(e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case o.Z.KeyCode.ENTER:case o.Z.KeyCode.NUMPAD_ENTER:e.preventDefault(),n.select();break;case o.Z.KeyCode.UP:e.preventDefault(),n.prev();break;case o.Z.KeyCode.DOWN:e.preventDefault(),n.next()}}))}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return(0,a.jsx)("div",{onKeyDown:this.handleKeyDown,role:"presentation",style:{width:"100%"},children:(0,a.jsx)(r.Um,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:this.props.i18n._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t})})}}const c=function(e){const t=(0,s.ZP)();return(0,a.jsx)(d,{...e,i18n:t})}},63447:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(667294),o=n(223419),r=n(189552),s=n(913669),a=n(174523),l=n(883119),d=n(785893);function c(e){const t=(0,a.ZP)(),{buttonLabel:n,isRowItem:i,hasHoverState:o,name:r,onClick:c}=e,{isHovering:u,hoverHandlers:h}=(0,s.Z)(),p=r||n||t._("Create board"," - "," -- ");return(0,d.jsx)(l.iP,{onMouseEnter:h.onMouseOver,onMouseLeave:h.onMouseLeave,onTap:c,children:(0,d.jsxs)(l.xu,{alignItems:"center",color:o&&u?"lightGray":"white",display:"flex",flex:i?"shrink":"none",height:64,width:"100%",children:[(0,d.jsx)(l.xu,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton",children:(0,d.jsx)(l.JO,{accessibilityLabel:t._("Add a board"," - "," -- "),size:"32",icon:"add-circle",color:"red"})}),r?(0,d.jsx)(l.xu,{margin:1,children:(0,d.jsxs)(l.xv,{inline:!0,overflow:"normal",children:[" ",t._("Create: "," - "," -- ")," "]})}):null,(0,d.jsxs)(l.xv,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",p," "]})]})})}var u=n(645871),h=n(354707),p=n(745252),g=n(670473);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends i.Component{constructor(...e){super(...e),m(this,"state",{searchQuery:""}),m(this,"handleSelectItem",(e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})})),m(this,"handleSearchQueryInput",(e=>{this.setState({searchQuery:e})})),m(this,"renderSectionHeader",((e,t)=>e.title?(0,d.jsxs)(l.xu,{children:[t>0&&(0,d.jsx)(l.iz,{}),(0,d.jsx)(l.xu,{paddingX:3,paddingY:1,children:(0,d.jsx)(l.xv,{size:"md",children:e.title})})]}):null)),m(this,"renderRow",(({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:i,isSelectMode:r,disabledRowId:s}=this.props,{searchQuery:a}=this.state,{inSectionSelection:l=!1}=n,c=i&&i.board===e.id?i&&i.state:null,u="board_section"===e.type;return(0,d.jsx)(o.ZP,{disabled:e.id===s&&l,isSection:u,isSelectMode:r,isWithinSectionPicker:l,item:e,saveState:c,searchQuery:a,selected:t})}))}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:i,isLoaded:o,onCreate:s,pinId:a}=this.props;if(o){const{searchQuery:o}=this.state,g=i(o);return this.indexManager=new u.Z(g.map((e=>e.items))),this.indexManager.setSelectItem(this.handleSelectItem),(0,d.jsxs)(l.xu,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!n&&(0,d.jsxs)(l.xu,{children:[(0,d.jsx)(l.xu,{paddingX:3,marginBottom:4,marginTop:1,children:(0,d.jsx)(h.Z,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:o})}),(0,d.jsx)(l.iz,{})]}),(0,d.jsx)(p.Z,{disabled:!!e,grow:!n&&!o,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:g}),(0,d.jsx)(l.iz,{}),s&&(0,d.jsx)(c,{buttonLabel:t,hasHoverState:!0,name:o,onClick:()=>s(o)}),n&&s&&a&&(0,d.jsx)(r.Z,{onBoardSelected:s,pinId:a})]})}return(0,d.jsx)(l.xu,{paddingY:5,children:(0,d.jsx)(l.$j,{accessibilityLabel:this.props.i18n._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0})})}}function b(e){const t=(0,a.ZP)(),n=(0,g.iN)();return(0,d.jsx)(f,{...e,boardPickerStopwatch:n,i18n:t})}},178862:(e,t,n)=>{n.d(t,{j:()=>r});const i={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},o=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=i[e.charAt(n)]||e.charAt(n);return t},r=(e,t,n="name")=>{const i=t.toLowerCase();return e.filter((e=>((e,t)=>{const n=t.split(" "),i=e.split(" ");let r=0;for(let s=0;s<i.length;s+=1)(o(i[s]).includes(n[r])||i[s].includes(n[r]))&&(r+=1);return r===n.length})(e[n].toLowerCase(),i)))}},585967:(e,t,n)=>{n.d(t,{P2:()=>s,Mf:()=>a,LC:()=>l,fH:()=>d,B:()=>c});var i=n(667294),o=n(785893);const r=(0,i.createContext)(),s=r.Provider;function a(e){function t(t){const n=(0,i.useContext)(r);if(!n)throw new Error("withRequestContext must be used within a RequestContextProvider");return(0,o.jsx)(e,{...t,requestContext:n})}return t.displayName=`withRequestContext(${String(e.displayName||e.name)})`,t}const l=({children:e})=>{const t=(0,i.useContext)(r);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)},d=({children:e})=>{const t=(0,i.useContext)(r);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t)};function c(){const e=(0,i.useContext)(r);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e}},904126:(e,t,n)=>{n.d(t,{K:()=>i});const i={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},955801:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(823493),r=n.n(o);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",(e=>{this.containerRef=e})),s(this,"fetchMoreIfNecessary",r()((()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:n},i)=>e+t+(i?i(t):2*t)>n)(this.containerRef,t)&&e()}),200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},500115:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(382745),o=n(855168);function r(e){const t=(0,o.TH)(),n=(0,o.UO)(),r=(0,o.k6)();return()=>{if(e&&(0,i.L6)(t)&&n.id===e.id){var o,s,a,l;const t="quick_saves"===(null===(o=e.board)||void 0===o?void 0:o.layout)||"quick_creates"===(null===(s=e.board)||void 0===s?void 0:s.layout)?"/me/":null!==(a=null===(l=e.board)||void 0===l?void 0:l.url)&&void 0!==a?a:"/";r.replace(t)}}}},639387:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(0,n(445443).Z)((e=>e.pin&&e.pin.id?{...e,id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}:null))},860179:(e,t,n)=>{n.d(t,{bI:()=>o,Fk:()=>r,lJ:()=>s,lI:()=>a,qW:()=>l,mS:()=>d,gw:()=>c,Uo:()=>u,j1:()=>h,fS:()=>p,Cq:()=>g,km:()=>m,Dk:()=>f});var i=n(883119);const o=new i.Ry(0),r=new i.Ry(1),s=2,a=new i.Ry(s),l=2,d=new i.Ry(l),c=new i.Ry(3),u=new i.Ry(1),h=new i.Ry(3),p=3,g=4,m=new i.Ry(5),f=new i.Ry(100)},606657:(e,t,n)=>{n.r(t),n.d(t,{CarouselSliders:()=>g,default:()=>m});var i=n(40142),o=n(224982),r=n(589444),s=n(174523),a=n(560133),l=n(549135),d=n(883119),c=n(785893);const u={slider:{cursor:"pointer",padding:"30px 16px",position:"relative",zIndex:"105",pointerEvents:"auto"}},h=(e,t,n,i,o,r,s,d,c,u)=>{if(!u||!o){const{carousel_slots:u,id:h}=o;(0,l.j)(108,{...c,objectId:t,component:d,view:s,viewParameter:r,eventData:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[n])&&Number(u[n].id),carouselDataId:Number(h),carouselSlotIndex:n,toCarouselSlotIndex:i}},...(0,a.Kl)(e)||{}})}},p=(e,t,n,i,o,r)=>{r||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,n)),void 0!==o&&o(n)},g=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:i,pin:o,pinId:r,contextLogData:a,viewParameter:l,viewType:g,componentType:m,isEditMode:f,forwardNode:b,backNode:v})=>{const x=(0,s.ZP)();if(!t)return null;const{carousel_slots:y=[],index:_=0}=t,w=void 0!==e?e:_,C=Math.max(0,w-1),j=Math.min(y.length-1,w+1);return(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",position:"absolute",alignItems:"center",left:!0,right:!0,bottom:!0,top:!0,children:[(0,c.jsx)("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{p(e,r,C,n,i,f),h(o,r,w,C,t,l,g,m,a,f)},onKeyUp:e=>{p(e,r,C,n,i,f),h(o,r,w,C,t,l,g,m,a,f)},style:u.slider,children:w>0&&(0,c.jsx)(d.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:v||(0,c.jsx)(d.JO,{color:"white",icon:"arrow-back",accessibilityLabel:x._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")})})}),(0,c.jsx)("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{p(e,r,j,n,i,f),h(o,r,w,j,t,l,g,m,a,f)},onKeyUp:e=>{p(e,r,j,n,i,f),h(o,r,w,j,t,l,g,m,a,f)},style:u.slider,children:w<y.length-1&&(0,c.jsx)(d.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:b||(0,c.jsx)(d.JO,{color:"white",icon:"arrow-forward",accessibilityLabel:x._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")})})})]})},m=(0,i.connect)((({pins:e},{carouselData:t,pinId:n})=>{const i=e[n];return{pin:i,carouselData:t||(0,r.Z)({pin:i})}}),(e=>({changeCarouselSlotIndex:(t,n)=>e((0,o.Z)(t,n))})))(g)},494353:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(881220),o=n(174523),r=n(946753),s=n(883119),a=n(785893);function l({boardName:e,boardUrl:t,isBoardlessPin:n,isFromPinBuilder:l,newPin:d,onChangeButtonClick:c,onVisitButtonClick:u=(()=>{}),onHide:h,onUndo:p,pinImageUrl:g}){const m=(0,o.ZP)(),f=(0,a.jsx)(s.xu,{color:"lightGray",display:"flex",height:48,overflow:"hidden",width:48,children:(0,a.jsx)(s.xu,{padding:3,children:(0,a.jsx)(s.JO,{accessibilityLabel:m._("Saved to profile thumbnail","PostSavedPinToast.thumbnail.accessibilityLabel","Thumbnail for saved to profile."),color:"darkGray",icon:"history",size:24})})}),b=(!!c||!!p)&&(0,a.jsx)(s.zx,{text:d&&n&&c?m._("Change","PostSavedPinToast.ChangeButton","Change saved pin to a different destination"):m._("Undo","PostSavedPinToast.UndoButton","Undo Saved Pin"),size:"lg",onClick:d&&n&&c?()=>c(d):p},"button-key"),v=(0,a.jsx)(s.zx,{text:m._("Visit","PostSavedPinToast.VisitButton","Visit Pin saved from PinBuilder"),size:"lg",onClick:u});return(0,a.jsx)(i.Z,{button:l?v:b,duration:n?6e3:3e3,iconThumbnail:n?f:void 0,imageUrl:g,onHide:h,text:(0,a.jsx)(s.xv,{size:"md",overflow:"normal",children:(0,r.nk)(m._("Saved to {{ destination }}","PostSavedPinToast.SavedToBoardLabel","Saved to label for better save"),{destination:(0,a.jsx)(s.rU,{href:n?"/me/":null!=t?t:"",children:(0,a.jsx)(s.xv,{size:"md",weight:"bold",lineClamp:1,children:e},"PostSavedPinToastBoardName")})})})})}},596885:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(395553),o=n(883119),r=n(785893);function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:s,onEditSubmit:a,onToggleModal:l,pinId:d,variant:c,viewParameter:u,shouldUseLegoStyles:h}=e,p="pin"===c?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return(0,r.jsxs)(o.xu,{alignItems:"center",display:"flex",direction:"row",marginStart:"pin"===c?-1:void 0,marginEnd:"pin"===c?-1:void 0,paddingX:"closeup"!==c||h?void 0:2,width:"closeup"===c?"100%":void 0,height:"100%",children:[t&&(0,r.jsx)(o.xu,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),(0,r.jsx)(o.xu,{paddingX:1,flex:"none",marginStart:"auto",children:(0,r.jsx)(i.default,{component:0,onDelete:s,onSubmit:a,pinId:d,onToggleModal:l,viewParameter:u,carouselSlotCurrentIndex:n,style:p,shouldUseLegoStyles:h,useLegoStyles:"pin"===c})})]})}},645871:(e,t,n)=>{n.d(t,{Z:()=>s});const i={row:0,section:0},o={row:-1,section:-1},r=()=>{};class s{constructor(e){this.index=Object.assign({},i),this.sections=e,this.updateCallback=r,this.selectItem=r}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===o.row&&t===o.section?this.index=Object.assign({},i):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===o.row&&t===o.section)this.index=Object.assign({},i);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},o),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},745252:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(955801),r=(n(645871),n(883119)),s=n(785893);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.Component{constructor(e){super(e),a(this,"setSelectedItemRef",(e=>{this.selectedItemRef=e})),a(this,"handleIndexUpdate",(e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})})),a(this,"handleSelectItem",(e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)})),a(this,"handleMouseEnter",(e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)})),a(this,"handleMouseLeave",(()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()})),a(this,"renderItems",((e,t)=>{const{renderItem:n}=this.props,{selectedIndex:i}=this.state,{row:o,section:a}=i||{},{customProps:l={},items:d,renderItem:c}=e,{isDisabled:u=(e=>!1)}=l,h=t===a,p=c||n;return p&&d.map(((e,n)=>{const i=u(e),a={section:t,row:n},d=h&&n===o;return(0,s.jsx)(r.xu,{"data-test-id":"board-selection",ref:!i&&d?this.setSelectedItemRef:null,children:i?p({item:e,hovered:d,sectionProps:l}):(0,s.jsx)(r.iP,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(a),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:p({item:e,hovered:d,sectionProps:l})})},n)}))})),a(this,"renderSections",(()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map(((t,n)=>(0,s.jsxs)(r.xu,{children:[e&&e(t,n),this.renderItems(t,n)]},n)))}));const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),i=n.top,o=n.bottom,r=t.getBoundingClientRect(),s=r.top;o>=r.bottom?e.scrollIntoView(!1):i<=s&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return(0,s.jsx)(o.Z,{fetchMore:n,children:({setRef:n,onScroll:i})=>(0,s.jsx)(r.xu,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",ref:e=>{this.containerRef=e,n(e)},children:this.renderSections()})})}}},729787:(e,t,n)=>{n.d(t,{W:()=>s,Z:()=>a});var i=n(883119),o=n(785893);const r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return(0,o.jsx)(i.xu,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:r,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function a({disabled:e,name:t,onClick:n,size:r,submitting:a,text:l}){return(0,o.jsxs)(i.xu,{display:"flex",position:"relative",children:[a&&(0,o.jsx)(s,{}),(0,o.jsx)(i.zx,{color:"red",disabled:e||a,name:t,onClick:n,size:r,type:"submit",text:l})]})}},732891:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);function s({handleFollowClick:e,isFollowing:t,isSelf:n,disabled:s,isSecondaryColor:a}){const l=(0,i.ZP)(),d=t?l._("Unfollow"," - "," -- "):l._("Follow"," - "," -- ");return n?(0,r.jsx)(o.zx,{disabled:!0,text:l._("That's you!","Text describing that the person's avatar is you","Text describing that the person's avatar is you")}):(0,r.jsx)(o.zx,{color:t||a?"gray":"red",onClick:e,text:d,disabled:s})}},558491:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(667294),o=n(40142),r=n(151101),s=n(294184),a=n.n(s),l=n(732891),d=n(320145),c=n(883119),u=n(289605),h=n(549135),p=n(785893);const g=(0,o.connect)(null,(function(e){return{follow:t=>e((0,u.ZN)(t)),unfollow:t=>e((0,u.fv)(t))}}))((function({className:e,follow:t,isSelf:n,logData:o,showName:s=!1,showFollow:u=!1,showVerified:g=!1,size:m="small",subtitle:f="",title:b,unfollow:v,user:x={}}){const[y,_]=(0,i.useState)(x.explicitly_followed_by_me||!1),{domain_verified:w,full_name:C,is_verified_merchant:j,username:S}=x,I=x.image_key||x.image_medium_url||x.image_small_url;return(0,p.jsx)("div",{className:a()("User","hasText","thumb",m,e),children:(0,p.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,paddingY:1,children:[(0,p.jsx)(c.xu,{flex:"grow",paddingX:1,children:(0,p.jsx)(c.iP,{role:"link",href:`/${S}/`,children:(0,p.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,p.jsx)("div",{className:"thumbImageWrapper",children:(0,p.jsx)(r.Z,{name:C,src:I,size:"fit"})}),b&&(0,p.jsx)("h3",{className:"title",children:b}),s&&(0,p.jsx)("h4",{className:"fullname",children:g&&(j||w)?(0,p.jsx)(d.Z,{badgeSize:"sm",badgeSpacing:2,fullName:null!=C?C:"",identityIsVerified:w,isVerifiedMerchant:j}):C}),f&&(0,p.jsx)("div",{className:"subtitle",children:f})]})})}),u&&(0,p.jsx)(c.xu,{paddingX:1,children:(0,p.jsx)(l.Z,{handleFollowClick:()=>{y?(v(x.id),_(!1)):(t(x.id),_(!0)),o&&(0,h.j)(101,o)},isFollowing:y,isSelf:Boolean(n)})})]})})}))},320145:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(234070),r=n(883119),s=n(785893);const a=function({badgeSize:e,badgeSpacing:t,fullName:n,identityIsVerified:a,isVerifiedMerchant:l,truncate:d=!1}){const c=n.split(" "),u=c.slice(0,c.length-1).join(" "),h=" ".concat(c[c.length-1]);return d?(0,s.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,s.jsx)(r.xv,{lineClamp:1,weight:"bold",children:n}),(0,s.jsx)(r.xu,{flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},paddingX:1,children:(0,s.jsx)(o.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]}):(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("span",{children:u}),(0,s.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[h," ",(0,s.jsx)(r.xu,{display:"inlineBlock",flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},children:(0,s.jsx)(o.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]})]})}},234070:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(702925),r=n(174523),s=n(883119),a=n(785893);const l={xs:12,sm:16,md:20,lg:24};function d({children:e}){const t=(0,r.ZP)();return(0,a.jsx)(s.u,{link:(0,a.jsx)(s.rU,{href:o.Z.settings.HELP_SHOPPING_WITH_PINTEREST,target:"blank",children:(0,a.jsx)(s.xv,{color:"white",size:"sm",weight:"bold",children:t._("Learn more","verifiedBadge.tooltip.link","Learn more about Pinterest's Merchant Guidelines")})}),text:t._("This retailer meets Pinterest's Merchant Guidelines","merchantVerification.badge.tooltip","Badge indicating that a merchant or user is verified"),children:e})}function c({hasVerifiedIdentity:e,iconOnly:t,isVerifiedMerchant:n,showText:o,size:c}){const u=(0,r.ZP)(),h=(0,a.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(s.JO,{accessibilityLabel:u._("Merchant verification badge icon","merchantVerification.badge.icon","Badge indicating that a merchant or user is verified"),color:"blue",icon:"workflow-status-ok",inline:!0,size:l[c]}),o&&(0,a.jsx)(s.xu,{marginStart:2,children:(0,a.jsx)(s.xv,{color:"blue",inline:!0,weight:"bold",children:u._("Verified merchant","creator.header.verifiedMerchant","this merchant is a verified merchant")})})]});return(0,a.jsxs)(i.Fragment,{children:[n&&!t&&(0,a.jsx)(d,{children:h}),n&&t&&h,e&&!n&&(0,a.jsx)(s.JO,{accessibilityLabel:u._("Domain verification icon","domainVerification.badge.icon","Badge indicating that a merchant or user is verified"),color:"red",icon:"check-circle",size:l[c]})]})}},325946:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(21755),o=n(585967),r=n(785893);function s({activate:e,children:t,isEligible:n,name:s}){return(0,r.jsx)(o.LC,{children:o=>(0,r.jsx)(i.Z,{activate:e,group:o.experiments.v2GetGroup(s)||"",isEligible:n,name:s,children:t})})}},799092:(e,t,n)=>{n.d(t,{Z:()=>I,Y:()=>S});var i=n(667294),o=n(151101),r=n(313243),s=n(269935),a=n(238402),l=n(40142),d=n(160277),c=n(451190),u=n(6582);const h=({id:e,viewParameter:t,viewType:n})=>(0,u.c)({id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"pin"});var p=n(311866),g=n(881220),m=n(174523),f=n(475446),b=n(883119),v=n(785893);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends i.PureComponent{constructor(...e){var t;super(...e),t=this,x(this,"state",{showModal:!1,reportType:null}),x(this,"handleDismiss",(()=>this.setState({showModal:!1}))),x(this,"handleClick",(()=>{const{reportType:e}=this.state;"image"===e?this.reportSuggestionImage():this.reportSuggestionText()})),x(this,"reportSuggestionImage",(async function(){const{imgSignature:e,reportImage:n}=t.props;t.setState({showModal:!1});n((await p.ZP.create("GetPinFromSignature",{imgSignature:e}).callGet()).resource_response.data.id)})),x(this,"reportSuggestionText",(()=>{const{handleReport:e,toastManagerContext:t}=this.props;e&&(e(),t.showToast((({onHide:e})=>(0,v.jsx)(g.Z,{onHide:e,text:this.props.i18n._("Thanks for your report! This will be reviewed by our Trust and Safety Team","ReportingFlag.Toast.text","Toast after reporting a search suggestion")}))),this.handleDismiss())})),x(this,"showModal",(({event:e})=>{e.stopPropagation(),e.preventDefault(),this.setState({showModal:!0})}))}render(){const{showModal:e}=this.state;return(0,v.jsxs)(i.Fragment,{children:[this.props.isVisible&&(0,v.jsx)(d.Z,{onClick:this.showModal,backgroundHaloSize:24}),e&&(0,v.jsx)(c.Z,{accessibilityModalLabel:this.props.i18n._("Report search term","ReportingFlag.Modal.accessibilityModalLabel","accessible label for report suggestion modal"),heading:this.props.i18n._("Report search term","ReportingFlag.Modal.heading","Heading for report suggestion modal"),onDismiss:this.handleDismiss,size:"sm",children:(0,v.jsxs)(b.xu,{children:[(0,v.jsx)(b.xu,{padding:5,children:(0,v.jsx)(b.xv,{children:this.props.i18n._("When you flag this, our Trust and Safety team will review it. If it doesn't meet our Community Guidelines, it will be blocked.","ReportingFlag.Box.Text.report","What will happen when you report a suggestion")})}),(0,v.jsxs)(b.xu,{role:"list",display:"flex",direction:"column",marginBottom:4,paddingX:5,children:[(0,v.jsxs)(b.xu,{alignItems:"center",paddingY:1,display:"flex",direction:"row",children:[(0,v.jsx)(b.EU,{checked:"text"===this.state.reportType,id:"textType",onChange:()=>this.setState({reportType:"text"}),value:"Report search text"}),(0,v.jsx)(b.xu,{flex:"grow",children:(0,v.jsx)(b.__,{htmlFor:"textType",children:(0,v.jsx)(b.xu,{paddingX:2,children:(0,v.jsx)(b.xv,{children:"Report search text"})})})})]}),(0,v.jsxs)(b.xu,{alignItems:"center",paddingY:1,display:"flex",direction:"row",children:[(0,v.jsx)(b.EU,{checked:"image"===this.state.reportType,id:"imageType",onChange:()=>this.setState({reportType:"image"}),value:"Report search image"}),(0,v.jsx)(b.xu,{flex:"grow",children:(0,v.jsx)(b.__,{htmlFor:"imageType",children:(0,v.jsx)(b.xu,{paddingX:2,children:(0,v.jsx)(b.xv,{children:"Report search image"})})})})]})]}),(0,v.jsx)(b.iz,{}),(0,v.jsxs)(b.xu,{display:"flex",justifyContent:"end",padding:2,children:[(0,v.jsx)(b.xu,{margin:2,children:(0,v.jsx)(b.zx,{fullWidth:!0,onClick:this.handleDismiss,text:this.props.i18n._("Cancel","ReportingFlag.Box.Button.text.cancel","Text for cancel button when reporting search suggestion")})}),(0,v.jsx)(b.xu,{margin:2,children:(0,v.jsx)(b.zx,{fullWidth:!0,color:"red",onClick:this.handleClick,text:this.props.i18n._("Report","ReportingFlag.Box.Button.text.report","Button label to report search suggestion"),disabled:!this.state.reportType})})]})]})})]})}}const _=(0,l.connect)(null,((e,t)=>({reportImage:n=>e(h({id:n,viewParameter:t.viewParameter,viewType:t.viewType}))})))((0,f.Cl)((function(e){const t=(0,m.ZP)();return(0,v.jsx)(y,{...e,i18n:t})})));var w=n(754999),C=n(34411),j=n(565121);const S=({storyCategory:e,query:t,referringSource:n,bubbleId:i,storyId:o})=>{const r=[0,24,21,26].includes(e),s=(0,a.Z)({q:t,rs:n||void 0,b_id:i,source_id:o});return r?`/discover/article/${i}`:"/search/pins/"+(s?"?"+s:"")};function I({bubble:e,height:t,storyId:n,width:a,onClick:l,referringSource:d,contextLogData:c,viewType:u,viewParameter:h,slotIndex:p,handleReport:g,showFlag:f,imgSignature:x,onMouseEnter:y,onMouseLeave:I,isHovered:P,disableTabIndex:E}){const T=(0,m.ZP)(),D=(0,C.Z)(),{id:k,action:O,cover_images:B,dominant_colors:R,identifier_icon_type:M,title:A,story_category:L,curator:Z}=e,N=B&&B[0]?B[0]["280x280"]||B[0]["236x"]:void 0,F=(0,w.Z)(A&&A.format||"",A&&A.args||{}),z=R&&R.length?R[0]:"gray",H=(null==O?void 0:O.url)||S({storyCategory:L,query:F,referringSource:d,bubbleId:k,storyId:n});return(0,v.jsx)(s.Z,{impressionAuxFields:{storyCategory:L,storyIdStr:n},impressionType:"Article",loggingId:k,viewType:u,viewParameter:h,slotIndex:p,contextLogData:{story_id:n,...c},children:(0,v.jsx)(r.Z,{backgroundColor:z,coverImage:N,height:t,id:k,isHovered:P,onClick:l,onMouseEnter:y,onMouseLeave:I,url:H,width:a,disableTabIndex:E,children:({isHovered:e})=>(0,v.jsxs)(i.Fragment,{children:[Z&&26!==L&&(0,v.jsx)(b.xu,{position:"absolute",top:!0,left:!0,padding:2,children:(0,v.jsx)(o.Z,{outline:!0,size:"xs",src:Z.image_small_url,name:Z.full_name})}),M&&M!==j.J&&(0,v.jsx)(b.xu,{alignItems:"center",color:"white",display:"flex",height:24,justifyContent:"center",left:!0,margin:2,opacity:.8,position:"absolute",rounding:"circle",top:!0,width:24,children:(0,v.jsx)(b.JO,{icon:(0,j.H)(M),accessibilityLabel:T._("Shopping icon","bubble.shoppingIcon.label","Accessibility label for bubble shopping Icon"),color:"darkGray",size:12})}),(0,v.jsx)(b.xu,{display:"flex",height:t,width:a||"100%",position:"absolute",top:!0,padding:3,alignItems:26===L?"end":"center",justifyContent:"center",children:(0,v.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[t>200?(0,v.jsx)(b.X6,{size:"md",align:"center",color:"white",children:F}):(0,v.jsx)(b.xv,{align:"center",color:"white",weight:"bold",children:F}),Z&&26===L&&(0,v.jsxs)(b.xu,{display:"flex",justifyContent:"center",alignItems:"center",marginTop:4,children:[(0,v.jsx)(b.xu,{marginEnd:2,children:(0,v.jsx)(o.Z,{outline:!0,size:"xs",src:Z.image_small_url,name:Z.full_name})}),(0,v.jsx)(b.xv,{size:"sm",color:"white",children:Z.full_name})]})]})}),D.isAuth&&D.isEmployee&&f?(0,v.jsx)(b.xu,{position:"absolute",bottom:!0,right:!0,marginBottom:1,children:(0,v.jsx)(_,{handleReport:g,viewType:u,viewParameter:h,imgSignature:x||"",isVisible:e})}):null]})})})}},313243:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(883119),r=n(785893);const s={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"}};function a({backgroundColor:e,children:t,coverImage:n,height:a,id:l,isHovered:d,onMouseEnter:c,onMouseLeave:u,onClick:h,url:p,width:g,disableTabIndex:m}){var f,b;const[v,x]=(0,i.useState)(!1),y=()=>{c?c():x(!0)},_=()=>{u?u():x(!1)},w=d||v;return(0,r.jsx)(o.iP,{role:"link",href:p,onBlur:_,onMouseLeave:_,onFocus:y,onMouseEnter:y,onTap:()=>{null==h||h(l)},rounding:4,tabIndex:m?-1:void 0,children:(0,r.jsx)(o.zd,{rounding:4,width:g||"100%",height:a,children:null!=n&&n.url?(0,r.jsxs)(o.Ee,{alt:"",color:e,fit:"cover",naturalHeight:null!==(f=n.height)&&void 0!==f?f:1,naturalWidth:null!==(b=n.width)&&void 0!==b?b:1,role:"presentation",src:n.url,children:[(0,r.jsx)(o.xu,{height:"100%",width:"100%",dangerouslySetInlineStyle:{__style:w?s.hoverOverlay:s.bubbleOverlay}}),"function"==typeof t?t({isHovered:w}):t]}):(0,r.jsx)(o.xu,{height:"100%",width:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:e}}})})})}},643011:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(799092),o=n(269935),r=n(282972),s=n(535258),a=n(549135),l=n(565121),d=n(883119),c=n(785893);const u=s.xf;function h({contextLogData:e,bubbles:t,id:n,referringSource:s,slotIndex:h,storyType:p,title:g,titleIcon:m,viewType:f,viewParameter:b}){const v=t.map((({type:e,id:t})=>e+":"+t)).join("|");return(0,c.jsx)(o.Z,{viewType:f,componentType:200,viewParameter:b,loggingId:n,contextLogData:{story_type:p,objectId:n,content_ids:v,...e},impressionType:"Story",slotIndex:h,children:(0,c.jsxs)(d.xu,{children:[g&&(0,c.jsxs)(d.xu,{display:"flex",marginBottom:1,justifyContent:"center",alignItems:"center",children:["number"==typeof m&&m!==l.J&&(0,c.jsx)(d.xu,{marginEnd:2,dangerouslySetInlineStyle:{__style:{paddingTop:1}},children:(0,c.jsx)(d.JO,{accessibilityLabel:"",color:"darkGray",icon:(0,l.H)(m),size:14})}),(0,c.jsx)(d.xv,{weight:"bold",children:(0,r.Z)(g)})]}),t.map(((e,t)=>(0,c.jsx)(d.xu,{paddingY:1,flex:"none",children:(0,c.jsx)(i.Z,{bubble:e,onClick:e=>{(0,a.j)(101,{objectId:e,view:f,viewParameter:b,component:200})},referringSource:s,height:103,width:u,storyId:n,viewType:f,viewParameter:b,slotIndex:t,contextLogData:{content_ids:v,story_type:p}})},`bubble-${e.id}`)))]})})}},160277:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294);const o={backgroundColor:"transparent"},r={backgroundColor:"rgba(216, 216, 216, 0.37)"},s={borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},a={outline:"0"};var l=n(883119),d=n(785893);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.Component{constructor(...e){super(...e),c(this,"state",{hovered:!1}),c(this,"handleMouseEnter",(()=>this.setState({hovered:!0}))),c(this,"handleMouseLeave",(()=>this.setState({hovered:!1})))}render(){const{backgroundHaloSize:e,onClick:t}=this.props,n={height:e,width:e},i={border:0,display:"block",background:"transparent",cursor:"pointer",...a},c={...s,...o,...this.state.hovered?r:{}};return(0,d.jsx)("button",{type:"button",style:i,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:e=>t&&t({event:e}),children:(0,d.jsx)("div",{style:{...n,...c},children:(0,d.jsx)(l.xu,{rounding:"circle",children:(0,d.jsx)(l.JO,{accessibilityLabel:"",icon:"flag",size:e/2,color:"lightGray"})})})})}}const h=u},527082:(e,t,n)=>{function i({appliedProductFilters:e,autoCorrectionDisabled:t,filters:n,query:i,scope:o,selectedPinImgSig:r,user:s}){const a=[o,n,e,s,r,i].map((e=>null!=e?e:"")).join(":");return t?"auto-correction-disabled:"+a:a}function o({autoCorrectionDisabled:e=!1,appliedProductFilters:t=null,bubbleId:n=null,filters:i=null,query:o=null,rs:r="direct_navigation",scope:s="pins",selectedPinImgSig:a=null,sourceId:l=null,user:d}){return{article:n,appliedProductFilters:t,auto_correction_disabled:e,corpus:a?"personalize":null,customized_rerank_type:a?"manas_graph_sage_only_wand_rewrite":null,filters:i,query:o,query_pin_sigs:a,redux_normalize_feed:!0,rs:r,scope:s,source_id:l,user:d}}function r(e){const{autoCorrectionDisabled:t,appliedProductFilters:n,filters:i,selectedPinImgSig:r,query:s,rs:a,scope:l,bubbleId:d,user:c}=e;return{name:"BaseSearchResource",options:o({autoCorrectionDisabled:!!t,appliedProductFilters:n,filters:i,query:s,rs:a,scope:l,selectedPinImgSig:r,bubbleId:d,user:c})}}n.d(t,{Tb:()=>i,dM:()=>o,Ht:()=>r})},317461:(e,t,n)=>{n.d(t,{GY:()=>a,PY:()=>l,r$:()=>d,LM:()=>c});var i=n(730762),o=n(281996),r=n(549135);const s=["search_articles_story","search_pinner_authority_hero","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2"];function a({query:e,scope:t}){return`${e}-${t}`}function l({category:e,domains:t,maxPrice:n,minPrice:i}){return[e,t,n,i].map((e=>null!=e?e:"")).join("-")}function d({query:e,rs:t,scope:n}){const s=i.Z.getInstance().getPreviousViewFromContext();if(!(!s.view_type&&!s.view_parameter)){const{view_type:i,view_parameter:a}=s;(0,r.j)((0,o.wF)(n),{view:i,viewParameter:a,query:e,rs:t||"Unknown"})}"hashtag_closeup"===t?(0,r.j)(101,{component:13065,element:10273,view:142}):"hashtag_pinrep"===t&&(0,r.j)(101,{component:0,element:10349,view:142})}const c=(e=[])=>{let t=!0;return e.reduce(((e,n)=>{var i;return t&&n.story_type&&s.includes(n.story_type)&&0===(null===(i=n.display_options)||void 0===i?void 0:i.num_columns_requested)?e.searchFullWidthStories.push(n):(t=!1,e.filteredResults.push(n)),e}),{searchFullWidthStories:[],filteredResults:[]})}},565121:(e,t,n)=>{n.d(t,{J:()=>i,H:()=>o});const i=-1;function o(e){switch(e){case 0:return"shopping-bag";case 1:return"tag";default:return"search"}}},544260:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(551687),r=n(312827),s=n(785893);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=()=>null;class d extends i.Component{constructor(...e){super(...e),a(this,"view",(e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:i,targeting:o}=this.props;o?i.viewExperience(t,n,!1,!1,void 0,o):i.viewExperience(t,n)})),a(this,"complete",(e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:i,preventRemoval:o,targeting:r}=this.props;r?i.completeExperience(t,n,o,!1,{},r):o?i.completeExperience(t,n,o):i.completeExperience(t,n)})),a(this,"dismiss",(e=>{const{placement_id:t,experience_id:n}=e,{experienceClient:i,preventRemoval:o,targeting:r}=this.props;r?i.dismissExperience(t,n,o,void 0,r):o?i.dismissExperience(t,n,o):i.dismissExperience(t,n)}))}componentDidMount(){if(this.props.disableAutoView)return;const e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}componentDidUpdate(e){if(this.props.disableAutoView)return;const t=this.getExperience(e),n=this.getExperience(this.props);n&&this.shouldRenderExperience(n)&&(t&&t.experience_id===n.experience_id||this.view(n))}getExperience(e){return e.experienceClient.experienceForPlacement}shouldRenderExperience(e){if(e){const{type:t,experience_id:n}=e;if(this.props.eligibleIds&&this.props.eligibleIds.includes(n))return!0;if(!this.props.eligibleIds){if(this.props.eligibleTypes&&this.props.eligibleTypes.includes(t))return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0;if(this.props.predicate&&this.props.predicate(e))return!0}}return!1}render(){const{children:e,disableAutoView:t}=this.props,n=this.getExperience(this.props);if(n&&this.shouldRenderExperience(n)&&e){const{placement_id:i,experience_id:r}=n;return(0,s.jsx)(o.Z,{name:`Experience(${i}:${r})`,children:"function"==typeof e?e({experience:n,complete:()=>this.complete(n),dismiss:()=>this.dismiss(n),...t?{view:()=>this.view(n)}:Object.freeze({})}):e})}return(0,s.jsx)(l,{})}}const c=(0,i.forwardRef)(((e,t)=>{const n=(0,r.Z)(e.placementId);return(0,s.jsx)(d,{...e,experienceClient:n,ref:t})}))},666187:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(544260),o=n(635691),r=n(785893);const s=[500329,503259,500410,500688],a=({placementId:e})=>(0,r.jsx)(i.Z,{placementId:e,eligibleIds:s,children:({complete:e,dismiss:t})=>(o.Z.instance().subscribe(e,t),null)})},264414:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(667294),o=n(544260),r=n(881220),s=n(549135),a=n(785893);const l=e=>(0,a.jsx)(o.Z,{eligibleIds:e.eligibleIds,placementId:e.placementId,eligibleTypes:[10],children:({complete:t,dismiss:n,experience:{display_data:i}})=>{const o=i.link||e.linkUrl;return(0,a.jsx)(r.Z,{duration:i.duration,href:o,text:i.text,onClick:()=>{t(),e.onClick&&e.onClick(),e.shouldLogClicks&&e.shouldLogClicks&&(0,s.j)(101,{objectId:e.objectId,component:e.thriftComponentType,element:e.thriftElementType})},onHide:()=>{e.onHide(),e.completionOnDismissal?t():n()}})}});var d=n(475446);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=2e3;class h extends i.Component{constructor(...e){super(...e),c(this,"componentDidMount",(()=>{const{delay:e=u}=this.props;this.experienceToastsTimeout=window.setTimeout((()=>this.triggerEducationToasts()),e)}))}componentWillUnmount(){window.clearTimeout(this.experienceToastsTimeout)}triggerEducationToasts(){const{toastManagerContext:e,completionOnDismissal:t,placementId:n,experienceIds:i}=this.props;e.showOneToast((({onHide:e})=>(0,a.jsx)(l,{experienceIds:i,completionOnDismissal:t,onHide:e,placementId:n,shouldLogClicks:!1})))}render(){return null}}c(h,"defaultProps",{completionOnDismissal:!1});const p=(0,d.Cl)(h)},390764:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(544260),r=n(514319),s=n(883119),a=n(785893);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.PureComponent{constructor(...e){super(...e),l(this,"onScroll",(()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout((()=>{e(),this.dismissed=!0,this.timer=void 0}),3e3))})),l(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:n,idealDirection:i}=this.props,o=n.slice(-3);return(0,a.jsx)(s.J2,{anchor:e,color:"white",idealDirection:i,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,a.jsxs)(s.xu,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[(0,a.jsx)(s.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,a.jsx)(s.xv,{color:"darkGray",weight:"bold",children:t})}),(0,a.jsx)(s.xu,{display:"flex",marginEnd:-2,paddingX:2,children:o.map((e=>(0,a.jsx)(s.xu,{height:60,width:50,paddingX:1,children:(0,a.jsx)(s.zd,{rounding:2,height:60,children:(0,a.jsx)(s.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e)))})]})})}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.Component{constructor(...e){super(...e),c(this,"state",{paused:!1}),c(this,"handlePulsarClick",((e,t)=>{e?this.setState({paused:!0}):t()}))}componentWillUnmount(){clearTimeout(this.timer)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,n){return t&&e.text.replace("{boardName}",t),n?n(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:n,boardTextOverride:l,flyoutSize:c,fontSize:u,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:g,noClickToDismiss:m,onClickComplete:f,onClickDismiss:b,placementId:v,positionRelativeToAnchor:x,shouldTimeoutDismiss:y,showCaret:_,textAlign:w,textOverflow:C,textOverrideFn:j,textWeight:S,customizedComplete:I,pulsarZIndex:P}=this.props,E=t||(({children:e})=>g?(0,a.jsx)(s.mh,{children:e}):e),T="blue";return(0,a.jsx)(o.Z,{eligibleIds:n,placementId:v,eligibleTypes:[8],children:({complete:t,dismiss:n,experience:{display_data:o}})=>(this.setDefaultPulsarTooltip(o),o.has_pulsar||o.has_tooltip?(y&&o.disappearTime&&o.disappearTime>0&&(this.timer=setTimeout((()=>(n(),null)),o.disappearTime)),(0,a.jsxs)(i.Fragment,{children:[o.has_pulsar&&(0,a.jsx)(r.Z,{anchor:e,onTouch:()=>this.handlePulsarClick(o.has_tooltip,t),paused:this.state.paused,zIndex:P&&P.index()}),o.has_tooltip&&(!o.has_pulsar||this.state.paused)&&(o.thumbnail_urls?(0,a.jsx)(d,{anchor:e,dismiss:n,idealDirection:p||"down",text:o.text,thumbnails:o.thumbnail_urls}):(0,a.jsx)(E,{children:(0,a.jsx)(s.J2,{anchor:e,color:T,idealDirection:p||"down",onDismiss:m?()=>{}:n,positionRelativeToAnchor:!g&&x,shouldFocus:!1,showCaret:_,size:c,children:(0,a.jsxs)(s.xu,{column:12,padding:3,children:[(0,a.jsx)(s.xv,{align:"right"===w?"end":w,color:"white",overflow:C,size:u,weight:S||"bold",children:this.getText(o,l,j)}),o.sub_text&&(0,a.jsx)(s.xu,{paddingY:2,children:(0,a.jsx)(s.xv,{color:"white",size:u,children:o.sub_text})}),o.complete_button_cta_url&&(0,a.jsx)(s.xu,{children:(0,a.jsx)(s.xv,{align:"right"===w?"end":w,color:"white",size:u,children:(0,a.jsx)(s.rU,{href:o.complete_button_cta_url,target:"blank",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:o.complete_button_text})})}),!o.complete_button_cta_url&&(o.dismiss_button_text||o.complete_button_text)&&(0,a.jsxs)(s.xu,{display:"flex",alignItems:"center",marginTop:2,children:[o.dismiss_button_text&&(0,a.jsx)(s.xu,{marginEnd:1,column:6,children:(0,a.jsx)(s.zx,{fullWidth:h,color:T,onClick:()=>{b&&b(),n()},size:"md",text:o.dismiss_button_text})}),o.complete_button_text&&(0,a.jsx)(s.xu,{column:o.dismiss_button_text?6:12,children:I?(0,a.jsx)(s.iP,{fullHeight:!0,onTap:()=>{t(),f&&f()},rounding:2,children:(0,a.jsx)(s.xu,{display:"flex",color:"white",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:(0,a.jsx)(s.xv,{color:"blue",weight:"bold",children:o.complete_button_text})})}):(0,a.jsx)(s.kC,{justifyContent:"center",children:(0,a.jsx)(s.zx,{fullWidth:h,color:"white",size:"md",text:o.complete_button_text,onClick:()=>{t(),f&&f()}})})})]})]})})}))]})):(t(),null))})}}c(u,"defaultProps",{fontSize:"lg",positionRelativeToAnchor:!0})},195490:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(544260),o=n(459123),r=n(785893);const s=({anchors:e,idealDirection:t,onCompleteByAnchor:n,placementId:s,positionRelativeToAnchor:a,touchToDismiss:l,useMasonryFlyout:d})=>(0,r.jsx)(i.Z,{placementId:s,predicate:t=>{const{display_data:n}=t;if(2===(null==n?void 0:n.component_type)){const{anchors_by_platform:t}=n;if(null!=t&&t.web){const{anchor:n,placement:i}=t.web;return i===s&&n in e}}return!1},children:({complete:i,dismiss:s,experience:{display_data:c}})=>(0,r.jsx)(o.Z,{anchors:e,complete:i,dismiss:s,displayData:c,idealDirection:t,onCompleteByAnchor:n,platform:"web",positionRelativeToAnchor:a,touchToDismiss:l,useMasonryFlyout:d})})},314463:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(667294),o=n(883119),r=n(785893);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],l=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),d=e=>e*(Math.PI/180);class c extends i.PureComponent{constructor(...e){super(...e),s(this,"animationTimer",null),s(this,"canvasRemovalTimer",null),s(this,"containerRef",(0,i.createRef)()),s(this,"buildCanvas",(()=>{if(!this.containerRef.current)return null;const{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),n=2.5*e,i=document.createElement("canvas");return i.style.position="absolute",i.style.left=0-(n-t)/2+"px",i.style.top=0-(n-e)/2+"px",i.style.pointerEvents="none",i.style.width=`${n}px`,i.style.height=`${n}px`,i.style.overflow="visible",i.width=n,i.height=n,i})),s(this,"explode",(()=>{const e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;const n=e.getContext("2d");t.prepend(e);const i=Array.from(Array(120)).map((()=>({x:e.width/2,y:e.height/2,radius:Math.round(l(10,30)),color:a[Math.floor(Math.random()*a.length)],degree:Number(l(0,360).toFixed(1)),speed:Math.round(l(0,25)),friction:.9,opacity:Number(l(0,.5).toFixed(1)),yVel:0,gravity:.04}))),o=(e,t,n,i)=>{window.requestAnimationFrame((()=>o(e,t,n,i))),t.clearRect(0,0,n,i),e.forEach(((e,n)=>{e.x+=e.speed*Math.cos(d(e.degree)),e.y+=e.speed*Math.sin(d(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())}))};o(i,n,e.width,e.height),this.canvasRemovalTimer=setTimeout((()=>{t.removeChild(e)}),(this.props.delay||0)+800)}))}componentDidUpdate(e){const{delay:t,startAnimation:n}=this.props,{startAnimation:i}=e;n&&i!==n&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,r.jsx)(o.xu,{ref:this.containerRef,position:"relative",children:this.props.children})}}s(c,"defaultProps",{delay:0});const u=c;var h=n(946753),p=n(174523);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),f=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class b extends i.PureComponent{constructor(...e){super(...e),g(this,"state",{isInitialized:!1}),g(this,"containerRef",(0,i.createRef)()),g(this,"pinDestinationRef",(0,i.createRef)())}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame((()=>{this.setState({isInitialized:!0})}))}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:n}=this.state,{onDismiss:i}=this.props;n&&i&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(i,2600))}render(){const{firstRepin:e,pin:t,pinImageRef:n,selectedBoardName:s}=this.props,{description:a="",images:l}=t,{height:d=0,width:c=0,url:p=""}=(null==l?void 0:l["236x"])||{},{isInitialized:g}=this.state,{mask:b,imageContainer:v}=((e,t,n,i)=>{var o,r,s;let a,l,d={};const c=null===(o=n.current)||void 0===o?void 0:o.getBoundingClientRect(),u=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect(),h=null===(s=i.current)||void 0===s?void 0:s.getBoundingClientRect();if(u&&c&&h){d={left:c.left-u.left,top:c.top-u.top};const e={x:h.left-c.left,y:h.top-c.top},t={x:(h.width-c.width)/2,y:(h.height-c.height)/2};a=`translate(${e.x}px, ${e.y}px)`,l=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:d.left,top:d.top,width:e?null==h?void 0:h.width:null==c?void 0:c.width,height:e?null==h?void 0:h.height:null==c?void 0:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?a:"none",transform:e?a:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:null==c?void 0:c.width,height:null==c?void 0:c.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?l:"none",transform:e?l:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(g,this.containerRef,n,this.pinDestinationRef);return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(o.xu,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef,children:[(0,r.jsx)(o.xu,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:b},children:(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:v},children:(0,r.jsx)(o.Ee,{alt:null!=a?a:"",src:p||"",naturalHeight:d||1,naturalWidth:c||1})})}),(0,r.jsx)(o.xu,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(x=g,{pointerEvents:"none",opacity:x?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})},children:(0,r.jsxs)(o.xu,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:m(g)},children:[(0,r.jsx)(u,{delay:1250,startAnimation:g,children:(0,r.jsx)(o.zd,{rounding:2,width:270,height:180,children:(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",height:"100%",width:"100%",children:[(0,r.jsx)(o.xu,{ref:this.pinDestinationRef,color:"transparent",marginEnd:1,flex:"grow",height:"100%"}),(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:80,children:[(0,r.jsx)(o.xu,{color:"lightGray",flex:"grow",marginBottom:1}),(0,r.jsx)(o.xu,{color:"lightGray",flex:"grow"})]})]})})}),(0,r.jsx)(o.xu,{paddingX:2,dangerouslySetInlineStyle:{__style:f(g)},children:(0,r.jsx)(o.X6,{align:"center",children:e?(0,h.nk)(this.props.i18n._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message","First board create confirmation message"),{selectedBoardName:null!=s?s:""}):(0,h.nk)(this.props.i18n._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message","Board create confirmation message"),{selectedBoardName:null!=s?s:""})})})]})})]})});var x}}function v(e){const t=(0,p.ZP)();return(0,r.jsx)(b,{...e,i18n:t})}g(b,"defaultProps",{firstRepin:!1})},992341:(e,t,n)=>{n.d(t,{O:()=>P,Z:()=>I});var i=n(667294),o=n(40142),r=n(155656),s=n(19186),a=n(883119),l=n(785893);const d={__style:{animationName:"SelectInterest_AnimateIn, SelectInterest_CircleAnimateOut",animationDuration:"0.3s, 0.3s",animationDelay:"0.3s, 1s",animationFillMode:"forwards",animatitionTimingFunction:"ease-out",backgroundColor:"rgba(196, 196, 196, 0.1)"}},c={__style:{animationName:"SelectInterest_AnimateIn, SelectInterest_AnimateOut",animationDuration:"0.3s, 0.5s",animationDelay:"0.3s, 1.1s",animationFillMode:"forwards",animatitionTimingFunction:"ease-out"}};const u=function({anchor:e,endAnimation:t,interest:n}){const[o,s]=(0,i.useState)(!1),{width:u,height:h,url:p}=n.images["400x"];let g;const m=()=>{t(n.id)},f=()=>{s(!0),g=setTimeout(m,2e3)};(0,i.useEffect)((()=>((()=>{const e=new Image;e.src=null!=p?p:"",e.onload=f})(),()=>{g&&clearTimeout(g)})),[]);const{top:b,left:v,bottom:x,right:y}=(e||{}).getBoundingClientRect(),_=(b+x)/2+100,w=(v+y)/2-75;return!!e&&o&&(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(r.Z,{unsafeCSS:"\n@keyframes SelectInterest_AnimateIn {\n  from {\n    transform: scale(0.0);\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n    transform: scale(1.0);\n  }\n}\n@keyframes SelectInterest_CircleAnimateOut {\n  from {\n    transform: scale(1.0);\n    opacity: 1;\n  }\n  to {\n    transform: scale(0.8);\n    opacity: 0;\n  }\n}\n@keyframes SelectInterest_AnimateOut {\n  from {\n    transform: translateX(0) translateY(0) scale(1.0);\n    opacity: 1;\n  }\n  to {\n    transform: translateX(-25px) translateY(-200px) scale(0.1);\n    opacity: 0;\n  }\n}\n"}),(0,l.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{top:_,left:w}},display:"flex",justifyContent:"center",position:"fixed",width:200,height:200,children:[(0,l.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:d,display:"flex",height:"100%",justifyContent:"center",opacity:0,rounding:"circle",width:"100%"}),(0,l.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:c,height:100,left:!0,margin:"auto",opacity:0,position:"absolute",rounding:3,right:!0,top:!0,width:100,children:(0,l.jsx)(a.zd,{height:"100%",rounding:4,width:"100%",wash:!0,children:(0,l.jsx)(a.Ee,{alt:"pin-image",fit:"cover",naturalHeight:null!=u?u:1,naturalWidth:null!=h?h:1,src:null!=p?p:""})})})]})]})};var h=n(174523),p=n(535718),g=n(358873),m=n(652382),f=n(549135),b=n(181307),v=n(121809),x=n(855168),y=n(903945),_=n(158276);const w="cubic-bezier(0.66, 0.025, 0.33, 0.975)",C=`RelatedInterestsBanner_SlideIn 250ms forwards ${w}`,j=e=>({view:e,viewParameter:136,component:13489});function S({onDismiss:e,relatedInterests:t,viewType:n}){const d=(0,h.ZP)(),[c,p]=(0,i.useState)(!0),[b,S]=(0,i.useState)(!1),[I,P]=(0,i.useState)([]),[E,T]=(0,i.useState)(I.reduce(((e,t)=>(e[t.id]=!1,e)),{})),[D,k]=(0,i.useState)(),[O,B]=(0,i.useState)(),[R,M]=(0,i.useState)(),{viewportSize:A}=(0,o.useSelector)((({ui:e})=>e.app));let L;const Z=(0,x.k6)(),N=(0,o.useDispatch)();(0,i.useEffect)((()=>{t&&t.length>=5&&(P(t.slice(0,6)),p(!1),(0,f.j)(9025,{view:n}),S((()=>{const e=(0,y.qn)("lastViewedMiniRenux");return!!(e&&Date.now()-Number(e)<2592e5)})()),(0,m.Nh)("viewedMiniRenux",!0),(0,y.Nh)("lastViewedMiniRenux",Date.now()))}),[t]),(0,i.useEffect)((()=>()=>{clearTimeout(D),clearTimeout(O),clearTimeout(L)}),[]);const{isTooltipOnLogoButtonShown:F,logoButtonRef:z,toggleTooltipOnLogoButton:H}=(0,v.p)(),U=()=>H(!1),W=()=>H(!0),G=e=>{p(!c);const t=e?{}:{element:179};let i=101;e&&(i=c?107:106),M(!0),L=setTimeout((()=>M(!1)),125),(0,f.j)(i,{...j(n),...t})},V=e=>{const t=I.findIndex((t=>t.id===e.id)),i=!e.is_followed,o=I.slice();o[t]={...e,is_followed:i},P(o),i&&T({...E,[e.id]:!0}),Promise.resolve(N((0,_.bJ)({[e.id]:i},"mini_renux"))).then((()=>{i&&(F?(D&&clearTimeout(D),k(setTimeout(U,7e3))):(O&&clearTimeout(O),D&&clearTimeout(D),B(setTimeout(W,3e3)),k(setTimeout(U,1e4)))),N((0,_.H5)(!0))})),(0,f.j)(101,{...j(n),element:i?1030:1151}),(0,m.Nh)("completedMiniRenux",!0)},q=e=>T({...E,[e]:!1}),$=d._("Welcome back!","relatedInterestsBanner.header","Welcome header on related interests banner"),Y=d._("Tell us what else you're interested in","relatedInterestsBanner.subheader","Subheader on realted interests banner instructing users to select interests"),X=(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.xu,{display:"flex",marginStart:-2,children:I.slice(0,3).map((e=>{var t,n,i;const o=e.images["400x"];return o?(0,l.jsx)(a.xu,{marginStart:2,rounding:2,children:(0,l.jsx)(a.zd,{height:64,rounding:4,width:64,children:(0,l.jsx)(a.Ee,{alt:d._("Related interest image thumbnail","relatedInterestsBanner.image.thumbnail","Label for related interests image preview thumbnail"),color:e.background_color,fit:"cover",naturalHeight:null!==(t=o.height)&&void 0!==t?t:1,naturalWidth:null!==(n=o.width)&&void 0!==n?n:1,src:null!==(i=o.url)&&void 0!==i?i:""})})},o.url):null}))}),(0,l.jsxs)(a.xu,{direction:"column",display:"flex",marginEnd:6,paddingX:6,children:[(0,l.jsx)(a.xv,{children:$}),(0,l.jsx)(a.X6,{size:"sm",children:Y})]}),(0,l.jsx)(a.zx,{onClick:()=>G(!1),text:d._("Choose topics","relatedInterestsBanner.button.chooseTopics","Choose topics button, expands banner to show topics")})]}),K=(0,l.jsxs)(a.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,l.jsx)(a.xv,{align:"center",children:$}),(0,l.jsx)(a.X6,{align:"center",size:"sm",children:Y}),(0,l.jsx)(a.xu,{display:"flex",marginStart:-2,paddingY:4,children:I.map((e=>(0,l.jsx)(a.xu,{marginStart:2,display:"flex",direction:"column",justifyContent:"start",children:(0,l.jsx)(s.Z,{clickHandler:()=>V(e),interest:e,isSelected:e.is_followed,size:"md_120"})},e.id)))}),(0,l.jsx)(a.zx,{color:"red",disabled:0===I.filter((e=>e.is_followed)).length,onClick:()=>{Z.push("/"),(0,f.j)(101,{...j(n),element:76})},text:d._("See your new home feed","relatedInterestsBanner.button.seeHomefeed","Submit selected topics and go to updated homefeed button")})]}),J=new a.H3([new a.Ry(g.HW)]);return I.length>=5&&!b?(0,l.jsxs)(a.mh,{children:[(0,l.jsx)(r.Z,{unsafeCSS:(Q=128,`\n@keyframes RelatedInterestsBanner_SlideIn {\n  from { transform: translateY(${Q}px); }\n  to { transform: translateY(0); }\n}\n`)}),(0,l.jsx)(a.iP,{onTap:c?()=>{}:()=>G(!1),children:(0,l.jsxs)(a.xu,{alignItems:"center",bottom:!0,borderStyle:"shadow",color:"white",dangerouslySetInlineStyle:{__style:{animation:C,WebkitAnimation:C,cursor:c?"default":"pointer",transition:`min-height 250ms ${w}`}},display:"flex",minHeight:c?328:128,justifyContent:"center",left:!0,padding:8,position:"fixed",right:!0,zIndex:J,children:[!R&&(c?K:X),(0,l.jsx)(a.xu,{padding:"lg"===A||c?8:4,position:"lg"===A||c?"absolute":"static",right:!0,top:c,children:(0,l.jsx)(a.hU,{accessibilityLabel:d._("Dismiss icon button","relatedInterestsBanner.button.dismiss","Icon button to close banner"),icon:"cancel",iconColor:"darkGray",onClick:e})})]})}),I.map((e=>E[e.id]?(0,l.jsx)(u,{anchor:z,interest:e,endAnimation:q},e.id):null))]}):null;var Q}function I({onDismiss:e,pinId:t}){const{data:n}=(0,p.Z)({name:"PinInterestsResource",options:{hideFollowed:!0,limit:6,pinId:t}});return(0,l.jsx)(S,{onDismiss:e,relatedInterests:n,viewType:3})}function P({boardId:e,onDismiss:t}){const n=(0,b.tc)("web_board_related_interests_banner"),{data:i}=(0,p.Z)({name:"ApiResource",options:{url:`/v3/boards/${e}/interests/`,data:{deduping_enabled:!0,hide_followed:!0,limit:6},field_sets:["interest.background_color","interest.follower_count","interest.id","interest.images[400x]","interest.is_followed","interest.name","interest.type","interest.url_name"]}});return i&&i.length>5&&n().anyEnabled?(0,l.jsx)(S,{onDismiss:t,relatedInterests:i,viewType:3}):null}},924325:(e,t,n)=>{n.d(t,{L7:()=>i,Qc:()=>o,W1:()=>r,UV:()=>s,vF:()=>a,ZW:()=>l,UF:()=>d,EC:()=>c,am:()=>u});const i=1,o=2,r="female",s="male",a="unspecified",l="en-US",d="US",c=520,u={is_renux:!0,is_simple_renux:!0,steps:[{moduleName:"NuxPicker"},{moduleName:"NuxEducationLoader"}],can_exit:!0,relaunchPlacement:!1,sub_type:"modal"}},19186:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(155656),r=n(587847),s=n(883119),a=n(785893);const l=["imageFadeOut {\n    0% { opacity: 1 }\n    60% { opacity: 1 }\n    100% { opacity: 0 }\n}"],d={imageFadeOut:"imageFadeOut 0.9s both"};function c({backgroundColor:e,cyclingImages:t,imgLabel:n,imageHeight:c,imageWidth:u}){const[h,p]=(0,i.useState)(0);(0,i.useEffect)((()=>{const e=setInterval((()=>{p((e=>e+1))}),900);return()=>clearInterval(e)}),[]);const g=h%t.length,m=(h+1)%t.length;return((e,t,n,i,c,u,h)=>{var p,g,m,f,b,v;return(0,a.jsxs)(s.xu,{position:"relative",width:c,height:i,children:[(0,a.jsx)(s.xu,{position:"absolute",top:!0,left:!0,width:c,height:i,children:(0,a.jsx)(s.Ee,{alt:u,color:h,fit:"cover",naturalHeight:null!==(p=n.height)&&void 0!==p?p:1,naturalWidth:null!==(g=n.width)&&void 0!==g?g:1,src:null!==(m=n.url)&&void 0!==m?m:"",children:(0,a.jsx)(s.xu,{color:"darkGray",opacity:.3,height:"100%"})})}),(0,a.jsxs)(s.xu,{position:"absolute",top:!0,left:!0,width:c,height:i,dangerouslySetInlineStyle:{__style:{animation:d.imageFadeOut,WebkitAnimation:d.imageFadeOut}},children:[(0,a.jsx)(o.Z,{unsafeCSS:(0,r.Ll)(l)}),(0,a.jsx)(s.Ee,{alt:u,color:h,fit:"cover",naturalHeight:null!==(f=t.height)&&void 0!==f?f:1,naturalWidth:null!==(b=t.width)&&void 0!==b?b:1,src:null!==(v=t.url)&&void 0!==v?v:"",children:(0,a.jsx)(s.xu,{color:"darkGray",opacity:.3,height:"100%"})})]})]},e)})(h,t[g],t[m],c,u,n,e)}var u=n(925265),h=n(174523),p=n(585967);const g={xl_144:{imageWidth:144,imageHeight:144,fontSize:"lg"},md_120:{imageWidth:120,imageHeight:120,fontSize:"md"}},m=g.xl_144;function f({clickHandler:e,index:t,interest:n,isSelected:o,isTopicEdu:r,size:l,totalInterests:d}){var f,b,v;const x=(0,h.ZP)(),{isRTL:y}=(0,p.B)(),{fontSize:_,imageWidth:w,imageHeight:C}=g[l]||m,{background_color:j,cycling_images:S,images:I,name:P}=n,E=n.label?String(n.label):P,T=I["400x"],D=S?S.map((e=>e["400x"])):[],[k,O]=(0,i.useState)(!1),[B,R]=(0,i.useState)(!1),M=d&&t?(0,u.Z)(x._("{{ interestName }}, list {{ interestsPosition }} of {{ interestsCount }}","nux.interestStep.interestForLists","Label for interest card with description for lists"),{interestName:n.name,interestsPosition:t.toString(),interestsCount:d.toString()}):(0,u.Z)(x._("{{ interestName }} interest card","nux.interestStep.interest","Label for interest card"),{interestName:n.name});return((e,t,n,i)=>{const o=e?t-8:t,r=e?n-8:n,l=e?14:16,d=e?-1:0,c=e?{borderColor:"black"}:{borderStyle:"none"};return(0,a.jsx)(s.xu,{borderStyle:e?"lg":"none",dangerouslySetInlineStyle:{__style:c},width:t,height:n,rounding:4,color:"white",display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(s.xu,{width:o,height:r,dangerouslySetInlineStyle:{__style:{borderRadius:l}},overflow:"hidden",children:(0,a.jsx)(s.xu,{margin:d,children:i})})})})(!r&&(o||k||B),w,C,(0,a.jsx)(s.zd,{rounding:4,children:(0,a.jsx)(s.xu,{rounding:4,position:"relative",display:"inlineBlock",width:w,height:C,"data-test-id":"nux-picker-topic",children:(0,a.jsxs)(s.iP,{accessibilityLabel:M,fullHeight:!0,onBlur:()=>R(!1),onFocus:()=>R(!0),onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),onTap:e,children:[D.length>0&&(k||B)?(0,a.jsx)(c,{backgroundColor:j,cyclingImages:D,imageHeight:C,imageWidth:w,imgLabel:E}):(0,a.jsx)(s.Ee,{alt:E,color:j,fit:"cover",naturalHeight:null!==(f=T.height)&&void 0!==f?f:1,naturalWidth:null!==(b=T.width)&&void 0!==b?b:1,src:null!==(v=T.url)&&void 0!==v?v:"",children:(0,a.jsx)(s.xu,{color:"darkGray",opacity:.3,height:"100%"})}),o&&(0,a.jsxs)(s.xu,{height:"100%",width:"100%",position:"absolute",top:!0,children:[(0,a.jsx)(s.xu,{color:"darkGray",opacity:.7,height:"100%"}),(0,a.jsx)(s.xu,{position:"absolute",left:y,marginEnd:2,marginStart:2,marginTop:2,right:!y,top:!0,children:(0,a.jsx)(s.XZ,{checked:!0,id:"selectedTopic",onChange:()=>{}})})]}),(0,a.jsx)(s.xu,{position:"absolute",bottom:!0,left:!0,right:!0,margin:2,"data-test-id":"nux-picker-topic-label",children:(0,a.jsx)(s.xv,{align:"start",color:"white",size:_,weight:"bold",overflow:"breakWord",children:P})})]})})}))}},587847:(e,t,n)=>{n.d(t,{CC:()=>i,XF:()=>o,Ll:()=>r});const i=(e,t)=>((e,t,n)=>({x:Math.floor(e*Math.cos(n)),y:Math.floor(t*Math.sin(n))}))(t/2,e/2,2*Math.random()*Math.PI),o=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,r=e=>["@-webkit-keyframes","@keyframes"].map((t=>e.map((e=>t+" "+e)).join("\n"))).join("\n")},419015:(e,t,n)=>{n.d(t,{lt:()=>i,Bx:()=>o,oM:()=>r,N4:()=>s,is:()=>a});const i=e=>e._("You're almost there! Log in to access all of Pinterest","loginModal.limitedLogin.subheader","Subheader text on personalized login modal/flyout to remind users to log in"),o=e=>e._("Log in to save this Pin","limitedLogin.modalHeader.repin","Title on mobile web limited login modal to prompt users to login after they clicked save button."),r=e=>e._("Log in to edit this Pin","limitedLogin.modalHeader.editPin","Title on mobile web limited login modal to prompt users to login after they clicked edit button."),s=({i18n:e,toFollow:t})=>t?e._("Log in to follow","limitedLogin.modalHeader.follow","Title on mobile web limited login modal to prompt users to login to follow a user or board."):e._("Log in to unfollow","limitedLogin.modalHeader.unfollow","Title on mobile web limited login modal to prompt users to login to unfollow a user or board."),a=e=>e._("Log in to create a Pin or board","limitedLogin.modalHeader.create","Title on mobile web limited login modal to prompt users to login to create a Pin or board.")},998864:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(419015),r=n(848101);const s=(e={shouldStopEventPropagation:!0})=>{const{loginForMore:t,viewer:n,limitedLoginModalSubheader:s}=(0,r.B$)(),{shouldStopEventPropagation:a}=e,l="AUTH"===n.type,d=(0,i.ZP)();return l?e=>e:(e,n)=>e=>{let i=null;e&&(e.nativeEvent&&e.nativeEvent instanceof Event?i=e:e.event&&(i=e.event)),a&&i&&i.stopPropagation&&i.stopPropagation(),t&&t.setVisible(!0),s&&(n?s.setText(n):s.setText((0,o.lt)(d)))}}},318205:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(667294),o=n(932466),r=n(620813),s=n(174523),a=n(585967),l=n(883119),d=n(785893);function c({height:e,onCtaDidLoad:t,width:c}){const u=(0,s.ZP)(),[h,p]=(0,i.useState)(null),{locale:g}=(0,a.B)(),m=(0,o.default)(g);(0,i.useEffect)((()=>{m&&"none"!==m&&(e=>{const t=(0,i.lazy)((()=>n(641661)(`./${e}`)));p(t)})(m)}),[m]),(0,i.useEffect)((()=>{h&&t()}),[h]);const f=u._("Open Pinterest and tap the camera icon for ideas","PincodeCTA.title","Text informing users how to use Pincodes — may be displayed or used as accessibility label for an image"),b=(0,d.jsx)(l.xv,{align:"center",children:f});return"none"===m?b:h?(0,d.jsx)(r.Z,{fallback:b,children:(0,d.jsx)(h,{height:e,title:f,width:c})}):(0,d.jsx)(l.$j,{accessibilityLabel:u._("Loading Pincode Call to Action","PincodeCTA.loading","Accessibility label for loading spinner for the Pincode call-to-action"),show:!0})}},932466:(e,t,n)=>{function i(e){switch(e.toUpperCase()){case"CS-CZ":return"CZ";case"DA-DK":return"DA";case"DE":return"DE";case"EL-GR":return"GR";case"EN-GB":return"ENUK";case"EN-US":return"ENUS";case"ES-ES":return"ESES";case"ES-MX":return"ESMX";case"ES-AR":return"ESAR";case"ES-419":return"ESMX";case"FI-FI":return"FI";case"FR":return"FR";case"HI-IN":return"HI";case"HU-HU":return"HU";case"ID-ID":return"ID";case"IT":return"IT";case"JA":return"JP";case"KO-KR":return"KR";case"MS-MY":return"MS";case"NL":return"NL";case"NB-NO":return"NO";case"PL-PL":return"PL";case"PT-BR":return"PTBR";case"PT-PT":return"PTPT";case"RO-RO":return"RO";case"RU-RU":return"RU";case"SK-SK":return"SK";case"SV-SE":return"SV";case"TH-TH":return"TH";case"TL-PH":return"TL";case"TR":return"TR";case"UK-UA":return"UA";case"VI-VN":return"VT";case"ZH-CN":return"ZHCN";case"ZH-TW":return"ZHTW";default:return"none"}}n.r(t),n.d(t,{default:()=>i})},33234:(e,t,n)=>{n.d(t,{ZP:()=>k});var i=n(667294),o=n(318205),r=n(785893);const s="M0 111c0 47 29.3 87.2 70.6 103.4-1-8.8-2-22.3.3-32l13-55s-3.4-6.7-3.4-16.5c0-15.6 9-27 20-27 9.6 0 14.2 7 14.2 15.5 0 9.6-6 23.8-9.2 37-2.7 11 5.5 20 16.4 20 19.7 0 35-20.7 35-50.8 0-26.5-19.2-45-46.5-45-31.5 0-50 23.6-50 48 0 9.6 3.6 19.8 8.2 25.4 1 1.2 1 2 .7 3.3l-3 12.5c-.5 2-1.6 2.5-3.8 1.5-13.8-6.4-22.5-26.7-22.5-43 0-35 25.6-67 73.5-67 38.5 0 68.4 27.3 68.4 64 0 38.2-24.2 69-57.7 69-11.3 0-21.8-5.8-25.4-12.7L92 188c-2.6 9.6-9.3 21.7-14 29 10.5 3.3 21.6 5 33 5 61.3 0 111-49.7 111-111S172.3 0 111 0 0 49.7 0 111z",a="#e60023",l="0 0 222 222";function d({size:e}){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:l,children:(0,r.jsx)("path",{d:s,fill:a,fillRule:"evenodd"})})}var c=n(174523),u=n(883119);function h({getThumbnailImageSrcSet:e,images:t,onTouch:n}){const i=(0,c.ZP)();return(0,r.jsx)(u.xu,{display:"flex",justifyContent:"start",maxHeight:328,overflow:"auto",padding:1,wrap:!0,children:["logo"].concat(t).map(((t,o)=>{var s,a,l,c;return(0,r.jsx)(u.xu,{padding:1,children:(0,r.jsx)(u.Zb,{children:(0,r.jsx)(u.iP,{fullWidth:!1,onTap:()=>n("logo"===t?"logo":o-1),rounding:2,children:(0,r.jsx)(u.zd,{rounding:"circle",width:85,height:85,children:"logo"===t?(0,r.jsx)(d,{size:85}):(0,r.jsx)(u.Ee,{alt:i._("Pincode Hero Image","accessibility label for the Pincode hero image","accessibility label for the Pincode hero image"),color:t.dominant_color||"#b5b5b5",fit:"cover",naturalHeight:null!==(s=t.height)&&void 0!==s?s:1,naturalWidth:null!==(a=t.width)&&void 0!==a?a:1,src:null!==(l=t.url)&&void 0!==l?l:"",srcSet:e&&e(null!==(c=t.url)&&void 0!==c?c:"")})})})})},"logo"===t?t:t.url)}))})}var p=n(535718);const g=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`\n  <svg xmlns="http://www.w3.org/2000/svg" width="${m||222}" height="${m||222}" x="${f||0}" y="${f||0}" viewBox="0 0 222 222">\n    <path d="${s}" fill="#e60023" fill-rule="evenodd" />\n  </svg>`.trim())}`;var m,f;const b=600;function v(e,t,n){return`\n    <image id="image"\n      x="${100+("right"===t?300:0)}"\n      y="${100+("bottom"===n?300:0)}"\n      width="${b/("row"===t?1:2)}"\n      height="${b/("column"===n?1:2)}"\n      xmlns:xlink="http://www.w3.org/1999/xlink"\n      xlink:href="${e}"\n      preserveAspectRatio="xMidYMid slice"\n    />`}function x(e,t){const n=function(e){switch(e.length){case 0:case 1:return;case 2:return[v(e[0],"left","column"),v(e[1],"right","column")].join("");case 3:return[v(e[0],"left","column"),v(e[1],"right","top"),v(e[2],"right","bottom")].join("");default:return[v(e[0],"left","top"),v(e[1],"right","top"),v(e[2],"left","bottom"),v(e[3],"right","bottom")].join("")}}(t);return n?e.replace(/<image[^>]*>/,n):e}class y extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{const{pincodeImageResource:e,onFetchingChange:t}=this.props;t(e.isFetching)},(n="handleFetchChange")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{pincodeImageResource:e}=this.props;e.isFetching||this.handleFetchChange()}componentDidUpdate(e){this.props.pincodeImageResource.isFetching!==e.pincodeImageResource.isFetching&&this.handleFetchChange()}render(){const{className:e,imageUrls:t,size:n,pincodeImageResource:{data:i,isLoaded:o}}=this.props,s=n,a=n;return(0,r.jsxs)(u.kC,{alignItems:"center",height:a,justifyContent:"center",width:s,children:[o&&!!i&&(0,r.jsx)("div",{className:e,dangerouslySetInnerHTML:{__html:x(i,t)},style:{width:s,height:a}}),(0,r.jsx)(u.$j,{accessibilityLabel:this.props.i18n._("Loading Pincode Image","accessibility label for loading the Pincode image","accessibility label for loading the Pincode image"),show:!i})]})}}function _(e){const t=(0,c.ZP)(),n=(0,p.Z)({name:"PincodeImageResource",options:{object_id:e.id,hero_image_url:e.imageUrls[0]||g}});return(0,r.jsx)(y,{...e,i18n:t,pincodeImageResource:n})}var w=n(549135);function C(e){return new Promise(((t,n)=>{const i=new XMLHttpRequest;i.ontimeout=n,i.onreadystatechange=()=>{if(4!==i.readyState)return;if(200!==i.status)return void n();const e=new FileReader;e.onloadend=()=>{const i=e.result;"string"==typeof i?t(i.split(/,/)[1]):n()},e.readAsDataURL(i.response)},i.open("GET",e,!0),i.timeout=3e4,i.responseType="blob",i.send()}))}function j(e,t){if(!(e instanceof Element))return Promise.resolve(e);if(e instanceof window.SVGImageElement)return function(e,t){const n=e.href.baseVal;if(n.startsWith("data:"))return Promise.resolve();const i=t?t(n):n;return Promise.resolve(i).then(C).then((e=>`data:${function(e){const t=e.match(/\.([^\.\/]*?)$/);switch(t&&t[1]){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}(i)};base64,${e}`)).then((t=>new Promise(((n,i)=>{e.onerror=i,e.href.baseVal=t,window.requestAnimationFrame(n)}))))}(e,t);const n=Array.from(e.childNodes);return Promise.all(n.map((e=>j(e,t))))}function S(e,t){return new Promise(((n,i)=>{const o=document.createElement("div");o.innerHTML=e.innerHTML,j(o,t).then((()=>{const t=new Image;t.onload=()=>{window.requestAnimationFrame((()=>n(t)))},t.onerror=i;const r=o&&o.querySelector("svg");r&&(/^[0-9]+$/.test(r.getAttribute("width")||"")||r.setAttribute("width",`${e.scrollWidth}`),/^[0-9]+$/.test(r.getAttribute("height")||"")||r.setAttribute("height",`${e.scrollHeight}`));const s=o.innerHTML.replace(/(xmlns="[^"]+"[^>]*)\ xmlns="[^"]+"/,"$1");t.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(s.trim())}`}))}))}function I(e,t){return new Promise(((n,i)=>{(function(e){return new Promise(((t,n)=>{if(e.toBlob)return void e.toBlob(t);let i="";try{i=e.toDataURL("image/png")}catch(a){n()}const o=window.atob(i.split(",")[1]),r=o.length,s=new Uint8Array(r);for(let e=0;e<r;e+=1)s[e]=o.charCodeAt(e);t(new window.Blob([s],{type:"image/png"}))}))})(e).then((e=>window.URL.createObjectURL(e))).then((e=>{const i=document.createElement("a");i.download=t,i.href=e,i.style.display="none",window.document.body.appendChild(i),window.requestAnimationFrame((()=>{const t=()=>{window.requestAnimationFrame((()=>{window.URL.revokeObjectURL(e),i.removeAttribute("href"),i.removeEventListener("click",t),window.document.body.removeChild(i),n()}))};i.addEventListener("click",t),i.click()}))})).catch(i)}))}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E="pincodeMain",T="pincodeCTA";class D extends i.PureComponent{constructor(...e){super(...e),P(this,"state",{ctaIsLoaded:!1,errorFlyoutIsOpen:!1,isDownloading:!1,isFetchingPincodeImage:!1,isPickingHeroImage:!1,pickedImageIndex:0}),P(this,"getCustomHeroImages",(()=>{const{images:e,customizable:t}=this.props,{pickedImageIndex:n}=this.state;if(!t)return e;const i="logo"!==n&&e[n];return i?[i]:[]})),P(this,"normalizeUrl",(e=>{const{getMainImageURL:t}=this.props;return(e=>e.replace(/^https:\/\/[^\/]{2,}\.pinimg.com\//,"https://i.pinimg.com/"))((t||(e=>e))(e))})),P(this,"handleFetchChange",(e=>{this.setState({isFetchingPincodeImage:e})})),P(this,"handleCancelButtonClick",(()=>this.setState({isPickingHeroImage:!1}))),P(this,"handleEditButtonClick",(()=>this.setState({isPickingHeroImage:!0}))),P(this,"handleSelectImage",(e=>this.setState({isPickingHeroImage:!1,pickedImageIndex:e}))),P(this,"downloadPincodeImage",(()=>{const e=this.previewNode,{ctaIsLoaded:t,isFetchingPincodeImage:n,isDownloading:i}=this.state;if(!e||!t||n||i)return;const o=e.querySelector(".pincodeMain"),r=e.querySelector(".pincodeCTA");if(!o||!r)return;const{getDownloadImageURL:s,id:a}=this.props;(0,w.j)(7078,{component:13141,objectId:a}),this.setState({isDownloading:!0}),Promise.all([S(o,s),S(r)]).then((e=>{const[t,n]=e;return((e,t)=>{const n=document.createElement("canvas");n.width=3544,n.height=3544;const i=Math.round(.1*n.width),o=Math.round(.05*n.width),r=n.width-2*i,s=n.width-2*o,a=n.height-r,[l,d]=t.width/t.height>s/a?[s,s/t.width*t.height]:[a/t.height*t.width,a],c=n.getContext("2d");return c.fillStyle="#fff",c.fillRect(0,0,n.width,n.height),c.drawImage(e,i,0,r,r),c.drawImage(t,(n.width-l)/2,r+(n.height-r-d)/2,l,d),n})(t,n)})).then((e=>I(e,`pincode_${this.props.id}.png`))).then((()=>{this.setState({isDownloading:!1})})).catch((()=>{this.setState({errorFlyoutIsOpen:!0})}))}))}render(){const{id:e,isLoadingImages:t,images:n,getThumbnailImageSrcSet:i,customizable:s}=this.props,{ctaIsLoaded:a,errorFlyoutIsOpen:l,isFetchingPincodeImage:d,isDownloading:c,isPickingHeroImage:p}=this.state;return p?(0,r.jsx)(u.xu,{width:350,color:"white",rounding:2,padding:4,children:(0,r.jsxs)(u.xu,{children:[(0,r.jsx)(u.xu,{paddingY:1,children:(0,r.jsx)(u.X6,{size:"md",lineClamp:1,children:this.props.i18n._("Change Image","Title of the Pincode hero image picker modal","Title of the Pincode hero image picker modal")})}),(0,r.jsx)(u.iz,{}),(0,r.jsx)(h,{images:n,getThumbnailImageSrcSet:i,onTouch:this.handleSelectImage}),(0,r.jsx)(u.xu,{padding:1,children:(0,r.jsx)(u.zx,{fullWidth:!0,text:this.props.i18n._("Cancel","Button to dismiss Pincode hero image picker","Button to dismiss Pincode hero image picker"),onClick:this.handleCancelButtonClick})})]})}):(0,r.jsx)(u.xu,{width:350,color:"white",rounding:2,marginBottom:4,paddingX:4,children:(0,r.jsxs)(u.xu,{children:[(0,r.jsx)(u.xu,{ref:e=>{this.previewNode=e},children:(0,r.jsxs)(u.xu,{color:"white",display:"flex",direction:"column",alignItems:"center",justifyContent:"center",width:"100%",height:320,children:[t?(0,r.jsx)(u.kC,{alignItems:"center",height:230,justifyContent:"center",width:"100%",children:(0,r.jsx)(u.$j,{accessibilityLabel:this.props.i18n._("Loading","accessibility label for loading spinner","accessibility label for loading spinner"),show:!0})}):(0,r.jsx)(_,{className:E,id:e,imageUrls:this.getCustomHeroImages().map((e=>{var t;return this.normalizeUrl(null!==(t=e.url)&&void 0!==t?t:"")})),onFetchingChange:this.handleFetchChange,size:230}),(0,r.jsx)(u.xu,{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:7,marginTop:2,children:(0,r.jsx)("div",{className:T,children:(0,r.jsx)(o.default,{onCtaDidLoad:()=>this.setState({ctaIsLoaded:!0}),width:300,height:78})})})]})}),(0,r.jsxs)(u.xu,{marginTop:2,padding:1,children:[s&&n.length>0&&(0,r.jsx)(u.xu,{paddingY:1,children:(0,r.jsx)(u.zx,{fullWidth:!0,text:this.props.i18n._("Change Image","Button to pick Pincode hero image","Button to pick Pincode hero image"),onClick:this.handleEditButtonClick})}),(0,r.jsxs)(u.xu,{paddingY:1,children:[(0,r.jsx)(u.xu,{ref:e=>{this.downloadButton=e},children:(0,r.jsx)(u.zx,{fullWidth:!0,text:this.props.i18n._("Download Pincode","Button to download the Pincode image","Button to download the Pincode image"),color:"red",onClick:this.downloadPincodeImage,disabled:t||!a||d||c})}),l&&(0,r.jsx)(u.J2,{anchor:this.downloadButton,color:"red",idealDirection:"down",onDismiss:()=>this.setState({errorFlyoutIsOpen:!1}),size:"sm",shouldFocus:!1,children:(0,r.jsx)(u.xu,{padding:3,children:(0,r.jsx)(u.xv,{color:"white",weight:"bold",children:(0,r.jsx)("span",{children:this.props.i18n._("Oops! Your browser does not support downloading Pincodes.","Error message shown when user attempts to download Pincode on a browser not supported","Error message shown when user attempts to download Pincode on a browser not supported")})})})})]})]})]})})}}function k(e){const t=(0,c.ZP)();return(0,r.jsx)(D,{...e,i18n:t})}},956997:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),o=n(451190),r=n(174523),s=n(883119),a=n(549135),l=n(785893);function d({children:e,objectId:t,onHide:n}){const d=(0,r.ZP)(),c={component:13141,objectId:t};return(0,i.useEffect)((()=>{(0,a.j)(6359,c)}),[t]),(0,l.jsx)(o.Z,{accessibilityModalLabel:d._("Pincode","pincode.pincodemodal.label","Accessible label for a modal showing the pincode modal"),heading:d._("Pincode","pincode.pincodemodal.heading","Heading for a modal showing the pincode."),onDismiss:()=>{n(),(0,a.j)(6358,c)},size:"sm",children:(0,l.jsx)(s.kC,{alignItems:"stretch",justifyContent:"center",children:e})})}},130874:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(189734),o=n.n(i),r=n(174523),s=n(34411),a=n(883119),l=n(946753),d=n(785893);function c(e){var t,n;const i=null!==(t=e.imageMediumUrl)&&void 0!==t?t:e.image_medium_url;return{name:null!==(n=e.fullName)&&void 0!==n?n:e.full_name,src:"https://s.pinimg.com/images/user/default_75.png"===i?void 0:i}}function u({board:e,forceViewer:t,isCompact:n,ownerOnly:i}){const u=(0,r.ZP)(),h=(0,s.Z)(),p=i?[c(e.owner)]:function(e,t,n){const{collaborated_by_me:i,collaborating_users:r=[],owner:s}=e,a=[s];if(i||n){const e=r.findIndex((e=>t.isAuth&&e.id===t.id));if(-1!==e){const t=r.splice(e,1)[0];a.push(t)}else a.push(t)}const l=o()(r,"full_name");return[...a,...l]}(e,h,t).map(c),g=p.slice(0,3).map((e=>e.name));let m="";switch(p.length){case 3:m=(0,l.Wc)(`${u._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames")}`,{first:`${g[0]}`,second:`${g[1]}`,last:`${g[2]}`});break;case 2:m=(0,l.Wc)(`${u._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames.")}`,{first:`${g[0]}`,second:`${g[1]}`});break;default:m=g.join(", ")}const f=p.length>3?(0,l.Wc)(`, ${u.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",p.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars")}`,{userNames:m,leftCount:""+(p.length-3)}):(0,l.Wc)(`, ${u._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators")}`,{userNames:m});return(0,d.jsx)(a.HE,{accessibilityLabel:f,collaborators:p,size:n?"xs":"sm"})}},330658:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(538052),o=n(451190),r=n(174523),s=n(585967),a=n(883119),l=n(785893);function d(e){const t=(0,r.ZP)(),{onSectionCreate:n,onClose:d,selectedBoard:c,useLayer:u=!0}=e,{isRTL:h}=(0,s.B)(),p=u?o.Z:a.u_,g=(0,l.jsx)(a.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"center",children:[(0,l.jsx)(a.xu,{maxWidth:400,children:(0,l.jsx)(a.X6,{align:"center",size:"md",children:t._("Add section","Modal header for adding a section","Modal header for adding a section")})}),(0,l.jsx)(a.xu,{left:h,paddingX:6,paddingY:5,position:"absolute",right:!h,top:!0,children:(0,l.jsx)(a.hU,{icon:"cancel",iconColor:"darkGray",size:"lg",accessibilityLabel:t._("Close","CreateSection.Modal.Icon","Icon to close section create modal"),onClick:d})})]})});return(0,l.jsx)(p,{accessibilityModalLabel:t._("Add a section to the board","modal to add a section to a board","modal to add a section to a board"),heading:g,onDismiss:d,size:"sm",children:(0,l.jsx)(a.xu,{display:"flex",color:"white",rounding:2,children:(0,l.jsx)(i.Z,{board:c,completeCreateSectionAction:n,onClearModal:d,positionRelative:!0,showTitle:!1})})})}},273341:(e,t,n)=>{n.d(t,{OJ:()=>a,Sd:()=>l,Q2:()=>d});var i=n(881219),o=n(711349),r=n(301314);const s=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],a={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:n,username:i},o)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:i,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...o?{orbac_subject_id:o}:Object.freeze({})})},l=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),d=e=>s.reduce(((t,n)=>{const s=[(0,o.Z)("profileBoards",(0,i.OV)(e,n))];return[!0,!1].forEach((t=>{[!0,!1].forEach((i=>{s.push((0,r.jB)(a.name,a.options({username:e,boardOrder:n,mixPublicSecret:t,filterStories:i})))}))})),t.concat(s)}),[])},691908:(e,t,n)=>{n.d(t,{a:()=>l,Z:()=>d});var i=n(667294),o=n(762803),r=n(785893);const{Provider:s,useHook:a}=(0,o.ZP)("ShowBoardlessPins");function l({children:e}){const[t,n]=(0,i.useState)(!1);return(0,r.jsx)(s,{value:{showBoardlessPinsModal:t,setShowBoardlessPinsModal:n},children:e})}const d=a},266265:(e,t,n)=>{n.d(t,{o:()=>c,Z:()=>u});var i=n(174523),o=n(34411),r=n(535258),s=n(549135),a=n(998864),l=n(883119),d=n(785893);const c="AddPinRep";function u({ctaText:e,handleClick:t,height:n,iconSize:c,textSize:u}){const h=(0,i.ZP)(),p=(0,o.Z)(),g=(0,a.Z)({shouldStopEventPropagation:!1})((()=>{t&&t(),p.isPartner&&(0,s.j)(101,{component:0,element:10643})}));return(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.iP,{role:"link",onTap:g,href:"/pin-builder/",children:(0,d.jsxs)(l.Zb,{children:[(0,d.jsx)(l.xu,{alignItems:"center",color:"lightGray",display:"flex",fit:!0,height:n||r.xf,justifyContent:"center",rounding:2,width:n||void 0,children:(0,d.jsx)(l.xu,{color:"white",height:c||40,rounding:"circle",width:c||40,children:(0,d.jsx)(l.JO,{accessibilityLabel:"",color:"red",icon:"add-circle",inline:!0,size:c||40})})}),(0,d.jsx)(l.xu,{padding:2,children:(0,d.jsx)(l.xv,{color:"gray",size:u||"lg",weight:"bold",children:e||h._("Create Pin","label to open create pin modal","label to open create pin modal")})})]})})})}},756103:(e,t,n)=>{n.d(t,{ZP:()=>Le,Tr:()=>Me,aU:()=>Be});var i=n(667294),o=n(40142),r=n(963232),s=n(150361),a=n.n(s),l=n(174523),d=n(883119),c=n(785893);function u({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:i,isManagedView:o,isNoTitle:r}){const s=(0,l.ZP)(),a=o?6:r?0:3;return(0,c.jsxs)(d.xu,{children:[!r&&(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:o?0:4,paddingY:a,children:[!o&&!r&&(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",children:s._("Comment Permissions","Label for comments setting on a pin in pin edit form","Label for comments setting on a pin in pin edit form")})}),(0,c.jsxs)(d.xu,{column:12,mdColumn:o?12:8,children:[(0,c.jsxs)(d.xu,{paddingY:1,display:"flex",alignItems:"center","data-test-id":"allow-comments-switch",children:[(0,c.jsx)(d.rs,{onChange:t,id:"CommentSwitch",switched:!e}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"CommentSwitch",children:(0,c.jsx)(d.xv,{size:"md",children:s._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form")})})})]}),n&&(0,c.jsxs)(d.xu,{paddingY:1,alignItems:"center",display:"flex",children:[(0,c.jsx)(d.rs,{onChange:n,id:"PhotoSwitch",switched:!i}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"PhotoSwitch",children:(0,c.jsx)(d.xv,{size:"md",children:s._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form")})})})]})]})]})]})}var h=n(631739),p=n(311866),g=n(273341),m=n(301314);var f=n(234316),b=n(618446),v=n.n(b),x=n(451190),y=n(729787),_=n(549156),w=n(881220),C=n(475446);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends i.PureComponent{constructor(...e){super(...e),j(this,"state",{deleting:!1}),j(this,"unmounted",!1),j(this,"handleConfirm",(()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then((()=>this.handleDeleteDidComplete())).catch((e=>this.handleDeleteDidComplete(e)))})),j(this,"handleDeleteDidComplete",(e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast((({onHide:e})=>(0,c.jsx)(w.Z,{onHide:e,text:this.props.i18n._("Pin deleted!","User deleted their pin","User deleted their pin")})))}))}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return(0,c.jsx)(x.Z,{heading:this.props.i18n._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:this.props.i18n._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{fullWidth:!0,onClick:e,text:this.props.i18n._("Cancel"," - "," -- ")})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(_.Z,{id:"confirm-delete-pin",children:(0,c.jsx)(y.Z,{color:"red",onClick:this.handleConfirm,text:this.props.i18n._("Delete Pin"," - "," -- "),submitting:t})})})]}),children:(0,c.jsx)(d.xu,{padding:4,children:(0,c.jsx)(d.xv,{children:this.props.i18n._("Once you delete a Pin, you can't undo it!"," - "," -- ")})})})}}const I=(0,C.Cl)((function(e){const t=(0,l.ZP)();return(0,c.jsx)(S,{...e,i18n:t})}));I.displayName="DeletePinConfirmation";const P=I;function E({canEdit:e,onAltTextChange:t,altText:n}){const o=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"AltTextField",children:(0,c.jsx)(d.xv,{size:"md",children:o._("Alt text","EditPinModal.EditAltText","Label for editing alt text of pin")})})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:e?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.nv,{id:"AltTextField",onChange:({value:e})=>t({value:e.slice(0,500)}),size:"lg",value:n||""})}),(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.__,{htmlFor:"AltTextField",children:(0,c.jsx)(d.xu,{marginTop:1,children:(0,c.jsx)(d.xv,{size:"md",color:"gray",children:o._("This helps people using screen readers understand what your Pin is about.","EditPinModal.EditAltText","Label for editing alt text of pin")})})})})]}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",weight:"bold",children:n})})})]})]})}var T=n(530197),D=n(269307);function k({board:e={},canEdit:t,isOriginallyQuickCreatesBoard:n,onBoardChange:i,onBoardCreate:o,viewerId:r}){const s=(0,l.ZP)(),{showEnabledSaveBehavior:a}=(0,D.ZP)(r),u="quick_saves"===e.layout&&a,h="quick_creates"===e.layout;return(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"BoardPicker",children:(0,c.jsx)(d.xv,{size:"md",children:n?s._("Organize to a board (optional)","editPinModal.editBoard.optionalBoardLabel","Label for board dropdown to select optional board"):s._("Board"," - "," -- ")})})}),t?(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:(0,c.jsx)(T.Z,{board:e,isBoardlessPinsBoard:u,isQuickCreatesBoard:h,onBoardChosen:i,onBoardCreate:o})}):e.name&&(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",weight:"bold",children:e.name})})]})}var O=n(294184),B=n.n(O),R=n(308125),M=n(189509),A=n(549135);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z extends i.Component{constructor(...e){super(...e),L(this,"state",{focused:!1}),L(this,"suggestionAnchorRef",(0,i.createRef)()),L(this,"setRef",(e=>this.textAreaRef=e)),L(this,"handleBlur",(e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)})),L(this,"handleFocus",(e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t(e)})),L(this,"handleChange",(({text:e,mentions:t})=>{this.props.onDescriptionChange({value:e,userMentionTags:t})}))}render(){const{canAddUserMentionTags:e,canEdit:t,description:n,errorMessage:o,initialMentions:r,label:s,placeholder:a,onDescriptionChange:l}=this.props,{focused:u}=this.state;return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"DescriptionField",children:(0,c.jsx)(d.xv,{size:"md",children:s})})}),t?(0,c.jsxs)(d.xu,{column:12,mdColumn:8,children:[(0,c.jsx)(d.xu,{children:e?(0,c.jsx)("div",{className:B()("DescriptionField",{DescriptionField__error:!!o,DescriptionField__focus:u}),id:"DescriptionField",ref:this.suggestionAnchorRef,role:"textbox",children:(0,c.jsx)(R.Z,{initialMentions:r,initialText:n,onAddMention:()=>{(0,A.j)(8905,{element:116,tag_type:1})},onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{(0,A.j)(8908,{element:116,tag_type:1})},onSuggestionsPopoverOpen:()=>{(0,A.j)(8907,{element:116,tag_type:1})},maxSuggestions:4,placeholder:a})}):(0,c.jsx)(d.Kx,{id:"DescriptionField",placeholder:a,value:n,onChange:({value:e})=>{l({value:e,userMentionTags:[]})},hasError:(o||"").length>0})}),!!o&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(M.Z,{errorMessage:o,htmlFor:"pin-edit-description"})})]}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",weight:"bold",children:n})})]})]})}}const N=Z;var F=n(479996),z=n(606657),H=n(329485);function U({isCarousel:e,onMouseEnter:t,onMouseLeave:n,shouldShowCarouselSliders:i,onCarouselSlide:o,currentIndex:r,carouselData:s,pinId:a,description:l,image:u={}}){return(0,c.jsxs)(d.xu,{paddingX:4,paddingY:3,children:[e&&(()=>{const e=s&&s.carousel_slots&&s.carousel_slots.length||1;return e>=2&&(0,c.jsx)(d.xu,{padding:2,children:(0,c.jsx)(d.__,{htmlFor:"CardsIndex",children:(0,c.jsxs)(d.xv,{size:"md",children:[r+1,"/",e]})})})})(),(0,c.jsx)(d.zd,{width:236,children:(0,c.jsxs)(d.xu,{onMouseEnter:t,onMouseLeave:n,children:[(0,c.jsxs)(d.zd,{rounding:2,wash:!0,children:[e&&i&&(0,c.jsx)(d.xu,{display:"inlineBlock",height:"100%",position:"absolute",width:"100%",zIndex:new d.Ry(10),dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},children:(0,c.jsx)(z.default,{handleCarouselSwipe:o,carouselIndex:r,carouselData:s,pinId:a,isEditMode:!0})}),e?(0,c.jsx)(H.Z,{carouselIndex:r,isCloseup:!1,carouselData:s,pinId:a,isEditMode:!0}):(0,c.jsx)(d.Ee,{alt:l,color:"#efefef",naturalHeight:u.height,src:u.url,naturalWidth:u.width})]}),e&&(0,c.jsx)(F.default,{carouselIndex:r,carouselData:s,pinId:a,handleCarouselSwipe:o,isEditMode:!0,variant:"legacy"})]})})]})}function W({apiErrorMessage:e,shouldShowGenericUpdateError:t,onClickDeleteButton:n,disableDelete:i,onHide:o,shouldDisableSave:r,triggerBoardAndSectionCreate:s}){const a=(0,l.ZP)();return(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(_.Z,{id:"delete-pin-button",children:(0,c.jsx)(d.zx,{fullWidth:!0,text:a._("Delete","EditPinModal.EditPinFooter.Delete","delete pin"),onClick:n,disabled:i})}),t&&(0,c.jsx)(d.xu,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center",children:(0,c.jsx)(M.Z,{errorMessage:e||a._("Sorry! There was an error editing your Pin.","EditPinModal.EditPinFooter.ErrorMessageToast","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})}),(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2,children:[(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.zx,{fullWidth:!0,text:a._("Cancel","EditPinModal.EditPinFooter.Cancel","cancel changes"),onClick:o})}),(0,c.jsx)(d.xu,{paddingX:2,"data-test-id":"edit-pin-save",children:(0,c.jsx)(d.zx,{fullWidth:!0,text:a._("Save","EditPinModal.EditPinFooter.Save","save changes"),color:"red",onClick:s,disabled:r})})]})]})}function G({pinNoteText:e,isCollaborative:t,onPinNoteChange:n}){const o=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"PinNoteField",children:(0,c.jsx)(d.xv,{size:"md",children:t?o._("Note to group","editPinModal.editPinNote.groupTitle","Label for editing private note on group Pin"):o._("Note to self","editPinModal.editPinNote.title","Label for editing private note on Pin")})})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,"data-test-id":"note-to-self-input",children:(0,c.jsx)(d.Kx,{errorMessage:e.length>=500?o._("Character limit reached","editPinModal.editPinNote.warningText","Text to inform user they have reached the length limit on Pin note"):void 0,id:"PinNoteField",onChange:n,placeholder:o._("Add a private note to remember your ideas about this Pin","editPinModal.editPinNote.placeholderText","Placeholder for editing private note"),value:e})})]})]})}var V=n(221487);function q({board:e,canEdit:t,currentSection:n,onSectionChange:i,onSectionCreate:o,sectionId:r,sectionName:s}){const a=(0,l.ZP)(),u=null!=e&&e.id?V.Z:V.x;return"quick_creates"===(null==e?void 0:e.layout)?null:(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:3,children:(0,c.jsx)(d.__,{htmlFor:"SectionPicker",children:(0,c.jsx)(d.xv,{size:"md",children:a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")})})}),t&&e?(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:(0,c.jsx)(u,{board:e,onSectionChange:i,selectedSectionId:r,selectedSectionName:s,onSectionCreate:o})}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",weight:"bold",children:n&&!(e||{}).is_collaborative?n.title:a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")})})]})}var $=n(72984),Y=n(388291),X=n(247093),K=n(910963),J=n(155643);function Q({keyValueBlocks:e,listBlocks:t,onUpdateKeyValueBlock:n,onUpdateListBlocks:o,templateType:r}){const s=(0,l.ZP)();return(0,c.jsxs)(d.xu,{children:[1===r&&(0,c.jsxs)(i.Fragment,{children:[(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:s._("Cook time","editModal.editStoryPinModal.details.cookTime","Label for cook time detail")}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(J.Z,{onUpdate:e=>n(0,e),value:e[0]||null})})]},"cooktime"),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:s._("Servings","editModal.editStoryPinModal.details.servings","Label for serving size detail")}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(K.Z,{showLabel:!1,onUpdate:e=>n(1,e),value:e[1]||null})})]},"servingSize")]}),2===r&&(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:s._("Difficulty","editModal.editStoryPinModal.details.difficulty","Label for difficulty level detail")}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(Y.Z,{showLabel:!1,onUpdate:e=>n(2,e),value:e[2]||null})})]},"difficulty"),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:(()=>{switch(r){case 1:return s._("Ingredients","editModal.editStoryPinModal.listHeading","Heading for an ingredients list");case 2:return s._("Supplies","editModal.editStoryPinModal.listHeading","Heading for a supplies list");default:return s._("What they'll need","editModal.editStoryPinModal.listHeading","Heading for a generic list")}})()}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(X.Z,{listBlocks:t,onUpdate:o})})]})]})}var ee=n(325946),te=n(757839);var ne=n(946753),ie=n(181307),oe=n(768491);const re=(0,o.connect)((()=>({})),(e=>({completeResourceFetch:t=>e((0,m.Sr)("PinResource",{field_set_key:"detailed",id:t.resource_response.data.id},t)),invalidatePin:t=>e((0,m.jB)("PinResource",{field_set_key:"detailed",id:t}))})))((function({apiErrorMessage:e,board:t,completeResourceFetch:n,commentsDisabled:o,description:r,disableDelete:s,invalidatePin:a,isLoadingPin:h,isProcessing:g,onChangeBoard:m,onChangeComment:f,onChangeSection:b,onClickBoardCreate:v,onClickDeleteButton:y,onClickEditPages:_,onClickSectionCreate:w,onHide:C,pinResource:j,sectionId:S,sectionName:I,title:P,triggerBoardAndSectionCreate:E}){var D,k;const O=(0,l.ZP)(),B=null!==(D=j.data)&&void 0!==D?D:{},R=B.story_pin_data,A=null!==(k=B.images&&B.images["474x"])&&void 0!==k?k:{},[L,Z]=(0,i.useState)(!1),[N,F]=(0,i.useState)(null),[z,H]=(0,i.useState)(!1),[U,W]=(0,i.useState)({}),[G,q]=(0,i.useState)([]);(0,i.useEffect)((()=>{var e;const t=(null==R||null===(e=R.metadata)||void 0===e?void 0:e.basics)||null;if(t){const e=(0,te._i)(t);W(e.keyValueBlocks||{}),q(e.listBlocks||[])}}),[R]),(0,i.useEffect)((()=>{e&&F(e)}),[e]);const Y=(e,t)=>{W({...U,[e]:t}),Z(!0)},X=e=>{q(e),Z(!0)},{anyEnabled:K}=(0,ie.aq)("web_story_pin_edit_deprecation"),{anyEnabled:J}=(0,ie.aq)("web_sp2s"),re=B.created_at?new Date(B.created_at):null,se=re&&(0,$.Z)(re,14),ae=!K&&!!se&&new Date<se,le=G.length>0||Object.keys(U).length>0,de=J?(0,ne.nk)(O._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Idea Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14}):(0,ne.nk)(O._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Story Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14});return(0,c.jsx)(x.Z,{accessibilityModalLabel:O._("Edit your previously saved pin","editModal.editStoryPinModal.accessibilityLabel","Accessible label for edit previously saved story pin modal"),footer:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,c.jsx)(d.xu,{"data-test-id":"delete-pin-button",children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",disabled:s,onClick:y,size:"lg",text:O._("Delete","editModal.editStoryPinModal.deleteButton","Delete button for previously saved story pin")})}),!!N&&(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"center",children:(0,c.jsx)(M.Z,{errorMessage:N,htmlFor:"pin-edit-generic-error"})}),(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{fullWidth:!0,onClick:C,size:"lg",text:O._("Cancel","editModal.editStoryPinModal.cancelButton","Cancel button to not save edits to previously saved story pin")})}),(0,c.jsx)(d.xu,{"data-test-id":"edit-pin-save",paddingX:1,children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"red",onClick:()=>{if(L&&R){H(!0);const e=(0,te.Fe)({keyValueBlocks:U,listBlocks:G}),t=function(e){var t,n,i,o,r,s,a;return{metadata:{basics:null!==(t=e.metadata)&&void 0!==t&&t.basics?(0,te.CH)(e.metadata.basics):void 0,diy_data:null===(n=e.metadata)||void 0===n?void 0:n.diy_data,pin_image_signature:null===(i=e.metadata)||void 0===i?void 0:i.pin_image_signature,pin_title:null===(o=e.metadata)||void 0===o?void 0:o.pin_title,recipe_data:null===(r=e.metadata)||void 0===r?void 0:r.recipe_data,template_type:null===(s=e.metadata)||void 0===s?void 0:s.template_type},pages:(a=e.pages,(null!=a?a:[]).map((e=>{var t,n;const i=(null!==(t=e.blocks)&&void 0!==t?t:[]).map((e=>{switch(e.type){case"story_pin_paragraph_block":return{block_style:e.block_style,style:e.style,text:e.text,type:0};case"story_pin_heading_block":return{block_style:e.block_style,level:e.level,style:e.style,text:e.text,type:1};case"story_pin_image_block":return{block_style:e.block_style,image_signature:e.image_signature,tracking_id:e.tracking_id,type:2};case"story_pin_video_block":return{block_style:e.block_style,tracking_id:e.tracking_id,type:3,video_signature:e.video_signature};default:return null}})).filter(Boolean);return i.length>0?{blocks:i,layout:e.layout,style:null!==(n=e.style)&&void 0!==n&&n.background_color?{background_color:e.style.background_color}:void 0}:null})).filter(Boolean))}}(R),i={...t,metadata:{...t.metadata,basics:e}},o={pin_id:B.id,story_pin:JSON.stringify(i)};p.ZP.create("StoryPinEditResource",o).callUpdate().then((e=>{a(B.id),n(e),E()})).catch((e=>{F(e.message),H(!1)}))}else E()},size:"lg",text:O._("Done","editModal.editStoryPinModal.doneButton","Done button to save edits to previously saved story pin")})})]})]}),heading:O._("Edit Pin","editModal.editStoryPinModal.heading","Edit a previously saved story pin"),onDismiss:C,size:"md",children:h||!j.isLoaded||z||g?(0,c.jsx)(d.xu,{paddingX:12,paddingY:9,children:(0,c.jsx)(d.$j,{accessibilityLabel:O._("Loading edit information","editPinModal.editStoryPinModal.spinner","Accessible label for the edit pin loading icon"),show:!0})}):(0,c.jsx)(d.xu,{overflow:"hidden",children:(0,c.jsx)(d.xu,{marginEnd:-4,marginStart:-4,children:(0,c.jsx)(ee.Z,{name:"web_story_pin_limit_edits",children:({anyEnabled:e})=>{var n,s,a,l,h,p;return(0,c.jsxs)(d.xu,{display:"flex",minHeight:300,overflow:"hidden",paddingX:8,children:[(0,c.jsxs)(d.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",paddingX:4,children:[(0,c.jsxs)(d.zd,{wash:!0,rounding:4,width:120,children:[(0,c.jsx)(d.Ee,{alt:r,color:"#efefef",naturalHeight:null!==(n=A.height)&&void 0!==n?n:1,naturalWidth:null!==(s=A.width)&&void 0!==s?s:1,src:null!==(a=A.url)&&void 0!==a?a:""}),(0,c.jsx)(d.xu,{position:"absolute",left:!0,top:!0,padding:2,children:(0,c.jsxs)(d.xu,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"center",opacity:.8,padding:2,rounding:"pill",children:[(0,c.jsx)(d.JO,{accessibilityLabel:J?O._("Idea Pin icon","editModal.editStoryPinModal.storyPinIndicator","Idea Pin icon indicator"):O._("Story Pin icon","editModal.editStoryPinModal.storyPinIndicator","Story Pin icon indicator"),color:"darkGray",icon:"idea-pin",size:12}),(0,c.jsx)(d.xu,{marginStart:1,children:(0,c.jsx)(d.xv,{size:"md",weight:"bold",children:null===(l=B.story_pin_data)||void 0===l?void 0:l.page_count})})]})})]}),ae||!e?(0,c.jsx)(d.xu,{"data-test-id":"edit-pages-button",paddingY:2,children:(0,c.jsx)(d.zx,{onClick:_,text:O._("Edit pages","editModal.editStoryPinModal.editPagesButton","Edit pages label for story pin creation entry point")})}):null]}),(0,c.jsx)(d.xu,{direction:"column",display:"flex",flex:"grow",paddingX:4,children:(0,c.jsx)(d.xu,{marginBottom:-2,marginTop:-2,children:(0,c.jsx)(d.xu,{maxHeight:500,overflow:"auto",paddingX:1,children:(0,c.jsxs)(d.xu,{maxWidth:504,children:[e&&se&&(0,c.jsx)(d.xu,{paddingY:2,children:ae?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xv,{size:"md",children:(0,ne.nk)(O._("Edit until {{ editDate }}","editModal.editStoryPinModal.lastEditableDate","Let user know the last date this Pin can be edited on"),{editDate:(0,c.jsx)(oe.Z,{dateFormatType:oe.k.NUMERIC,useUTC:!1,value:se},`noEditsTwoWeeksAfter-${null!==(h=B.created_at)&&void 0!==h?h:""}`)})}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.xv,{color:"gray",size:"md",children:de})})]}):(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xv,{size:"md",children:O._("Editing","editModal.editStoryPinModal.editLabel","Label header for informing users story pin is only editable for board selection")}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",color:"gray",children:O._("Only board selection and engagement settings can be changed!","editModal.editStoryPinModal.editLabel","Label header for informing users story pin is only editable for board selection")})})]})}),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:O._("Title","editModal.editStoryPinModal.titleLabel","Label for form input where users will input the title of their pin")}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsxs)(d.xu,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"between",padding:4,rounding:4,children:[(0,c.jsx)(d.xv,{color:"gray",lineClamp:1,children:P||""}),(0,c.jsx)(d.JO,{accessibilityLabel:O._("Lock","editModal.editStoryPinModal.lockIcon.accessibilityLabel","Label for the lock icon to show that editing a story pin title is locked"),color:"darkGray",icon:"lock"})]})})]}),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:O._("Board","editModal.editStoryPinModal.boardLabel","Label for dropdown where users will choose their board")}),(0,c.jsx)(d.xu,{paddingY:2,children:t?(0,c.jsx)(T.Z,{board:t,isStoryPin:!0,onBoardChosen:m,onBoardCreate:v}):null})]}),(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:O._("Section","editModal.editStoryPinModal.sectionLabel","Label for dropdown where users will choose their section")}),(0,c.jsx)(d.xu,{paddingY:2,children:(null==t?void 0:t.id)&&(0,c.jsx)(V.Z,{isStoryPin:!0,board:t,onSectionChange:b,onSectionCreate:w,selectedSectionId:S,selectedSectionName:I})})]}),e&&le&&ae&&(0,c.jsx)(Q,{keyValueBlocks:U,listBlocks:G,onUpdateKeyValueBlock:Y,onUpdateListBlocks:X,templateType:null==R||null===(p=R.metadata)||void 0===p?void 0:p.template_type}),B.can_delete_did_it_and_comments&&(0,c.jsxs)(d.xu,{paddingY:2,children:[(0,c.jsx)(d.xv,{size:"md",children:O._("Comments and photos permissions","editModal.editStoryPinModal.commentsAndPhotosPermissionsLabel","Label for dropdown where users can toggle off permissions for comments and photos")}),(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(u,{isNoTitle:!0,commentsDisabled:o,onCommentChange:f})})]})]})})})})]})}})})})})}));function se({canEdit:e,onTitleChange:t,title:n,errorMessage:o}){const r=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"TitleField",children:(0,c.jsx)(d.xv,{size:"md",children:r._("Title","Label for editing title of pin","Label for editing title of pin")})})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:e?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{"data-test-id":"pin-title-input",children:(0,c.jsx)(d.nv,{hasError:(o||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})}),!!o&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(M.Z,{errorMessage:o,htmlFor:"pin-edit-title"})})]}):(0,c.jsx)(d.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",weight:"bold",children:n})})})]})]})}function ae({onChangeWebsite:e,link:t,errorMessage:n}){const o=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"WebsiteField",children:(0,c.jsx)(d.xv,{size:"md",children:o._("Website"," - "," -- ")})})}),(0,c.jsxs)(d.xu,{column:12,mdColumn:8,children:[(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.nv,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})}),!!n&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(M.Z,{errorMessage:n,htmlFor:"pin-edit-website"})})]})]})]})}var le=n(646942),de=n(411221),ce=n(418102),ue=n(535718);function he({onShoppingRecChange:e,shoppingRecDisabled:t,storyPinData:n}){const o=(0,l.ZP)(),{isLoaded:r,data:s}=(0,ue.Z)({name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:"user.ip_stela_rec_disabled"}}});if(!r||!s)return null;const{has_product_pins:a}=n||{},u=s.ip_stela_rec_disabled;return(0,c.jsx)(i.Fragment,{children:(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,children:[(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",children:o._("Shopping recommendations","Heading for shopping recommendations permissions","shopping.recommendations")})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:(0,c.jsxs)(d.xu,{paddingY:1,display:"flex",alignItems:"start",children:[(0,c.jsx)(d.rs,{onChange:e,id:"PhotoSwitch",switched:!t,disabled:u||a}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"stelaSwitch",children:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(d.xv,{size:"md",color:u?"gray":"darkGray",children:o._("Show similar products","Label to toggle similar products on ideal pin","ideaPin.stela.toggle")}),u?(0,c.jsxs)(d.xv,{color:"gray",size:"md",children:[o._("You’ve disabled shopping recommendations for your profile ","Text indicating shopping recommendations are currently disabled","ideaPin.disable"),(0,c.jsx)(d.xv,{inline:!0,size:"md",weight:"bold",color:"gray",children:(0,c.jsx)(d.rU,{inline:!0,href:"/settings/permissions",children:o._("Edit profile settings","Link to the settings page to enable shopping recommendations on idea pins","ideaPin.link")})})]}):(0,c.jsxs)(d.xu,{display:"flex",direction:"column",marginTop:1,children:[(0,c.jsx)(d.xu,{marginBottom:1,children:(0,c.jsx)(d.xv,{size:"md",children:o._("People can shop products similar to what’s shown in this Idea Pin using visual search","Text indicating shopping recommendations are currently enabled","ideaPin.enable")})}),(0,c.jsx)(d.xv,{size:"md",children:o._("Shopping recommendations aren’t available for Idea Pins with product or paid partnership tags","Explanation about how stela on idea pins with tagged products arent available","ideaPin.tagged.unavailable")})]})]})})})]})})]})})}function pe({shoppingRecDisabled:e,onShoppingRecChange:t,isNoTitle:n}){const o=(0,l.ZP)();return(0,c.jsxs)(i.Fragment,{children:[!n&&(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:n?0:3,children:[!n&&(0,c.jsx)(d.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(d.xv,{size:"md",children:o._("Recommendations","EditPinModal.recommendations","Title of a section in the edit pin modal to manage recommendations on a specific pin.")})}),(0,c.jsx)(d.xu,{column:12,mdColumn:8,children:(0,c.jsxs)(d.xu,{paddingY:1,display:"flex",alignItems:"center",children:[(0,c.jsx)(d.rs,{onChange:t,id:"ShoppingRecSwitch",switched:!e}),(0,c.jsx)(d.xu,{paddingX:2,children:(0,c.jsx)(d.__,{htmlFor:"ShoppingRecSwitch",children:(0,c.jsx)(d.xv,{size:"md",children:o._("Show shopping recommendations","EditPinModal.recommendations.showShoppingRecommendations.label","Label for toggling showing shopping recommendations on a specific pin.")})})})]})})]})]})}var ge=n(500115),me=n(34411),fe=n(361509),be=n(81260),ve=n(613330),xe=n(431260),ye=n(101691),_e=n(767523),we=n(383506),Ce=n(159276),je=n(585967),Se=n(708206),Ie=n(40197),Pe=n(622400),Ee=n(997993),Te=n(742979),De=n(855168);function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e){return Boolean(e&&e.trim().length)}function Be(e,t){const n=Oe(e),i=Oe(t);return(n||i)&&e!==t}class Re extends i.Component{constructor(...e){var t,n,i,o,r,s,l,d,c,u,g,m,f,b,x,y,_,w,C;super(...e),ke(this,"state",{altText:(null===(t=this.props.pinResource.data)||void 0===t?void 0:t.alt_text)||"",board:(null===(n=this.props.pinResource.data)||void 0===n?void 0:n.board)||null,commentsDisabled:(null===(i=this.props.pinResource.data)||void 0===i?void 0:i.comments_disabled)||(null===(o=this.props.pinResource.data)||void 0===o?void 0:o.did_it_disabled)||!1,description:(null===(r=this.props.pinResource.data)||void 0===r||null===(s=r.description)||void 0===s?void 0:s.trim())||"",apiErrorMessage:null,link:(null===(l=this.props.pinResource.data)||void 0===l?void 0:l.link)||"",pinNoteText:(null===(d=this.props.pinResource.data)||void 0===d||null===(c=d.pin_note)||void 0===c?void 0:c.text)||"",sectionId:(null===(u=this.props.pinResource.data)||void 0===u||null===(g=u.section)||void 0===g?void 0:g.id)||null,sectionName:(null===(m=this.props.pinResource.data)||void 0===m||null===(f=m.section)||void 0===f?void 0:f.title)||null,showDeleteConfirmation:!1,carousel_data:(null===(b=this.props.pinResource.data)||void 0===b?void 0:b.carousel_data)||null,title:(null===(x=this.props.pinResource.data)||void 0===x?void 0:x.title)||"",isLoadingPin:!Boolean(this.props.pinResource.isLoaded),isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:(null===(y=this.props.pinResource.data)||void 0===y||null===(_=y.carousel_data)||void 0===_?void 0:_.index)||0,shoppingRecDisabled:null===(w=this.props.pinResource.data)||void 0===w?void 0:w.shopping_rec_disabled,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:(null===(C=this.props.pinResource.data)||void 0===C?void 0:C.user_mention_tags)||[]}),ke(this,"onClickDeleteButton",(()=>this.setState({showDeleteConfirmation:!0}))),ke(this,"onHideConfirmation",(()=>this.setState({showDeleteConfirmation:!1}))),ke(this,"updateCarouselSlotIndex",(()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})})),ke(this,"handleBoardChange",(e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})})),ke(this,"createBoard",(e=>{const{createBoard:t,viewer:n,orbacActingAs:i}=this.props,{board:o}=this.state,r=(0,Ce.lJ)(n,i);!o.id&&o.name&&e&&t(o.name,e,r).then((e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}}))})),ke(this,"handleBoardCreateClick",(e=>{if(!e)return;const t={name:e,privacy:h.Z.BoardPrivacy.PUBLIC,access:"write"};this.setState({board:t,sectionId:null,sectionName:null})})),ke(this,"createSection",(()=>{const{board:e,sectionName:t}=this.state,{viewer:n,orbacActingAs:i}=this.props,o=(0,Ce.lJ)(n,i);if(!t)return;if(!e.id)return void this.createBoard();const r={boardId:e.id,name:t},{createSection:s}=this.props;s(r,o).then((e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())})).catch((()=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:null})}))})),ke(this,"handleSectionCreateClick",(e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})})),ke(this,"handleSectionChange",(e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1}))),ke(this,"handleDeletePin",(()=>{const{advertiser_id:e,changeBoardPinCount:t,changeUserPinCount:n,dispatch:i,onDelete:o,onHide:r,orbacActingAs:s,pinId:a,pinResource:{data:l},removeBoardlessPin:d,viewer:c}=this.props,u=(0,Ce.lJ)(c,s),h={...e?{advertiser_id:e}:{},...u?{orbac_subject_id:u}:Object.freeze({}),id:a};return p.ZP.create("PinResource",h).callDelete().then((()=>{if(this._isMounted){if(!l)return;const{board:{id:e}={},pinner:{id:s}={},section:d}=l,c=null==d?void 0:d.id;t({boardId:e,sectionId:c,increment:-1}),n({userId:s,increment:-1}),i((0,Ie.xQ)(e)),i((0,de.Z)({feedId:c||e,feedType:c?ve.DV.SECTION_PINS:ve.DV.BOARD_PINS,itemIds:[a],itemType:"pin"})),c&&i((0,le.Z)(c)),ce.ZP.instance.publish(s,"pinDeleted"),r(),o&&o()}c.id&&d(c.id,a)}))})),ke(this,"sanitizeCarouselData",(e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach((e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)})),t}}return null})),ke(this,"triggerBoardAndSectionCreate",(e=>()=>{const{board:t,sectionId:n,sectionName:i}=this.state;t&&!t.id&&t.name?this.createBoard(e):!n&&i?this.createSection():this.handleSave()})),ke(this,"logPinEditEvent",((e,t,n,i,o)=>{const r={},{pinId:s,view:a,viewParameter:l}=this.props,{userMentionTags:d}=this.state;if(r.objectId=s,r.num_user_mention_tags=d.length,e&&(r.board_was_modified=!0),!e&&t&&(r.board_section_was_modified=!0),n){const{description:e}=this.state,{description:t}=o;r.original_pin_description=t,r.edited_pin_description=e}if(i){const{carousel_data:e}=this.state,{carousel_data:t}=o;r.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(t)),r.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(e))}(0,A.j)(2,{component:208,view:a,viewParameter:l,...r})})),ke(this,"handleSave",(()=>{this.setState({apiErrorMessage:null,isProcessing:!0});const{advertiser_id:e,completeResourceFetch:t,invalidatePinResource:n,orbacActingAs:i,pinId:o,pinResource:{data:r},onHide:s,removeBoardlessPin:a,updatePinNote:l,viewer:d}=this.props;if(!r)return;const{alt_text:c,board:u,comments_disabled:h,did_it_disabled:g,title:m,description:f,link:b,pin_note:x,section:y,carousel_data:_,shopping_rec_disabled:w}=r,C=null==x?void 0:x.text,{carousel_data:j,shouldShowValidationLinkFormatError:S}=this.state;let I;if(j){const e=this.sanitizeCarouselData();e&&(I=JSON.stringify(e))}const{altText:P,board:E,commentsDisabled:T,currentIndex:D,title:k,description:O,pinNoteText:B,sectionId:R,shoppingRecDisabled:M,carousel_data:A,userMentionTags:L}=this.state,Z=E||u,N=S?b:this.state.link,F=(0,Ce.lJ)(d,i),z={alt_text:P,board_id:null==Z?void 0:Z.id,board_section_id:R,carousel_data_json:I,description:O,disable_comments:T,disable_did_it:T,id:o,link:N,shopping_rec_disabled:M,title:k,user_mention_tags:JSON.stringify(L),...e?{advertiser_id:e}:{},...F?{orbac_subject_id:F}:Object.freeze({})},H=y&&y.id||null,U=null==Z?void 0:Z.id,W=null==u?void 0:u.id,G=Be(c,P),V=W!==U,q=(Boolean(H)||Boolean(R))&&H!==R,$=Be(m,k),Y=Be(f,O),X=Be(b,N),K=Boolean(A)&&Boolean(_)&&!v()(A,_),J=h!==T||g!==T,Q=Be(C,B);G||V||q||$||Y||Q||X||K||J||w!==M?(Q&&l(o,C,B,F),p.ZP.create("PinResource",z).callUpdate().then((e=>{if(this._isMounted){var i;const{changeBoardPinCount:c,onSubmit:u,pinId:h,pinMoved:p}=this.props;var o,l;if((V||q)&&U&&W)p({selectedPinIds:[h],source:{boardId:W,sectionId:H},target:{boardId:U,sectionId:R}}),c({boardId:U,sectionId:R||void 0,increment:1}),c({boardId:W,sectionId:H||void 0,increment:-1}),d.id&&"quick_saves"===(null===(o=r.board)||void 0===o?void 0:o.layout)&&a(d.id,h);if(u&&U&&null!=Z&&Z.url)u({boardId:U,title:null!==(l=Z.name)&&void 0!==l?l:"",sectionId:R,url:Z.url});s(),n(h,F),null!==(i=e.resource_response)&&void 0!==i&&i.data.carousel_data&&(e.resource_response.data.carousel_data.index=D),t(e,F),this.logPinEditEvent(V,q,Y,K,r)}})).catch((()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:n}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!n})}))):(s(),n(o,F)),this.setState({isProcessing:!1})})),ke(this,"handleTextChanges",((e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const i=a()(n),{carousel_slots:o=[]}=i,{currentIndex:r,shouldApplyTextToAll:s,description:l,link:d,title:c}=this.state,u=this.valueIsValidForType(e,t);switch(s?o.forEach((n=>n[t]=e)):o[r]&&(o[r][t]=e),t){case"details":const t=0===r?e:l;this.setState({description:t,carousel_data:i||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===r?e:d;this.setState({link:n,carousel_data:i||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const o=0===r?e:c;this.setState({title:o,carousel_data:i||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}})),ke(this,"handleDescriptionChange",(({value:e,userMentionTags:t})=>{const n=this.valueIsValidForType(e,"description"),i=this.valueIsValidForType(t,"userMentionTags");t.length<this.state.userMentionTags.length&&(0,A.j)(8906,{element:116,tag_type:1}),this.setState({description:e,userMentionTags:t,shouldShowValidationDescriptionError:!n,shouldShowValidationUserMentionTagsError:!i,shouldShowGenericUpdateError:!1})})),ke(this,"handleCarouselDetailsChange",(({value:e})=>{this.handleTextChanges(e,"details")})),ke(this,"handleTitleChange",(({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})})),ke(this,"handleCarouselTitleChange",(({value:e})=>{this.handleTextChanges(e,"title")})),ke(this,"handleAltTextChange",(({value:e})=>{this.setState({altText:e})})),ke(this,"valueIsValidForType",((e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===(0,Ee.FU)([(0,Ee.Jx)({message:this.props.i18n._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}})),ke(this,"handleWebsiteChange",(({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})})),ke(this,"handleCarouselWebsiteChange",(({value:e})=>{this.handleTextChanges(e,"link")})),ke(this,"handleCommentChange",(e=>this.setState({commentsDisabled:!e.value}))),ke(this,"handleShoppingRecChange",(e=>{this.setState({shoppingRecDisabled:!e.value})})),ke(this,"handleShouldApplyToAll",(e=>{if(e){const{currentIndex:t=0,carousel_data:n}=this.state;if(!n)return;const i=a()(n),{carousel_slots:o=[]}=i,{details:r,link:s,title:l}=o[t];o.forEach((e=>{e.details=r,e.title=l,e.link=s})),this.setState({carousel_data:i,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})})),ke(this,"handleCarouselSlider",(e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})})),ke(this,"handleClickStoryPinPages",(()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/idea-pin-builder/${e.id}/edit`)})),ke(this,"handleMouseEnter",(()=>{this.setState({shouldShowCarouselSliders:!0})})),ke(this,"handleMouseLeave",(()=>{this.setState({shouldShowCarouselSliders:!1})}))}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}componentDidUpdate(e){const{pinResource:{data:t,isLoaded:n},carouselSlotCurrentIndex:i}=this.props;var o;t&&n!==e.pinResource.isLoaded&&this.setState({altText:t.alt_text,board:t.board,commentsDisabled:t.comments_disabled||t.did_it_disabled,description:t.description&&t.description.trim(),isLoadingPin:!1,link:t.link,pinNoteText:(null===(o=t.pin_note)||void 0===o?void 0:o.text)||"",sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,carousel_data:t.carousel_data,currentIndex:void 0!==i?i:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[],shoppingRecDisabled:t.shopping_rec_disabled})}componentWillUnmount(){this._isMounted=!1}showErrorToast(e){this.props.toastManagerContext.showOneToast((({onHide:t})=>(0,c.jsx)(w.Z,{variant:"error",duration:5e3,onHide:t,text:e}))),this.props.onHide()}getCurrentUserId(e){return e.isAuth?e.id:""}render(){var e,t,n;const{disableDelete:i,onHide:o,orbacActingAs:s,pinResource:a,pinId:l,requestContext:h,viewer:p}=this.props,{experiments:g}=h,{altText:m,apiErrorMessage:f,board:b,commentsDisabled:v,description:y,link:_,pinNoteText:w,sectionId:C,sectionName:j,showDeleteConfirmation:S,title:I,isLoadingPin:T,isProcessing:D,carousel_data:O,shouldApplyTextToAll:B,currentIndex:R,shoppingRecDisabled:M,shouldDisableSave:A,shouldShowCarouselSliders:L,shouldShowValidationTitleError:Z,shouldShowValidationDescriptionError:F,shouldShowValidationLinkFormatError:z,shouldShowGenericUpdateError:H,shouldShowValidationUserMentionTagsError:V,userMentionTags:$}=this.state;if(S)return(0,c.jsx)(P,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const Y=a.data||{},X=!!(O&&O.carousel_slots&&O.carousel_slots.length>1),K=O&&O.carousel_slots&&O.carousel_slots.length>0&&O.carousel_slots[R]||{},{details:J="",link:Q="",title:ee=""}=K,te=!!(Y&&Y.story_pin_data_id&&Y.story_pin_data),ne=Y&&(Y.access||[]).includes("write")||this.props.canEdit||!!b&&(0,r.Z)({action:4,board:b,viewer:p})||!!b&&(0,Ce.KY)(p,b,s),ie=e=>{const t=(0,Ce.lJ)(e,s),n=t||this.getCurrentUserId(e),i=this.props.canEdit&&this.props.advertiserOwnerUserId?this.props.advertiserOwnerUserId:n;return ne&&!Y.is_repin&&!te&&(X||!O)&&(Y.native_creator&&Y.native_creator.id===i||X&&Y.pinner&&Y.pinner.id===i||Y.link_domain&&Y.link_domain.official_user&&Y.link_domain.official_user.id===i||!!Y.domain&&Y.pinner&&Y.pinner.id===i&&Y.pinner.domain_url&&Y.pinner.domain_url.includes(Y.domain))},oe=Y&&Y.images&&Y.images["474x"]||{},le=new Pe.v(h,"web_story_pin_creator").enabledWithNoActivation(),de=new Pe.v(h,"web_alt_text").enabledWithNoActivation(),ce=!new Pe.e(h,"web_ip_stela_opt_in").getGroup().includes("pwt")&&new Pe.v(h,"web_ip_stela_opt_in").enabled(),ue=(null===(e=Y.native_creator)||void 0===e?void 0:e.id)===this.getCurrentUserId(p),ge=te&&!!Y.story_pin_data&&ce&&ue,me=Y.story_pin_data&&Y.story_pin_data.metadata&&Y.story_pin_data.metadata.version?(0,fe.n)(Y.story_pin_data.metadata.version,be.RR):null,ve=null!=me&&me>=0,xe=!!Y.story_pin_data&&!!Y.story_pin_data.metadata&&!!Y.story_pin_data.metadata.is_editable&&Y.native_creator&&Y.native_creator.id===this.getCurrentUserId(p);if(te&&le&&ve&&xe)return(0,c.jsx)(re,{apiErrorMessage:f,board:b,commentsDisabled:v,description:y,disableDelete:!ne||i,isLoadingPin:T,isProcessing:D,onChangeBoard:this.handleBoardChange,onChangeComment:this.handleCommentChange,onChangeSection:this.handleSectionChange,onClickBoardCreate:this.handleBoardCreateClick,onClickDeleteButton:this.onClickDeleteButton,onClickEditPages:this.handleClickStoryPinPages,onClickSectionCreate:this.handleSectionCreateClick,onHide:o,pinResource:a,sectionId:C,sectionName:j,title:I,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(p.username&&p.username)});const ye=ie(p)?(0,c.jsx)(se,{canEdit:ne,onTitleChange:X?this.handleCarouselTitleChange:this.handleTitleChange,title:X&&ee?ee:I,errorMessage:Z?(0,we.Y8)(X,this.props.i18n):""}):null,_e=(ne||p.isAuth&&(Y.pinner||{}).id===p.id)&&ie(p)?(0,c.jsx)(N,{canAddUserMentionTags:!X,canEdit:ne,description:(X?J:y)||"",errorMessage:(()=>F?(0,we.MM)(X,this.props.i18n):V?(0,we.bl)(X,this.props.i18n):"")(),initialMentions:$,label:this.props.i18n._("Description","Label for editing description","Label for editing description"),placeholder:this.props.i18n._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:X?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,je=(0,c.jsx)(G,{isCollaborative:!(null==b||!b.is_collaborative),onPinNoteChange:({value:e})=>{this.setState({pinNoteText:e})},pinNoteText:w}),Se=(e=>ie(e)&&!(Y.aggregated_pin_data&&Y.aggregated_pin_data.is_shop_the_look))(p)?(0,c.jsx)(ae,{link:X&&Q?Q:_,onChangeWebsite:X?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:z?(0,we.qj)(X,this.props.i18n):""}):null,Ie=X?(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end",children:[(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.__,{htmlFor:"applyTextToAll",children:(0,c.jsx)(d.xv,{children:this.props.i18n._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")})})}),(0,c.jsx)(d.xu,{paddingX:2,paddingY:2,children:(0,c.jsx)(d.rs,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:B})})]}):null,Ee=ie(p)&&de?(0,c.jsx)(E,{canEdit:ne,onAltTextChange:this.handleAltTextChange,altText:m}):null,Te=Y.can_delete_did_it_and_comments?(0,c.jsx)(u,{commentsDisabled:v,onCommentChange:this.handleCommentChange}):null,De=g.getWithoutActivation("web_shopping_rec_setting").group;De.match("pwt")||g.v2ActivateExperiment("web_shopping_rec_setting");const ke=!["enabled","employees"].includes(De)||!p.isAuth||(null===(t=Y.pinner)||void 0===t?void 0:t.id)!==p.id||Y.is_repin||Y.story_pin_data||p.shopping_rec_disabled?null:(0,c.jsx)(pe,{shoppingRecDisabled:M,onShoppingRecChange:this.handleShoppingRecChange}),Oe=!!p.has_quicksave_board&&!!p.boardCount&&p.boardCount<2,Be="quick_creates"===(null===(n=Y.board)||void 0===n?void 0:n.layout),Re=(0,Ce.Ms)(p,s);return(0,c.jsx)(x.Z,{heading:this.props.i18n._("Edit this Pin","EditPinModal.ModalHeading.EditThisPin","Edit a previously saved pin"),accessibilityModalLabel:this.props.i18n._("Edit your previously saved pin","EditPinModal.ModalHeading.AccessibleLabel","Accessible label for edit previously saved pin modal"),size:Oe?"sm":"lg",onDismiss:o,footer:(0,c.jsx)(W,{apiErrorMessage:f,shouldShowGenericUpdateError:H,onClickDeleteButton:this.onClickDeleteButton,disableDelete:!ne||i,onHide:o,shouldDisableSave:A,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(Re)}),children:T||!a.isLoaded||D?(0,c.jsx)(d.kC,{alignItems:"center",justifyContent:"center",children:(0,c.jsx)(d.$j,{accessibilityLabel:this.props.i18n._("loading","EditPinModal.LoadingPin.Spinner","Accessible label for the edit pin loading icon"),show:!0})}):(0,c.jsxs)(d.xu,{display:"flex",justifyContent:Oe?"center":"between",minHeight:350,paddingX:4,children:[Oe?null:(0,c.jsxs)(d.xu,{column:12,mdColumn:9,children:[(0,c.jsx)(k,{board:b||Y.board,canEdit:ne,isOriginallyQuickCreatesBoard:Be,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick,viewerId:p.id||""}),(0,c.jsx)(q,{board:b||Y.board,canEdit:ne,onSectionCreate:this.handleSectionCreateClick,onSectionChange:this.handleSectionChange,sectionId:C,sectionName:j,currentSection:Y.section}),ye,_e,Se,Ie,Ee,je,Te,ke,ge&&(0,c.jsx)(he,{onShoppingRecChange:this.handleShoppingRecChange,shoppingRecDisabled:M,storyPinData:Y.story_pin_data})]}),(0,c.jsx)(U,{isCarousel:X,shouldShowCarouselSliders:L,onCarouselSlide:this.handleCarouselSlider,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,currentIndex:this.state.currentIndex,carouselData:this.state.carousel_data,pinId:l,description:y,image:oe})]})})}}const Me=(e,t,n)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...n?{orbac_subject_id:n}:Object.freeze({})}),Ae=(0,Se.compose)(C.Cl,(0,o.connect)(null,((e,t)=>({changeBoardPinCount:t=>e((0,Ie.Br)(t)),changeUserPinCount:t=>e((0,ye.JS)(t)),completeResourceFetch:(t,n)=>e((0,m.Sr)("PinResource",Me(t.resource_response.data.id,!1,n),t)),createBoard:(t,n,i)=>e(function(e,t,n){const i={name:e,privacy:h.Z.BoardPrivacy.PUBLIC,username:t,...n?{orbac_subject_id:n}:Object.freeze({})};return e=>p.ZP.create("BoardResource",i).callCreate().then((n=>{const i=n.resource_response.data;return e(t&&(0,m.jB)("BoardsResource",(0,g.Sd)(t,!1))),i}))}(t,n,i)),createSection:(n,i)=>e((0,f.Z)(n,t.i18n,i)),invalidatePinResource:(t,n)=>e((0,m.jB)("PinResource",Me(t,!0,n))),removeBoardlessPin:(t,n)=>e((0,de.Z)({feedId:t,feedType:ve.DV.BOARDLESS_PINS,itemIds:[n],itemType:"pin"})),pinMoved:(0,Se.bindActionCreators)(Te.S,e),updatePinNote:(t,n,i,o)=>e((0,xe._)(t,n,i,o))}))))(Re);function Le(e){const t=(0,l.ZP)(),n=(0,o.useSelector)((({advertiser:e})=>e)),i=(0,_e.Z)(),r=(0,me.Z)(),s=(0,Ce.lJ)(r,i),a=(0,ue.Z)({name:"PinResource",options:Me(e.pinId,!0,s)}),d=r.isAuth&&Boolean(n)?n.id:void 0,u=r.isAuth&&Boolean(n)&&n.owner_user_id!==r.id?n.owner_user_id:void 0,h=(0,ge.Z)(a.data);return(0,c.jsx)(Ae,{...e,dispatch:(0,o.useDispatch)(),history:(0,De.k6)(),pinResource:a,requestContext:(0,je.B)(),i18n:t,onDelete:()=>{var t;h(),null===(t=e.onDelete)||void 0===t||t.call(e)},orbacActingAs:i,advertiser_id:d,advertiserOwnerUserId:u,viewer:r})}},383506:(e,t,n)=>{function i(e,t){return e?t._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):t._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function o(e,t){return e?t._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):t._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function r(e,t){return t._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function s(e,t){return e?t._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):t._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}n.d(t,{Y8:()=>i,MM:()=>o,bl:()=>r,qj:()=>s})},685893:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(40142),o=n(266265),r=n(643011),s=n(345513),a=n(883119),l=n(785893);const d=1.25*s.J;function c({story:e}){const{action:{text:t,url:n},custom_properties:{image:i,image_alt:o}}=e;return(0,l.jsxs)(a.xu,{position:"relative",children:[(0,l.jsx)(a.zd,{rounding:4,height:d,width:s.J,children:(0,l.jsx)(a.Ee,{alt:o,color:"black",fit:"cover",naturalHeight:2688,naturalWidth:2e3,src:i})}),(0,l.jsx)(a.xu,{bottom:!0,display:"flex",justifyContent:"center",position:"absolute",width:s.J,padding:4,children:(0,l.jsx)(a.zx,{role:"link",href:n,fullWidth:!0,color:"white",text:t})})]})}const u=(0,i.connect)(((e,t)=>({story:e.stories[t.storyId]})),(()=>({})))((function({story:e,...t}){if(!e)return null;switch(e.story_type){case"BUBBLE_ONE_COL":return(0,l.jsx)(r.Z,{bubbles:e.objects,id:t.storyId,referringSource:e.referring_source,slotIndex:t.slot,storyType:e.story_type,title:e.title,viewType:t.viewType,viewParameter:t.viewParameter});case"feed_card_default":case"feed_card_video":return(0,l.jsx)(c,{story:e});case"add_pin":return(0,l.jsx)(o.Z,{});default:return null}}))},476666:(e,t,n)=>{n.d(t,{Z:()=>k});var i=n(667294),o=n(40142),r=n(627578),s=n(646942),a=n(439887),l=n(578429),d=n(411221),c=n(494353),u=n(807824),h=n(311866),p=n(881220),g=n(512806),m=n(500115),f=n(34411),b=n(613330),v=n(418102),x=n(946753),y=n(101691),_=n(475446),w=n(174523),C=n(998864),j=n(40197),S=n(164756),I=n(507010),P=n(855168),E=n(785893);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class D extends i.PureComponent{constructor(...e){super(...e),T(this,"state",{step:"unsaved"}),T(this,"deletePin",(e=>h.ZP.create("PinResource",{id:e}).callDelete())),T(this,"repin",(()=>{const{location:e,pin:t,target:{board:n,boardSection:i},eventContext:o,previousHistory:r}=this.props,s=(0,a.Z)(t,e,r)||`${t.tracking_params||""}-0`,l=!t.id&&t.image_url?(0,u.Z)(t.image_url,t.link):"",d=i&&i.id,c={board_id:n.id||"",clientTrackingParams:s,description:t.description||"",image_base64:t.image_base64,link:t.link,image_url:l,is_buyable_pin:!1,is_removable:t.promoted_is_removable,media_upload_id:t.media_upload_id,pin_id:t.id||"",section:d,title:t.title||"",eventContext:o};return h.ZP.create("RepinResource",c).callCreate({showError:!1})})),T(this,"handleSave",this.props.requireAuth((()=>{const{onSave:e,makeCancelablePromise:t}=this.props,{step:n}=this.state;if("unsaving"===n)return void this.setState({step:"saving"});this.setState({step:"saving"});t(this.repin().then((({resource_response:{data:e}})=>this.shouldCompleteSave(e)))).then(e).catch((({isCanceled:e})=>{if(!e){const{target:{board:e,boardSection:t}}=this.props;r.Z.showError(t?(0,x.nk)(this.props.i18n._("Failed to save the Pin to {{sectionName}}","Error message when failed to save to a section within a board","Error message when failed to save to a section within a board"),{sectionName:t.title}).join(""):(0,x.nk)(this.props.i18n._("Failed to save the Pin to {{boardName}}","Error message when failed to save to a board","Error message when failed to save to a board"),{boardName:e.name}).join(""))}}))}))),T(this,"shouldCompleteSave",(e=>{const{pin:t,dispatch:n,showToast:i,target:{board:o,boardSection:r}}=this.props,{step:s}=this.state,a=r&&r.id,d={pinId:t.id,boardId:o.id,sectionId:a,title:t.title||""};if("saving"===s){v.eE.publish(e.board.id,"pinCreated",{pin:e}),n((0,S.Ss)(o)),n((0,l.Z)({feedId:a||o.id,feedType:a?b.DV.SECTION_PINS:b.DV.BOARD_PINS,itemIds:[t.id],itemType:"pin"}));const{image_url:s,images:u}=t,h=s||(null==u?void 0:u["236x"])&&u["236x"].url||"";return!r&&o.image_cover_url||(o.image_cover_url=h,n((0,S.yT)({},o))),n((0,I.a1)({...d,localPinId:e.id})),n((0,j.Br)({boardId:o.id,sectionId:r?r.id:void 0,increment:1})),n((0,y.JS)({userId:e.pinner.id,increment:1})),this.setState({step:"saved"}),i((({onHide:e})=>(0,E.jsx)(c.Z,{pinImageUrl:h,boardName:o.name,boardUrl:o.url,onHide:e,onUndo:this.handleUnsave}))),e}"unsaving"===s&&this.handleUnsave(e.id)})),T(this,"handleUnsave",(e=>{const{step:t}=this.state,{savedInfo:n}=this.props;if("unsaved"===t)return;if("saving"===t)return void this.setState({step:"unsaving"});const i=n&&n.localPinId||e;i&&(this.setState({step:"unsaving"}),this.deletePin(i).then((()=>this.shouldCompleteUnsave())))})),T(this,"shouldCompleteUnsave",(()=>{const{pin:e,savedInfo:t,showToast:n,target:{board:i,boardSection:o},dispatch:r,onDelete:a,viewerId:l,i18n:c}=this.props,{step:u}=this.state;if("unsaving"===u){if(t){const t=null==o?void 0:o.id;r((0,I.jg)({pinId:e.id})),r((0,j.Br)({boardId:i.id,sectionId:t,increment:-1})),r((0,y.JS)({userId:l,increment:-1})),r((0,j.xQ)(i.id)),r((0,d.Z)({feedId:t||i.id,feedType:t?b.DV.SECTION_PINS:b.DV.BOARD_PINS,itemIds:[e.id],itemType:"pin"})),t&&r((0,s.Z)(t)),a&&a()}n((({onHide:e})=>(0,E.jsx)(p.Z,{onHide:e,text:c._("Pin deleted","OneTapSavePinWrapper.Unsave","Pin delete completion confirmation")}))),this.setState({step:"unsaved"})}"saving"===u&&this.handleSave()}))}render(){const{children:e,savedInfo:t}=this.props,{step:n}=this.state;return e({save:this.handleSave,saved:"saved"===n||"saving"===n||!(!t||!t.localPinId),savedInfo:t,unsave:this.handleUnsave})}}const k=(0,o.connect)(((e,{pin:{id:t}})=>({previousHistory:e.history.previous,savedInfo:e.pins[t]&&e.pins[t].savedInfo})))((function(e){const t=(0,w.ZP)(),{showToast:n}=(0,_.F9)(),i=(0,g.Z)(),o=(0,P.TH)(),r=(0,C.Z)(),s=(0,f.Z)(),a=(0,m.Z)(e.pin);return(0,E.jsx)(D,{...e,location:o,makeCancelablePromise:i,onDelete:()=>{var t;a(),null===(t=e.onDelete)||void 0===t||t.call(e)},showToast:n,requireAuth:r,i18n:t,viewerId:s.isAuth?s.id:""})}))},180115:(e,t,n)=>{n.d(t,{U:()=>p,Z:()=>g});var i=n(667294),o=n(294184),r=n.n(o),s=n(264221),a=n(596885),l=n(174523),d=n(883119),c=n(785893);const u={sm:32,md:40,lg:48},h=(0,i.memo)((0,i.forwardRef)((({carouselData:e,disabled:t=!1,iconOnly:n,isCloseupPin:i,onBoardUpdated:o,onClick:s,onSavedClick:h,onToggleModal:p,onUnsaved:g,renderSavedStatus:m,saveButtonType:f="classic",saved:b,savedInfo:v,size:x="md",variant:y="classic",viewParameter:_},w)=>{const C=(0,l.ZP)();return b&&"controlled"===f?(0,c.jsx)(d.zx,{fullWidth:!0,disabled:!0,text:C._("Saved"," - "," -- "),size:"sm"}):!i&&v&&m&&g&&o&&"classic"===f?(0,c.jsx)(a.Z,{currentCarouselIndex:e&&e.index,onDeleteSavedState:g,onEditSubmit:o,onToggleModal:p,pinId:v.localPinId,variant:"pin",viewParameter:_,children:m()}):b&&"classic"===f&&i?(0,c.jsx)(d.zx,{fullWidth:!0,accessibilityLabel:C._("Saved button","saveButton.saved.label","Saved state label on save button"),text:C._("Saved!","saveButton.saved","Saved state text on save button"),size:"md",color:"white",onClick:h}):n?(0,c.jsx)(d.xu,{ref:w,"data-test-id":"SaveButton",children:(0,c.jsx)(d.hU,{accessibilityLabel:C._("Save","Accessibility label for the save button","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>s(e),iconColor:"darkGray"})}):(0,c.jsx)(d.xu,{display:i?void 0:"flex",justifyContent:"end",children:(0,c.jsx)("div",{ref:w,className:r()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===y}),"data-test-id":"SaveButton",onClick:t?void 0:s,onKeyPress:t?void 0:e=>{32!==e.charCode&&13!==e.charCode||(e.preventDefault(),s(e))},role:"button",tabIndex:"0",children:(0,c.jsx)("div",{className:r()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===y}),children:(0,c.jsx)(d.xu,{alignItems:"center",minHeight:u[x],dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex",children:(0,c.jsx)(d.xv,{color:t?"gray":"white",size:"lego"===y?"sm":"md",weight:"bold",children:(0,c.jsx)("span",{className:r()("SaveButton__label",{"SaveButton__label--lego":"lego"===y}),children:C._("Save","Pin save button label","Pin save button label")})})})})})})}))),p=({isPulsarDisplayed:e,...t})=>{const[n,o]=(0,i.useState)(null);return(0,c.jsx)(s.Z,{anchor:".PinActionBar .repin.pinActionBarButton",anchorElementRef:n,isHidden:!e,children:(0,c.jsx)(h,{ref:e=>{null===e||n||o(e)},...t})})},g=h},796025:(e,t,n)=>{n.d(t,{c:()=>d,Z:()=>u});var i=n(667294),o=n(174523),r=n(946753),s=n(585967),a=n(883119),l=n(785893);const d=48,c=(0,i.forwardRef)(((e,t)=>{const{addButtonRef:n,collaboratorCount:i,nonDisplayedCollaboratorCount:c,displayedCollaborators:u,onClick:h,showAddButton:p}=e,g=(0,o.ZP)(),{isRTL:m}=(0,s.B)(),f=u.map((e=>e.name));let b="";switch(c?"default":f.length){case 3:b=(0,r.Wc)(g._("{{ first }}, {{ second }}, and {{ last }}","BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames"),{first:`${f[0]}`,second:`${f[1]}`,last:`${f[2]}`});break;case 2:b=(0,r.Wc)(g._("{{ first }} and {{ second }}","BoardAvatarGroup.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames."),{first:`${f[0]}`,second:`${f[1]}`});break;default:b=f.join(", ")}const v=c?(0,r.Wc)(g.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",c,"BoardAvatarGroup.AvatarGroup.accessibilityLabel.aboveTwoCollaborators","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:b,leftCount:`${c}`}):(0,r.Wc)(g._("Collaborators: {{ userNames }}.","BoardAvatarGroup.AvatarGroup.accessibilityLabel.notAboveTwoCollaborators","Accessibility label that lists the names of collaborators"),{userNames:b}),x=u.length>1?[...u,...Array(c).fill({name:"",src:""})]:u,y=(u.length>1||0===i)&&p,_=g._("Invite collaborators.","BoardAvatarGroup.AvatarGroup.accessibilityLabel.inviteCollaborators","It informs the users that they can invite other collaborators.");return(0,l.jsxs)(a.xu,{position:"relative",rounding:"pill","data-test-id":"user-rep-avatar",children:[y?(0,l.jsx)(a.xu,{height:d,position:"absolute",left:m,ref:n,right:!m,rounding:"circle",top:!0,width:d}):null,(0,l.jsx)(a.HE,{accessibilityLabel:y?`${v} ${_}`:`${v}`,addCollaborators:y,collaborators:x,onClick:h,ref:t,role:i?void 0:"button",size:"md"})]})}));c.displayName="BoardAvatarGroup";const u=c},92849:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(174523),r=n(302199),s=n(946753),a=n(585967),l=n(796025),d=n(883119),c=n(785893);function u({addButtonRef:e,nonDisplayedCollaboratorCount:t,displayedCollaborators:n,onClick:u,pileRef:h,showAddButton:p}){const[g,m]=(0,i.useState)(!1),f=(0,o.ZP)(),b=(0,r.Z)(),{locale:v}=(0,a.B)(),x=f._("Invite collaborators.","DeprecatedBoardCollaboratorFacepile.accessibilityLabel.inviteCollaborators","It informs the users that they can invite other collaborators."),y=(0,s.Wc)(f.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",t,"DeprecatedBoardCollaboratorFacepile.accessibilityLabel","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:n.map((e=>e.name)).join(", "),leftCount:`${t}`}),_=({children:e,hovered:t})=>(0,c.jsxs)(d.xu,{position:"relative",children:[(0,c.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0}),e]}),w=n.map((({name:e,src:t},n)=>(0,c.jsx)(d.xu,{"aria-hidden":"true",marginStart:0!==n?-4:void 0,children:(0,c.jsx)(_,{hovered:g&&!!u,children:(0,c.jsx)(d.xu,{color:"white",height:l.c,width:l.c,rounding:"circle",children:(0,c.jsx)(d.qE,{name:e,outline:!0,src:t})})})},`face-${n}`)));return w.length>1&&t&&w.push((0,c.jsx)(d.xu,{"aria-hidden":"true",zIndex:new d.Ry(1),children:(0,c.jsx)(d.xu,{marginStart:-4,children:(0,c.jsx)(_,{hovered:g&&!!u,children:(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:(0,c.jsx)(d.xu,{alignItems:"center",color:"lightGray",display:"flex",height:l.c,justifyContent:"center",position:"relative",rounding:"circle",width:l.c,children:(0,c.jsx)(d.xv,{size:"lg",weight:"bold",children:b(v,t,{shortform:!0})})})})})})},"additionalCount")),w.length>1&&p&&w.push((0,c.jsx)(d.xu,{"aria-hidden":"true",ref:e,zIndex:new d.Ry(1),children:(0,c.jsx)(d.xu,{marginStart:-4,children:(0,c.jsx)(_,{hovered:g,children:(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:(0,c.jsx)(d.xu,{alignItems:"center",color:"lightGray",display:"flex",height:l.c,justifyContent:"center",rounding:"circle",width:l.c,children:(0,c.jsx)(d.JO,{accessibilityLabel:"Add",icon:"add",color:"darkGray",size:20})})})})})},"addIcon")),(0,c.jsx)(d.kC,{alignItems:"center",children:(0,c.jsx)(d.iP,{accessibilityLabel:p?`${y} ${x}`:`${y}`,ref:h,onTap:u,rounding:"pill",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,c.jsx)(d.kC,{alignItems:"center",justifyContent:"start",children:w})})})}},16719:(e,t,n)=>{n.d(t,{Z:()=>r,I:()=>s});var i=n(535718);const o=({boardId:e,ownerUsername:t,ownerName:n,ownerImgSrc:o})=>{const{data:r,isLoaded:s}=(0,i.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0}}),a=[{name:n,src:o,href:`/${t}/`,isDim:!1}];return s&&r&&r.length>0&&r.forEach((e=>{a.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})})),a},r=o;function s({children:e,...t}){return e(o(t))}},927550:(e,t,n)=>{n.d(t,{Z:()=>le});var i=n(667294),o=n(40142),r=n(463112),s=n(389609),a=n(535718),l=n(34411),d=n(883119),c=n(174523),u=n(785893);function h({label:e,path:t,selected:n}){return(0,u.jsx)(d.JO,{accessibilityLabel:e,dangerouslySetSvgPath:{__path:t},color:n?"darkGray":"gray",size:24})}function p({selected:e}){const t=(0,c.ZP)();return(0,u.jsx)(h,{label:t._("Dense","Label for selecting the dense pin density view","Label for selecting the dense pin density view"),path:"M16.00,20.00 L20.00,20.00 L20.00,16.00 L16.00,16.00 L16.00,20.00 Z M10.00,8.00 L10.00,4.00 L14.00,4.00 L14.00,8.00 L10.00,8.00 Z M4.00,8.00 L4.00,4.00 L8.00,4.00 L8.00,8.00 L4.00,8.00 Z M16.00,8.00 L16.00,4.00 L20.00,4.00 L20.00,8.00 L16.00,8.00 Z M4.00,14.00 L4.00,10.00 L8.00,10.00 L8.00,14.00 L4.00,14.00 Z M10.00,14.00 L10.00,10.00 L14.00,10.00 L14.00,14.00 L10.00,14.00 Z M16.00,14.00 L16.00,10.00 L20.00,10.00 L20.00,14.00 L16.00,14.00 Z M4.00,20.00 L4.00,16.00 L8.00,16.00 L8.00,20.00 L4.00,20.00 Z M10.00,20.00 L10.00,16.00 L14.00,16.00 L14.00,20.00 L10.00,20.00 Z",selected:e})}function g({selected:e}){const t=(0,c.ZP)();return(0,u.jsx)(h,{label:t._("Regular","Label for selecting the regular pin density view","Label for selecting the regular pin density view"),path:"M13.00,20.00 L13.00,13.00 L20.00,13.00 L20.00,20.00 L13.00,20.00 Z M4.00,11.00 L4.00,4.00 L11.00,4.00 L11.00,11.00 L4.00,11.00 Z M13.00,11.00 L13.00,4.00 L20.00,4.00 L20.00,11.00 L13.00,11.00 Z M4.00,20.00 L4.00,13.00 L11.00,13.00 L11.00,20.00 L4.00,20.00 Z",selected:e})}var m=n(955637);class f extends i.Component{constructor(...e){var t,n,i;super(...e),i=({activeIndex:e})=>{const{viewType:t,component:n,pinView:i}=this.props,o=0===e?"regular":"dense";(0,s.Z)({boardDensity:o,component:n,surface:i,viewType:t})},(n="handleItemChange")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidUpdate(){const{dispatch:e,metadata:t,pinView:n,updatedBoardPinDensity:i}=this.props;if(t&&t.data&&""===i){const{profile_pin_rep_view_type:i,board_pin_rep_view_type:o}=t.data;"board"===n&&e(i?(0,m.VT)(i):(0,m.VT)("regular")),"profile"===n&&e(o?(0,m.QG)(o):(0,m.QG)("regular"))}}render(){const{metadata:e,updatedBoardPinDensity:t}=this.props;if(!e||!e.data)return null;const n="dense"===t?1:0;return(0,u.jsx)("div",{className:"OwnBoardSelector",children:(0,u.jsx)(d.sY,{items:[(0,u.jsx)(g,{selected:"regular"===t}),(0,u.jsx)(p,{selected:"dense"===t})],onChange:this.handleItemChange,selectedItemIndex:n,responsive:!0})})}}function b(e){const t=(0,l.Z)(),n=(0,a.Z)({name:"UserMetadataResource",options:{user:{id:t.isAuth?t.username:""}},noCache:!0}),i=(0,o.useSelector)((({ui:t})=>t.views&&t.views[`${e.pinView}PinView`]));return(0,u.jsx)(f,{...e,dispatch:(0,o.useDispatch)(),metadata:n,updatedBoardPinDensity:i})}var v=n(33076);function x({board:e,currentView:t,inBoardOrganizationMode:n,onContentViewChange:o,onOrganizeClick:r,pinCount:s,showSortOptions:a}){const h=(0,c.ZP)(),p=(0,l.Z)();return(0,u.jsxs)(d.xu,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,children:[(0,u.jsx)(d.xu,{paddingX:1,flex:"grow",children:(0,u.jsx)(d.X6,{children:h._("Pins","Heading for Pins outside of board sections on board page","Heading for Pins outside of board sections on board page")})}),a&&(0,v.tk)(s)&&(0,u.jsx)(d.xu,{paddingX:2,children:(0,u.jsx)(v.ZP,{currentView:t,onChange:o,board:e,viewer:p})}),s>=1&&(0,u.jsxs)(i.Fragment,{children:[s>=1&&(0,u.jsx)(b,{viewType:5,component:13183,pinView:"board"}),!n&&(0,u.jsx)(d.xu,{paddingX:2,children:(0,u.jsx)(d.zx,{fullWidth:!0,text:h._("Organize","The board organization button","The board organization button"),onClick:r})})]})]})}var y=n(613330),_=n(817930),w=n(557238);const C=(0,o.connect)(((e,t)=>(0,w.fx)(e.feeds[y.DV.BOARD_PINS][t.board.id])))((function(e){const t=(0,a.Z)({name:"BoardFeedResource",options:(0,_.q)(e.board,e.viewer,e.currentView,e.currentFilter)});return(0,u.jsx)(w.ZP,{...e,resource:t})}));C.displayName="BoardSectionlessPinGrid";const j=C,S=({children:e,shouldNavigate:t,to:n})=>t?(0,u.jsx)(d.iP,{role:"link",href:n,children:e}):e;var I=n(754999);const P=e=>{const t=(0,c.ZP)(),{numberOfSelectedPins:n}=e;return(0,u.jsx)(d.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,u.jsx)(d.xu,{color:"white",padding:3,rounding:"pill",children:(0,u.jsx)(d.xv,{weight:"bold",children:(0,I.Z)(t.ngettext("Move {{ count }} Pin here","Move {{ count }} Pins here",n,"Call to action overlay on a section to move selected Pins","Call to action overlay on a section to move selected Pins"),{count:n})})})})};var E=n(396026),T=n.n(E);const D=157,k=141,O=118,B=106;function R(e){return"dense"===e?2:3}function M(e){return(("dense"===e?O:B)+1)*R(e)-1}function A({ariaLabel:e,isHovered:t,mode:n,pins:i}){const o=R(n),r="dense"===n,s=r?D:k,a=r?O:B,l=M(n);return(0,u.jsx)(d.zd,{rounding:4,width:l,children:(0,u.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(d.xu,{"aria-label":e,"aria-required":"true",bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,top:!0}),T()(o).map((e=>{var t,n,r,l,c,h;const p=e===o-1,g=i[e];return(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:p?void 0:1}},children:(0,u.jsx)(d.zd,{height:s,width:a,rounding:0,wash:!0,children:g&&(0,u.jsx)(d.Ee,{alt:null!==(t=g.description)&&void 0!==t?t:"",color:"transparent",fit:"cover",naturalHeight:null!==(n=null===(r=g.image_large_size_pixels)||void 0===r?void 0:r.height)&&void 0!==n?n:1,naturalWidth:null!==(l=null===(c=g.image_large_size_pixels)||void 0===c?void 0:c.width)&&void 0!==l?l:1,src:null!==(h=g.image_large_url)&&void 0!==h?h:""})})},e)}))]})})}var L=n(272850),Z=n(585967);function N({children:e,mode:t}){return"dense"===t?(0,u.jsx)(d.xv,{weight:"bold",children:e}):(0,u.jsx)(d.X6,{accessibilityLevel:2,size:"sm",lineClamp:1,children:e})}function F({children:e,displayEditIcon:t,mode:n,mouseCursor:i,onEditClick:o,onTouch:r,pinCount:s,title:a}){const l=(0,c.ZP)(),{isRTL:h}=(0,Z.B)(),p=(0,u.jsxs)(d.xu,{children:[(0,u.jsxs)(d.xu,{position:"relative",children:[e,t&&(0,u.jsx)(d.xu,{position:"absolute",bottom:!0,left:h,right:!h,children:(0,u.jsx)(d.xu,{padding:2,children:(0,u.jsx)(d.hU,{bgColor:"white",icon:"edit",iconColor:"darkGray",onClick:o,accessibilityLabel:l._("Edit","BoardSectionCard.SectionRep.EditIcon","accessibility label for the board section name edit button"),accessibilityHaspopup:!0,size:"sm"})})})]}),(0,u.jsx)(d.kC,{alignItems:"start",justifyContent:"between",width:M(n),children:(0,u.jsxs)(d.xu,{padding:2,flex:"grow",children:[(0,u.jsx)(N,{mode:n,children:a}),(0,u.jsx)(d.xu,{marginTop:1,children:(0,u.jsx)(L.i,{count:s,size:"sm"})})]})})]});return r?(0,u.jsx)(d.iP,{fullWidth:!1,mouseCursor:i,onTap:r,rounding:4,children:p}):p}const z=e=>{var t;const{board:n,boardSection:r,canEdit:s,focused:a,hovered:l,inOrganizationMode:c,isDragging:h,isMergeTarget:p,onBlur:g,oneTapMovePinsHandler:m,onFocus:f,onMouseEnter:b,onMouseLeave:v,onShowEditSectionModal:x}=e,{slug:y,title:_,preview_pins:w=[]}=r,C=(0,o.useSelector)((({ui:e})=>e.views.boardPinView)),j=m&&m.numberOfSelectedPins;let I;j&&m&&(I=()=>{m.moveToSection(r)});let E="pointer";h?E="grabbing":!j&&c&&(E="grab");const T=!!s&&!h&&(l||a),D=m&&m.numberOfSelectedPins>0&&!!j&&l&&!h&&(0,u.jsx)(P,{numberOfSelectedPins:m.numberOfSelectedPins});return(0,u.jsxs)(d.xu,{alignItems:"center",color:"white","data-test-id":`section-${r.title}`,direction:"row",display:"flex",onBlur:g,onFocus:f,onMouseEnter:b,onMouseLeave:v,position:"relative",rounding:2,children:[(0,u.jsx)(S,{shouldNavigate:!c,to:`${null!==(t=n.url)&&void 0!==t?t:""}${y}/`,children:(0,u.jsx)(F,{displayEditIcon:T,mode:C,mouseCursor:E,onEditClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),x(r)},onTouch:I,pinCount:r.pin_count,title:_,children:(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(A,{ariaLabel:`section-${r.title}`,isHovered:l||p||a,mode:C,pins:w}),D]})})}),(0,u.jsx)("div",{className:"sectionHoverSurface"})]})};var H=n(366787),U=n(975151),W=n(194620),G=n(297633),V=n(470848);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $ extends i.Component{constructor(...e){super(...e),q(this,"state",{dragDrop:null,sectionIds:this.props.sections.map((e=>e.id))}),q(this,"cancelHoverTimeout",(()=>{const e=this.dragHoverTimeout;e&&clearTimeout(e.timeoutId),this.dragHoverTimeout=null})),q(this,"dragHoverTimeout",null),q(this,"isDragging",(()=>!!this.state.dragDrop)),q(this,"handleSectionDragBegin",(e=>{this.setState({dragDrop:{previewIndex:e,sourceIndex:e,target:null}})})),q(this,"handleSectionDragHover",((e,t)=>{const{dragDrop:n}=this.state,i=this.props.allowReordering;if(!t||!n)return;const{previewIndex:o}=n,r=(0,V.TI)({hoverRelativePosition:t,centerEnabled:e!==o&&i}),s={itemIndex:e,regionWithinItem:r};if(this.dragHoverTimeout&&(0,V.Lz)(s,this.dragHoverTimeout.hoverLocation))return;this.cancelHoverTimeout();const a="center"===r?"merge":"reorder",l={action:a,index:(0,V.X3)({hoverLocation:s,sourceIndex:o})};l.index!==o?this.dragHoverTimeout={hoverLocation:s,timeoutId:setTimeout((()=>{this.dragHoverTimeout=null,"reorder"===a?this.setState((({dragDrop:e,sectionIds:t})=>({dragDrop:{...e,target:l,previewIndex:l.index},sectionIds:(0,y.zX)(t,o,l.index)}))):this.setState((({dragDrop:e})=>({dragDrop:{...e,target:l}})))}),"reorder"===a?200:20)}:n.target&&n.target.index!==l.index&&this.setState({dragDrop:{...n,target:l}})})),q(this,"handleSectionDragEnd",(e=>{const{sections:t,onShowMergeSectionsConfirmationModal:n,onSectionReorder:i}=this.props,{dragDrop:o,sectionIds:r}=this.state,s=o&&o.target;if(this.cancelHoverTimeout(),!e||!o||!s||s.index===o.sourceIndex)return void this.setState({dragDrop:null,sectionIds:t.map((e=>e.id))});const{previewIndex:a,sourceIndex:l}=o,{action:d,index:c}=s;if(this.setState({dragDrop:null}),"merge"===d){const e=e=>{const n=r[e];return n&&t.find((({id:e})=>e===n))},i=e(a),o=e(c);i&&o&&n(i,o)}else i(l,c)})),q(this,"renderSection",((e,t)=>{const{allowReordering:n,board:i,canEdit:o,oneTapMovePinsHandler:r,onShowEditSectionModal:s,organizeMode:a}=this.props,{dragDrop:l}=this.state,c=l&&l.target;return(0,u.jsx)(d.xu,{padding:2,children:(0,u.jsx)(U.Z,{children:({focused:l,hovered:d,onBlur:h,onFocus:p,onMouseEnter:g,onMouseLeave:m})=>(0,u.jsx)(z,{allowReordering:n,board:i,boardSection:e,canEdit:o,focused:l,hovered:d,inOrganizationMode:a,isDragging:this.isDragging(),isMergeTarget:!!c&&"merge"===c.action&&t===c.index,onBlur:e=>{const t=e.currentTarget;setTimeout((()=>{t.contains(document.activeElement)||h()}),0)},onFocus:p,onMouseEnter:g,onMouseLeave:m,oneTapMovePinsHandler:r,onShowEditSectionModal:s})})})}))}componentDidUpdate(e){const{sections:t}=e,{sections:n}=this.props,i=e=>e.map((({id:e})=>e)).join(",");if(t.length!==n.length&&i(t)!==i(n)){this.cancelHoverTimeout();const e=n.map((e=>e.id));this.setState({dragDrop:null,sectionIds:e})}}componentWillUnmount(){this.cancelHoverTimeout()}render(){const{allowReordering:e,connectDropTarget:t,isDragWithinBounds:n,sections:i}=this.props,{sectionIds:o}=this.state,r=this.isDragging(),s=i.reduce(((e,t)=>({...e,[t.id]:t})),{}),a=(0,u.jsx)(d.xu,{display:"flex",justifyContent:"center",marginStart:6,marginEnd:6,wrap:!0,children:o.map((e=>s[e])).filter((e=>!!e)).map(((t,i)=>(0,u.jsx)(d.xu,{children:e?(0,u.jsx)(G.Z,{index:i,onDragBegin:this.handleSectionDragBegin,onDragEnd:this.handleSectionDragEnd,onDragHover:this.handleSectionDragHover,type:G.y.Section,children:(0,u.jsx)("div",{style:{opacity:r&&!n?.5:1},children:this.renderSection(t,i)})}):(0,u.jsx)(d.xu,{children:this.renderSection(t,i)})},t.id)))});return(0,u.jsxs)(d.xu,{width:"100%",children:[e&&t?t((0,u.jsx)("div",{children:a})):a,r&&(0,u.jsx)(H.Z,{})]})}}const Y=(0,W.Z)(G.y.Section)($);function X(e){const t=(0,c.ZP)(),{allowReordering:n,fetchMore:i,isAtEnd:o,isFetching:r}=e;return(0,u.jsxs)(d.xu,{width:"100%",children:[(0,u.jsx)(d.gr,{isAtEnd:o,isFetching:r,fetchMore:i}),n?(0,u.jsx)(Y,{...e}):(0,u.jsx)($,{...e}),r&&!o&&(0,u.jsx)(d.xu,{position:"relative",paddingY:6,children:(0,u.jsx)(d.$j,{accessibilityLabel:t._("Loading sections","loading state for board sections","loading state for board sections"),show:!0})})]})}var K=n(386004),J=n(311866);var Q=n(159276),ee=n(549135),te=n(767523);class ne extends i.Component{constructor(...e){var t,n,i;super(...e),i=(e,t)=>{const{board:n,dispatch:i,enableReordering:o,sections:r,viewParameter:s}=this.props;if(!o)return;const a=r[e].id,l=r[t].id,d=(0,y.zX)(r,e,t).map((e=>e.id)),c=d.indexOf(a),u=e=>e>=0&&e<d.length,h={boardId:n.id,sourceSectionId:a,targetSectionId:l,...u(c+1)?{sectionIdAfter:d[c+1]}:{},...u(c-1)?{sectionIdBefore:d[c-1]}:{}},p={objectId:a,view:5,viewParameter:s};var g;i((g=h,e=>{const{boardId:t,sectionIdBefore:n,sectionIdAfter:i,sourceSectionId:o,targetSectionId:r}=g;e((0,K.Z)({feedType:y.DV.BOARD_SECTIONS,feedId:t,itemType:"board_section",sourceItemId:o,targetItemId:r}));const s={section_id:o,section_before:n||void 0,section_after:i||void 0};return J.ZP.create("BoardSectionsReorderResource",s).callUpdate({showError:!1})})).then((()=>(0,ee.j)(7133,p)))},(n="handleSectionReorder")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{sectionsInvalidated:e,onLoadedAll:t,sectionsResource:{isFetching:n,refresh:i,isAtEnd:o}}=this.props;e&&!n&&i(),o&&t()}componentDidUpdate(e){!this.props.sectionsInvalidated||e.sectionsInvalidated||this.props.isFetching||this.props.refreshData(),!e.sectionsResource.isAtEnd&&this.props.sectionsResource.isAtEnd&&this.props.onLoadedAll()}render(){var e;const{board:t,enableReordering:n,inBoardOrganizationMode:i,oneTapMovePinsHandler:o,onShowEditSectionModal:r,onShowMergeSectionsConfirmationModal:s,sections:a,sectionsResource:l,viewer:c,orbacActingAs:h}=this.props,{isLoaded:p,isFetching:g,fetchMore:m,isAtEnd:f}=l;if(!p)return this.props.i18n._("Board sections loading spinner","BoardPage.BoardSections.loadingSpinner","Accessibility label for the spinner on board sections"),(0,u.jsx)(d.$j,{accessibilityLabel:this.props.i18n._("Board sections loading spinner"," - "," -- "),show:!0});const b=(t.access||[]).includes("write")||(0,Q.D3)(c,(null===(e=t.owner)||void 0===e?void 0:e.id)||"",h);return(0,u.jsx)(d.kC,{alignItems:"stretch",justifyContent:"center",children:(0,u.jsx)(X,{allowReordering:n,board:t,canEdit:b,fetchMore:m,isAtEnd:f,isFetching:g,oneTapMovePinsHandler:o,onSectionReorder:this.handleSectionReorder,onShowEditSectionModal:r,onShowMergeSectionsConfirmationModal:s,organizeMode:i,sections:a})})}}const ie=(0,o.connect)((function(e,t){const{feeds:{[y.DV.BOARD_SECTIONS]:n={}},sections:i}=e,{board:{id:o}}=t,r=n[o];return{sections:(r||[]).reduce(((e,t)=>"board_section"===t.type&&i[t.id]?e.concat([i[t.id]]):e),[]),sectionsInvalidated:null===r}}))((function(e){const t=(0,c.ZP)(),n=(0,l.Z)(),i=(0,te.Z)(),o=(0,a.Z)({name:"BoardSectionsResource",options:{board_id:e.board.id,redux_normalize_feed:!0}});return(0,u.jsx)(ne,{...e,sectionsResource:o,i18n:t,viewer:n,orbacActingAs:i})}));var oe=n(570970),re=n(41425),se=n(816670),ae=n(998864);const le=(0,o.connect)((function({boards:e,ui:t},{board:n}){const{views:{boardPinView:i}}=t,o=((e||{}).content||{})[n.id];return{boardPinView:i,sectionCount:(o?o.section_count:n.section_count)||0}}),(()=>({})))((function({actions:e,board:t,boardPinView:n,bulkEditSelectedPins:o,currentFilter:s,currentView:a,displayActionBar:c,enableReordering:h,inBoardOrganizationMode:p,inSectionOrganizationMode:g,inSelectAll:m,isOwnBoard:f,isPinGridSorted:b,onBulkEditPinClick:v,onContentViewChange:y,oneTapMovePinsHandler:_,onShowEditSectionModal:w,onShowMergeSectionsConfirmationModal:C,refreshFilteredFeed:S,sectionCount:I,viewParameter:P}){const[E,T]=(0,i.useState)(0===I),D=(0,ae.Z)({shouldStopEventPropagation:!1}),k=(0,re.Z)(t.url),O=(0,l.Z)(),B=D((()=>{const{onBoardOrganizeClick:t}=e;(0,ee.j)(101,{component:69,element:400}),t&&t(!0)})),{is_collaborative:R,pin_count:M}=t,A=(t.access||[]).includes("write"),L=f||t.collaborated_by_me,Z=Boolean("number"==typeof M&&M>=2&&R&&L);return(0,u.jsxs)(d.xu,{marginBottom:12,children:[(0,u.jsx)(r.Z,{setMaxWidth:!1,children:(0,u.jsxs)(d.xu,{children:[I>0&&(!s||s===se.cg)&&(0,u.jsx)(ie,{board:t,enableReordering:h,inBoardOrganizationMode:p,inSectionOrganizationMode:g,oneTapMovePinsHandler:_,onLoadedAll:()=>T(!0),onShowEditSectionModal:w,onShowMergeSectionsConfirmationModal:C,viewParameter:P}),c&&E&&L&&I>0&&(0,u.jsx)(x,{board:t,currentView:a,inBoardOrganizationMode:p,onContentViewChange:y,onOrganizeClick:B,pinCount:null!=M?M:0,showSortOptions:Z})]})}),E&&(0,u.jsx)(d.xu,{"data-test-id":"board-feed",dangerouslySetInlineStyle:{__style:{paddingBottom:"8px"}},paddingX:3,position:"relative",children:(0,u.jsx)(j,{board:t,bulkEditSelectedPins:o,currentFilter:s,currentView:a,denseViewSelected:A&&"dense"===n,inBoardOrganizationMode:p,inSectionOrganizationMode:g,inSelectAll:m,isOwnBoard:f,isPinGridSorted:b,onBulkEditPinClick:v,refreshFilteredFeed:S,renderFooterStory:e=>!t.archived_by_me_at&&L&&(0,u.jsx)(d.xu,{marginBottom:6,children:(0,u.jsx)(r.Z,{children:(0,u.jsx)(oe.Z,{collection:t,storyId:e,url:k})})}),viewParameter:P,viewer:O})})]})}))},872571:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(667294),o=n(40142),r=n(390764),s=n(174523),a=n(691908),l=n(883119),d=n(785893);function c(e){const t=(0,s.ZP)(),{anchor:n,experienceType:i,hideAddSectionTooltip:o}=e,{setShowBoardlessPinsModal:c}=(0,a.Z)();let u;switch(i){case"addSectionTooltip":u=(0,d.jsx)(l.J2,{anchor:n,color:"blue",idealDirection:"down",onDismiss:o,positionRelativeToAnchor:!1,showCaret:!0,size:"sm",children:(0,d.jsx)(l.xu,{padding:4,children:(0,d.jsx)(l.xv,{color:"white",weight:"bold",children:t._("Tap + to add a section any time","boardActionsButton.addIconButton.addSectionFlyout","Flyout to point out where you can find add section")})})});break;case"planningActionsExperience":u=(0,d.jsx)(r.Z,{anchor:n,experienceIds:[502096],idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0});break;case"createBoardTooltip":u=(0,d.jsx)(r.Z,{anchor:n,experienceIds:[503447],idealDirection:"down",flyoutSize:"md",onClickComplete:()=>{c(!0)},placementId:19,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center",textWeight:"normal"});break;default:u=null}return(0,d.jsx)(l.mh,{children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{zIndex:5e3}},position:"absolute",top:!0,children:u})})}var u=n(207395),h=n(803478),p=n(101267),g=n(549156),m=n(181307);function f({anchor:e,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:o,onAddSection:r,onClose:a,onCreateBoard:c,onCreatePin:f,onCreateStoryPin:b,surface:v}){const x=(0,s.ZP)(),{anyEnabled:y}=(0,m.aq)("web_story_pin_creator"),{anyEnabled:_}=(0,m.aq)("web_sp2s");return(0,d.jsx)(u.Z,{anchor:e,idealDirection:t,onDismiss:a,children:(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)(h.Z,{label:x._("Create","BoardActionsButton.LegoFlyout.Create","Label for a list of options to create a pin or a section"),children:[(0,d.jsx)(p.Z,{dataTestId:"Create Pin",onClick:()=>{f(),a()},children:x._("Pin","BoardActionsButton.LegoFlyout.Pin","Option to create a pin")}),b&&y&&(0,d.jsx)(p.Z,{dataTestId:"Create Story Pin",onClick:()=>{b(),a()},children:_?x._("Idea Pin","BoardActionsButton.LegoFlyout.IdeaPin","Option to create a Idea Pin"):x._("Story Pin","BoardActionsButton.LegoFlyout.StoryPin","Option to create a Story Pin")}),"profileBoards"===v&&c&&(0,d.jsx)(p.Z,{dataTestId:"Create board",onClick:()=>{c(),a()},children:x._("Board","profileHeader.actionBar.board","Option to create a board")})]}),"board"===v&&(0,d.jsxs)(h.Z,{label:x._("Add","BoardActionsButton.LegoFlyout.Add","Label for a list of options to add board sections or a board date"),children:["board"===v&&n&&(0,d.jsx)(g.Z,{id:"addBoardNote",children:(0,d.jsx)(p.Z,{onClick:()=>{n(),a()},children:(0,d.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,d.jsx)(l.xv,{weight:"bold",children:x._("Note","BoardActionsButton.LegoFlyout.Note","Option to create a board note")}),(0,d.jsx)(l.xu,{color:"blue",marginStart:2,padding:1,rounding:1,children:(0,d.jsx)(l.xv,{color:"white",size:"sm",weight:"bold",children:x._("New","BoardActionsButton.LegoFlyout.New","New option indicator")})})]})})}),"board"===v&&r&&(0,d.jsx)(g.Z,{id:"addSection",children:(0,d.jsx)(p.Z,{onClick:()=>{r(),a()},children:x._("Section","BoardActionsButton.LegoFlyout.Section","Option to create a board section")})}),"board"===v&&!!o&&(0,d.jsx)(p.Z,{onClick:()=>{o(),a()},children:x._("Date","BoardActionsButton.LegoFlyout.Date","Option to add a date to a board")})]})]})})}var b=n(717927);function v({children:e,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:r,onAddSection:a,onCreateBoard:u,onCreatePin:h,onCreateStoryPin:p,onOpen:g=(()=>{}),surface:m}){const v=(0,s.ZP)(),x=(0,o.useDispatch)(),y=()=>x((0,b.l)()),_=(0,o.useSelector)((({createSectionTooltip:e})=>Boolean(null==e?void 0:e.showCreateSectionTooltip))),w=(0,i.useRef)(),[C,j]=(0,i.useState)(!1),S=()=>{g(),_&&y(),j(!0)},I={board:v._("Board Actions","button that allows user view actions on a board such as add section, create pin, create pincode, and create widget","button that allows user view actions on a board such as add section, create pin, create pincode, and create widget"),profileBoards:v._("Profile Actions","profileHeader.actionBar.createButton","Button on user's profile to open flyout with options to create a pin or a board"),profilePins:v._("Profile Actions","profileHeader.actionBar.createButton","Button on user's profile to open flyout with options to create a pin or a board"),section:v._("Create Pin","Button to begin pin creation flow","Button to begin pin creation flow")},P=e&&e({active:C,openFlyout:S})||(0,d.jsx)(l.hU,{accessibilityLabel:I[m],icon:"add",onClick:"section"===m?h:S,size:"lg"});let E;return C||"board"!==m||(_?E="addSectionTooltip":r&&(E="planningActionsExperience")),C||"profileBoards"!==m||(E="createBoardTooltip"),(0,d.jsxs)(l.xu,{"data-test-id":"boardActionsButton",children:[(0,d.jsx)(l.xu,{ref:w,children:P}),C&&(0,d.jsx)(f,{anchor:w.current,idealDirection:t,onAddBoardNote:n,onAddOrEditDate:r,onAddSection:a,onClose:()=>j(!1),onCreateBoard:u,onCreatePin:h,onCreateStoryPin:p,surface:m}),E&&(0,d.jsx)(c,{anchor:w.current,experienceType:E,hideAddSectionTooltip:y})]})}},23219:(e,t,n)=>{n.d(t,{Z:()=>J});var i=n(667294),o=n(551687),r=n(689859),s=n(881220),a=n(174523),l=n(475446),d=n(883119),c=n(785893);const u=(0,i.lazy)((()=>n.e(4603).then(n.t.bind(n,774855,23))));function h({linkURL:e,onDidFocus:t,onDidClickCopyButton:n}){const i=(0,a.ZP)(),{showOneToast:h}=(0,l.F9)(),p=i._("Copy link","[button] copy a URL link shown, to paste in another place","[button] copy a URL link shown, to paste in another place");return(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingX:4,children:[(0,c.jsx)(d.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(d.nv,{id:"copylinkurl",onChange:()=>{},onFocus:t,size:"lg",type:"url",value:e})}),(0,c.jsx)(o.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,c.jsx)(r.Z,{fallback:(0,c.jsx)(d.zx,{text:p,disabled:!0}),children:(0,c.jsx)(u,{text:e,onCopy:(e,t)=>{t&&h((({onHide:e})=>(0,c.jsx)(s.Z,{onHide:e,text:i._("Link copied to clipboard!","toast message to confirm if users copied the url successfully","toast message to confirm if users copied the url successfully")}))),n()},children:(0,c.jsx)(d.zx,{text:p,size:"lg"})})})})]})}var p=n(640027),g=n(237574),m=n(549135),f=n(659048);const b=e=>({invite_category:4,invite_channel:12,object_type:g.d.BOARD,object_id:e});function v({boardId:e}){const[t,n]=(0,i.useState)(!1),[o,r]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!o){const t=b(e),{cancel:n,promise:i}=(0,p.Z)(f.Z.createShareInviteData(t));return i.then((e=>r(e))),()=>{n()}}}),[]);const s=o?o.invite_url:"...",a=()=>{null===o||t||(n(!0),f.Z.logShareInvite(b(e),o))};return(0,c.jsx)(h,{linkURL:s,onDidClickCopyButton:()=>{(0,m.j)(101,(e=>({component:13305,element:10921,objectId:e,view:5,viewParameter:3059}))(e)),a()},onDidFocus:a})}var x=n(760001),y=n(151101),_=n(535718);function w({boardId:e,invitedUserId:t,isInvited:n,onClick:o,buttonSize:r="sm"}){const s=(0,a.ZP)(),l=(0,_.Z)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:t}});(0,i.useEffect)((()=>{l.refresh()}),[]);const u={text:s._("Invite","[button] invite someone to collaborate on a board","it appears in the list expanded when click invite button at the top of board page"),color:"red",disabled:!1};return l.isFetching&&(u.text=s._("Loading","[button] disabled button status text when checking if the user has been invited","it appears in the list expanded when click invite button at the top of board page"),u.color="gray",u.disabled=!0),(n||l.isLoaded&&l.data)&&(u.text=s._("Invited","[button] disabled button status text when a user has been invited to a board","it appears in the list expanded when click invite button at the top of board page"),u.color="gray",u.disabled=!0),(0,c.jsx)(d.zx,{fullWidth:!0,color:u.color,size:r,disabled:u.disabled,onClick:o,text:u.text})}var C=n(494715),j=n(497199),S=n(760620),I=n(731164),P=n(294184),E=n.n(P),T=n(525974),D=n(912397);const k="40px";function O(e){const t=(0,a.ZP)(),n={[D.vq]:t._("Find friends from Facebook"," - "," -- "),[D.jq]:t._("Find friends from Google+"," - "," -- "),[D.u2]:t._("Find friends from Yahoo"," - "," -- ")},{network:i}=e;return(0,c.jsx)(d.iP,{onTap:()=>function(e,t){T.Z.instance().handleConnect(e,!0,{},t)}(i,t),children:(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingX:3,paddingY:2,children:[(0,c.jsx)(d.xu,{width:k,height:k,marginEnd:4,children:(0,c.jsx)("div",{className:"SocialConnectCell",children:(0,c.jsx)("div",{className:E()("icon",`socialConnect-${i}`),children:(0,c.jsx)("em",{})})})}),(0,c.jsx)(d.kC,{alignItems:"start",direction:"column",flex:"grow",justifyContent:"start",children:(0,c.jsx)(d.xv,{color:"darkGray",size:"md",weight:"bold",children:n[i]})})]})})}var B=n(203620),R=n(34411);var M=n(163880);const A=[];function L({boardId:e,onInvitesDidUpdate:t,onInviteDidComplete:n,shareSuggestions:o}){const r=(0,a.ZP)(),s=(0,R.Z)();let l=null;const u=(0,_.Z)({name:"UserResource",options:{user_id:s.isAuth?s.id:"",username:s.isAuth?s.username:"",field_set_key:"social_connect"},dangerouslyDisableFetch:!s.isAuth});var h;u.data&&(h=u.data,l={facebook:{connected:h.connected_to_facebook||!1},google:{connected:h.connected_to_google||!1},youtube:{connected:h.connected_to_youtube||!1},gplus:{connected:!!h.gplus_url,url:h.gplus_url},microsoft:{connected:h.connected_to_microsoft||!1},twitter:{connected:!!h.twitter_url,url:h.twitter_url},etsy:{connected:h.connected_to_etsy||!1},instagram:{connected:h.connected_to_instagram||!1},dropbox:{connected:h.connected_to_dropbox||!1}});const[p,g]=(0,i.useState)(""),[f,b]=(0,i.useState)([]),[v,x]=(0,i.useState)({}),[P,E]=(0,i.useState)({}),T=e=>{switch(e.type){case"user":case"user_share_suggestion":return e.username||r._("On Pinterest","is a user of Pinterest","is a user of Pinterest");case"emailcontact":case"email_share_suggestion":return e.email||r._("Email Contact","invited user has an email","invited user has an email")}return""},D=(i,o)=>{const{id:r,full_name:s,debug_reason:a}=i;let l="";a&&(l=a.reason),((t,n)=>{const i=p?1044:1039;(0,m.j)(101,{component:13029,element:i,entered_query:p,result_index:t+1,rs:n,objectId:e,view:5,viewParameter:3059})})(o,l);const d={...v};d[r]=!0,x(d),(0,M.pS)(e,[r]).then((()=>{n(s,!0)})).catch((e=>{n(s,!1,e);const t={...v};t[r]=!1,x(t)})).finally(t)},k=[...(e=>{if(!e)return[];return Object.keys(e).filter((e=>A.includes(e))).filter((t=>!1===e[t].connected)).map((e=>(0,c.jsx)(O,{network:e},`socialConnect-${e}`)))})(l)];let L=o;return p&&(L=f),(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:0,children:[(0,c.jsx)(d.xu,{paddingY:4,flex:"none",display:"flex",alignItems:"center",children:(0,c.jsx)(d.xu,{flex:"grow",children:(0,c.jsx)(B.Z,{onTypeaheadSuggestionsChange:e=>{I.Z.increment("web_contacts_search",1,{source:"board_invite"}),b(e)},resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25},value:p,children:(0,c.jsx)(d.xu,{paddingX:4,children:(0,c.jsx)(d.Um,{accessibilityLabel:r._("Search for a name or email","accessible label for contact search input field","accessible label for contact search input field"),id:"search",onChange:({value:e})=>{g(e),(0,m.j)(4113,{component:13029,element:1043,entered_query:e,viewParameter:3059})},placeholder:r._("Search by name or email","search input field prompt for finding contacts","search input field prompt for finding contacts"),size:"lg",value:p})})})})}),(0,c.jsxs)(d.xu,{overflow:"scrollY",maxHeight:414,children:[L.map(((t,n)=>{const i=t.username?`/${t.username}/`:null;return(0,c.jsx)(d.xu,{children:(0,c.jsx)(C.Z,{imageUrl:t.image_medium_url||"",name:t.full_name||t.email,title:t.full_name||t.email,subtitle:T(t),accessory:(0,c.jsx)(w,{boardId:e,invitedUserId:t.id,isInvited:(o=t.id,!!v[o]),onClick:()=>D(t,n),buttonSize:"lg"}),linkURL:i})},n);var o})),p&&((0,S.Z)(p)?(0,c.jsx)(C.Z,{name:p,title:p,accessory:(Z=!!P[p],N=()=>{const i=p;if(!(0,S.Z)(i))return;const o={...P};o[i]=!0,E(o),(0,M.OA)(e,[i]).then((()=>{n(i,!0),g("")})).catch((e=>{n(i,!1,e);const t={...P};t[i]=!1,E(t)})).finally(t)},F="lg",(0,c.jsx)(d.zx,{fullWidth:!0,color:Z?"gray":"red",disabled:!!Z,size:F,onClick:N,text:Z?r._("Invited","[button] disabled button status text when a user has been invited to a board","[button] disabled button status text when a user has been invited to a board"):r._("Invite","[button] invite someone to collaborate on a board","[button] invite someone to collaborate on a board")}))}):(0,c.jsx)(j.Z,{iconNode:(0,c.jsx)(y.Z,{name:p,size:"md"}),title:p,subtitle:r._("Keep typing!","boardCollabInviterForm.label","Message for user to keep typing")})),k]})]});var Z,N,F}var Z=n(946753);function N({boardId:e}){const t=(0,a.ZP)(),n=(0,l.F9)(),{refresh:o}=(0,_.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0},noCache:!0}),{refresh:r}=(0,_.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval"},noCache:!0}),{data:u,isLoaded:h}=(0,_.Z)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board"},noCache:!0});(0,i.useEffect)((()=>{(0,m.j)(7120,{objectId:e,view:5,viewParameter:3059})}),[]),(0,i.useEffect)((()=>{if(h){const e=u&&u.length>0?7511:7512;(0,m.j)(e,{component:13305,element:10592,view:5,viewParameter:3059})}}),[h]);const p=(e,t=!1)=>{n.showOneToast((({onHide:n})=>(0,c.jsx)(s.Z,{duration:3e3,onHide:n,text:e,variant:t?"error":void 0})))};return h?(0,c.jsx)(L,{boardId:e,onInvitesDidUpdate:()=>{o(),r()},onInviteDidComplete:(e,n,i)=>{n?p(t._("1 invite sent!","BoardCollabInviteFormContainer.showInviteSuccessToast.text","Toast for successfully sending invitation of collaborating a board")):((e,n)=>{const i=t._("Failed to invite {{userIdentifier}} to collaborate","Toast for failing to send invitation of collaborating a board","Toast for failing to send invitation of collaborating a board");p(n&&n.message?n.message:(0,Z.nk)(i,{userIdentifier:e}).join(""),!0)})(e,i)},shareSuggestions:u||[]}):(0,c.jsx)(d.xu,{display:"flex",justifyContent:"center",paddingY:12,width:"100%",children:(0,c.jsx)(d.$j,{accessibilityLabel:t._("Loading contacts","BoardCollab.BoardCollabInviteFormContainer","Accessibility label on loading spinner"),show:!0})})}const F="INVITE_SETTING",z="REQUEST_TO_JOIN_SETTING";function H({boldHeading:e,setting:t,viewerIsOwner:n}){const o=(0,a.ZP)(),r={0:{name:o._("Do (almost) everything","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o._("Add, move or delete Pins and sections, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},1:{name:o._("Save and comment","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:n?o._("Save Pins, organize them, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting"):o._("Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!","save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab","Text explaining collaborator permission setting")},[F]:{name:o._("Invite other people","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o._("Collaborators can invite others to this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},[z]:{name:o._("Board requests","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:o._("People can request to join this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")}},s=e?d.X6:d.xv;return(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(s,{color:"darkGray",size:e?"sm":"lg",children:r[t].name}),(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(d.xv,{color:"gray",size:"lg",children:r[t].description})})]})}var U=n(26629),W=n(451190),G=n(629318),V=n(855168),q=n(585967);function $({board:e,currentPermissionLevel:t,fromBoardEditModal:n,navigateToPermissions:o,onDismiss:r}){var s;const l=(0,a.ZP)(),u="number"==typeof e.collaborator_count&&e.collaborator_count>0,[h,p]=(0,i.useState)(!u),g=(0,q.B)(),m=(0,R.Z)(),f=(0,V.k6)(),b=m.isAuth&&(null===(s=e.owner)||void 0===s?void 0:s.id)===m.id,y=b||e.collaborator_invites_enabled,_=h&&!u||!h;return(0,c.jsx)(G.k,{boardName:e.name,pendingOwnershipTransfer:e.pending_ownership_transfer,viewerIsOwner:b,children:(0,c.jsx)(W.Z,{_dangerouslyDisableScrollBoundaryContainer:!0,accessibilityModalLabel:h?l._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"):l._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),footer:y&&!h?(0,c.jsx)(d.iP,{onTap:()=>p(!0),rounding:8,children:(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.hU,{accessibilityLabel:l._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","accessibility label on icon button"),icon:"add",bgColor:"red",iconColor:"white"}),(0,c.jsx)(d.xu,{paddingX:3,children:(0,c.jsx)(d.xv,{size:"lg",weight:"bold",children:l._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Clickable text to show invite form")})})]})}):null,heading:(0,c.jsxs)(d.xu,{padding:8,children:[n&&(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!g.isRTL,right:g.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:l._("Back","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"arrow-back",iconColor:"darkGray",onClick:r})}),(0,c.jsx)(d.X6,{align:"center",size:"md",children:h?l._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal"):l._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal")})]}),onDismiss:r,children:(0,c.jsxs)(d.xu,{marginBottom:5,children:[_&&(0,c.jsxs)(d.xu,{paddingX:6,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"sm",children:b?l._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting"):l._("You can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting")})}),(0,c.jsxs)(d.xu,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4,children:[(0,c.jsx)(d.xu,{width:"60%",children:(0,c.jsx)(H,{boldHeading:!0,viewerIsOwner:b,setting:t})}),b&&(0,c.jsx)(d.hU,{accessibilityLabel:l._("Edit board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on icon button"),icon:"arrow-forward",onClick:o})]})]}),h?(0,c.jsxs)(d.xu,{paddingX:2,children:[(0,c.jsx)(v,{boardId:e.id}),(0,c.jsx)(N,{boardId:e.id})]}):(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.xu,{paddingX:6,paddingY:5,children:(0,c.jsx)(d.xv,{size:"sm",children:l._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Header before listing collaborators on a group board")})}),(0,c.jsx)(U.Z,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=m.isAuth?`/${m.username}`:"/";f.replace(e)},renderInvite:(e,t,n)=>{const i={invite:e,onBoardLeave:t,onInviteDidUpdate:n,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(x.Z,{...i})}})]})]})})})}var Y=n(40142),X=n(164756);function K({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:t,id:n},currentPermissionLevel:o,navigateToCollaborators:r,onDismiss:s}){const l=(0,a.ZP)(),[u,h]=(0,i.useState)(o),[p,g]=(0,i.useState)(e),[f,b]=(0,i.useState)(t),[v,x]=(0,i.useState)(!1),y=(0,q.B)(),_=(0,Y.useDispatch)();return(0,c.jsx)(W.Z,{accessibilityModalLabel:l._("Board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),heading:(0,c.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!y.isRTL,right:y.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:l._("Back","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"arrow-back",iconColor:"darkGray",onClick:r})}),(0,c.jsx)(d.X6,{align:"center",size:"md",children:l._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal")}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:y.isRTL,right:!y.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:l._("Close","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"cancel",iconColor:"darkGray",onClick:s})})]}),footer:(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,c.jsx)(d.zx,{color:"red",disabled:v||u===o&&p===e&&f===t,onClick:()=>{x(!0);const i={id:n},r={view:5,viewParameter:3472};p!==e&&(i.collaborator_invites_enabled=p,(0,m.j)(p?106:107,{element:11896,...r})),u!==o&&(i.collaborator_permissions_setting=u,(0,m.j)(8841,{...r})),f!==t&&(i.collaborator_requests_enabled=f),_((0,X.wN)(i)).then((()=>s()))},size:"lg",text:l._("Done","save.board.BoardPage.ModalContents.PermissionsModal","Submit button on a form")})}),onDismiss:s,children:(0,c.jsxs)(d.xu,{paddingX:12,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"sm",children:l._("Permissions","save.board.BoardPage.ModalContents.PermissionsModal","Heading before listing possible board permissions")})}),(0,c.jsxs)(d.kC,{alignItems:"center",children:[(0,c.jsx)(d.EU,{checked:0===u,id:"ALL",onChange:()=>h(0),value:0}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(H,{setting:0})})]}),(0,c.jsxs)(d.xu,{display:"flex",paddingY:6,"data-test-id":"invite-radio-container",children:[(0,c.jsx)(d.EU,{checked:1===u,id:"SAVE_ONLY",onChange:()=>h(1),value:1}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(H,{setting:1})})]}),(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"sm",children:l._("Invitations","save.board.BoardPage.ModalContents.PermissionsModal","Heading before group board invitation permission form setting")})}),(0,c.jsxs)(d.xu,{display:"flex",marginBottom:6,"data-test-id":"invite-checkbox-container",children:[(0,c.jsx)(d.XZ,{checked:p,id:"inviteSetting",onChange:({checked:e})=>g(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(H,{setting:F})})]}),(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.XZ,{checked:f,id:"inviteSetting",onChange:({checked:e})=>b(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(H,{setting:z})})]})]})})}function J({board:e,fromBoardEditModal:t,onDismiss:n}){const[o,r]=(0,i.useState)("collaboratorsView"),{collaborator_permissions_setting:s}=e;return"collaboratorsView"===o?(0,c.jsx)($,{board:e,currentPermissionLevel:s,fromBoardEditModal:t,navigateToPermissions:()=>r("permissionsView"),onDismiss:n}):(0,c.jsx)(K,{board:e,currentPermissionLevel:s,navigateToCollaborators:()=>r("collaboratorsView"),onDismiss:n})}},238332:(e,t,n)=>{n.d(t,{Z:()=>Ye});var i=n(40142),o=n(483957),r=n(881220),s=n(174523),a=n(946753),l=n(883119),d=n(475446),c=n(164756),u=n(785893);function h({shouldArchive:e,board:t,onClose:n,onConfirm:h}){const p=(0,s.ZP)(),g=(0,i.useDispatch)(),{showOneToast:m}=(0,d.F9)();return(0,u.jsx)(o.Z,{confirmButtonLabel:e?p._("Archive","BoardPage.ModalContents.BoardModalManager","button label on confirming board archive"):p._("Unarchive","BoardUnarchiveConfirmation.BoardEditConfirmation.buttonLabel","button label on confirming board unarchive"),heading:e?p._("Archive this board?","BoardPage.ModalContents.BoardModalManager","modal heading for board archive confirmation"):p._("Unarchive this board?","BoardUnarchiveConfirmation.BoardEditConfirmation.heading","modal heading for board unarchive confirmation"),message:(0,a.nk)(e?p._("If you archive {{ boardName }}, you won’t be able to save Pins to it. We’ll hide it from your profile and stop using it for recommendations. (Don’t worry: You can unarchive your board to undo this!)","BoardPage.ModalContents.BoardModalManager","Confirmation message when archiving a board"):p._("If you unarchive {{ boardName }}, it will show up on your profile and you’ll be able to save new Pins to it.","BoardUnarchiveConfirmation.BoardEditConfirmation.message","Confirmation message when unarchiving a board"),{boardName:(0,u.jsx)(l.xv,{inline:!0,weight:"bold",children:t.name},t.name)}),onCancel:n,onConfirm:()=>{g(e?(0,c.xk)(t.id):(0,c.YV)(t.id)),h(),n(),m((({onHide:n})=>{var i;return(0,u.jsx)(r.Z,{imageUrl:null!==(i=t.image_cover_url)&&void 0!==i?i:"",onHide:n,text:e?(0,a.nk)(p._("Archived {{ boardName }}","board.BoardPage.ModalContents.BoardArchiveConfirmation","Toast text on complete archiving board"),{boardName:t.name}).join(""):(0,a.nk)(p._("Unarchived {{ boardName }}","BoardUnarchiveConfirmation.handleConfirmUnarchive.message","Toast text on completing unarchiving board"),{boardName:t.name}).join("")})}))}})}var p=n(23219),g=n(497231),m=n(667294),f=n(451190),b=n(558491);function v({fetchMore:e,followers:t,followersCount:n,isFetching:i,onDismiss:o}){const r=(0,s.ZP)();return(0,u.jsx)(f.Z,{accessibilityModalLabel:r._("Board Followers","boardFollowersList.modal.accessibilityLabelForModal","Accessibility label for modal"),heading:(0,u.jsx)(l.xu,{display:"flex",justifyContent:"center",padding:8,children:(0,u.jsx)(l.X6,{size:"md",accessibilityLevel:1,children:(0,a.nk)(r.ngettext("{{ followersCount }} Follower","{{ followersCount }} Followers",n,"Label for the number of people following a board","Label for the number of people following a board"),{followersCount:n.toLocaleString()})})}),onDismiss:o,size:"sm",children:(0,u.jsx)(l.xu,{maxHeight:600,paddingX:6,overflow:"auto",children:t&&t.length>0?(0,u.jsxs)(m.Fragment,{children:[t.map((e=>(0,u.jsx)(b.Z,{showFollow:!0,showName:!0,size:"medium",subtitle:"",user:e},e.id))),n-t.length>0?(0,u.jsx)(l.xu,{display:"flex",justifyContent:"center",padding:5,marginBottom:2,children:(0,u.jsx)(l.zx,{disabled:i,onClick:e,size:"lg",text:r._("See more","BoardFollowerList.SeeMore","Button to load more items in the board follower list")})}):null]}):(0,u.jsx)(l.xu,{marginBottom:8,children:(0,u.jsx)(l.$j,{accessibilityLabel:r._("Loading board followers","BoardModalManager.Spinner","Spinner which shows when loading board followers"),show:!0})})})})}var x=n(631739),y=n(535718);function _({boardId:e,followersCount:t,onDismiss:n}){const{data:i=[],fetchMore:o,isFetching:r}=(0,y.Z)({name:"BoardFollowersResource",options:{board_id:e,page_size:x.Z.MAX_FETCH_NUM_FOLLOWERS_PER_PAGE}});return(0,u.jsx)(v,{fetchMore:o,followers:i,followersCount:t,isFetching:r,onDismiss:n})}var w=n(130874),C=n(756169);const j=({handleClick:e,selectedBoard:t,sourceBoard:n,targetBoardCandidates:i})=>{const o=(0,s.ZP)(),r=(0,u.jsx)(l.xv,{weight:"bold",inline:!0,children:null==n?void 0:n.name}),d=(0,u.jsx)(l.xv,{weight:"bold",inline:!0,children:null==n?void 0:n.pin_count});return 0===i.length?(0,u.jsx)(l.xv,{children:o._("There is no board to merge this board into.","BoardMergeModal.NoBoards.Text","helper text for selecting merge target board")}):n?(0,u.jsxs)(l.xu,{maxWidth:540,maxHeight:532,marginStart:4,marginEnd:4,children:[(0,u.jsx)(l.xv,{size:"lg",align:"center",children:(0,a.nk)(o._("Your board {{ sourceBoardName }} and all {{ sourceBoardPinCount }} pins will be gone for good. You won’t be able to get them back.","BoardMergeModal.Merge.Text","helper text for merging board"),{sourceBoardName:r,sourceBoardPinCount:d})}),(0,u.jsx)(l.xu,{marginTop:4,marginStart:2,children:(0,u.jsx)(l.xv,{size:"sm",children:o._("All boards","MergeModal.AllBoards.Text","all boards section title")})}),i.map((n=>{var i,r;return(0,u.jsx)(l.iP,{onTap:()=>e(n),children:(0,u.jsxs)(l.xu,{color:(null==t?void 0:t.id)===n.id?"lightGray":"transparent",display:"flex",justifyContent:"between",alignItems:"center",height:64,padding:2,rounding:2,children:[(0,u.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:[(0,u.jsx)(l.zd,{height:48,width:48,rounding:2,children:(0,u.jsx)(l.Ee,{fit:"cover",src:n.image_cover_url||"",color:"steelblue",naturalHeight:48,naturalWidth:48,alt:o._("Board Cover Image","MergeModal.Board.CoverImage","board cover image")})}),(0,u.jsxs)(l.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,children:[(0,u.jsx)(l.xu,{marginBottom:1,children:(0,u.jsx)(l.xv,{size:"lg",weight:"bold",children:n.name})}),(0,u.jsx)(l.xv,{size:"sm",children:(0,a.nk)(o.ngettext("{{ count }} Pin","{{ count }} Pins",null!==(i=n.pin_count)&&void 0!==i?i:0,"boardEdit.boardMergeModalBody.pinCount","label for n amount of pins"),{count:(0,u.jsx)(C.Z,{value:null!==(r=n.pin_count)&&void 0!==r?r:0})})})]})]}),(0,u.jsxs)(l.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:["secret"===n.privacy&&(0,u.jsx)(l.xu,{marginEnd:3,children:(0,u.jsx)(l.JO,{icon:"lock",color:"darkGray",accessibilityLabel:o._("Private board icon","MergeModal.Board.Private.Icon","private board accesibility label")})}),n.is_collaborative&&(0,u.jsx)(l.xu,{marginEnd:3,children:(0,u.jsx)(w.Z,{isCompact:!0,board:n})}),!!n.section_count&&(0,u.jsx)(l.JO,{icon:"arrow-forward",color:"darkGray",accessibilityLabel:o._("Board section icon","MergeModal.Board.Section.Icon","board secetion accesibility label")})]})]})},n.id)}))]}):null};function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I extends m.Component{constructor(...e){super(...e),S(this,"state",{selectedTargetBoard:null}),S(this,"handleChange",(e=>{this.setState({selectedTargetBoard:e})})),S(this,"handleSubmit",(()=>{const{onSubmit:e}=this.props,{selectedTargetBoard:t}=this.state;t&&e(t)})),S(this,"renderModalBody",(()=>{const{boardsResource:e,sourceBoardId:t}=this.props,{selectedTargetBoard:n}=this.state,{data:i}=e;if(!i)return(0,u.jsx)(l.$j,{accessibilityLabel:this.props.i18n._("Loading board list","spinner accessibility label","spinner accessibility label"),show:!0});const o=i.find((e=>e.id===t)),r=i.filter((e=>e.id!==t));return(0,u.jsx)(j,{handleClick:this.handleChange,selectedBoard:n,sourceBoard:o,targetBoardCandidates:r})}))}render(){const{onCancel:e}=this.props,{selectedTargetBoard:t}=this.state,n=(0,u.jsxs)(l.xu,{display:"flex",justifyContent:"between",alignItems:"center",padding:6,children:[(0,u.jsx)(l.xu,{}),(0,u.jsx)(l.X6,{size:"md",children:this.props.i18n._("Combine boards","BoardMergeModal.CombineBoards","title for board merging modal")}),(0,u.jsx)(l.iP,{fullWidth:!1,onTap:e,accessibilityLabel:this.props.i18n._("Close merge boards modal","BoardMergeModal.Close.TapArea","close icon for board merging modal"),children:(0,u.jsx)(l.JO,{icon:"cancel",color:"darkGray",size:18,accessibilityLabel:this.props.i18n._("Close merge boards modal","BoardMergeModal.Close.Label","close icon for board merging modal")})})]});return(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Move Pins to","BoardEdit.BoardMergeModal.accessibilityLabel","accessibility label for board merging modal"),heading:n,onDismiss:e,footer:(0,u.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsx)(l.zx,{color:"red",disabled:!t,onClick:this.handleSubmit,size:"lg",text:this.props.i18n._("Done","BoardMergeModal.Button.Submit","button for merging a board")})}),children:(0,u.jsx)(l.xu,{padding:8,children:this.renderModalBody()})})}}function P(e){const t=(0,s.ZP)(),n=(0,y.Z)({name:"BoardsResource",options:{privacy_filter:"all",sort:"alphabetical",field_set_key:"detailed",username:"me"},noCache:!0});return(0,u.jsx)(I,{...e,boardsResource:n,i18n:t})}var E=n(33234);const T="236x",D="474x",k="736x",O=e=>t=>t.replace(/pinimg\.com\/\d+x\d*\//,`pinimg.com/${e}/`),B=e=>[T,D,k].map(((t,n)=>`${O(t)(e)} ${n+1}x`)).join(", ");function R({boardId:e,customizable:t}){const n=(0,y.Z)({name:"BoardFeedResource",options:{board_id:e,field_set_key:"images_only_item",filter_section_pins:!1,page_size:t?60:4}}),i=!n.isLoaded,o=(n.data||[]).filter((({type:e})=>"pin"===e)).map((({images:e})=>e["236x"]));return(0,u.jsx)(E.ZP,{getDownloadImageURL:O("1200x"),getMainImageURL:O(D),getThumbnailImageSrcSet:B,id:e,images:o,isLoadingImages:i,customizable:t})}function M({onCompleteBulkDelete:e,onClearModal:t,pinCountToDelete:n}){const i=(0,s.ZP)(),o=1===n?i._("Delete this Pin"," - "," -- "):i._("Delete these Pins"," - "," -- "),r=1===n?i._("Are you sure you want to permanently delete this Pin?"," - "," -- "):i._("Are you sure you want to permanently delete these Pins?"," - "," -- ");return(0,u.jsx)(f.Z,{accessibilityModalLabel:i._("delete Pins","accessibility label for bulk delete modal","accessibility label for bulk delete modal"),footer:(0,u.jsxs)(l.xu,{children:[(0,u.jsx)(l.xu,{marginBottom:2,children:(0,u.jsx)(l.zx,{fullWidth:!0,text:i._("Cancel"," - "," -- "),onClick:t})}),(0,u.jsx)(l.zx,{fullWidth:!0,text:i._("Delete"," - "," -- "),color:"red",onClick:()=>{e(),t()}})]}),heading:o,onDismiss:t,children:(0,u.jsx)(l.xu,{paddingX:8,children:(0,u.jsx)(l.xv,{children:r})})})}var A=n(530197);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z extends m.Component{constructor(...e){super(...e),L(this,"state",{chosenBoardId:null}),L(this,"handleChosenBoardChange",(e=>{this.setState({chosenBoardId:e.id})})),L(this,"handleConfirm",(()=>{const{onCopyToBoard:e,onClearModal:t}=this.props,{chosenBoardId:n}=this.state;n&&(e(n),t())}))}render(){const{onClearModal:e,pinCountToCopy:t}=this.props,{chosenBoardId:n}=this.state,i=1===t?this.props.i18n._("Pick another board for this Pin"," - "," -- "):this.props.i18n._("Pick another board for these Pins"," - "," -- ");return(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Copy your pins to a different board","BoardPage.ModalContents.BulkEditBoardPicker.accessibilityModalLabel","Accessiblilty modal label"),heading:i,onDismiss:e,footer:(0,u.jsxs)(l.xu,{display:"flex",marginStart:-1,marginEnd:-1,justifyContent:"end",children:[(0,u.jsx)(l.xu,{paddingX:1,children:(0,u.jsx)(l.zx,{fullWidth:!0,onClick:e,text:this.props.i18n._("Cancel"," - "," -- ")})}),(0,u.jsx)(l.xu,{paddingX:1,children:(0,u.jsx)(l.zx,{fullWidth:!0,disabled:!n,onClick:this.handleConfirm,text:this.props.i18n._("Copy"," - "," -- "),color:"red"})})]}),children:(0,u.jsx)(l.xu,{padding:8,minHeight:400,children:(0,u.jsx)(A.Z,{onBoardChosen:this.handleChosenBoardChange})})})}}function N(e){const t=(0,s.ZP)();return(0,u.jsx)(Z,{...e,i18n:t})}var F=n(180115),z=n(773788),H=n(535258);function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W=()=>{};class G extends m.PureComponent{constructor(...e){super(...e),U(this,"state",{isHovered:!1}),U(this,"hover",(()=>this.setState({isHovered:!0}))),U(this,"unhover",(()=>this.setState({isHovered:!1}))),U(this,"handlePinClick",(({event:e})=>{const{save:t,unsave:n,saved:i}=this.props;e.preventDefault(),e.stopPropagation(),i?n():t()}))}render(){const{children:e,boardName:t,saved:n}=this.props,{isHovered:i}=this.state;return(0,u.jsxs)(l.xu,{position:"relative",children:[(0,u.jsx)(l.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,u.jsx)(l.iP,{accessibilityLabel:this.props.i18n._("Save this Pin","jumpstartBoardPinWrapper.tapArea.accessibilityLabel","Accessibility label describing purpose of tap area"),fullHeight:!0,fullWidth:!0,onMouseEnter:this.hover,onMouseLeave:this.unhover,onTap:this.handlePinClick,children:(i||n)&&(0,u.jsx)(l.xu,{paddingX:4,paddingY:4,position:"absolute",top:!0,width:H.xf,zIndex:new l.Ry(1),children:n?(0,u.jsxs)(l.kC,{alignItems:"center",justifyContent:"center",children:[(0,u.jsx)(l.xu,{flex:"grow",children:(0,u.jsx)(z.Z,{isNewlySaved:!0,url:null,name:t})}),(0,u.jsx)("div",{className:"jumpstart-undo-icon",children:(0,u.jsx)(l.hU,{accessibilityLabel:this.props.i18n._("Undo","Undo saving a pin to a board","Undo saving a pin to a board"),bgColor:"transparentDarkGray",icon:"refresh",iconColor:"white",onClick:W})})]}):(0,u.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsx)(l.xu,{children:(0,u.jsx)(F.Z,{onClick:W,saved:n,variant:"lego"})})})})})}),(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}}function V(e){const t=(0,s.ZP)();return(0,u.jsx)(G,{...e,i18n:t})}var q=n(476666),$=n(476865),Y=n(549135);function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class K extends m.PureComponent{constructor(...e){super(...e),X(this,"scollRef",(0,m.createRef)()),X(this,"clickLogging",(e=>{const{board:t}=this.props;(0,Y.j)(101,{component:13380,element:10599,reason:e,board_id:t.id})})),X(this,"handleSave",(()=>{this.clickLogging("save")})),X(this,"handleDelete",(()=>{this.clickLogging("delete")})),X(this,"renderPin",(({data:e,itemIdx:t})=>{const{board:n}=this.props;return(0,u.jsx)(q.Z,{pin:e,target:{board:n},onSave:this.handleSave,onDelete:this.handleDelete,eventContext:{viewType:5,viewParameter:3173,element:10599},children:({save:i,unsave:o,saved:r})=>{var s;return(0,u.jsx)(V,{save:i,unsave:o,saved:r,boardName:null!==(s=n.name)&&void 0!==s?s:"",children:(0,u.jsx)($.default,{attributionOption:"hide",blockClickEvents:!0,pin:e,pinId:e.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},surface:"JumpstartBoard",trackingParameters:{slotIndex:t,viewParameter:3173,viewType:5}})})}})}))}render(){const{resource:e}=this.props;return(0,u.jsxs)(l.xu,{maxHeight:600,maxWidth:ee,overflow:"auto",ref:this.scollRef,padding:4,children:[e.isLoaded&&e.data&&(0,u.jsx)(l.Rk,{comp:this.renderPin,columnWidth:H.xf,gutterWidth:24,items:e.data,scrollContainer:()=>this.scollRef.current,loadItems:e.fetchMore}),(0,u.jsx)(l.$j,{accessibilityLabel:this.props.i18n._("Loading pins","Loading indicator","Loading indicator"),show:e.isFetching})]})}}function J({board:e}){const t=(0,s.ZP)(),n=(0,y.Z)({name:"BoardContentRecommendationResource",options:{type:"board",id:e.id,__track__referrer:21}});return(0,u.jsx)(K,{board:e,resource:n,i18n:t})}var Q=n(855168);const ee=1112;function te({board:e,onDismiss:t}){const n=(0,s.ZP)(),i=(0,Q.k6)(),o=(0,Q.TH)(),r=()=>{const e={...o&&o.state||{}};e.newBoard&&(delete e.newBoard,i.replace({...o,state:e})),t()};return(0,u.jsx)(f.Z,{accessibilityModalLabel:n._("add pins to empty board modal","accessibility label for modal","accessibility label for modal"),allowScroll:!0,heading:n._("Save some Pins to your new board","jumpstartBoardModal.heading","heading for modal to add Pins to an empty board"),onDismiss:r,size:ee,footer:(0,u.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsx)(l.zx,{color:"red",onClick:r,text:n._("Done","done adding pins to empty board","done adding pins to empty board"),accessibilityLabel:n._("Done","done adding pins to empty board","done adding pins to empty board")})}),children:(0,u.jsx)(J,{board:e})})}var ne=n(963232),ie=n(538052),oe=n(742979),re=n(63447),se=n(178862);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class le extends m.Component{constructor(...e){super(...e),ae(this,"getSections",(e=>{var t,n,i;const{board:o,canMoveToOtherBoards:r}=this.props,s=null!==(t=null===(n=this.props.boardsResource.data)||void 0===n?void 0:n.all_boards)&&void 0!==t?t:[],a=null!==(i=this.props.sectionsResource.data)&&void 0!==i?i:[],l=s.filter((e=>e.id!==o.id));return e.length>=2?[a.length?{items:(0,se.j)([o],e),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},{items:(0,se.j)(a,e,"title"),customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}},r?{items:(0,se.j)(l,e)}:{items:[]}]:[a.length?{title:this.props.i18n._("Current board","title in move pins flow","title in move pins flow"),items:[o,...a],customProps:{inSectionSelection:!0,isDisabled:this.isDisabled}}:{items:[]},r?{title:this.props.i18n._("Other boards","heading text for a list of a user's other boards in the move pins flow","heading text for a list of a user's other boards in the move pins flow"),items:l}:{items:[]}]})),ae(this,"isDisabled",(e=>e.id===this.props.selectedRowId))}render(){const{board:e,boardsResource:{error:t,isLoaded:n},boardSavedTo:i,onRowSelected:o,onSectionCreate:r,pinId:s,sectionsResource:{error:a,isLoaded:l},selectedRowId:d}=this.props;return(0,u.jsx)(re.Z,{boardSavedTo:i,createButtonLabel:this.props.i18n._("Add section","Button for creating a board section","Button for creating a board section"),disabledRowId:d,hasLoadError:!!t||!!a,isLoaded:n&&l,getSections:this.getSections,onCreate:r,onSelected:o,pinId:s},e.id)}}function de(e){const t=(0,s.ZP)(),n=(0,y.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}}),i=(0,y.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",onlyFetchBoards:!0}});return(0,u.jsx)(le,{...e,boardsResource:i,i18n:t,sectionsResource:n})}function ce({board:e,boardSavedTo:t,onMove:n,onSectionedBoardSelect:i,onSectionCreate:o,selectedRowId:r,showOtherBoards:a}){const d=(0,s.ZP)(),c=a&&!e.section_count?d._("Choose board"," - "," -- "):d._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section");return(0,u.jsxs)(l.xu,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:"absolute",rounding:2,width:330,dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[(0,u.jsx)(l.xu,{paddingY:3,paddingX:3,children:(0,u.jsx)(l.X6,{size:"sm",children:c})}),(0,u.jsx)(de,{board:e,boardSavedTo:t,canMoveToOtherBoards:a,onRowSelected:t=>{if("board_section"===t.type){n(e,t)}else if("board"===t.type){const o=t;o&&o.id!==e.id&&(o.section_count||0)>0?i(o):n(o,null)}},onSectionCreate:o,selectedRowId:r})]})}var ue=n(34411),he=n(817930),pe=n(301314),ge=n(923224),me=n(396026),fe=n.n(me);function be({previewPin:e,extraPinCount:t,showFullImage:n}){if(!e)return(0,u.jsx)(ge.Z,{height:214,pin:null,rounded:!0,width:142});const{description:i,images:o={},dominant_color:r}=e,s=o["474x"],a=Math.min(217*s.height/s.width,450),l=n?a:214,d=n?217:142;return(0,u.jsx)(ge.Z,{additionalPinCount:t,height:l,pin:{description:i,dominantColor:r,imageUrl:s.url},rounded:!0,width:d})}function ve({pins:e}){const t=e.length>0&&e.length<=2?e.length:4,n=fe()(0,t).map((n=>(0,u.jsx)(l.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{padding:3}},children:(0,u.jsx)(be,{previewPin:e[n],extraPinCount:3===n?Math.max(e.length-t,0):0,showFullImage:1===e.length})},n)));return(0,u.jsx)(l.xu,{alignItems:"center",display:0===e.length||e.length>2?"inlineBlock":"flex",height:440,justifyContent:"center",width:296,children:n})}var xe=n(9757);function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _e extends m.Component{constructor(e){var t;super(e),ye(this,"showSuccessToast",(()=>{const{movedBoard:e,movedSection:t}=this.state,{board:n,inSelectAll:i,toastManagerContext:o}=this.props;if(i)o.showOneToast((({onHide:e})=>(0,u.jsx)(r.Z,{duration:xe.Au,onHide:e,text:this.props.i18n._("Got it! Hang tight while we move all those Pins...","Toast message for bulk pins move.","Toast message for bulk pins move.")})));else if(e){var s;const i=t?(0,a.nk)(this.props.i18n._("Moved to {{sectionName}} in {{boardName}}","Toast for successfully moving pins to a section within a board","Toast for successfully moving pins to a section within a board"),{sectionName:t.title,boardName:e.name}).join(""):(0,a.nk)(this.props.i18n._("Moved to {{boardName}}","Toast for successfully moving pins to a different board","Toast for successfully moving pins to a different board"),{boardName:e.name}).join(""),l=t?`${null!==(s=e.url)&&void 0!==s?s:""}${t.slug}`:e.url;o.showOneToast((({onHide:e})=>{var t;return(0,u.jsx)(r.Z,{duration:xe.Au,href:l,imageUrl:null!==(t=n.image_cover_url)&&void 0!==t?t:"",onHide:e,text:i})}))}})),ye(this,"handleMove",((e,t)=>{const{board:n,boardSection:i,dispatch:o,inSelectAll:r,onCompleteMove:s,selectedPinIds:a}=this.props,l={boardId:n.id,sectionId:i&&i.id||null},d={boardId:e.id,sectionId:t&&t.id||null};if(l.boardId===d.boardId&&l.sectionId===d.sectionId)return;const c=d.sectionId||d.boardId;this._setBoardSavedTo(c,xe.SN.LOADING),o((0,oe.Z)({inverseSelection:r,selectedPinIds:a,source:l,target:d},this.props.i18n)).then((()=>{this._setBoardSavedTo(c,xe.SN.SUCCESS),this.setState({movedBoard:e,movedSection:t}),s()}))})),ye(this,"handleSectionedBoardSelect",(e=>{this.setState({initialBoardName:"",selectedBoard:e})})),ye(this,"handleSectionCreateComplete",(e=>{const{onCompleteMove:t,toastManagerContext:n}=this.props;t();const i=(0,a.nk)(this.props.i18n._("Moved to {{sectionName}} in {{boardName}}","moveSectionModal.handleSectionCreate.toast","Toast for successfully moving pins to a section within a board"),{sectionName:e.title,boardName:e.board.name});n.showOneToast((({onHide:t})=>{var n;return(0,u.jsx)(r.Z,{duration:xe.Au,href:`${null!==(n=e.board.url)&&void 0!==n?n:""}${e.slug}`,imageUrl:" ",onHide:t,text:i.join("")})}))})),ye(this,"handleShowCreate",(e=>{this.setState({initialBoardName:e,showCreate:!0})})),ye(this,"handleHideCreate",(()=>{const{onClearModal:e,sectionCount:t}=this.props;0===t?e():this.setState({initialBoardName:"",showCreate:!1})}));const{board:n,viewer:i,showCreateOnly:o}=e;this.state={boardSavedTo:null,initialBoardName:"",movedBoard:null,movedSection:null,selectedBoard:e.board,showCreate:o||(null===(t=n.owner)||void 0===t?void 0:t.id)!==i.id&&0===n.section_count}}componentWillUnmount(){const{dispatch:e,viewer:t}=this.props,{movedBoard:n,movedSection:i}=this.state;n&&(!i&&t.isAuth&&e((0,pe.jB)("BoardFeedResource",(0,he.q)(n,t))),this.showSuccessToast())}_setBoardSavedTo(e,t){this.setState({boardSavedTo:{board:e,state:t}})}render(){const{board:e,boardSection:t,inSelectAll:n,onClearModal:i,selectedPinIds:o,selectedPins:r,shouldShowOtherBoards:s}=this.props,{boardSavedTo:a,initialBoardName:d,selectedBoard:c,showCreate:h}=this.state,p=n?330:660;return(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Choose the section or board you want to move pins to","moveSectionModal.modal.accessibilityLabelForModal","Accessibility label for modal"),onDismiss:i,size:p,children:(0,u.jsxs)(l.xu,{color:"white",display:"flex",height:540,rounding:2,width:p,children:[!n&&(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},marginBottom:6,paddingX:2,children:(0,u.jsx)(ve,{pins:r})}),h?(0,u.jsx)(ie.Z,{board:c,completeCreateSectionAction:this.handleSectionCreateComplete,initialName:d,onClearModal:this.handleHideCreate,pinImport:{all:n,pinIds:o},showTitle:!0}):(0,u.jsx)(ce,{board:c,boardSavedTo:a,onMove:this.handleMove,onSectionCreate:this.handleShowCreate,onSectionedBoardSelect:this.handleSectionedBoardSelect,selectedRowId:t&&t.id||e&&e.id,showOtherBoards:s})]})})}}function we(e){const t=(0,s.ZP)(),n=(0,i.useDispatch)(),o=(0,ue.Z)(),r=o.isAuth?o.id:"",a=(0,i.useSelector)((({pins:t})=>e.selectedPinIds.reduce(((e,n)=>{const i=t[n];return i?e.concat([i]):e}),[]))),l=(0,i.useSelector)((({pins:t})=>(0,ne.Z)({action:2,board:e.board,viewer:o})||!e.selectedPinIds.some((e=>{const n=t[e];return n&&n.pinner&&n.pinner.id&&n.pinner.id!==r})))),c=(0,i.useSelector)((({boards:t})=>{var n;return null!==(n=(t.content[e.board.id]||{}).section_count)&&void 0!==n?n:0}));return(0,u.jsx)(_e,{...e,dispatch:n,sectionCount:c,selectedPins:a,shouldShowOtherBoards:l,toastManagerContext:(0,d.F9)(),viewer:o,i18n:t})}var Ce=n(956997),je=n(330658),Se=n(325616);function Ie(e,t){return t.isAuth&&(e||{}).id===t.id}var Pe=n(627578),Ee=n(726369),Te=n(221487);function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ke extends m.Component{constructor(...e){super(...e),De(this,"state",{section:null}),De(this,"handleSectionChange",(e=>{this.setState({section:e})})),De(this,"handleSubmit",(()=>{const{onSubmit:e}=this.props,{section:t}=this.state;t&&e(t)}))}render(){const{board:e,boardSection:t,onCancel:n}=this.props,{section:i}=this.state;return(0,u.jsx)(f.Z,{size:"md",accessibilityModalLabel:this.props.i18n._("Move Pins","BoardPage.ModalContents.SectionMergeModal","accessibility label for merging modal"),onDismiss:()=>{n()},heading:i?this.props.i18n._("Move Pins and delete section?","title for board section merging modal","title for board section merging modal"):this.props.i18n._("Move all Pins to...","title for board section merging modal","title for board section merging modal"),footer:(0,u.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsxs)(l.hE,{children:[(0,u.jsx)(l.zx,{onClick:n,text:this.props.i18n._("Cancel"," - "," -- "),size:"lg"}),(0,u.jsx)(l.zx,{color:"red",disabled:!i,onClick:this.handleSubmit,text:this.props.i18n._("Move Pins and delete section","button for merging a board section","button for merging a board section"),size:"lg"})]})}),children:(0,u.jsx)(l.xu,{padding:8,minHeight:400,children:(0,u.jsx)(Te.Z,{board:e,mergingFromSectionId:t.id,onSectionChange:this.handleSectionChange,selectedSectionId:i?i.id:null})})})}}function Oe(e){const t=(0,s.ZP)();return(0,u.jsx)(ke,{...e,i18n:t})}var Be=n(578429),Re=n(411221),Me=n(311866),Ae=n(613330),Le=n(234316);function Ze(e,t,n,i){return o=>Me.ZP.create("BoardSectionEditResource",{section_id:t,title:n,...i?{orbac_subject_id:i}:Object.freeze({})}).callCreate({showError:!1}).then((t=>{const n=t.resource_response.data;return o(function(e,t){return n=>{const i=t.board;i&&i.id!==e?(n((0,Se.H)(e,t.id)),n((0,Re.Z)({feedId:e,feedType:Ae.DV.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),n((0,c.Tq)(e,"pin_count")),n((0,Le.h)(i.id,t)),n((0,Be.Z)({feedId:i.id,feedType:Ae.DV.BOARD_SECTIONS,itemIds:[t.id],itemType:"board_section"})),n((0,c.Tq)(e,"pin_count"))):n({type:"SECTION_UPDATED",payload:{boardId:e,section:t}})}}(e,n)),o((0,pe.jB)("BoardSectionsRepinResource",{board_id:e})),n}))}var Ne=n(367599),Fe=n(767523),ze=n(159276),He=n(708206);function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class We extends m.Component{constructor(...e){super(...e),Ue(this,"state",{deleting:!1,editMode:"main",title:this.props.boardSection.title}),Ue(this,"handleSaveSection",(e=>{if(e.preventDefault(),this.saveDisabled())return;const{board:t,boardSection:n,dispatch:i,onSaveSection:o,viewer:r,orbacActingAs:s}=this.props,{title:a}=this.state,l=(0,ze.lJ)(r,s);i(Ze(t.id,n.id,a.trim(),l)).then(o).catch((e=>this.setState({titleErrorMessage:e.message||this.props.i18n._("Invalid section name","error message of section name input field","error message of section name input field")})))})),Ue(this,"saveDisabled",(()=>this.state.title===this.props.boardSection.title||""===this.state.title.trim())),Ue(this,"handleChangeTitle",(({value:e})=>{this.setState({title:e,titleErrorMessage:void 0})})),Ue(this,"handleDeleteSectionButtonClick",(()=>{this.setState({editMode:"confirmDelete"})})),Ue(this,"handleMergeButtonClick",(()=>{this.setState({editMode:"merge"})})),Ue(this,"handleBackToMainMenu",(()=>{this.setState({editMode:"main"})})),Ue(this,"handleDeleteSection",(()=>{const{board:e,boardSection:t,dispatch:n,onDeleteSection:i,toastManagerContext:o,viewer:s,orbacActingAs:a}=this.props;if(this.state.deleting)return;const{id:l}=t;this.setState({deleting:!0}),n((0,Se.Z)(e.id,l,(0,ze.lJ)(s,a))).then((()=>{i(),o.showToast((({onHide:e})=>(0,u.jsx)(r.Z,{onHide:e,text:this.props.i18n._("Section deleted!","Toast for successfully deleting a board section","Toast for successfully deleting a board section")})))})).catch((e=>Pe.Z.showError(e.message||this.props.i18n._("Failed to delete the section","error message for failed to delete section","error message for failed to delete section"))))})),Ue(this,"handleMergeSection",(e=>{var t;const{board:n,boardSection:i,dispatch:o,showBlockingActionToast:r,onDeleteSection:s}=this.props;this.state.deleting||(this.setState({deleting:!0}),(0,Y.j)(7173,{objectId:i.id,merge_flow:"menu"}),o((0,Ee.Z)(n.id,i.id,null!==(t=e.id)&&void 0!==t?t:"")).then(s).then((()=>{r({actionType:"merge",board:n,section:e})})).catch((e=>Pe.Z.showError(e.message||this.props.i18n._("Failed to merge the section","error message for failed to merge section","error message for failed to merge section")))))}))}componentDidMount(){window.requestAnimationFrame((()=>{const e=this._textField;e&&(e.focus(),e.select())}))}render(){const{board:e,boardSection:t,onClearModal:n,viewer:i,orbacActingAs:r}=this.props,{title:s,titleErrorMessage:a,editMode:d}=this.state,c=Ie(t.user,i)||(0,ne.Z)({action:10,board:e,viewer:i})||(0,ze.KY)(i,e,r),h=e.section_count>1&&(Ie(t.user,i)||(0,ne.Z)({action:13,board:e,viewer:i}));return"confirmDelete"===d?(0,u.jsx)(o.Z,{confirmButtonLabel:this.props.i18n._("Delete section","button for deleting a board section","button for deleting a board section"),onCancel:this.handleBackToMainMenu,onConfirm:this.handleDeleteSection,message:this.props.i18n._("Once you delete a section and all its Pins, you can't undo it!"," - "," -- ")}):"merge"===d?(0,u.jsx)(Oe,{board:e,boardSection:t,onCancel:this.handleBackToMainMenu,onSubmit:this.handleMergeSection}):(0,u.jsx)(f.Z,{accessibilityModalLabel:this.props.i18n._("Edit your section"," - "," -- "),size:"md",onDismiss:n,heading:this.props.i18n._("Edit your section"," - "," -- "),footer:(0,u.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,u.jsx)(l.sg,{span:6,children:(c||h)&&(0,u.jsxs)(l.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[c&&(0,u.jsx)(l.xu,{"data-test-id":"delete-section-button",paddingX:1,children:(0,u.jsx)(l.zx,{onClick:this.handleDeleteSectionButtonClick,text:this.props.i18n._("Delete","Delete button","Delete button")})}),h&&(0,u.jsx)(l.xu,{paddingX:1,children:(0,u.jsx)(l.zx,{onClick:this.handleMergeButtonClick,text:this.props.i18n._("Merge","button for merging a board section","button for merging a board section")})})]})}),(0,u.jsx)(l.sg,{span:6,children:(0,u.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,u.jsx)(l.xu,{marginEnd:3,children:(0,u.jsx)(l.zx,{text:this.props.i18n._("Cancel"," - "," -- "),onClick:n})}),(0,u.jsx)(l.zx,{type:"submit",color:"red",text:this.props.i18n._("Save"," - "," -- "),disabled:this.saveDisabled(),onClick:({event:e})=>{this.handleSaveSection(e)}})]})})]}),children:(0,u.jsx)("form",{onSubmit:this.handleSaveSection,children:(0,u.jsx)(l.xu,{display:"flex",direction:"column",padding:8,children:(0,u.jsx)(l.nv,{errorMessage:a,id:"title",label:this.props.i18n._("Name"," - "," -- "),onChange:this.handleChangeTitle,ref:e=>{this._textField=e},size:"lg",value:s})})})})}}const Ge=(0,He.compose)((0,i.connect)(),Ne.ZP,d.Cl)((function(e){const t=(0,s.ZP)(),n=(0,ue.Z)(),i=(0,Fe.Z)();return(0,u.jsx)(We,{...e,i18n:t,viewer:n,orbacActingAs:i})}));function Ve({source:e,target:t,onConfirm:n,onCancel:i}){const o=(0,s.ZP)();return(0,u.jsx)(f.Z,{accessibilityModalLabel:o._("Move Pins and delete section?","title for board section merging confirmation","title for board section merging confirmation"),heading:o._("Move Pins and delete section?","title for board section merging confirmation","title for board section merging confirmation"),onDismiss:i,footer:(0,u.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,u.jsxs)(l.hE,{children:[(0,u.jsx)(l.zx,{onClick:i,text:o._("Cancel"," - "," -- ")}),(0,u.jsx)(l.zx,{color:"red",onClick:n,text:o._("Move Pins and delete section","button for merging a board section","button for merging a board section")})]})}),children:(0,u.jsx)(l.xu,{padding:8,children:(0,u.jsx)(l.xv,{children:(0,a.nk)(o._("You're about to move all Pins from your {{ sourceName }} section to your {{ targetName }} section.","helper text for section merge confirmation modal","helper text for section merge confirmation modal"),{sourceName:(0,u.jsx)(l.xv,{inline:!0,weight:"bold",children:e.title},"source"),targetName:(0,u.jsx)(l.xv,{inline:!0,weight:"bold",children:t.title},"target")})})})})}var qe=n(597168),$e=n(691951);function Ye({actions:e,board:t,boardSection:n,bulkEditSelectedPins:i,currentModal:o,groupPinsData:r,inSelectAll:s,onClearModal:a,mergeConfirmationModalProps:l}){var d,c;const{completeCreateSectionAction:m,completeMoveAction:f,onBoardArchiveChange:b,onBoardDelete:v,onBoardLeave:x,onBoardSectionDelete:y,onBoardSectionSave:w,onConfirmMergeSection:C,onCopyPinsToBoard:j,onDeletePins:S,onBoardMerge:I}=e;switch(o){case $e.s.boardArchiveConfirmation:return b?(0,u.jsx)(h,{shouldArchive:!0,board:t,onClose:a,onConfirm:b}):null;case $e.s.boardUnarchiveConfirmation:return b?(0,u.jsx)(h,{shouldArchive:!1,board:t,onClose:a,onConfirm:b}):null;case $e.s.boardEdit:return(0,u.jsx)(g.Z,{boardId:t.id,onBoardArchiveChange:b,onBoardDelete:v,onBoardLeave:x,onClose:a});case $e.s.bulkDelete:return S?(0,u.jsx)(M,{pinCountToDelete:i&&i.length||0,onCompleteBulkDelete:S,onClearModal:a}):null;case $e.s.bulkCopy:return j?(0,u.jsx)(N,{currentBoardId:t.id,onCopyToBoard:j,onClearModal:a,pinCountToCopy:i&&i.length||0}):null;case $e.s.collaboratorsAndPermissions:return(0,u.jsx)(p.Z,{board:t,onDismiss:a});case $e.s.editSection:return n?(0,u.jsx)(Ge,{board:t,boardSection:n,onClearModal:a,onDeleteSection:y,onSaveSection:w}):null;case $e.s.mergeBoard:return I?(0,u.jsx)(P,{onCancel:a,onSubmit:I,sourceBoardId:t.id}):null;case $e.s.createSection:case $e.s.moveSection:return!!i&&!!f&&(0,u.jsx)(we,{board:t,boardSection:n,inSelectAll:!!s,selectedPinIds:i,showCreateOnly:o===$e.s.createSection,onClearModal:a,onCompleteMove:f});case $e.s.sectionMergeConfirm:return l&&C?(0,u.jsx)(Ve,{onCancel:a,onConfirm:C,source:l.source,target:l.target}):null;case $e.s.followers:return(0,u.jsx)(_,{boardId:t.id,onDismiss:a,followersCount:null!==(d=t.follower_count)&&void 0!==d?d:0});case $e.s.pincode:return(0,u.jsx)(Ce.Z,{onHide:a,objectId:t.id,children:(0,u.jsx)(R,{boardId:t.id,customizable:!(null===(c=t.owner)||void 0===c||!c.is_partner)})});case $e.s.jumpstartBoard:return(0,u.jsx)(te,{board:t,onDismiss:a});case $e.s.simpleCreateSection:return m?(0,u.jsx)(je.Z,{selectedBoard:t,onClose:a,onSectionCreate:m}):null;case $e.s.groupPins:return(0,u.jsx)(qe.Z,{boardId:t.id,clusterId:null==r?void 0:r.clusterId,suggestedSectionTitle:(null==r?void 0:r.suggestedSectionName)||"",onDismiss:a});default:return null}}},691951:(e,t,n)=>{n.d(t,{s:()=>i});const i={addOrEditDate:"addOrEditDate",boardArchiveConfirmation:"boardArchiveConfirmation",boardEdit:"boardEdit",boardUnarchiveConfirmation:"boardUnarchiveConfirmation",bulkCopy:"bulkCopy",bulkDelete:"bulkDelete",collaboratorsAndPermissions:"collaboratorsAndPermissions",createSection:"createSection",editSection:"editSection",followers:"followers",groupPins:"groupPins",jumpstartBoard:"jumpstartBoard",mergeBoard:"mergeBoard",moveSection:"moveSection",pincode:"pincode",sectionMergeConfirm:"sectionMergeConfirm",sendBoard:"sendBoard",simpleCreateSection:"simpleCreateSection"}},619581:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(40142),r=n(304194),s=n(152214),a=n(855168);function l(){const e=(0,o.useDispatch)(),t=(0,a.k6)(),{pathname:n}=(0,a.TH)(),l=(0,o.useSelector)((({ui:e})=>e.mainComponent.locationToErrorMap));(0,i.useEffect)((()=>{(0,r.Z)();const i=`/${n.split("/")[1]}/`;l[n]&&(e((0,s.m)(i,l[n])),t.replace(i))}),[])}},187851:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(40142),r=n(627578),s=n(726369),a=n(174523),l=n(734125),d=n(549135),c=n(998864);function u({board:e}){const t=(0,a.ZP)(),[n,u]=(0,i.useState)(null),h=(0,o.useDispatch)(),{showBlockingActionToast:p}=(0,l.Z)(),g=(0,c.Z)({shouldStopEventPropagation:!1}),m=(0,i.useCallback)(g((()=>{if(!n)return;const{source:i,target:o}=n;u(null),(0,d.j)(7173,{objectId:i.id,merge_flow:"dnd"}),h((0,s.Z)(e.id,i.id,o.id)).then((()=>{p({actionType:"merge",board:e,section:o})})).catch((e=>{r.Z.showError(e.message||t._("Failed to merge sections","useSectionMergeAction.errorMessage","Error message when failed to merge sections"))}))})),[null==n?void 0:n.source,null==n?void 0:n.target]);return{handleShowMergeSectionsConfirmationModal:g(((e,t)=>{u({source:e,target:t})})),mergeConfirmationModalProps:n,onConfirm:m}}},246767:(e,t,n)=>{n.d(t,{Z:()=>Gt});var i=n(667294),o=n(40142),r=n(396026),s=n.n(r),a=n(883119),l=n(785893);const d=80,c=1.2;function u({layoutType:e,thumbnails:t}){switch(e){case 4:const e=t&&t[0]&&t[0]["236x"];return(0,l.jsx)(a.zd,{rounding:4,width:d,height:80,children:e?(0,l.jsx)(a.Ee,{alt:"",color:"gray",fit:"cover",naturalHeight:e.height,naturalWidth:e.width,src:e.url||""}):(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,l.jsx)(a.xu,{color:"lightGray",height:d,width:39.4}),(0,l.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:c}},children:[(0,l.jsx)(a.xu,{color:"lightGray",height:39.4,width:39.4}),(0,l.jsx)(a.xu,{color:"lightGray",dangerouslySetInlineStyle:{__style:{marginTop:"1.2px"}},height:40.6,width:39.4})]})]})});case 2:return(0,l.jsx)(a.zd,{rounding:4,width:d,height:80,children:(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",children:s()(0,2).map((e=>{const n=!!t&&t.length>0&&t[e];return(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:c}},children:(0,l.jsx)(a.xu,{height:d,width:39.4,children:n&&(0,l.jsx)(a.Ee,{alt:"",color:"gray",fit:"cover",naturalHeight:d,naturalWidth:39.4,src:n["236x"].url||""})})},e)}))})});default:return null}}var h=n(544260),p=n(549135);const g=[502043,502085,502419];function m({boardId:e,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:n}){return(0,l.jsx)(h.Z,{placementId:18,eligibleIds:g,children:({experience:i,complete:o,dismiss:r})=>(0,l.jsx)(f,{boardId:e,displayData:i.display_data,complete:o,dismiss:r,handleShowArchiveConfirmation:t,handleShowGroupPinsModal:n})})}function f({boardId:e,displayData:t,complete:n,dismiss:o,handleShowArchiveConfirmation:r,handleShowGroupPinsModal:s}){const d=t.custom_properties,[c,h]=(0,i.useState)(null);(0,i.useEffect)((()=>()=>clearTimeout(c)),[c]);const g={2:r,3:()=>{d&&s(d.cluster_id,d.section_name)}};return(0,i.useEffect)((()=>{(e=>{if(!c){const t=setTimeout((()=>{e()}),2e4);h(t)}})(o),(0,p.j)(13,{view:5,viewParameter:3069,element:11758,objectId:JSON.stringify(t.experience.experience_id),board_id:e})}),[]),(0,l.jsx)(a.mh,{children:(0,l.jsxs)("div",{className:"BoardActionUpsellCard",children:[(0,l.jsx)(a.xu,{flex:"none",children:(0,l.jsx)(u,{layoutType:t.layout_type,thumbnails:t.thumbnail_image_urls})}),(0,l.jsxs)(a.xu,{marginStart:4,children:[(0,l.jsx)(a.xv,{inline:!0,children:(0,l.jsx)(a.X6,{size:"sm",children:t.text})}),(0,l.jsxs)(a.xu,{display:"flex",justifyContent:"start",marginTop:4,width:"100%",children:[(0,l.jsx)(a.zx,{color:"gray",onClick:()=>{(0,p.j)(123,{view:5,viewParameter:3069,element:11758,objectId:JSON.stringify(t.experience.experience_id),board_id:e}),o()},text:t.dismiss_button.text}),(0,l.jsx)(a.xu,{paddingX:2,children:(0,l.jsx)(a.zx,{color:"red",onClick:()=>{g[t.complete_button.action_type](),(0,p.j)(101,{view:5,viewParameter:3069,element:11758,objectId:JSON.stringify(t.experience.experience_id),board_id:e}),n()},text:t.complete_button.text})})]})]})]})})}var b=n(389609);function v({density:e,surface:t}){(0,b.Z)({boardDensity:e,component:"board"===t?13183:13187,surface:"board",viewType:"board"===t?5:164})}var x=n(207395),y=n(803478),_=n(101267),w=n(174523),C=n(816670);function j({board:e,currentFilter:t,eligibleFilters:n,isOwnBoard:r,surface:s,setCurrentFilter:d,setTitle:c}){const u=(0,w.ZP)(),h=(0,i.useRef)(null),g=(0,o.useSelector)((({ui:e})=>{var t;return null==e||null===(t=e.views)||void 0===t?void 0:t.boardPinView})),[m,f]=(0,i.useState)(!1),b=()=>{f(!1)},j=[],S={[C.cg]:12111,[C.c7]:12110,[C.Ac]:12227};if(n){const i={items:n.map((n=>{var i;return{isSelected:n.pin_type===t,onClick:()=>{var t,i;(0,p.j)(101,{component:13475,element:S[null!==(t=n.pin_type)&&void 0!==t?t:-1],objectId:e.id,view:5,viewParameter:r?3069:3070}),d(null!==(i=n.pin_type)&&void 0!==i?i:-1),c(n.pin_type===C.cg?null:n.text),b()},text:null!==(i=n.text)&&void 0!==i?i:""}})),label:u._("Filter by type","board.experimentalBoardActionBar.filterOptions","List of board filter options")};j.push(i)}return j.push(function({handleClose:e,selectedDensity:t,surface:n},i){return{items:[{isSelected:"regular"===t,onClick:()=>{e(),v({density:"regular",surface:n})},text:i._("Default","BoardHeader.ActionBar.DensityOption-Default","Clickable text to set board view density to default mode")},{isSelected:"dense"===t,onClick:()=>{e(),v({density:"dense",surface:n})},text:i._("Compact","BoardHeader.ActionBar.DensityOption-Compact","Clickable text to set board view density to compact mode")}],label:i._("View options","BoardHeader.ActionBar.ViewOptions","List of board view options")}}({handleClose:b,selectedDensity:g,surface:s},u)),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.xu,{ref:h,children:(0,l.jsx)(a.hU,{accessibilityLabel:u._("Board Filter","board.experimentalBoardActionBar.boardFilter","Filter to select specific Pins on board"),icon:"filter",iconColor:"darkGray",onClick:()=>{(0,p.j)(101,{element:12020,objectId:e.id,view:5,viewParameter:r?3069:3070}),f(!m)},selected:m,size:"lg"})}),m&&(0,l.jsx)(x.Z,{anchor:h.current,onDismiss:b,size:"lg",children:j.map((({items:e,label:t})=>(0,l.jsx)(y.Z,{label:t,children:e.map((({isSelected:e,onClick:t,text:n})=>(0,l.jsx)(_.Z,{icon:e?"selected":null,onClick:t,children:n},n)))},t)))})]})}var S=n(778527),I=n(946753);const P=(0,S.ZP)(1000332)((function({board:e,currentFilter:t,isOwnBoard:n,section:o,setCurrentFilter:r,showExperienceTooltip:s}){const d=(0,w.ZP)(),{eligible_pin_type_filters:c}=null!=o?o:e,[u,p]=(0,i.useState)(null),g=(0,i.useRef)(null),m=o?o.pin_count:e.pin_count;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(a.xu,{alignItems:"center",direction:"row",display:"flex",paddingX:8,children:[(0,l.jsx)(a.xu,{flex:"grow",children:(0,l.jsx)(a.X6,{accessibilityLevel:2,size:"sm",children:t>0&&u?u:(0,I.nk)(d.ngettext("{{ pinCount }} Pin","{{ pinCount }} Pins",null!=m?m:0,"board.experimentalBoardActionBar.pinCount","Number of Pins on board or section"),{pinCount:m})})}),(0,l.jsx)(a.xu,{ref:g,children:(0,l.jsx)(j,{board:e,isOwnBoard:n,currentFilter:t,eligibleFilters:c,setCurrentFilter:r,setTitle:p,surface:o?"section":"board"})})]}),s&&g&&(0,l.jsx)(a.mh,{children:(0,l.jsx)(h.Z,{eligibleIds:[502974],placementId:1000332,children:({dismiss:e,experience:{display_data:t}})=>((e,t)=>{var n;return g&&(null===(n=g.current)||void 0===n||n.scrollIntoView(!1)),(0,l.jsx)(a.J2,{showCaret:!0,anchor:g.current,color:"blue",idealDirection:"down",onDismiss:e,shouldFocus:!1,size:312,children:(0,l.jsx)(a.xu,{padding:3,children:(0,l.jsx)(a.xv,{align:"center",color:"white",overflow:"normal",weight:"bold",children:t.text})})})})(e,t)})})]})}));var E=n(927550),T=n(463112),D=n(518730),k=n(578805),O=n(406191),B=n(451190),R=n(893945);function M(){const e=(0,w.ZP)(),t=(0,l.jsx)(a.xu,{display:"flex",justifyContent:"center",paddingX:8,children:(0,l.jsx)(a.xv,{children:(0,I.nk)(e._("Add a {{ star }} to show collaborators your favorite Pins","groupBoardFavoriteEducationModal.text","Text for modal informing users of changes from group board reactions to board favorites"),{star:(0,l.jsx)(a.xu,{display:"inlineBlock",children:(0,l.jsx)(a.JO,{accessibilityLabel:e._("Favorite icon","groupBoardFavoriteEducationModal.bodyFavoriteIcon","Accessibility label for favorite icon"),color:"darkGray",dangerouslySetSvgPath:R.W,size:12})})})})}),n=t=>(0,l.jsx)(a.kC,{justifyContent:"end",children:(0,l.jsx)(a.zx,{onClick:t,text:e._("Got it","groupBoardFavoriteEducationModal.doneButton","Done button for modal")})}),i=t=>(0,l.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingX:4,paddingY:6,position:"relative",children:[(0,l.jsx)(a.xu,{maxWidth:400,children:(0,l.jsx)(a.X6,{align:"center",size:"md",children:(0,I.nk)(e._("{{ heart }}  is now  {{ star }}","groupBoardFavoriteEducationModal.heading","Heading for modal informing users of changes from group board reactions to board favorites"),{heart:(0,l.jsx)(a.xu,{display:"inlineBlock",paddingX:1,children:(0,l.jsx)(a.JO,{accessibilityLabel:e._("Heart icon","groupBoardFavoriteEducationModal.headingHeartIcon","Accessibility label for heart icon"),color:"darkGray",icon:"heart",size:16})}),star:(0,l.jsx)(a.xu,{display:"inlineBlock",paddingX:1,children:(0,l.jsx)(a.JO,{accessibilityLabel:e._("Favorite icon","groupBoardFavoriteEducationModal.headingFavoriteIcon","Accessibility label for favorite icon"),color:"darkGray",dangerouslySetSvgPath:R.W,size:16})})})})}),(0,l.jsx)(a.xu,{position:"absolute",top:!0,right:!0,padding:6,children:(0,l.jsx)(a.hU,{accessibilityLabel:e._("Close","groupBoardFavoriteEducationModal.closeModalButton","Accessibility label for close modal button"),icon:"cancel",iconColor:"darkGray",onClick:t})})]});return(0,l.jsx)(h.Z,{eligibleIds:[503077],placementId:18,children:({complete:o,dismiss:r})=>(0,l.jsx)(B.Z,{accessibilityModalLabel:e._("Group board reaction","groupBoardFavoriteEducationModal.modalAccessibilityLabel","Accessiblility label for modal used to educate group board collaborators about favorite button"),footer:n(o),heading:i(r),onDismiss:r,size:"sm",children:t})})}var A=n(711349),L=n(570970),Z=n(41425),N=n(34411),F=n(648381),z=n(613330),H=n(691951);const U=()=>{};function W({board:e,currentView:t,handleContentViewChange:n,handleSetCurrentModal:r,handleShowEditSectionModal:s,handleShowMergeSectionsConfirmationModal:d,isOwnerOrCollaborator:c,isOwnBoard:u,isPinGridSorted:h,refreshBoardData:p=U,refreshSectionData:g=U,section:m}){const f=(0,N.Z)(),b=(0,O.Z)({board:e,viewer:f}),v=(e.access||[]).includes("write"),x=(0,o.useSelector)((e=>e.ui.views.boardPinView)),y=(0,Z.Z)(m?(0,k.Z)(e,m):""),[_,w]=(0,i.useState)(C.cg),[j,S]=(0,i.useState)(!1),I=(0,o.useDispatch)();(0,i.useEffect)((()=>()=>{_!==C.cg&&I(m?(0,A.Z)(z.DV.SECTION_PINS,m.id):(0,A.Z)(z.DV.BOARD_PINS,e.id))}),[e,_,I,m]);const B=()=>{_>0&&(w(C.cg),m?g():p())};return m?(0,l.jsx)(F.k,{value:{currentFilter:_,eligibleFilters:m.eligible_pin_type_filters,refreshData:g,sectionId:m.id},children:(0,l.jsxs)(i.Fragment,{children:[c&&(0,l.jsx)(P,{board:e,currentFilter:_,isOwnBoard:u,section:m,setCurrentFilter:w,showExperienceTooltip:!1}),(0,l.jsx)(D.Z,{board:e,boardSectionId:m.id,currentFilter:_,denseViewSelected:v&&"dense"===x,inSectionOrganizationMode:!1,inSelectAll:!1,isOwnBoard:u,refreshFilteredFeed:B,renderFooterStory:t=>!e.archived_by_me_at&&c&&(0,l.jsx)(a.xu,{marginBottom:12,children:(0,l.jsx)(T.Z,{children:(0,l.jsx)(L.Z,{collection:m,storyId:t,url:y})})}),viewer:f,viewParameter:b})]})}):(0,l.jsx)(F.k,{value:{currentFilter:_,eligibleFilters:e.eligible_pin_type_filters,refreshData:p,setShowExperienceTooltip:S},children:(0,l.jsxs)(i.Fragment,{children:[c&&(0,l.jsx)(P,{board:e,currentFilter:_,isOwnBoard:u,setCurrentFilter:w,showExperienceTooltip:j}),(0,l.jsx)(E.Z,{actions:{onBoardOrganizeClick:U},board:e,currentFilter:_,currentView:t,enableReordering:c,isOwnBoard:u,isPinGridSorted:h,onContentViewChange:n,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:(e,t)=>{r(H.s.sectionMergeConfirm),d(e,t)},refreshFilteredFeed:B,viewParameter:b}),c&&(0,l.jsx)(M,{})]})})}function G(){(0,p.j)(101,{element:10778,component:13216,view:5,viewParameter:3069})}function V({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditClick:o,onMergeClick:r,onUnarchiveClick:s,setFlyoutType:a,showCreatePinCodeOption:l},d){const c=[{dataTestId:"editBoardButton",text:d._("Edit board","BoardHeader.BoardOptionsFlyout.EditOption","Clickable text to enter board editing mode"),onClick:()=>{o(),e()}},{text:d._("Share","BoardHeader.BoardOptionsFlyout.ShareOption","Clickable text to show share options"),onClick:()=>{G(),a("boardShare")}},{text:d._("Merge","BoardHeader.BoardOptionsFlyout.MergeOption","Clickable text to open merge board modal"),onClick:()=>{r(),e()}}];t?c.push({text:d._("Unarchive","BoardHeader.BoardOptionsFlyout.UnarchiveOption","Clickable text to open unarchive modal"),onClick:()=>{s(),e()}}):c.push({text:d._("Archive","BoardHeader.BoardOptionsFlyout.ArchiveOption","Clickable text to open archive modal"),onClick:()=>{n(),e()}}),l&&c.push({text:d._("Create Pincode","BoardHeader.BoardOptionsFlyout.PincodeOption","Clickable text to trigger Pincode modal"),onClick:()=>{i(),e()}});return{items:c,label:d._("Board options","BoardHeader.BoardOptionsFlyout.OptionsCategory","Category of board options in board flyout")}}function q({handleClose:e,onEditClick:t,setFlyoutType:n},i){return{items:[{dataTestId:"edit-section-button",text:i._("Edit Section","BoardHeader.getSectionOptionsCategory.EditOption","Clickable text to enter board editing mode"),onClick:()=>{t(),e()}},{text:i._("Share","BoardHeader.getSectionOptionsCategory.ShareOption","Clickable text to show share options"),onClick:()=>{G(),n("boardShare")}}],label:i._("Section options","BoardHeader.getSectionOptionsCategory.OptionsCategory","Category of section options in section flyout")}}function $({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:s,onUnarchiveClick:d,setFlyoutType:c,showCreatePinCodeOption:u,surface:h}){const p=(0,w.ZP)(),g=[].concat(["section"===h?q({handleClose:e,onEditClick:r,setFlyoutType:c},p):V({handleClose:e,isArchived:t,onArchiveClick:n,onCreatePincode:i,onEditClick:o,onMergeClick:s,onUnarchiveClick:d,setFlyoutType:c,showCreatePinCodeOption:u},p)]);return(0,l.jsx)(a.xu,{width:206,children:g.map((({items:e,label:t})=>(0,l.jsx)(y.Z,{label:t,children:e.map((({dataTestId:e,isSelected:t,onClick:n,text:i})=>(0,l.jsx)(_.Z,{dataTestId:e,icon:t?"selected":null,onClick:n,children:i},i)))},t)))})}var Y=n(195490),X=n(872284),K=n(237574);function J({board:e,onArchiveClick:t,onCreatePincode:n,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:s,onUnarchiveClick:d,showCreatePinCodeOption:c,surface:u}){const h=(0,w.ZP)(),p=(0,i.useRef)(null),[g,m]=(0,i.useState)(!1),[f,b]=(0,i.useState)("boardOptions"),v=()=>{m(!1),b("boardOptions")},y={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:K.d.BOARD,url:e.url},_=()=>{m((e=>!e)),b("boardOptions")},C=!!e.archived_by_me_at;return(0,l.jsxs)(a.xu,{position:"relative",children:[(0,l.jsx)(a.xu,{"data-test-id":"more-board-options",ref:p,children:(0,l.jsx)(a.hU,{accessibilityLabel:h._("More Board options","BoardHeaderOVerflowFlyoutButton.IconButton.AccessibilityLabel","Accessibility label on icon button"),bgColor:"lightGray",icon:"ellipsis",iconColor:"darkGray",onClick:_,selected:g,size:"sm"})}),(0,l.jsx)(Y.Z,{anchors:{3001:p.current},onCompleteByAnchor:{3001:_},placementId:18}),g&&(0,l.jsx)(x.Z,{anchor:p.current,onDismiss:v,size:"boardOptions"===f?"lg":"xl",children:"boardOptions"===f?(0,l.jsx)($,{handleClose:v,isArchived:C,onArchiveClick:t,onCreatePincode:n,onEditBoardClick:o,onEditSectionClick:r,onMergeClick:s,onUnarchiveClick:d,setFlyoutType:b,showCreatePinCodeOption:c,surface:u}):(0,l.jsx)(X.Z,{classNames:"SendBoard",isFlyout:!0,onCreatePincodeClick:n,onHide:v,sendType:K.d.BOARD,sharedObject:y})})]})}var Q=n(151101),ee=n(925265);function te(e){const{faces:t,maxFaces:n,numFaces:i,onOverflowClick:o,shouldNavigate:r=!0}=e,s=[...t].reverse(),d=t.length>n?s.slice(0,n+1):s,c=i-n;return(0,l.jsx)(a.xu,{position:"relative",display:"flex",dangerouslySetInlineStyle:{__style:{flexDirection:"row-reverse"}},alignItems:"center",children:d.map(((e,t)=>{const{name:n,src:i,href:s,isDim:d}=e;if(0===t&&c>0)return(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},width:44,height:44,marginStart:-2,rounding:"circle",overflow:"hidden",children:(0,l.jsx)(a.Ee,{src:i||"",alt:n,naturalWidth:44,naturalHeight:44,fit:"contain",children:(0,l.jsx)(a.iP,{fullHeight:!0,fullWidth:!0,onTap:o,rounding:"circle",children:(0,l.jsx)(a.xu,{display:"flex",justifyContent:"center",alignItems:"center",rounding:"circle",width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.4)"}},children:(0,l.jsx)(a.xv,{color:"white",size:"md",weight:"bold",children:(u=c,u>99?"99+":u)})})})})},t);{const e={__style:{opacity:d?.5:1}},o=(0,l.jsx)(a.xu,{marginStart:-2,dangerouslySetInlineStyle:e,children:(0,l.jsx)(Q.Z,{name:n,size:"sm",src:i,outline:!0})},t);return r?(0,l.jsx)(a.iP,{role:"link",href:s,rounding:"circle",children:o},t):o}var u}))})}function ne({invitedByUser:e,isAccepted:t,onDecline:n,onAccept:i,createdAt:o}){const r=(0,w.ZP)(),s=(0,N.Z)(),d=e||{},{first_name:c,full_name:u,username:h,image_medium_url:p}=d,g=c||u||r._("others","Default text when board colalborator name is not known.","Default text when board colalborator name is not known.");return(0,l.jsx)(a.W2,{children:t?(0,l.jsxs)(a.xu,{width:"100%",paddingX:5,paddingY:3,rounding:2,marginStart:-1,marginEnd:-1,display:"flex",direction:"row",alignItems:"center",borderStyle:"sm",children:[(0,l.jsx)(te,{maxFaces:2,numFaces:2,faces:[{href:s.isAuth?`/${s.username}`:"",name:s.isAuth?s.fullName:"",src:s.isAuth?s.imageMediumUrl:""},{href:`/${h}`,name:u,src:p}]}),(0,l.jsxs)(a.xu,{marginStart:2,children:[(0,l.jsx)(a.xv,{weight:"bold",children:r._("You're in!","Text showing that a user has accepted the board invite and is now a part of the board","Text showing that a user has accepted the board invite and is now a part of the board")}),(0,l.jsx)(a.xv,{children:(0,ee.Z)(r._("Start collaborating with {{ invitedByUserName }} on this board"," - "," -- "),{invitedByUserName:g})})]})]}):(0,l.jsx)(a.xu,{width:540,color:"white",paddingX:6,paddingY:6,rounding:6,marginStart:-1,marginEnd:-1,borderStyle:"shadow",children:(0,l.jsxs)(a.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,l.jsx)(a.xu,{marginEnd:2,children:(0,l.jsx)(Q.Z,{name:u,src:p,size:"md"})}),(0,l.jsx)(a.xu,{flex:"grow",children:(0,l.jsx)(a.xv,{inline:!0,color:"darkGray",children:(0,I.nk)(r._("{{ user }} invited you to collaborate on this board {{ createdAt }}","web.boardView.inviteCard.text","Label used to indicate a Pinner has invited you to join a board"),{user:(0,l.jsx)(a.xv,{color:"darkGray",inline:!0,weight:"bold",children:(0,l.jsx)(a.rU,{inline:!0,href:`/${h}`,children:u})},h),createdAt:(0,l.jsx)(a.xv,{color:"gray",inline:!0,children:o})})})}),(0,l.jsxs)(a.xu,{display:"flex",alignItems:"center",paddingX:1,dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},children:[(0,l.jsx)(a.xu,{marginEnd:2,display:"inlineBlock",children:(0,l.jsx)(a.zx,{onClick:n,text:r._("Decline","decline board collaborator invite or request","decline board collaborator invite or request"),color:"gray",size:"lg"})}),(0,l.jsx)(a.zx,{onClick:i,text:r._("Accept","Text to accept a board collaboration invite","Text to accept a board collaboration invite"),size:"lg",color:"red"})]})]})})})}var ie=n(454690),oe=n(311866),re=n(881220),se=n(658726),ae=n(535718),le=n(40197),de=n(301314),ce=n(475446);const ue=(0,ce.Cl)((({boardId:e,inviteCode:t,shouldAutoAcceptBoardInvite:n,toastManagerContext:r,userInviterId:s})=>{const d=(0,w.ZP)(),c=(0,se.Z)(),[u,h]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),m=(0,N.Z)(),f=(0,o.useDispatch)(),b={board_id:e,field_set_key:"boardBanner",invite_code:t,invited_user_id:m.isAuth&&m.id};(0,i.useEffect)((()=>{s&&n&&(oe.ZP.create("BoardInviteResource",b).callUpdate().then((()=>{f((0,le.A8)(e)),f((0,de.jB)("BoardInviteResource",b))})),oe.ZP.create("UserResource",{field_set_key:"grid_item",user_id:s}).callGet().then((({resource_response:e})=>{const t=e&&e.data;t&&g(t)})))}),[n,s]);const{data:v}=(0,ae.Z)({name:"BoardInvitesResource",options:{current_user:!0,field_set_key:"news"}}),{data:x}=(0,ae.Z)({name:"BoardInviteResource",options:b}),y=!(!s||!n)||u,_=!["new","contact_request_not_approved"].includes(null==x?void 0:x.status),C=[...v||[]].pop(),j=t=>{const n=t?"collaborator_invite_accept":"collaborator_decline_invite";ie.Z.trackEvent(n,"click");const i=oe.ZP.create("BoardInviteResource",b);(t?i.callUpdate():i.callDelete()).then((()=>{t&&(f((0,le.A8)(e)),h(!0),r.showToast((({onHide:e})=>(0,l.jsx)(re.Z,{duration:5e3,onHide:e,text:d._("You're in! Save Pins, plan with collaborators, and more!","BoardCollabInviteBannerContainer.useEffect.acceptedInviteToast","Text in toast after accepting a board collaborator invite.")})))),f((0,de.jB)("BoardInviteResource",b))}))},S=(null==x?void 0:x.invited_by_user)||p;return!S||_&&!y?null:(0,l.jsx)(a.xu,{marginTop:3,paddingY:0,children:(0,l.jsx)(ne,{invitedByUser:S,isAccepted:y,onAccept:()=>j(!0),onDecline:()=>j(!1),createdAt:c(C&&C.created_at,!0)})})}));var he=n(254821),pe=n(221469),ge=n(855168),me=n(869950);function fe({boardId:e}){const t=(0,ge.TH)(),n=t&&t.search?(0,pe.mB)(t.search):{},i=n.invite_code,o=n.accept_invite,r=n.inviter_user_id;return(0,l.jsx)(ue,{boardId:e,inviteCode:i,shouldAutoAcceptBoardInvite:o,userInviterId:r})}const be=function(e){const{board:t}=e,{id:n,sensitivity:o}=t,r=(0,me.Uz)(o);return(0,l.jsxs)(i.Fragment,{children:[!r&&(0,l.jsx)(fe,{boardId:n}),r&&(0,me.Fx)(o)&&o&&(0,l.jsx)(a.xu,{paddingY:10,children:(0,l.jsx)(he.Z,{notices:o.notices,viewType:5,sensitivity:o})})]})};function ve(e){const t=(0,w.ZP)(),{color:n,size:i}=e;return(0,l.jsx)(a.JO,{accessibilityLabel:t._("secret board","accessible label for secret board icon","accessible label for secret board icon"),color:n,icon:"lock",size:i})}function xe({color:e,paddingX:t}){return(0,l.jsx)(a.xu,{display:"inlineBlock",paddingX:t,children:(0,l.jsx)(a.xv,{color:e,size:"md",weight:"bold",inline:!0,children:"·"})})}function ye({archived:e,secret:t}){const n=(0,w.ZP)();return(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[t&&(0,l.jsx)(ve,{color:"gray",size:16}),t&&(0,l.jsx)(a.xu,{"data-test-id":"secret-board",paddingX:1,children:(0,l.jsx)(a.xv,{color:"gray",inline:!0,size:"lg",children:n._("Secret board","LegoBoardPageHeader.BoardStatus.secret","Label for a secret board")})}),t&&e&&(0,l.jsx)(xe,{color:"gray",paddingX:1}),e&&(0,l.jsx)(a.xu,{paddingX:1,children:(0,l.jsx)(a.xv,{color:"gray",inline:!0,size:"lg",children:n._("Archived board","LegoBoardPageHeader.BoardStatus.archived","Label for a secret board")})})]})}var _e=n(759712),we=n(785078),Ce=n(151106),je=n(624500);function Se({board:e,collaborators:t,overflowNumber:n}){const o=(0,w.ZP)(),r=(0,i.useRef)(),[s,d]=(0,i.useState)(!1),c=t.map((e=>e.isDim?null:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:(0,l.jsx)(a.rU,{href:e.href||"",hoverStyle:"none",inline:!0,children:e.name})},e.name))).filter(Boolean);return n&&c.push((0,l.jsx)(a.xu,{display:"inlineBlock",ref:r,children:(0,l.jsx)(a.iP,{onTap:()=>d(!0),children:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:(0,I.nk)(o.ngettext("{{ overflowNumber }} other","{{ overflowNumber }} others",n,"LegoBoardPageHeader.CollaboratorNames.others","number of additional collaborators not listed"),{overflowNumber:n})})})},"overflowText")),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.xv,{inline:!0,children:(0,je.Z)(c,o)}),s&&(0,l.jsx)(Ce.default,{anchor:r.current,board:e,onDismiss:()=>d(!1)})]})}var Ie=n(631739),Pe=n(686723),Ee=n(442634),Te=n(363570);function De(e,t){return t?e._("Join","BoardPage.BoardJoinButton.join","[Button] Request to join a group board as a collaborator"):e._("Request to join","[Button] Request to join a group board as a collaborator","[Button] Request to join a group board as a collaborator")}function ke(e,t){return t?e._("Cancel","BoardPage.BoardJoinButton.cancel","[Button] Cancel request to join a group board as a collaborator"):e._("Cancel request","[Button] Cancel request to join a group board as a collaborator","[Button] Cancel request to join a group board as a collaborator")}function Oe(e){const t=(0,w.ZP)(),{onClick:n,requested:i,size:o,useAlternateText:r}=e;return(0,l.jsx)(a.zx,{fullWidth:!0,onClick:n,size:o||"md",text:(i?ke:De)(t,r)})}function Be(e){const t=(0,w.ZP)(),{boardImage:n,boardName:i,boardUrl:o,onHide:r}=e,s=(0,l.jsx)(a.xv,{children:(0,I.nk)(t._("You've cancelled the request to collaborate on {{ boardName }}","Board.JoinButton.CancelToast","Toast text stating that a user has cancelled a request to join a board"),{boardName:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:i})})});return(0,l.jsx)(re.Z,{duration:3e3,href:o,imageUrl:n,onHide:r,text:s})}function Re(e){const t=(0,w.ZP)(),{boardImage:n,boardName:i,boardUrl:o,onHide:r}=e,s=(0,l.jsx)(a.xv,{children:(0,I.nk)(t._("You've requested to join {{ boardName }}","Board.JoinButton.RequestToast","Toast text stating that a user has requested to join a board"),{boardName:(0,l.jsx)(a.xv,{inline:!0,weight:"bold",children:i})})});return(0,l.jsx)(re.Z,{href:o,imageUrl:n,onHide:r,text:s})}var Me=n(998864);function Ae(e,t){return oe.ZP.create("BoardCollaboratorRequestResource",{board_id:e,requesting_user_id:t})}function Le(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}function Ze(e){const{boardId:t,boardImage:n,boardName:i,boardUrl:r,isBoardLandingPage:s,isRequestedByMe:d,showPulsar:c,size:u,variant:h}=e,g=(0,o.useDispatch)(),m=(0,N.Z)(),f=(0,ce.F9)(),b=m.isAuth&&m.id||"",v=(0,Me.Z)();function x(){g(function(e,t){const n="cancel-group-board-request-to-join";return i=>{Ae(e,t).callDelete({showError:!1}).then((()=>{ie.Z.trackEvent(n,"success")})).catch((()=>{ie.Z.trackEvent(n,"error"),i(Le(e,!0))})),i(Le(e,!1))}}(t,b)),f.showOneToast((({onHide:e})=>(0,l.jsx)(Be,{boardImage:n,boardName:i,boardUrl:r,onHide:e})))}function y(){g(function(e,t){const n="group-board-request-to-join";return i=>{Ae(e,t).callCreate().then((()=>{ie.Z.trackEvent(n,"success")})).catch((()=>{ie.Z.trackEvent(n,"error"),i(Le(e,!1))})),i(Le(e,!0))}}(t,b)),f.showOneToast((({onHide:e})=>(0,l.jsx)(Re,{boardImage:n,boardName:i,boardUrl:r,onHide:e})))}const _=({event:e})=>{e.preventDefault(),e.stopPropagation();const n=d?"cancel_group_board_request_to_join":"group_board_request_to_join";v(d?x:y)(),function(e){const{action:t,id:n,isBoardLandingPage:i,url:o}=e,r="request"===t?7499:7547,s=i?5:4;(0,p.j)(101,{component:1,element:r,objectId:n,view:s,current_page_url:o})}({action:d?"request":"cancel",id:t,isBoardLandingPage:!!s,url:r}),ie.Z.trackEvent(n,"click")};return b?(0,l.jsxs)(a.xu,{position:"relative",display:"flex",children:[(0,l.jsx)(Oe,{onClick:_,requested:d,useAlternateText:"lego"===h,size:u}),c&&(0,l.jsx)(a.iP,{onTap:e=>{_(e)},children:(0,l.jsx)(a.xu,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},children:(0,l.jsx)(a.o3,{paused:d})})})]}):null}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Fe extends i.Component{constructor(...e){super(...e),Ne(this,"state",{flyoutOpen:!1}),Ne(this,"toggleFlyout",this.props.requireAuth((()=>{this.state.flyoutOpen||this.props.onOpen(),this.setState((e=>({flyoutOpen:!e.flyoutOpen})))})))}render(){const{board:e,bgColor:t="white",children:n,iconColor:o="gray",onCreatePincode:r}=this.props,{flyoutOpen:s}=this.state,d={description:e.description,id:e.id,imageUrl:e.image_cover_url,name:e.name,type:K.d.BOARD,url:e.url},c=n&&n({active:s,onClick:this.toggleFlyout})||(0,l.jsx)(a.hU,{accessibilityLabel:this.props.i18n._("Send Board","Accessible label for button to send board","Accessible label for button to send board"),onClick:this.toggleFlyout,icon:"share",size:"lg",bgColor:t,iconColor:o});return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.xu,{ref:e=>{this.anchor=e},children:c}),this.state.flyoutOpen&&(0,l.jsx)(a.mh,{children:(0,l.jsx)(a.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.toggleFlyout,size:"xl",positionRelativeToAnchor:!1,children:(0,l.jsx)(X.Z,{classNames:"SendBoard",isFlyout:!0,onCreatePincodeClick:r?()=>{this.toggleFlyout(),r()}:void 0,onHide:this.toggleFlyout,sendType:K.d.BOARD,sharedObject:d})})})]})}}function ze(e){const t=(0,w.ZP)(),n=(0,Me.Z)();return(0,l.jsx)(Fe,{...e,i18n:t,requireAuth:n})}function He({board:e,handleCreatePincode:t}){const n=(0,w.ZP)(),i=(0,Me.Z)()((()=>G()));return(0,l.jsx)(ze,{board:e,onCreatePincode:t,onOpen:i,children:({onClick:e})=>(0,l.jsx)(a.zx,{fullWidth:!0,color:"gray",onClick:e,size:"lg",text:n._("Share","BoardHeader.SendBoardButton","Text on button to share board")})})}var Ue=n(767523),We=n(272850);var Ge=n(159276),Ve=n(181307),qe=n(796025),$e=n(92849),Ye=n(577302),Xe=n(551687),Ke=n(390764),Je=n(689859);const Qe=(0,i.lazy)((()=>Promise.resolve().then(n.bind(n,151106))));function et({board:e,displayedCollaborators:t,nonDisplayedCollaboratorCount:n,handleShowCollabAndPermissionsModal:o}){const[r,s]=(0,i.useState)(!1),d=(0,N.Z)(),c=(0,i.useRef)(),u=(0,i.useRef)(),h=(0,ge.k6)(),p=(0,Ye.Z)(d,e),g=p||e.collaborator_invites_enabled&&e.collaborated_by_me,m=(()=>{let n=()=>{var e;return h.push(null!==(e=t[0].href)&&void 0!==e?e:"/")};return t.length>1&&(n=()=>s(!r)),(p||e.collaborated_by_me)&&(n=o),n})(),f=[501003];p&&e.is_collaborative&&f.push(502335);const b=t.map((({name:e,src:t})=>e&&t?{name:e,src:t.endsWith("/default_75.png")?"":t}:{name:e,src:t}));return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[!e.collaborator_count||e.collaborator_count<=101?(0,l.jsx)(qe.Z,{addButtonRef:u,collaboratorCount:e.collaborator_count||0,nonDisplayedCollaboratorCount:n,displayedCollaborators:b,onClick:m,ref:c,showAddButton:null!=g&&g}):(0,l.jsx)($e.Z,{addButtonRef:u,nonDisplayedCollaboratorCount:n,displayedCollaborators:b,onClick:m,pileRef:c,showAddButton:null!=g&&g}),(0,l.jsx)(Y.Z,{anchors:{3002:u.current},placementId:18,positionRelativeToAnchor:!1}),(0,l.jsx)(Ke.Z,{anchor:u.current,experienceIds:f,idealDirection:"down",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,customWrapper:({children:e})=>(0,l.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:new a.Ry(2),children:e})})]}),r&&(0,l.jsx)(Xe.Z,{name:"SafeSuspense_CollaboratorAvatarGroup_BoardCollabFlyout",children:(0,l.jsx)(Je.Z,{children:(0,l.jsx)(Qe,{anchor:c.current,board:e,onDismiss:()=>{s(!1),c.current&&c.current.focus()}})})})]})}function tt(e){var t;const{board:n,collaborators:i,handleCreatePincode:o,handleShowCollabAndPermissionsModal:r,hideFollowers:s,isToolsBoard:d,onFollowersClick:c,overFlowActionsButton:u,showPulsar:h,userBlocked:p}=e,{access:g,archived_by_me_at:m,collaborator_requests_enabled:f,description:b,follower_count:v,id:x,image_cover_url:y,name:_,privacy:w,url:C,viewer_collaborator_join_requested:j}=n,{displayedCollaborators:S,nonDisplayedCollaboratorCount:I}=(0,we.Z)({boardCollaboratorCount:n.collaborator_count,collaborators:i}),P=(0,N.Z)(),E=(0,Ue.Z)(),T=(0,Ge.D3)(P,(null===(t=n.owner)||void 0===t?void 0:t.id)||"",E),D=g&&g.includes("write")||T,k=(0,Te.Z)({viewer:P,board:n})||T,O=(0,Ve.tc)("auth_web_board_copy_link"),B=!!m,R=w===Ie.Z.BoardPrivacy.PROTECTED,M=w===Ie.Z.BoardPrivacy.SECRET,A=!D&&!p,L=A&&f,Z=A&&!!o,F=!(!v||s||B||M||R),z=!k||b,H={description:n.description||"",id:n.id,imageUrl:n.image_cover_url,name:"",type:n.type,url:n.url};return(0,l.jsx)(a.xu,{direction:"column",display:"flex",justifyContent:"center",marginBottom:d?4:7,paddingX:8,width:"100%",children:(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",children:(0,l.jsxs)(a.xu,{"data-test-id":"LegoBoardHeader__main",direction:"column",display:"flex",maxWidth:488,children:[(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",children:(0,l.jsx)(a.xu,{maxWidth:800,children:(0,l.jsx)(be,{board:n})})}),(0,l.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",marginStart:10,marginTop:4,children:(0,l.jsxs)(a.X6,{align:"center",children:[_,(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{display:"inline-flex"}},paddingX:2,children:u})]})}),(0,l.jsx)(_e.Z,{children:(0,l.jsx)(a.xu,{marginTop:2,children:(0,l.jsx)(et,{board:n,displayedCollaborators:S,nonDisplayedCollaboratorCount:I,handleShowCollabAndPermissionsModal:r})})}),z&&(0,l.jsx)(_e.Z,{children:(0,l.jsx)(a.xu,{marginTop:2,dangerouslySetInlineStyle:{__style:{textAlign:"center"}},children:(0,l.jsx)(Ee.Z,{inline:!0,items:[k?null:(0,l.jsx)(Se,{board:n,collaborators:S,overflowNumber:I},"collaborators"),b?(0,l.jsx)(a.xv,{inline:!0,children:b}):null]})})}),(0,l.jsx)(_e.Z,{children:(0,l.jsx)(a.xu,{marginTop:2,children:(B||M)&&(0,l.jsx)(ye,{archived:B,secret:M})})}),(0,l.jsx)(_e.Z,{children:F&&(0,l.jsx)(We.P,{bold:!0,count:null!=v?v:0,onClick:c,shortform:!0,size:"lg"})}),(0,l.jsx)(_e.Z,{children:(L||Z)&&(0,l.jsxs)(a.xu,{direction:"row",display:"flex",justifyContent:"center",marginTop:5,width:"100%",children:[L&&(0,l.jsx)(a.xu,{paddingX:1,children:(0,l.jsx)(Ze,{boardId:x,boardImage:null!=y?y:"",boardName:_,boardUrl:C,isRequestedByMe:Boolean(j),showPulsar:h,size:"lg",variant:"lego"})}),Z&&!!o&&(0,l.jsx)(a.xu,{paddingX:1,children:(0,l.jsx)(He,{board:n,handleCreatePincode:o})}),O().anyEnabled&&(0,l.jsx)(Pe.default,{sharedObject:H,backgroundColor:"#FFFFFF",iconColor:"#111111",iconSize:48,isCloseupActionBar:!0},"copylink")]})})]})})})}function nt({boardId:e,ownerUsername:t,ownerName:n,ownerImgSrc:i,children:o}){const{data:r,isLoaded:s}=(0,ae.Z)({name:"BoardCollaboratorsResource",options:{board_id:e},noCache:!0}),a=[{name:n,src:i,href:`/${t}/`}];return s&&r&&r.length>0&&r.forEach((e=>{const t=e.image_key||e.image_medium_url||e.image_small_url;a.push({name:e.full_name,src:t,href:`/${e.username}/`})})),o(a)}var it=n(81),ot=n(632117),rt=n(108301);function st(e){const t=(0,w.ZP)(),{bgColor:n,board:r,canCreatePincode:s,canEdit:a,handleCreatePincode:d,handleOpenSendBoardFlyout:c,onEditClick:u,showFollow:h,showShare:p,size:g}=e,{id:m,name:f,url:b,image_cover_url:v}=r,[x,C]=(0,i.useState)(r.followed_by_me),{showOneToast:j}=(0,ce.F9)(),S=(0,o.useDispatch)(),I=(0,Me.Z)()((()=>{x?(S((0,rt.f)(m)),C(!1)):(S((0,rt.Z)(m)),C(!0),j((({onHide:e})=>(0,l.jsx)(ot.Z,{boardImage:null!=v?v:"",boardName:f,boardUrl:b,onHide:e}))))}));return(0,l.jsx)(it.Z,{bgColor:n,icon:"ellipsis",label:t._("Other actions","profileHeader.actionBar.overflow","Accessibility label for button to open other options flyout"),size:g,children:()=>(0,l.jsxs)(y.Z,{label:t._("Board options","profileHeader.actionBar.overflow.header","Accessibility label header for board options flyout"),children:[a&&u&&(0,l.jsx)(_.Z,{onClick:()=>{u()},children:t._("Edit","BoardPage.ActionBar.PartnerEdit","Clickable text to enter board editing mode")}),a&&s&&d&&(0,l.jsx)(_.Z,{onClick:()=>{d()},children:t._("Create Pincode","BoardPage.ActionBar.PartnerPincode","Clickable text to trigger Pincode modal")}),p&&c&&(0,l.jsx)(ze,{board:r,onCreatePincode:d,onOpen:c,children:({onClick:e})=>(0,l.jsx)(_.Z,{onClick:e,children:t._("Share","BoardPage.ActionBar.EllipsisButton","Button caption to share board")})}),h&&(0,l.jsx)(i.Fragment,{children:x?(0,l.jsx)(_.Z,{onClick:I,children:t._("Unfollow","BoardPage.ActionBar.EllipsisButton","Button caption to unfollow board")}):(0,l.jsx)(_.Z,{onClick:I,children:t._("Follow","BoardPage.ActionBar.EllipsisButton","Button caption to follow board")})})]})})}var at=n(975151);const lt=(0,i.forwardRef)(((e,t)=>{const{boardName:n,boardUrl:i,children:o,overFlowActionsButton:r,sectionName:s}=e;return(0,l.jsxs)(a.xu,{display:"flex",justifyContent:"center",marginBottom:8,paddingX:8,ref:t,width:"100%",children:[(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",maxWidth:488,children:[(0,l.jsx)(_e.Z,{children:(0,l.jsx)(a.xu,{marginTop:4,children:(0,l.jsx)(at.Z,{children:({active:e,focused:t,hovered:o,onBlur:r,onFocus:s,onMouseEnter:d,onMouseLeave:c})=>(0,l.jsx)(a.iP,{role:"link",href:null!=i?i:"",onFocus:s,onBlur:r,onMouseEnter:d,onMouseLeave:c,children:(0,l.jsx)(a.X6,{align:"center",color:e||t||o?"darkGray":"gray",children:n})})})})}),(0,l.jsx)(_e.Z,{children:(0,l.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:-2,children:[(0,l.jsx)(a.X6,{align:"center",children:s}),!!r&&(0,l.jsx)(a.xu,{paddingX:1,children:r})]})})]}),o&&(0,l.jsx)(a.xu,{marginTop:8,children:o})]})}));lt.displayName="SectionHeader";const dt=lt;var ct=n(16719);function ut({board:e,handleBoardEditClick:t,handleFollowersClick:n,handleSectionEditClick:i,handleShowBoardArchiveConfirmation:o,handleShowBoardUnarchiveConfirmation:r,handleShowCollabAndPermissionsModal:s,handleShowCreatePincodeModal:d,handleShowMergeModal:c,section:u,showPulsar:h}){var p,g,m,f,b,v;const{name:x,sensitivity:y,url:_}=e,{access:w}=e,C=(0,N.Z)(),j=(0,Ue.Z)(),S=w&&w.includes("write")?ct.I:nt,I=(0,me.Uz)(y),P=(0,Ge.D3)(C,(null===(p=e.owner)||void 0===p?void 0:p.id)||"",j),E=(0,Te.Z)({viewer:C,board:e})||P;let T=null;T=E?(0,l.jsx)(J,{board:e,onArchiveClick:o,onCreatePincode:d,onEditBoardClick:t,onEditSectionClick:i,onMergeClick:c,onUnarchiveClick:r,showCreatePinCodeOption:C.isAuth&&C.isPartner,surface:u?"section":"board"}):(0,l.jsx)(st,{bgColor:"lightGray",board:e,showFollow:!0,size:"sm"});const D=I&&(0,me.Fx)(y);return u?(0,l.jsx)(dt,{boardName:x,boardUrl:_,overFlowActionsButton:T,sectionName:u.title,children:D&&(0,l.jsx)(_e.Z,{children:(0,l.jsx)(a.xu,{maxWidth:800,paddingY:10,children:y&&(0,l.jsx)(he.Z,{notices:y.notices,viewType:5,sensitivity:y})})})}):(0,l.jsx)(a.xu,{"data-test-id":"board-header",children:(0,l.jsx)(S,{boardId:e.id,ownerName:(null===(g=e.owner)||void 0===g?void 0:g.full_name)||"",ownerUsername:(null===(m=e.owner)||void 0===m?void 0:m.username)||"",ownerImgSrc:(null===(f=e.owner)||void 0===f?void 0:f.image_key)||(null===(b=e.owner)||void 0===b?void 0:b.image_medium_url)||(null===(v=e.owner)||void 0===v?void 0:v.image_small_url)||"",children:t=>{var i;return(0,l.jsx)(tt,{board:e,collaborators:t,handleCreatePincode:d,handleShowCollabAndPermissionsModal:s,hideFollowers:P,isToolsBoard:!0,onFollowersClick:n,overFlowActionsButton:T,showPulsar:h,userBlocked:!(null===(i=e.owner)||void 0===i||!i.blocked_by_me)})}})})}var ht=n(238332),pt=n(163880),gt=n(164756);function mt({boardId:e,collaboratorId:t,collaboratorUsername:n}){const i=(0,o.useDispatch)(),r=(0,ge.k6)(),s=(0,w.ZP)();return(0,l.jsx)(a.kC,{justifyContent:"center",width:"100%",children:(0,l.jsx)(a.xu,{marginTop:8,maxWidth:960,paddingX:8,children:(0,l.jsx)(a.QH,{message:s._("You’ve been requested to take over ownership of this board","boardOwnershipTransferUpsell.message","Message informing user they have received an ownership transfer request"),primaryAction:{accessibilityLabel:s._("Accept","boardOwnershipTransferUpsell.acceptAccessibilityLabel","Accessibility label for accept button on upsell"),label:s._("Accept","boardOwnershipTransferUpsell.acceptLabel","Label for accept button on upsell"),onClick:()=>{oe.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callUpdate(),i((0,gt.K8)(n)),r.push(`/${n}/`)}},secondaryAction:{accessibilityLabel:s._("Decline","boardOwnershipTransferUpsell.declineAccessibilityLabel","Accessibility label for decline button on upsell"),label:s._("Decline","boardOwnershipTransferUpsell.declineLabel","Label for decline button on upsell"),onClick:()=>{i((0,pt.xx)(e,t))}},title:s._("Board ownership request pending","boardOwnershipTransferUpsell.title","Title for board ownership transfer upsell")})})})}var ft=n(585967);const bt=(0,i.forwardRef)((({boardTool:{icon:e,link:t,text:n}},o)=>{const[r,s]=(0,i.useState)(!1),{isRTL:d}=(0,ft.B)();return(0,l.jsx)(a.iP,{role:"link",accessibilityLabel:n,href:t,onFocus:()=>s(!0),onBlur:()=>s(!1),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),ref:o,rounding:6,children:(0,l.jsxs)(a.xu,{display:"flex",direction:"column",justifyContent:"center",dangerouslySetInlineStyle:{__style:{paddingBottom:"1px"}},children:[(0,l.jsx)(a.xu,{alignItems:"center",alignSelf:"center",color:r?"lightWash":"lightGray",display:"flex",height:88,justifyContent:"center",rounding:6,width:88,children:(0,l.jsx)(a.JO,{accessibilityLabel:n,color:"darkGray",icon:"text-align-left"===e&&d?"text-align-right":e,size:30})}),(0,l.jsx)(a.xu,{paddingY:1,width:88,children:(0,l.jsx)(a.xv,{align:"center",overflow:"normal",size:"sm",weight:"bold",children:n})})]})})}));bt.displayName="BoardTool";const vt=bt;function xt({boardId:e,sectionId:t}){const n=(0,i.useRef)(),o=(0,i.useRef)(),r=(0,i.useRef)(),s=(0,i.useRef)(),d=!!t,c=d?{sectionId:t}:{boardId:e},{data:u,isLoaded:h}=(0,ae.Z)({name:d?"SectionToolsFeedResource":"BoardToolsFeedResource",options:c});if(h&&(!u||!u.length))return null;const p=[n,o,r,s],g=null==u?void 0:u.map((({id:e})=>{const t=e.split("-");return t&&t.length>1?Number(t[1]):-1}));return h&&null!=u&&u.length?(0,l.jsx)(a.kC,{alignItems:"center",justifyContent:"center",width:"100%",children:(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[u.map(((e,t)=>{const n=g?g[t]:-1;return(0,l.jsx)(a.xu,{padding:1,children:(0,l.jsx)(vt,{boardTool:e,ref:p[n]})},e.id)})),(0,l.jsx)(Y.Z,{anchors:{3003:n.current,3004:o.current,3005:r.current,3007:s.current},placementId:18,positionRelativeToAnchor:!1})]})}):null}var yt=n(666187),_t=n(264414),wt=n(872571);function Ct(){(0,p.j)(101,{element:10776,component:13216,view:5,viewParameter:3069})}function jt({handleAddBoardNote:e,handleAddSection:t,handleCreatePin:n,handleCreateStoryPin:o,surface:r}){const s=(0,w.ZP)(),d=(0,i.useRef)();return(0,l.jsx)(a.xu,{bottom:!0,marginBottom:4,position:"fixed",rounding:"circle",width:56,dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",left:"50%",transform:"translate(-50%)"}},children:(0,l.jsx)(wt.Z,{idealDirection:"up",onAddBoardNote:e,onAddSection:t,onCreatePin:n,onCreateStoryPin:o,onOpen:Ct,surface:r,children:({active:e,openFlyout:t})=>(0,l.jsxs)(a.xu,{color:"white",display:"inlineBlock",rounding:"circle",children:[(0,l.jsx)(a.hU,{accessibilityLabel:s._("Create a Pin or add a Section","BoardPage.ActionBar.AddPinOrSection","button triggering a flyout to create a pin or add a section"),bgColor:"white",icon:"add",iconColor:"darkGray",onClick:t,ref:d,selected:e,size:"xl"}),(0,l.jsx)(Y.Z,{anchors:{3006:d.current},idealDirection:"up",placementId:18})]})})})}function St(e){const t=(0,w.ZP)(),{boardUrl:n="",onHide:i,slug:o}=e;return(0,l.jsx)(re.Z,{duration:2e3,href:`${n}${o}`,onHide:i,text:t._("Section added!","Toast for successfully creating a new board section","Toast for successfully creating a new board section")})}var It=n(358873),Pt=n(896829);const Et=It.HW+1;function Tt({handleGoBack:e,hideSensitivityScreen:t,sensitivityScreenAuxData:n}){const i=(0,w.ZP)();return(0,Pt.Q)({component:13860,view_type:5,aux_data:n}),(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.8)"}},display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:!0,width:"100%",zIndex:new a.Ry(Et),children:(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:260}},children:(0,l.jsxs)(a.kC,{alignItems:"center",direction:"column",gap:8,maxWidth:500,children:[(0,l.jsx)(a.X6,{align:"center",color:"white",children:i._("This board may contain sensitive content","boardPageContainer.sensitivityScreen.heading","Warning text on board that may have sensitive content")}),(0,l.jsxs)(a.kC,{gap:6,children:[(0,l.jsx)(a.zx,{color:"red",onClick:e,size:"lg",text:i._("Go back","boardPageContainer.sensitivityScreen.backButton","Text on button that lets user go back to previous page")}),(0,l.jsx)(a.zx,{color:"white",onClick:t,size:"lg",text:i._("View anyway","boardPageContainer.sensitivityScreen.viewButton","Text on button that lets user past sensitivity screen")})]}),(0,l.jsx)(a.xu,{paddingY:4,children:(0,l.jsx)(a.xv,{align:"center",color:"white",overflow:"normal",size:"md",children:(0,I.nk)(i._('If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the "..." button at the bottom of any Pin',"boardPageContainer.sensitivityScreen.text","Text telling user how to report a Pin"),{communityGuidelines:(0,l.jsx)(a.xv,{color:"white",inline:!0,size:"md",underline:!0,children:(0,l.jsx)(a.rU,{href:"https://policy.pinterest.com/en/community-guidelines",inline:!0,target:"blank",children:i._("Community Guidelines","boardPageContainer.sensitivityScreen.communityGuidelines","Text that links to the community guidelines page")})})})})})]})})})}var Dt=n(755908);var kt=n(627578),Ot=n(734125);var Bt=n(420043),Rt=n(187851),Mt=n(584489),At=n(955637);function Lt(){const e=(0,N.Z)(),t=(0,ae.Z)({name:"UserMetadataResource",options:{user:e}});(0,i.useEffect)((()=>function(e){const t=Mt.Z.instance;if(t&&""===t.getState().ui.views.boardPinView&&e&&e.data){const{profile_pin_rep_view_type:n}=e.data;n?t.dispatch((0,At.VT)(n)):t.dispatch((0,At.VT)("regular"))}}(t)))}var Zt=n(992341),Nt=n(708206),Ft=n(635691),zt=n(32529),Ht=n(33076),Ut=n(930090);const Wt=()=>{};const Gt=(0,Nt.compose)(ge.EN,(0,S.ZP)(18,(e=>{var t;return{board_id:e.board.id,pin_count:null!==(t=e.board.sectionless_pin_count)&&void 0!==t?t:0,chrome_push_subscription:(0,Ft.d)()}})))((function({board:e,experience:t,initialModalType:n,match:{params:{slug:r}},refreshBoardData:s=Wt,refreshSectionData:d=Wt,setPlacementExtraContext:c,section:u,showPulsar:h}){var g,f,b;const v=(0,o.useDispatch)(),x=(0,Me.Z)({shouldStopEventPropagation:!1}),{hasScrolledToBottom:y,isScrolledToThreshold:_}=(0,Bt.Z)(),C=(0,N.Z)(),j=(0,Ue.Z)(),{anyEnabled:S}=(0,Ve.tc)("web_board_notes")({dangerouslySkipActivation:!0}),I=(0,Ut.W$)(C,e),P=(null===(g=e.owner)||void 0===g?void 0:g.id)||"",E=(0,Ge.q6)(C,P,j),T=(0,Te.Z)({board:e,viewer:C})||E,D=C.isAuth&&C.id===e.pending_ownership_transfer,k=(0,Ve.tc)("web_board_sensitivity_screen"),B=!T&&k().anyEnabled;(0,i.useEffect)((()=>{let t="other";I?t="own":(0,Ut.Df)(C,e)&&(t="collaborator"),c({board_ownership:t})}),[t]),(0,i.useEffect)((()=>(T&&v((0,zt.Sp)(!1)),()=>{v((0,zt.Sp)(!0))})),[v,T]);const{showOneToast:R}=(0,ce.F9)(),M=(0,ge.k6)(),A=(0,o.useSelector)((({history:e})=>0===e.previous.length));Lt();const{handleShowMergeSectionsConfirmationModal:L,mergeConfirmationModalProps:Z,onConfirm:F}=(0,Rt.Z)({board:e}),z=function(){const e=(0,w.ZP)(),t=(0,o.useDispatch)(),{showBlockingActionToast:n}=(0,Ot.Z)();return({board:i,targetBoard:o})=>{(0,p.j)(7172,{objectId:i.id,merge_flow:"menu"}),t((0,gt.xH)(i.id,o.id)).then((()=>{n({actionType:"merge",board:o})})).catch((t=>{kt.Z.showError(t.message||e._("Failed to merge boards","Error message when failed to merge boards","Error message when failed to merge boards"))}))}}(),U={board_id:e.id,reason:(null===(f=e.sensitivity_screen)||void 0===f?void 0:f.reason)||""},[G,V]=(0,i.useState)(!(null===(b=e.sensitivity_screen)||void 0===b||!b.show_warning)&&B),[q,$]=(0,i.useState)(null),[Y,X]=(0,i.useState)(n||null),[K,J]=(0,i.useState)(null),[Q,ee]=(0,i.useState)(e&&(0,Ht.VV)(C,e)||"custom"),[te,ne]=(0,i.useState)(!1),ie=()=>X(H.s.boardArchiveConfirmation),re=()=>{const e=C.isAuth?`/${(0,Ge.Ms)(C,j)}`:"/";M.replace(e)},se=x((e=>{X(H.s.editSection),$(e)})),ae=x((t=>{X(null),(t=>{R((({onHide:n})=>(0,l.jsx)(St,{boardUrl:e.url,onHide:n,slug:t.slug})))})(t)})),le=x((()=>{(0,p.j)(101,{element:10780,component:13217,view:5,viewParameter:3069}),M.push({pathname:"/pin-builder/",state:{board:e,boardSection:u}})})),de=x((()=>{M.push({pathname:"/idea-pin-builder/"})})),ue=x((()=>{(0,p.j)(101,{element:10781,component:13217,view:5,viewParameter:3069}),X(H.s.pincode)})),he=x((()=>{(0,p.j)(101,{element:10779,component:13217,view:5,viewParameter:3069}),X(H.s.simpleCreateSection)})),pe=x((()=>{X(H.s.mergeBoard)})),me="custom"!==Q;return(0,l.jsx)(Dt.Z,{view:5,viewParameter:(0,O.Z)({board:e,viewer:C}),objectId:e.id,children:(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:G?{filter:"blur(30px)"}:{}},children:[(0,l.jsx)(ut,{board:e,handleBoardEditClick:()=>{(0,p.j)(101,{element:10845,component:13216,view:5,viewParameter:3069}),X(H.s.boardEdit)},handleFollowersClick:()=>{X(H.s.followers)},handleSectionEditClick:()=>se(),handleShowBoardArchiveConfirmation:ie,handleShowBoardUnarchiveConfirmation:()=>X(H.s.boardUnarchiveConfirmation),handleShowCollabAndPermissionsModal:()=>X(H.s.collaboratorsAndPermissions),handleShowCreatePincodeModal:ue,handleShowMergeModal:pe,section:u,showPulsar:h}),T&&(0,l.jsx)(a.xu,{marginBottom:6,children:(0,l.jsx)(xt,{boardId:e.id,sectionId:null==u?void 0:u.id})}),D&&(0,l.jsx)(mt,{boardId:e.id,collaboratorId:C.isAuth?C.id:"",collaboratorUsername:C.isAuth?C.username:""}),Y!==H.s.jumpstartBoard&&(0,l.jsx)(W,{board:e,currentView:Q,handleContentViewChange:e=>ee(e),handleSetCurrentModal:X,handleShowEditSectionModal:se,handleShowMergeSectionsConfirmationModal:L,isOwnBoard:I,isOwnerOrCollaborator:T,isPinGridSorted:me,refreshBoardData:s,refreshSectionData:d,section:u}),(0,l.jsx)(m,{boardId:e.id,handleShowArchiveConfirmation:ie,handleShowGroupPinsModal:(e,t)=>{X(H.s.groupPins),J({clusterId:e,suggestedSectionName:t})}}),T&&(0,l.jsx)(jt,{handleAddBoardNote:E||!S||u?null:()=>{(async()=>{var t;const n=null===(t=e.owner)||void 0===t?void 0:t.username;if(n){const t=(await oe.ZP.create("BoardNoteResource",{slug:r,username:n}).callCreate()).resource_response.data;M.push(e.url?`${e.url}_tools/notes/${t.id}`:"")}})()},handleAddSection:he,handleCreatePin:le,handleCreateStoryPin:E?null:de,surface:u?"section":"board"}),Y&&(0,l.jsx)(ht.Z,{actions:{completeCreateSectionAction:ae,onBoardArchiveChange:()=>{s(),v((0,gt.K8)(C.isAuth?C.username:""))},onBoardDelete:re,onBoardLeave:e=>{v((0,gt.K8)(C.isAuth?C.username:"")),re()},onBoardMerge:t=>{z({board:e,targetBoard:t}),re()},onBoardSectionDelete:()=>{var t;($(null),X(null),u)&&M.replace(null!==(t=e.url)&&void 0!==t?t:"")},onBoardSectionSave:({title:t,slug:n})=>{if($(null),X(null),u){var i;const t=`${null!==(i=e.url)&&void 0!==i?i:""}${n}/`;M.replace(t)}},onConfirmMergeSection:F},board:e,boardSection:u||q,currentModal:Y,groupPinsData:K,mergeConfirmationModalProps:Z,onClearModal:()=>X(null)}),A&&!(0,Ut.W$)(C,e)&&!u&&(_||y)&&!te&&(0,l.jsx)(Zt.O,{onDismiss:()=>{ne(!0)},boardId:e.id}),(0,l.jsx)(yt.Z,{placementId:18}),(0,l.jsx)(_t.Z,{placementId:18})]}),G&&(0,l.jsx)(Tt,{handleGoBack:()=>{(0,p.j)(101,{component:13860,element:73,view:5,...U}),A&&M.replace("/"),M.goBack()},hideSensitivityScreen:()=>{v((0,gt.Fi)(e.id)),(0,p.j)(101,{component:13860,element:12448,view:5,...U}),V(!1)},sensitivityScreenAuxData:U})]})})}))},406191:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(577302);function o({board:e,viewer:t}){return(0,i.Z)(t,e)?3069:3070}},363570:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(577302),o=n(129826);function r({board:e,viewer:t}){return(0,i.Z)(t,e)||(0,o.Z)({board:e,viewer:t})}},817930:(e,t,n)=>{n.d(t,{q:()=>r});var i=n(816670);function o(e){return"most_reactions"===e?"most_reactions":"default"}function r(e,t,n,r){var s,a;const{owner:l,should_show_board_activity:d}=e,c=(null==l?void 0:l.id)===t.id;let u="react_grid_pin";return t.isPartner&&c&&d?u="partner_react_grid_pin_with_board_activity":t.isPartner&&c?u="partner_react_grid_pin":d&&(u="react_grid_pin_with_board_activity"),{board_id:e.id,board_url:null!==(s=e.url)&&void 0!==s?s:"",currentFilter:r,field_set_key:u,filter_section_pins:!r||r===i.cg,sort:o(n),layout:null!==(a=e.layout)&&void 0!==a?a:"",page_size:25,redux_normalize_feed:!0}}},463112:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r({children:e,setMaxWidth:t=!0}){return(0,o.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:t?(0,o.jsx)(i.xu,{width:"100%",paddingX:2,maxWidth:774,children:e}):(0,o.jsx)(i.xu,{width:"100%",children:e})})}},557238:(e,t,n)=>{n.d(t,{ZP:()=>U,fx:()=>z});var i=n(667294),o=n(366787),r=n(759712),s=n(174523),a=n(883119),l=n(785893);function d({isSection:e}){const t=(0,s.ZP)(),n=e?t._("There aren’t any Pins in this section yet","EmptyBoard.EmptyText.section","Statement that there are no pins in the section"):t._("There aren’t any Pins on this board yet","EmptyBoard.EmptyText.board","Statement that there are no pins on the board");return(0,l.jsx)(r.Z,{children:(0,l.jsx)(a.xu,{paddingY:8,children:(0,l.jsx)(a.xv,{color:"darkGray",size:"lg",children:n})})})}function c({hasSections:e,isSection:t}){return(0,l.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:!t&&e?null:(0,l.jsx)(d,{isSection:t})})}var u=n(646942),h=n(685893),p=n(583704);const g=e=>null===e,m=e=>e?164:5,f=e=>"story"===e.type&&["recommended_searches","search_related_queries","BUBBLE_ONE_COL"].includes(e.story_type),b=(e,t)=>e+(e>=t?1:0),v=(0,p.xZ)(0,p._Y)((e=>e));function x(e){const{boardSectionId:t,gridItem:n,index:i,paddingBottom:o,renderPinItem:r,viewParameter:s}=e,{itemKey:d}=n;let c=null;switch(d.type){case"story":c=(0,l.jsx)(h.Z,{slot:i,storyId:d.id,viewType:m(t),viewParameter:s});break;case"pin":c=(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:o}},children:r(n,i)});break;default:c=null}return(0,l.jsx)(a.xu,{children:c},`${d.type}:${d.id}`)}var y=n(386004),_=n(785705),w=n(194620),C=n(297633);const j=-1;const S=(0,w.Z)(C.y.Pin)((function(e){const{allowReordering:t,children:n,connectDropTarget:i,index:o,isDragWithinBounds:r}=e;return t&&i?i((0,l.jsx)("div",{style:{opacity:o===j||r?1:.5},children:n})):n}));var I=n(825499),P=n(885106),E=n(476865);function T(e){const{allowReordering:t,boardSectionId:n,gridItem:i,handlePinDragBegin:o,handlePinDragEnd:r,handlePinDragHover:s,index:a,lfvExperiences:d,onBulkEditPinClick:c,source:u,target:h,viewParameter:p}=e,{inBulkEditMode:g,isCollaborator:f,isGroupBoard:b,isOwnBoard:v,isSelected:x,itemKey:{id:y}}=i,_=u!==j,w=h===a,S={pinId:y,imageOnlyOption:!v&&(0,P.Z)(d)?"image-only":"default",attributionOption:b?"show":"hide",pinImageCrop:"none",surface:g?"BulkEditMode":"BaseBoardPinGrid",trackingParameters:{slotIndex:a,viewParameter:p,viewType:m(n)}};if(!v&&!f)return(0,l.jsx)(E.default,{...S});let T="no-selection";g&&(T=x?"selected":"deselected");let D=(0,l.jsx)(E.default,{...S,disableHover:_||g,selectionState:T});return g&&(D=(0,l.jsx)(I.Z,{onClick:()=>c(y),children:D})),t&&(D=(0,l.jsx)(C.Z,{index:a,isDragging:w,onDragBegin:o,onDragHover:s,onDragEnd:r,type:C.y.Pin,children:D})),D}var D=n(311866),k=n(610062),O=n(778527),B=n(418102),R=n(549135),M=n(40197),A=n(535258),L=n(708206),Z=n(613330);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class F extends i.Component{constructor(...e){super(...e),N(this,"state",{reorderSource:j,reorderTarget:j}),N(this,"handlePinAdded",((e,t,n)=>{const{board:i,boardSectionId:o,dispatch:r}=this.props;r((0,M.xQ)(i.id)),o&&r((0,u.Z)(o)),this.props.resource.refresh()})),N(this,"handlePinDragBegin",(e=>this.setState({reorderSource:e}))),N(this,"handlePinDragHover",(e=>{const{reorderTarget:t}=this.state;e!==t&&this.setState({reorderTarget:e})})),N(this,"handlePinDragEnd",(e=>{const{board:t,boardSectionId:n,dispatch:i,feed:o,viewParameter:r}=this.props,{reorderSource:s,reorderTarget:a}=this.state;if(o&&e&&a!==j&&s!==j&&a!==s){const e=this.hiddenItemIndex,[l,d]=-1===e?[s,a]:[b(s,e),b(a,e)],c=(0,Z.zX)(o,l,d),u=o[l].id;i((0,y.Z)({feedType:n?Z.DV.SECTION_PINS:Z.DV.BOARD_PINS,feedId:n||t.id,itemType:"pin",targetItemId:o[d].id,sourceItemId:o[l].id}));const h={board_id:t.id,pin_id:u},p=c.filter((e=>"pin"===e.type)).map((e=>e.id)),g=p.indexOf(u),f=g-1;f>=0&&f<p.length&&(h.pin_id_before=p[f]);const v=g+1;v>=0&&v<p.length&&(h.pin_id_after=p[v]);const x={objectId:u,view:m(n),viewParameter:r};D.ZP.create("BoardPinsReorderResource",h).callUpdate({showError:!1}).then((()=>(0,R.j)(7122,x)))}this.setState({reorderSource:j,reorderTarget:j})})),N(this,"handleFetchMore",(()=>{const{resource:{fetchMore:e,isAtEnd:t,isFetching:n}}=this.props;t||n||e()})),N(this,"renderPinItem",((e,t)=>{const{lfvExperiences:n,onBulkEditPinClick:i,viewer:o,viewParameter:r,boardSectionId:s}=this.props,{reorderSource:a,reorderTarget:d}=this.state;return(0,l.jsx)(T,{allowReordering:this.allowReordering,boardSectionId:s,gridItem:e,handlePinDragBegin:this.handlePinDragBegin,handlePinDragEnd:this.handlePinDragEnd,handlePinDragHover:this.handlePinDragHover,index:t,lfvExperiences:n,onBulkEditPinClick:i,source:a,target:d,viewer:o,viewParameter:r})})),N(this,"renderGridItem",(({data:e,itemIdx:t})=>{const{boardSectionId:n,viewParameter:i}=this.props;return(0,l.jsx)(x,{boardSectionId:n,gridItem:e,index:t,paddingBottom:this.props.denseViewSelected?6:0,renderPinItem:this.renderPinItem,viewParameter:i})}))}componentDidMount(){const{board:{id:e},feed:t,resource:{isFetching:n,refresh:i}}=this.props;this.subscribers=[B.eE.subscribe(e,"pinCreated",this.handlePinAdded)],g(t)&&!n&&i()}componentDidUpdate(e){const{feed:t,resource:{isFetching:n,refresh:i}}=this.props;g(t)&&!g(e.feed)&&!n&&i()}componentWillUnmount(){this.subscribers.forEach((e=>e.unsubscribe())),delete this.subscribers}get allowReordering(){const{board:{collaborated_by_me:e=!1},isOwnBoard:t,isPinGridSorted:n}=this.props;return!n&&(t||e)}get hiddenItemIndex(){const{denseViewSelected:e,feed:t}=this.props;return e?(t||[]).findIndex(f):-1}render(){const{bulkEditSelectedPins:e,board:t,boardSectionId:n,feed:r,footerStoryId:s,denseViewSelected:d,inBoardOrganizationMode:u,inSectionOrganizationMode:h,isDragWithinBounds:p,inSelectAll:g,renderFooterStory:m,resource:{isAtEnd:f,isFetching:b,isLoaded:x},isOwnBoard:y,refreshFilteredFeed:w,scrollContainer:C}=this.props,{access:I,collaborated_by_me:P=!1,collaborator_count:E=0,section_count:T}=t,{reorderSource:D,reorderTarget:k}=this.state;if(!r||!r.find((e=>"pin"===e.type)))return b?(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n._("Board Pins grid"," - "," -- "),show:!0}):(x&&r&&0===r.length&&w&&w(),(0,l.jsxs)(i.Fragment,{children:[x&&r&&0===r.length&&(0,l.jsx)(c,{hasSections:!!T,isSection:!!n}),m&&s&&m(s)]}));const O=this.allowReordering,B=O&&D!==k&&D!==j&&k!==j;let R=r||[];const M=this.hiddenItemIndex;if(-1!==M&&(R=[...R.slice(0,M),...R.slice(M+1)]),B&&(R=(0,Z.zX)(R,D,k)),!R.length)return(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n._("Board Pins grid"," - "," -- "),show:!0});const L={inBulkEditMode:u||h,inDenseView:d||!1,isGroupBoard:E>0,userCanEdit:(I||[]).includes("write"),isOwnBoard:y,isCollaborator:P},N=R.map(((t,n)=>{const{inBulkEditMode:i}=L,o="pin"===t.type&&!(null==e||!e.includes(t.id));return v({...L,isSelected:i&&(g?!o:o),itemKey:t})}));return(0,l.jsxs)(a.xu,{"data-test-id":"base-board-pin-grid",minHeight:d?800:"",children:[(0,l.jsx)(S,{allowReordering:O,index:k,isDragWithinBounds:p,children:(0,l.jsx)(_.default,{columnWidth:d?A.Lo:A.xf,comp:this.renderGridItem,gutterWidth:d?2*A.Us/3:A.Us,isAtEnd:f,isFetching:b,isLoaded:x,items:N,layout:"basicCentered",loadItems:this.handleFetchMore,paddingStyle:d?"dense":"simplified",scrollContainer:C,virtualize:!0},`${String(d)}-${String(u)}-${String(h)}`)}),O&&D!==j&&(0,l.jsx)(o.Z,{}),b&&(0,l.jsx)(a.xu,{position:"relative",paddingY:3,children:(0,l.jsx)(a.$j,{accessibilityLabel:this.props.i18n._("Loading Board Feed"," - "," -- "),show:!0})}),f&&s&&m&&m(s)]})}}const z=e=>e?e.reduce((({feed:e,footerStoryId:t},n)=>{const i="story"===n.type&&"board_ideas_preview_detailed"===n.story_type;return{feed:e.concat(i?[]:[n]),footerStoryId:i?n.id:t}}),{feed:[],footerStoryId:void 0}):{feed:e,footerStoryId:void 0},H=(0,L.compose)((0,O.ZP)(1000182),k.Z)((function(e){const t=(0,s.ZP)();return(0,l.jsx)(F,{...e,i18n:t})}));H.displayName="BaseBoardPinGrid";const U=H},518730:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(40142),o=n(535718),r=n(613330);var s=n(273341),a=n(557238),l=n(785893);const d=(0,i.connect)(((e,t)=>(0,a.fx)(e.feeds[r.DV.SECTION_PINS][t.boardSectionId])))((function(e){const t=(0,o.Z)({name:"BoardSectionPinsResource",options:(n=e.boardSectionId,i=e.isOwnBoard,r=e.board.should_show_board_activity,d=e.currentFilter,{currentFilter:d,field_set_key:r?"react_grid_pin_with_board_activity":"react_grid_pin",is_own_profile_pins:i,page_size:25,redux_normalize_feed:!0,section_id:n})});var n,i,r,d;const c=(0,o.Z)({name:"BoardsResource",options:(0,s.Sd)(e.viewer.username,!0)});return(0,l.jsx)(a.ZP,{...e,boardsResource:c,resource:t})}));d.displayName="BoardSectionPinGrid";const c=d},578805:(e,t,n)=>{function i(e,t){const{url:n}=e,{slug:i}=t;return`${null!=n?n:""}${i}/`}n.d(t,{Z:()=>i})},41425:(e,t,n)=>{function i(e=""){return`${e}_tools/more-ideas/`}n.d(t,{Z:()=>i})},597455:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(476865),r=n(883119),s=n(785893);function a({index:e,isSelected:t,pin:n,handlePinSelectionChanged:a}){const l=n.id,d=(0,i.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),a(l,!t)}),[l,t]);return(0,s.jsx)(r.iP,{onTap:d,rounding:4,children:(0,s.jsx)(o.default,{attributionOption:"hide",blockClickEvents:!0,pin:n,pinId:n.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:t?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}},597168:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(40142),r=n(234316),s=n(451190),a=n(742979),l=n(597455),d=n(174523),c=n(535718),u=n(164756),h=n(717927),p=n(549135),g=n(883119),m=n(785893);function f({boardId:e,clusterId:t,handleAddClick:n,isBoardOrganizeFeed:f,onDismiss:b,suggestedSectionTitle:v}){const x=(0,d.ZP)(),y=(0,i.useRef)(null),[_,w]=(0,i.useState)([]),[C,j]=(0,i.useState)(v),{data:S,fetchMore:I,isFetching:P,isLoaded:E}=(0,c.Z)({name:"SectionSuggestionsPinsResource",options:{boardId:e,clusterId:t}}),T=f?3541:3069,D=(0,o.useDispatch)(),k=(0,i.useCallback)((()=>{if(S){const t=S.map((e=>e.id)),i=t.length,o=t.filter((e=>!_.includes(e)));n&&n(C),D((0,r.Z)({boardId:e,name:C},x)).then((t=>{D((0,a.Z)({inverseSelection:!1,selectedPinIds:o,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:t.id}},x))})).then((()=>{D((0,u.Tq)(e,"pin_count")),(0,p.j)(8606,{number_pins_suggested:i,number_pins_selected:o.length,objectId:e,section_title:C,suggested_section_name:v,view:5,viewParameter:T}),b(),f||D((0,h.W)())}))}}),[_,C,S]),O=(e,t)=>{const n=[..._],i=n.indexOf(e);t&&-1!==i?n.splice(i,1):t||-1!==i||n.push(e),w(n)};return(0,m.jsx)(s.Z,{accessibilityModalLabel:x._("Add suggested pins to your newly created section modal","sectionSuggestionPinsModal.modal.accessibilityLabelForModal","Accessibility label for modal"),allowScroll:!0,footer:(0,m.jsxs)(g.xu,{display:"flex",justifyContent:"end",paddingX:2,children:[(0,m.jsx)(g.xu,{display:"inlineBlock",marginEnd:2,children:(0,m.jsx)(g.zx,{onClick:()=>{b(),f||D((0,h.W)()),(0,p.j)(8607,{objectId:e,suggested_section_name:v,view:5,viewParameter:T})},text:x._("Not now","sectionSuggestionPinsModal.footer.cancelButton","Cancel creating a board section")})}),(0,m.jsx)(g.xu,{display:"inlineBlock",children:(0,m.jsx)(g.zx,{color:"red",onClick:k,text:x._("Add section","sectionSuggestionPinsModal.footer.addSectionButton","Add pins and section")})})]}),heading:x._("Pick your Pins and you're all set!","sectionSuggestionPinsModal.modal.heading","Heading for modal to add suggested pins to your newly created section"),onDismiss:b,size:704,children:(0,m.jsxs)(g.xu,{maxHeight:600,maxWidth:704,ref:y,overflow:"auto",children:[(0,m.jsxs)(g.xu,{padding:4,paddingX:2,children:[(0,m.jsx)(g.xv,{size:"md",children:x._("Section name","sectionSuggestionPinsModal.modal.sectionNameTitle","Title for section name")}),(0,m.jsx)(g.xu,{paddingY:2,children:(0,m.jsx)(g.nv,{id:"SectionSuggestionPinsTitle",onChange:({value:e})=>{j(e)},placeholder:x._("Add a name for this group","sectionSuggestionPinsModal.modal.sectionNameTitle.placeholder","Placeholder for section name"),size:"lg",value:C})})]}),E&&S&&(0,m.jsx)(g.Rk,{columnWidth:152,comp:({data:e,itemIdx:t})=>(0,m.jsx)(l.Z,{index:t,isSelected:!_.includes(e.id),pin:e,handlePinSelectionChanged:O}),gutterWidth:16,items:S,loadItems:I,scrollContainer:()=>y.current}),(0,m.jsx)(g.$j,{accessibilityLabel:x._("Loading pins","sectionSuggestionPinsModal.modal.spinner","Loading indicator"),show:P})]})})}},825499:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(174523),o=n(785893);function r({children:e}){return(0,o.jsx)("div",{className:"withoutBoxShadow",children:e})}var s=n(883119);function a({children:e,onClick:t}){const n=(0,i.ZP)();return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(s.xu,{bottom:!0,left:!0,right:!0,top:!0,position:"absolute",children:(0,o.jsx)(r,{children:(0,o.jsx)(s.iP,{accessibilityLabel:n._("Drag and drop item","BulkEditPinWrapper.tapArea.accessibilityLabel","Label for item that can be dragged and dropped."),fullHeight:!0,fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),t()},rounding:2})})}),(0,o.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}},272850:(e,t,n)=>{n.d(t,{P:()=>l,i:()=>d});var i=n(756169),o=n(174523),r=n(883119),s=n(785893);const a=({bold:e=!1,count:t,shortform:n=!1,size:o="md",text:a})=>(0,s.jsx)(r.xu,{children:(0,s.jsxs)(r.xv,{align:"center",size:o,color:"darkGray",weight:e?"bold":"normal",children:[(0,s.jsx)(i.Z,{value:t,shortform:n})," ",a]})}),l=({bold:e,count:t,onClick:n,shortform:i,size:l})=>{const d=(0,o.ZP)();return(0,s.jsx)(r.xu,{children:(0,s.jsx)(r.iP,{onTap:n,children:(0,s.jsx)(a,{bold:e,count:t,shortform:i,size:l,text:d.ngettext("follower","followers",t,"label for n follower(s)","label for n follower(s)")})})})},d=({count:e,size:t})=>{const n=(0,o.ZP)().ngettext("Pin","Pins",e,"label for n board section(s)","label for n board section(s)");return(0,s.jsx)(r.xu,{children:(0,s.jsxs)(r.xv,{inline:!0,size:t,color:"darkGray",children:[!!e&&(0,s.jsx)(i.Z,{value:e})||"0"," ",n]})})}},343283:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{accessibilityLabel:t,bgColor:n,icon:r,onClick:s,selected:a,size:l}=e;return(0,o.jsx)(i.hU,{accessibilityLabel:t,bgColor:null!=n?n:"transparent",icon:r,iconColor:"darkGray",onClick:s,selected:a,size:null!=l?l:"lg"})}},81:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(207395),r=n(883119),s=n(343283),a=n(785893);function l({bgColor:e,children:t,icon:n,label:l,size:d}){const c=(0,i.useRef)(null),[u,h]=(0,i.useState)(!1),p=()=>h(!1);return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(r.xu,{ref:c,children:(0,a.jsx)(s.Z,{accessibilityLabel:l,bgColor:e,icon:n,onClick:()=>h(!u),selected:u,size:d})}),u&&(0,a.jsx)(o.Z,{anchor:c.current,onDismiss:p,children:t({handleClose:p})})]})}},785078:(e,t,n)=>{n.d(t,{Z:()=>i});const i=({boardCollaboratorCount:e,collaborators:t})=>{const n=e?e+1:t.length,i=n>3,o=t.slice(0,i?2:3);return{displayedCollaborators:o,nonDisplayedCollaboratorCount:i?n-o.length:0}}},759712:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r({children:e}){return(0,o.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",children:e})}},570970:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(40142),o=n(923224),r=n(396026),s=n.n(r),a=n(913669),l=n(174523),d=n(549135),c=n(883119),u=n(785893);function h({pin:e}){var t,n,i,r,s;return(0,u.jsx)(c.zd,{rounding:4,width:138,children:(0,u.jsx)(o.Z,{height:207,pin:e&&{imageUrl:null!==(t=null===(n=e.images)||void 0===n||null===(i=n["474x"])||void 0===i?void 0:i.url)&&void 0!==t?t:"",dominantColor:null!==(r=e.dominant_color)&&void 0!==r?r:"",description:null!==(s=e.description)&&void 0!==s?s:""},width:138})})}const p=(0,i.connect)(((e,t)=>{const n=e.stories[t.storyId];return n&&"board_ideas_preview_detailed"===n.story_type?{story:n}:{story:void 0}}),(()=>({})))((function({collection:e,story:t,url:n}){const i=(0,l.ZP)(),{isHovering:o,hoverHandlers:r}=(0,a.Z)();if(!t)return null;const p=t.objects.reduce(((e,t)=>e.concat("pin"===t.type?[t]:[])),[]);return(0,u.jsx)("div",{className:"moreIdeasOnBoard",children:(0,u.jsx)(c.iP,{role:"link",href:`${n}?ideas_referrer=${t.referring_source}`,onTap:()=>(0,d.j)(101,{element:10600,view:"board_section"===e.type?164:5,objectId:e.id,viewParameter:3069}),fullWidth:!1,onMouseEnter:r.onMouseOver,onMouseLeave:r.onMouseLeave,rounding:4,children:(0,u.jsxs)(c.xu,{alignItems:"start",color:o?"lightGray":"white",direction:"column",display:"flex",justifyContent:"start",marginEnd:-3,paddingX:3,paddingY:2,rounding:4,width:"100%",children:[(0,u.jsx)(c.xu,{padding:2,children:(0,u.jsx)(c.X6,{size:"sm",lineClamp:1,children:"board_section"===e.type?i._("Find some ideas for this section:","Call-to-action text that upsells more ideas tab for an empty section","Call-to-action text that upsells more ideas tab for an empty section"):i._("Find some ideas for this board:","Call-to-action text that upsells more ideas tab for an empty board","Call-to-action text that upsells more ideas tab for an empty board")})}),(0,u.jsx)(c.xu,{display:"flex",justifyContent:"between",padding:2,width:"100%",children:s()(0,5).map((e=>{const t=p[e];return(0,u.jsx)(c.xu,{children:(0,u.jsx)(h,{pin:t})},`${t?t.id:e}`)}))})]})})})}))},389609:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(549135);var o=n(311866);var r=n(584489),s=n(955637);function a({boardDensity:e,component:t,surface:n,viewType:a}){!function({boardDensity:e,component:t,viewType:n}){const o=function({boardDensity:e,viewType:t}){switch(t){case 164:return"regular"===e?10618:10619;case 5:return"regular"===e?10607:10608;default:return 10607}}({boardDensity:e,viewType:n}),r=4===n?3106:3069;(0,i.j)(101,{component:t,element:o,...n?{view:n,viewParameter:r}:{}})}({boardDensity:e,component:t,viewType:a}),function({density:e,surface:t}){const n="board"===t?{profile_pin_rep_view_type:e}:{board_pin_rep_view_type:e};o.ZP.create("UserMetadataResource",n).callUpdate()}({density:e,surface:n}),function({density:e,surface:t}){const n="board"===t?s.VT:s.QG;r.Z.instance.dispatch(n(e))}({density:e,surface:n})}},923224:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(754999),o=n(174523),r=n(883119),s=n(785893);function a({pinCount:e,height:t,size:n}){const a=(0,o.ZP)(),l=(0,i.Z)(a._("+{{ pinCount }}","+N count overlay on pin selections","+N count overlay on pin selections"),{pinCount:e});return(0,s.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,.2)"}},display:"flex",justifyContent:"center",height:t,children:"sm"===n?(0,s.jsx)(r.xv,{color:"white",size:"md",weight:"bold",children:l}):(0,s.jsx)(r.X6,{color:"white",size:"md",children:l})})}function l({additionalPinCount:e,additionalPinCountSize:t="lg",pin:n,width:i,height:o,rounded:l}){return(0,s.jsx)(r.zd,{height:o,width:i,rounding:l?4:0,wash:!0,children:n&&(0,s.jsx)(r.Ee,{alt:n.description,color:n.dominantColor,fit:"cover",naturalHeight:o,naturalWidth:i,src:n.imageUrl,children:!!e&&(0,s.jsx)(a,{pinCount:e,height:o,size:t})})})}},734125:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(40142),o=n(117937),r=n(475446),s=n(367599);function a(){const e=(0,i.useDispatch)(),{showToast:t}=(0,r.F9)();return{showBlockingActionToast:({actionType:n,board:i,section:r})=>{t((0,s.Bk)("inProgress",n,i,r)),(0,s.Zl)({check:()=>e((0,o.K)(i.id)).then((e=>!(0,s.EQ)({blockingActions:e,actionType:n,boardId:i.id,sectionId:r&&r.id}))),checkDelay:s.SE,checkInterval:s.l,onComplete:()=>t((0,s.Bk)("completed",n,i,r))})}}}},367599:(e,t,n)=>{n.d(t,{SE:()=>m,l:()=>f,Zl:()=>_,ZP:()=>C,EQ:()=>v,Bk:()=>w});var i=n(40142),o=n(117937),r=n(475446),s=n(667294),a=n(16539),l=n(174523),d=n(883119),c=n(785893);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){const e=(0,l.ZP)();return(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"around",overflow:"hidden",children:(0,c.jsx)("div",{className:"boardBlockingActionToastWhiteSpinner",children:(0,c.jsx)(d.JO,{accessibilityLabel:e._("board action pending","accessibility label for board action toast to indicate pending action","accessibility label for board action toast to indicate pending action"),color:"white",icon:"knoop",size:40})})})}class p extends s.Component{constructor(...e){super(...e),u(this,"state",{hiding:!1,visible:!1}),u(this,"handleHide",(()=>{this.setState({hiding:!0}),this.timeout=window.setTimeout(this.props.onHide,a.V)})),u(this,"handleMouseEnter",(()=>{window.clearTimeout(this.timeout)})),u(this,"handleMouseLeave",(()=>{this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3)}))}componentDidMount(){this.firstLine&&(window.setTimeout((()=>{this.setState({visible:!0})}),100),this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3))}get firstLine(){const{actionType:e,actionStatus:t,location:{isSection:n}}=this.props,i="completed"===t;switch(e){case"create_section":return i?this.props.i18n._("Created section","toast text to indicate a section has been created successfully","toast text to indicate a section has been created successfully"):this.props.i18n._("Creating section","toast text to indicate a section is being created","toast text to indicate a section is being created");case"delete_pins":return n?i?this.props.i18n._("Deleted Pins from","toast text to notify Pins have been deleted from a section","toast text to notify Pins have been deleted from a section"):this.props.i18n._("Deleting Pins from","toast text to notify Pins are being deleted from a section","toast text to notify Pins are being deleted from a section"):i?this.props.i18n._("Deleted Pins from","toast text to notify Pins have been deleted from a board","toast text to notify Pins have been deleted from a board"):this.props.i18n._("Deleting Pins from","toast text to notify Pins are being deleted from a board","toast text to notify Pins are being deleted from a board");case"move_pins":return n?i?this.props.i18n._("Moved to","toast text to notify pins have been moved to this section","toast text to notify pins have been moved to this section"):this.props.i18n._("Moving to","toast text to notify pins are being moved to this section","toast text to notify pins are being moved to this section"):i?this.props.i18n._("Moved to","toast text to notify pins have been moved to this board","toast text to notify pins have been moved to this board"):this.props.i18n._("Moving to","toast text to notify pins are being moved to this board","toast text to notify pins are being moved to this board");case"merge":return n?i?this.props.i18n._("Moved to","toast text to notify anotehr section has been merged to this section","toast text to notify anotehr section has been merged to this section"):this.props.i18n._("Moving to","toast text to notify another section is being merged to this section","toast text to notify another section is being merged to this section"):i?this.props.i18n._("Moved to","toast text to notify another board has been merged to this board","toast text to notify another board has been merged to this board"):this.props.i18n._("Moving to","toast text to notify another board is being merged to this board","toast text to notify another board is being merged to this board");default:return null}}render(){const{actionStatus:e,location:t}=this.props,{visible:n,hiding:i}=this.state;if(!this.firstLine)return null;const o="inProgress"===e?`${t.name}...`:t.name;return(0,c.jsx)(d.xu,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,dangerouslySetInlineStyle:{__style:(0,a.Z)(n,i)},children:(0,c.jsx)(d.FN,{text:(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)(d.xv,{children:this.firstLine}),(0,c.jsx)(d.xv,{weight:"bold",children:o})]}),thumbnail:"completed"===e?void 0:(0,c.jsx)(h,{})})})}}function g(e){const t=(0,l.ZP)();return(0,c.jsx)(p,{...e,i18n:t})}const m=2e3,f=5e3;const b=["merge","move_pins","create_section"];function v({blockingActions:e,actionType:t,boardId:n,sectionId:i}){return e.find((e=>!(function(e){switch(e){case 22:return"delete_board";case 7172:case 7173:return"merge";case 900:case 7158:case 7109:return"delete_pins";case 901:case 7108:return"move_pins";case 7100:return"create_section";case 7102:return"delete_section";default:return null}}(e.action_type)!==t||b.includes(e.action_type)&&e.is_origin||e.board_id!==n||(i?i!==e.section_id:e.section_id&&"-1"!==e.section_id)||1===e.progress)))}let x=0;const y={};function _({check:e,checkDelay:t,checkInterval:n,onComplete:i}){const o=`timeout${x}`;x+=1;const r=()=>{const t=Date.now();e().then((e=>{const s=Date.now()-t;e?(i(),delete y[o]):y[o]=setTimeout(r,Math.max(1e3,n-s))})).catch((()=>{delete y[o]}))};y[o]=setTimeout(r,t)}const w=(e,t,n,i)=>({onHide:o})=>{var r;return(0,c.jsx)(g,{actionType:t,actionStatus:e,duration:"inProgress"===e?m:2e3,location:{name:i?i.title:null!==(r=n.name)&&void 0!==r?r:"",isSection:!!i},onHide:o})};function C(e){function t(t){const n=(0,i.useDispatch)(),{showToast:s}=(0,r.F9)();return(0,c.jsx)(e,{...t,showBlockingActionToast:({actionType:e,board:t,section:i})=>{s(w("inProgress",e,t,i)),_({check:()=>n((0,o.K)(t.id)).then((n=>!v({blockingActions:n,actionType:e,boardId:t.id,sectionId:i&&i.id}))),checkDelay:m,checkInterval:f,onComplete:()=>s(w("completed",e,t,i))})}})}return t.displayName=`WithShowBlockingActionToasts(${e.displayName||e.name||""})`,t}},223419:(e,t,n)=>{n.d(t,{We:()=>l,ZP:()=>d});var i=n(209067),o=n(631739),r=n(174523),s=n(883119),a=n(785893);function l(e,t=""){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce(((n,i,o)=>{if(n.length>0&&e&&e.length){const r=t.toLowerCase().indexOf(e.toLowerCase());return n.concat((0,a.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(r,r+e.length)},o),i)}return[i]}),[]):t}const d=function(e){const t=(0,r.ZP)(),{disabled:n,item:d,isSection:c,isSelectMode:u,isWithinSectionPicker:h,saveState:p,searchQuery:g,selected:m}=e,f=c?null:d,b=c?d:null,v=b&&b.title||f&&f.name||"";let x="",y=!1,_="",w=0;f&&({image_cover_url:x,is_collaborative:y,privacy:_,section_count:w=0}=f);const C=l(g,v),j=_===o.Z.BoardPrivacy.SECRET,S=!n&&(m||!!p),I=!h&&"number"==typeof w&&w>0,P="number"==typeof w&&w>0?"boardWithSection":"boardWithoutSection",E=u?t._("Select","Board select button label","Board select button label"):t._("Save","Pin save button label","Pin save button label");return(0,a.jsxs)(s.xu,{alignItems:"center",color:S?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":P,children:[f?(0,a.jsx)(s.xu,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none",children:x?(0,a.jsx)(s.Ee,{src:x,alt:v,fit:"cover",naturalWidth:1,naturalHeight:1}):(0,a.jsx)("span",{})}):(0,a.jsx)(s.xu,{height:36,paddingX:2}),(0,a.jsxs)(s.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,a.jsx)(s.xv,{color:n?"gray":"darkGray",size:"md",lineClamp:1,weight:"bold",children:C}),(I||!S)&&(0,a.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[j&&(0,a.jsx)(i.Z,{type:"secret"}),y&&(0,a.jsx)(i.Z,{type:"group"}),I&&(0,a.jsx)(i.Z,{type:"sections"})]}),!I&&S&&!p&&(0,a.jsxs)(s.xu,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:[!u&&(0,a.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}},children:(0,a.jsx)(s.JO,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})}),(0,a.jsx)(s.xv,{color:"white",overflow:"normal",size:"md",weight:"bold",children:E})]}),!I&&S&&"loading"===p&&(0,a.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,a.jsx)(s.$j,{accessibilityLabel:t._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0})})]})]})}},209067:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);const s=function({type:e}){const t=(0,i.ZP)(),n={group:{accessibilityLabel:t._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:t._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:t._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:t._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:t._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return(0,r.jsx)(o.xu,{marginStart:1,children:(0,r.jsx)(o.xu,{marginStart:2,children:"sections"===e||"sectionsInline"===e?(0,r.jsx)(o.JO,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:"12",color:"darkGray"}):(0,r.jsx)(o.JO,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:16,color:"darkGray"})})})}},189552:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294),o=n(883119),r=n(785893);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"onHover",(()=>{this.setState({isHovering:!0})})),s(this,"offHover",(()=>{this.setState({isHovering:!1})}))}render(){const{name:e,selected:t,image:n,inFlyoutExp:i}=this.props;var s,a,l;return i?(0,r.jsxs)(o.xu,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[(0,r.jsx)(o.xu,{children:(0,r.jsx)(o.zd,{height:40,width:40,rounding:2,children:this.state.isHovering&&n?(0,r.jsx)(o.Ee,{alt:"",color:"",fit:"cover",naturalHeight:null!==(s=n.height)&&void 0!==s?s:1,naturalWidth:null!==(a=n.width)&&void 0!==a?a:1,src:null!==(l=n.url)&&void 0!==l?l:""}):(0,r.jsx)(o.xu,{color:"lightGray",height:40,width:40})})}),(0,r.jsx)(o.xu,{padding:2,children:(0,r.jsx)(o.X6,{size:"sm",children:e})})]}):(0,r.jsxs)(o.xu,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,r.jsx)(o.xu,{children:(0,r.jsx)(o.JO,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})}),(0,r.jsx)(o.xu,{marginStart:3,children:(0,r.jsx)(o.xv,{color:t?"darkGray":"gray",weight:"bold",children:e})})]})}}var l=n(174523),d=n(535718),c=n(549135),u=n(670473);const h=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:n,image:s,minHeight:h,onBoardSelected:p})=>{const g=(0,l.ZP)(),[m,f]=(0,i.useState)(-1),b=(0,u.iN)(),{data:v=[],error:x,isLoaded:y}=(0,d.Z)({name:"BoardTitleSuggestionsResource",options:{pin_id:n}}),_=(w=v,(0,i.useMemo)((()=>w&&w.length?w.map((e=>e.title)):[]),[w]));var w;(0,i.useEffect)((()=>{y&&t&&b&&(x?b.error():b.stop())}),[y]);const C=()=>{f(-1)},j=(t,n)=>{const i=m===n;return(0,r.jsx)("li",{children:(0,r.jsx)(o.iP,{onMouseEnter:()=>(e=>{f(e)})(n),onMouseLeave:C,onTap:()=>(e=>{p(_[e],!1),(0,c.j)(101,{component:13025,element:23})})(n),children:(0,r.jsx)(a,{selected:i,name:t,inFlyoutExp:e,image:s})})},n)};return y?_&&_.length?e?(0,r.jsx)(o.xu,{children:(0,r.jsx)("ul",{children:_.map(j)})}):t?(0,r.jsxs)(o.xu,{children:[(0,r.jsx)(o.xu,{marginTop:5,marginStart:6,marginBottom:3,children:(0,r.jsx)(o.xv,{children:g._("Suggested board names","text above suggested board names list","text above suggested board names list")})}),(0,r.jsx)("ul",{children:_.map(j)})]}):(0,r.jsxs)(o.xu,{children:[(0,r.jsx)(o.xu,{marginTop:2,paddingX:5,children:(0,r.jsx)(o.xv,{children:g._("Suggested board names"," - "," -- ")})}),(0,r.jsx)("ul",{children:_.map(j)})]}):null:(0,r.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:h||"",children:(0,r.jsx)(o.$j,{accessibilityLabel:g._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0})})}},538052:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(40142),r=n(631739),s=n(234316),a=n(729787),l=n(34411),d=n(159276),c=n(174523),u=n(767523),h=n(883119),p=n(785893);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends i.Component{constructor(e){super(e),g(this,"onCreateSection",(()=>{const{board:e,dispatch:t,completeCreateSectionAction:n,pinImport:i,viewer:o,orbacActingAs:r}=this.props,a=(0,d.lJ)(o,r);return this.setState({isSaving:!0}),t((0,s.Z)({boardId:e.id,name:this.state.inputName.trim(),pinImport:i},this.props.i18n,a)).then((e=>{this.setState({isSaving:!1}),n(e)})).catch((e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})}))})),g(this,"handleKeyDown",(({event:e,value:t})=>{const{createError:n,inputName:i}=this.state;[r.Z.KeyCode.ENTER,r.Z.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&i.trim()&&this.onCreateSection()})),g(this,"handleChangeName",(({value:e})=>{this.setState({createError:null,inputName:e})})),g(this,"handleInputRef",(e=>{this.setState({inputRef:e})})),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:n,inputRef:i}=this.state;!i||t.inputRef&&!n||i.focus()}render(){const{showTitle:e,positionRelative:t}=this.props,{createError:n,inputName:i,isSaving:o}=this.state,r=!!i.trim()&&!n;return(0,p.jsxs)(h.xu,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&(0,p.jsx)(h.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,p.jsx)(h.X6,{size:"sm",children:this.props.i18n._("Add section","Title in the add section modal","Title in the add section modal")})}),(0,p.jsxs)(h.xu,{padding:4,children:[(0,p.jsx)(h.xu,{marginBottom:2,children:(0,p.jsx)(h.__,{htmlFor:"sectionEditName",children:(0,p.jsx)(h.xv,{size:"md",color:n?"red":"gray",children:this.props.i18n._("Name","Board section name","Board section name")})})}),(0,p.jsx)(h.xu,{children:(0,p.jsx)(h.xu,{ref:this.handleInputRef,children:(0,p.jsx)(h.nv,{errorMessage:n||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"',"Placeholder for board section name","Placeholder for board section name"),size:"lg",type:"text",value:i})})})]}),(0,p.jsx)(h.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow"}),(0,p.jsx)(h.xu,{padding:4,children:(0,p.jsx)(h.kC,{alignItems:"stretch",justifyContent:"end",children:(0,p.jsx)(a.Z,{disabled:!r||o,onClick:this.onCreateSection,submitting:o,text:this.props.i18n._("Add","add a new section","add a new section")})})})]})}}const f=(0,o.connect)()((function(e){const t=(0,c.ZP)(),n=(0,l.Z)(),i=(0,u.Z)();return(0,p.jsx)(m,{...e,i18n:t,viewer:n,orbacActingAs:i})}))},376067:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(631739),o=n(542756),r=n(883119),s=n(785893);function a({url:e,description:t,color:n}){return n=n||i.Z.DEFAULT_IMAGELESS_PIN_COLOR,(0,s.jsx)(r.xu,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:n}},children:(0,s.jsxs)(r.xu,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&(0,s.jsx)(r.xu,{marginBottom:2,children:(0,s.jsx)(r.xv,{color:"white",size:"sm",children:(0,o.Z)(e).hostname||e})}),(0,s.jsx)(r.xu,{maxHeight:144,children:(0,s.jsx)(r.xv,{color:"white",overflow:"normal",weight:"bold",children:t})})]})})}},584831:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(667294),o=n(756169),r=n(311866),s=n(512806),a=n(946753),l=n(174523),d=n(883119),c=n(785893);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),u(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",(()=>{})),u(this,"mounted",!1),u(this,"addHashtag",(e=>{this.props.addHashtag(e),this.setState({recommendations:[]})})),u(this,"handleKeyDown",(e=>{38===e.keyCode?this.handlePrevHashtag(e):40===e.keyCode?this.handleNextHashtag(e):27===e.keyCode?this.handleClose(e):13===e.keyCode&&this.handleSubmit(e)})),u(this,"handlePrevHashtag",(e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState((e=>({selectedIndex:e.selectedIndex-1})))})),u(this,"handleNextHashtag",(e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState((e=>({selectedIndex:e.selectedIndex+1})))})),u(this,"handleClose",(e=>{e.preventDefault(),this.setState({recommendations:[]})})),u(this,"handleSubmit",(e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)})),u(this,"callResource",(e=>{const{makeCancelablePromise:t}=this.props;t(r.ZP.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then((e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})})).catch((({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})}))}))}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:n}=this.state,{anchor:i,idealDirection:r}=this.props,s=e.filter((e=>e.query)),l=r||"down",u="flyout_"+s.length;return t&&s.length>0?(0,c.jsx)("div",{className:"HashtagFlyout",children:(0,c.jsx)(d.J2,{anchor:i,idealDirection:l,onDismiss:this.onDismiss,size:"sm",children:(0,c.jsx)("div",{className:"HashtagRecommendations",children:s.length>0?s.map(((e,t)=>(0,c.jsx)("div",{className:"HashtagItem",children:(0,c.jsx)(d.iP,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"between",alignItems:"center",color:t===n?"lightGray":"transparent",padding:1,children:[(0,c.jsx)(d.xu,{flex:"grow",children:(0,c.jsx)(d.xv,{inline:!0,size:"md",weight:"bold",children:e.query})}),(0,c.jsx)(d.xu,{flex:"none",children:(0,c.jsx)(d.xv,{inline:!0,size:"sm",children:(0,a.nk)(this.props.i18n.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout","label for n pins in hashtag flyout"),{count:(0,c.jsx)(o.Z,{value:Number(e.pin_count)},"pinCount")})})})]})})},e.query))):null})},u)}):null}}function p(e){const t=(0,l.ZP)(),n=(0,s.Z)();return(0,c.jsx)(h,{...e,makeCancelablePromise:n,i18n:t})}},367919:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(667294),o=n(174523),r=n(535718),s=n(946753),a=n(883119),l=n(785893);function d({pin:e}){const t=(0,o.ZP)(),{data:n}=(0,r.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.id}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0});return n&&n.pinned_to_board&&"quick_creates"!==n.pinned_to_board.layout?(0,l.jsxs)(a.xu,{children:[(0,l.jsx)(a.xu,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:(0,l.jsx)(a.xv,{align:"center",color:"white",size:"md",weight:"bold",children:(0,s.nk)(t._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:(n.pinned_to_board||{}).name}).join(" ")})}),(0,l.jsx)(a.xu,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,l.jsx)(a.JO,{accessibilityLabel:"",color:"red",icon:"heart",size:26})})]}):null}var c=n(584831),u=n(376067),h=n(549135);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,m=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/;class f extends i.Component{constructor(...e){super(...e),p(this,"state",{flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),p(this,"onDescriptionChange",((e,t)=>{const n=new RegExp(g,"g");let i="";if(t<e.length){let o=n.exec(e),r=n.lastIndex<t;for(;o&&r;)o=n.exec(e),r=n.lastIndex<t;const s=!!o&&g.test(e.slice(o.index,t));r=!!o&&o.index<t,o&&s&&r&&(i=o[0])}else{const t=m.exec(e);i=t?t[0]:""}this.updateDescription(e);const o=g.test(i),r=this.state.isHashtagFlyoutOpen?this.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");this.setState((({flyoutOpened:t})=>({flyoutCursorIndex:r,description:e,hashtagQuery:i,isHashtagFlyoutOpen:o,flyoutOpened:t||o})))})),p(this,"onCursorChange",(e=>{const{isHashtagFlyoutOpen:t,flyoutCursorIndex:n}=this.state;t&&e<n&&this.setState({isHashtagFlyoutOpen:!1})})),p(this,"updateDescription",(e=>{this.props.updateDescription&&this.props.updateDescription(e)})),p(this,"handleDescriptionBlur",(e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:n}=this.state;this.updateDescription(t),this.setState({description:t,editing:n})})),p(this,"handleDescriptionEdit",(()=>{this.setState({editing:!0})})),p(this,"handleHashtagAddition",(e=>{const{pin:t}=this.props;(0,h.j)(101,{component:208,element:10249,hashtags:e,objectId:t.id});const n=this.state.flyoutCursorIndex,i=Number(n+this.state.hashtagQuery.length),o=this.state.description.slice(0,n)+e+" "+this.state.description.slice(i);this.updateDescription(o),this.setState({description:o,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})})),p(this,"handleRefTextArea",(e=>{this._textArea=e}))}render(){const{color:e,isFirstPin:t,pin:n,pinImageRef:i}=this.props,{description:o,editing:r,flyoutOpened:s,hashtagQuery:h,isHashtagFlyoutOpen:p}=this.state,{images:g,link:m}=n,f=g&&g["236x"],b=f&&f.url||n.image_base64;return(0,l.jsxs)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:s&&r?{transform:"translateY(-75px)"}:{}},children:[(0,l.jsxs)(a.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[n&&n.id&&(0,l.jsx)(d,{pin:n}),(0,l.jsx)(a.xu,{paddingY:t?9:0,width:240,children:(0,l.jsx)(a.xu,{ref:i,maxHeight:s&&r?220:335,rounding:4,overflow:"hidden",children:b?(0,l.jsx)(a.Ee,{alt:o,src:b,naturalHeight:(null==f?void 0:f.height)||1,naturalWidth:(null==f?void 0:f.width)||1}):!!m&&(0,l.jsx)(u.Z,{color:e||"",description:o,url:m})})})]}),this.anchor&&p?(0,l.jsx)(c.Z,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:r,query:h}):null]})}}},9757:(e,t,n)=>{n.d(t,{Au:()=>ge,SN:()=>me,ZP:()=>be});var i=n(667294),o=n(314463),r=n(40142),s=n(631739),a=n(729787),l=n(174523),d=n(824820),c=n(585967),u=n(760620),h=n(203620),p=n(535718),g=n(151101),m=n(925265),f=n(883119),b=n(785893);function v(e){const t=(0,l.ZP)(),{body:n,img:i,onClick:o,selected:r,title:s,username:a,valid:d}=e,c=a||n;return(0,b.jsx)(f.xu,{marginBottom:4,children:(0,b.jsx)(f.iP,{onTap:o,children:(0,b.jsxs)(f.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[i,(0,b.jsxs)(f.xu,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,b.jsx)(f.xu,{marginBottom:1,children:(0,b.jsx)(f.xv,{lineClamp:1,weight:"bold",children:s})}),(0,b.jsx)(f.xv,{size:"sm",lineClamp:1,children:c})]}),(0,b.jsx)(f.xu,{marginStart:2,children:(u=r,h=d,a?u?(0,b.jsx)(f.JO,{accessibilityLabel:t._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites","Alt tags on a check box on the board create flow for board invites"),color:"red",icon:"check-circle",size:32}):(0,b.jsx)(f.xu,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,b.jsx)(f.zx,{color:"gray",disabled:!!u||Boolean(!h),size:"sm",text:u?t._("Sent","Sent a board collaborator invite","Sent a board collaborator invite"):t._("Invite","Add board collaborator invite","Add board collaborator invite")}))})]})})});var u,h}var x=n(163880);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n){const{id:i}=e;return t===n.findIndex((e=>e.id===i))}class w extends i.Component{constructor(...e){super(...e),y(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),y(this,"isIdSelected",{}),y(this,"handleTextFieldChange",(({value:e})=>{this.setState({value:e})})),y(this,"handleCollaboratorClick",(e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:i}=this.state,o=i.concat([e]),r="email"===n?x.OA:x.pS;this.props.onSelectedCollaboratorsChange({id:t,resource:r}),this.setState({selectedCollaborators:o})})),y(this,"handleTypeaheadSuggestionsChange",(e=>{this.setState({typeaheadSuggestions:e})}))}componentDidMount(){this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map((e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const i="email"===n?x.OA:x.pS;return this.props.onSelectedCollaboratorsChange({id:t,resource:i}),null}))}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,n=t||[],i=(""===e?this.state.selectedCollaborators.concat(n).filter(_):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,u.Z)(e)}).concat(n).filter(_)).map((e=>function(e,t,n,i){if("user_share_suggestion"===e.type||"user"===e.type){const i=(0,b.jsx)(g.Z,{name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,b.jsx)(v,{img:i,onClick:()=>n(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:o,valid:r}=e,s=(0,b.jsx)(f.xu,{alignItems:"center",color:"lightGray",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,b.jsx)(f.JO,{accessibilityLabel:i._("Email icon","Email icon on board create modal","Email icon on board create modal"),color:"darkGray",icon:"envelope",size:20})}),a=(0,m.Z)(i._("Email {{ email }}"," - "," -- "),{email:o});let l,d;return t?(l=i._("Done!","Text that lets the user know we sent the board invite email","Text that lets the user know we sent the board invite email"),d=()=>{}):(l=r?i._("Click to send!","Text that lets the user know they can successfully send a board invite email","Text that lets the user know they can successfully send a board invite email"):i._("Keep typing!","Text that lets a user know the email they are typing is not valid yet","Text that lets a user know the email they are typing is not valid yet"),d=()=>r?n(e):void 0),(0,b.jsx)(v,{body:l,img:s,onClick:d,selected:t,title:a,valid:r})}}(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n))).map(((e,t)=>(0,b.jsx)("li",{children:e},t)));return(0,b.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[(0,b.jsx)(f.xu,{paddingX:3,paddingY:2,children:(0,b.jsx)(f.xv,{size:"sm",children:this.props.i18n._("Add collaborators (optional)","Optional field to add collaborators to a board on board create","Optional field to add collaborators to a board on board create")})}),(0,b.jsx)(f.xu,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,b.jsx)(f.xu,{flex:"grow",children:(0,b.jsx)(h.Z,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,b.jsx)(f.Um,{accessibilityLabel:this.props.i18n._("Search for collaborators by name or email"," - "," -- "),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._("Search by name or email"," - "," -- "),size:"lg",value:e})})})}),(0,b.jsx)(f.xu,{overflow:"scrollY",paddingX:3,children:(0,b.jsx)("ul",{children:i})})]})}}function C(e){const t=(0,l.ZP)(),n=(0,p.Z)({name:"ShareSuggestionsResource",noCache:!0});return(0,b.jsx)(w,{...e,i18n:t,shareSuggestionsResource:n})}const j=(0,d.Z)((function({createBoardError:e,inputName:t,nameValidatorErrors:n,onBoardCreate:o,onCancel:r,onChangeBoardName:d,onChangeBoardPrivacy:u,onInvite:h,privacy:p,preselectedCollaborators:g,saving:m,showTitle:v,isAdAccountOwner:x}){const y=(0,l.ZP)(),{isRTL:_}=(0,c.B)(),w=0===n.length,j=p===s.Z.BoardPrivacy.SECRET;return(0,b.jsx)(f.xu,{color:"white",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,b.jsx)("form",{onSubmit:e=>{e.preventDefault(),o()},style:{height:"100%"},children:(0,b.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[v&&(0,b.jsx)(f.xu,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,b.jsx)(f.X6,{size:"sm",children:y._("Create board"," - "," -- ")})}),(0,b.jsxs)(f.xu,{padding:3,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"boardEditName",children:(0,b.jsx)(f.xv,{size:"sm",children:y._("Name"," - "," -- ")})})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.nv,{errorMessage:n.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>d(e),placeholder:y._('Like "Places to Go" or "Recipes to Make"'," - "," -- "),size:"lg",value:t})})]}),x&&(0,b.jsxs)(i.Fragment,{children:[(0,b.jsxs)(f.xu,{padding:3,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"secret",children:(0,b.jsx)(f.xv,{size:"sm",children:y._("Secret","secret board","secret board")})})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.rs,{id:"secret",onChange:u,switched:j})})]}),(0,b.jsx)(f.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",overflow:"hidden",children:(0,b.jsx)(f.xu,{width:"100%",children:(0,b.jsx)(C,{onSelectedCollaboratorsChange:h,preselectedCollaborators:g})})})]}),!x&&(0,b.jsx)(i.Fragment,{children:(0,b.jsxs)(f.xu,{padding:3,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"protected",children:(0,b.jsx)(f.xv,{size:"sm",children:y._("Protected board (not listed on user's profile)","protected board","protected board")})})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.rs,{disabled:!0,id:"protected",onChange:()=>{},switched:!0})})]})}),(0,b.jsxs)(f.xu,{borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},bottom:!0,color:"white",display:"flex",justifyContent:"between",left:_,paddingX:4,paddingY:2,position:"absolute",right:!_,width:720,children:[(0,b.jsx)(f.kC,{children:(0,b.jsx)(f.zx,{onClick:r,text:y._("Cancel","cancel board create","cancel board create")})}),(0,b.jsxs)(f.kC,{alignItems:"stretch",justifyContent:"end",children:[!!e&&(0,b.jsx)(f.xu,{paddingX:2,children:(0,b.jsx)(f.xv,{align:"center",color:"red",size:"md",weight:"bold",children:e})}),(0,b.jsx)(a.Z,{disabled:!t.trim()||!w||!!e||m,submitting:m,text:y._("Create","create a new board","create a new board")})]})]})]})})})}));var S=n(538052),I=n(63447),P=n(178862);class E extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{board:t,sectionsResource:{data:n}}=this.props;return e.length>=2?[{items:(0,P.j)([t],e),customProps:{inSectionSelection:!0}},{items:(0,P.j)(null!=n?n:[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0}},{items:null!=n?n:[]}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:n,isSelectMode:i,onSectionCreate:o,onSectionSelected:r,pinId:s}=this.props;return(0,b.jsx)(I.Z,{isSelectMode:i,boardSavedTo:n,createButtonLabel:this.props.i18n._("Add section","Button for creating a board section","Button for creating a board section"),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:o,onSelected:r,pinId:s})}}function T(e){const t=(0,l.ZP)(),n=(0,p.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,b.jsx)(E,{...e,i18n:t,sectionsResource:n})}var D=n(301314),k=n(549135),O=n(34411);function B(e,t,n){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...n?{advertiser_id:n,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:undefined,shortlist_suggestions:2}}class R extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:n,boards_shortlist:i}=t,o=(e=>{const t=[],n=[];return e.forEach((e=>{var i;null!==(i=e.name)&&void 0!==i&&i.match(/^\d/)?n.push(e):t.push(e)})),[...t,...n]})(n);return o.length<=3?[{items:o}]:e.length>=2?[{items:(0,P.j)(o,e)}]:[i.length?{items:i,title:this.props.i18n._("Top choices"," - "," -- ")}:{items:[]},{items:o,title:this.props.i18n._("All boards","title for board picker all boards section","title for board picker all boards section")}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{boardResource:{data:e,error:t,isLoaded:n},boardSavedTo:i,isSelectMode:o,onBoardCreate:r,onBoardSelected:s,pinId:a}=this.props,l=n&&!!e&&e.all_boards.length<=3;return(0,b.jsx)(I.Z,{isSelectMode:o,boardSavedTo:i,hasLoadError:!!t,hasLowBoardCount:l,isLoaded:n,getSections:this.getSections,onCreate:r,onSelected:s,pinId:a})}}function M(e){const t=(0,l.ZP)(),n=(0,O.Z)(),i=(0,r.useSelector)((({advertiser:e})=>{if(n.isAuth&&e&&e.owner_user_id!==n.id)return e.id})),o=(0,r.useSelector)((({advertiser:e})=>{if(n.isAuth&&e&&e.owner_user_id!==n.id)return e.owner_user_id})),s=(0,p.Z)({name:"BoardPickerBoardsResource",options:B(e.pinId,o,i)});return(0,b.jsx)(R,{...e,boardResource:s,i18n:t})}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class L extends i.Component{constructor(...e){super(...e),A(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),A(this,"close",(()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:n}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):n()})),A(this,"sendInvites",(e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach((n=>{t[n].resource(e.id,[n])}))})),A(this,"handleInvite",(e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const n={...t};delete n[e.id],this.setState({inviteQueue:n})}else{const n=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:n})}})),A(this,"handleBoardCreate",(e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)})),A(this,"handleBoardSave",((e,t)=>{const{selectedSectionBoard:n}=this.state,{onBoardSave:i,invalidatePinBetterSaveResource:o,invalidateResource:r}=this.props;if(r(),o(),n&&"board_section"===e.type){return i(n,e,t)}const s=e,{section_count:a=0}=s;!n&&"number"==typeof a&&a>0?this.setState({selectedSectionBoard:s},this.manageModalTitle):(this.sendInvites(e),i(s,void 0,t))})),A(this,"handleCreate",(e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const n=e?13105:13025,i=e?10306:249;(0,k.j)(101,{component:n,element:i})})),A(this,"manageModalTitle",(()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:n}=this.state;e&&e(n&&t?this.props.i18n._("Add section","Repin title for making a board section","Repin title for making a board section"):n&&!t?this.props.i18n._("Create board","Repin title for making a new board","Repin title for making a new board"):t&&!n?this.props.i18n._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section"):this.props.i18n._("Choose board","Repin title for choosing a board","Repin title for choosing a board"))}))}render(){const{boardSavedTo:e,isRepin:t,isSelectMode:n,onToggleFlyout:i,pinId:o,preselectedCollaborators:r,setModalTitle:s,suggestedBoardTitle:a}=this.props,{newName:l,selectedSectionBoard:d,showCreate:c}=this.state,u=!!d,h=!s;return(0,b.jsxs)(f.xu,{display:"flex",position:"relative",width:"100%",children:[!c&&(0,b.jsx)(f.xu,{direction:"column",display:"flex",marginTop:4,width:"100%",children:d?(0,b.jsx)(T,{board:d,boardSavedTo:e,isSelectMode:n,onSectionCreate:this.handleCreate(u),onSectionSelected:this.handleBoardSave}):(0,b.jsx)(M,{boardSavedTo:e,isSelectMode:n,onBoardCreate:this.handleCreate(u),onBoardSelected:this.handleBoardSave,pinId:o})}),c&&!d&&(0,b.jsx)(j,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,onToggleFlyout:i,pinId:o,prefilledName:l||a,preselectedCollaborators:r,showTitle:h}),c&&d&&(0,b.jsx)(S.Z,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:l,isRepin:t,onClearModal:this.close,showTitle:h})]})}}const Z=(0,r.connect)(null,(function(e,t){return{invalidateResource:()=>{e((0,D.jB)("BoardPickerBoardsResource",B(t.pinId)))},invalidatePinBetterSaveResource:()=>{e((0,D.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))((function(e){const t=(0,l.ZP)();return(0,b.jsx)(L,{...e,i18n:t})}));var N=n(300970),F=n(451190),z=n(367919),H=n(627578),U=n(230457),W=n(674245);const G="publish_actions",V={checkFbTimelinePermission:function(e){(0,W.default)((function(t){t.api("/me/permissions",(t=>{const n=t.data;let i=!1;if(n){i=!!n.find((e=>e.permission===G&&"granted"===e.status))}i?e.success&&e.success():e.error&&e.error()}))}),U.Z)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t,n){(0,W.default)((i=>{if(!V.fbConnectedAccountMatchesLoggedInAccount(i,n))return H.Z.showError(t._("Oops! Your account is linked to a different Facebook account than the one you're logged into now."," - "," -- ")),e.error&&e.error(),void(e.complete&&e.complete());V.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){V.fbLogin(e)}})}),U.Z)},fbLogin:function(e){(0,W.default)((t=>{t.login((t=>{t.authResponse?V.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()}),{scope:G})}),U.Z)}},q=V;var $=n(447186),Y=n(912397);function X({onSocialConnect:e}){const t=(0,l.ZP)(),n=(0,O.Z)(),{data:o,isLoaded:r}=(0,p.Z)({name:"UserResource",options:{user_id:n&&n.isAuth?n.id:"",field_set_key:"social_connect"}}),[s,a]=(0,i.useState)(!!(r&&o&&o.facebook_publish_stream_enabled)),[d,c]=(0,i.useState)(!!(r&&o&&o.twitter_publish_enabled));if((0,i.useEffect)((()=>{r&&o&&(a(!!o.facebook_publish_stream_enabled),c(!!o.twitter_publish_enabled))}),[o,r]),!o)return null;const{connected_to_facebook:u,twitter_url:h}=o,g=t=>{a(t),$.Z.set("facebook_publish_stream_enabled",t),e(Y.vq,t)};return!(!u&&!h)&&(0,b.jsxs)(f.xu,{display:"flex",padding:2,children:[u&&(0,b.jsxs)(f.xu,{display:"flex",alignItems:"center",marginStart:2,children:[(0,b.jsx)(f.XZ,{checked:s,id:"share_facebook",onChange:()=>{s?g(!1):q.maybeRequestFbTimelinePermission({success:()=>g(!0),error:()=>g(!1)},t)},size:"sm"}),(0,b.jsx)(f.__,{htmlFor:"share_facebook",children:(0,b.jsx)(f.xu,{marginStart:2,children:(0,b.jsx)(f.xv,{children:t._("Post to Facebook"," - "," -- ")})})})]}),h&&(0,b.jsxs)(f.xu,{display:"flex",alignItems:"center",marginStart:5,children:[(0,b.jsx)(f.XZ,{checked:d,id:"share_twitter",onChange:()=>{const t=!d;c(t),e(Y.Ib,t)},size:"sm"}),(0,b.jsx)(f.__,{htmlFor:"share_twitter",children:(0,b.jsx)(f.xu,{marginStart:2,children:(0,b.jsx)(f.xv,{children:t._("Post to Twitter"," - "," -- ")})})})]})]})}var K=n(234316);const J=({board:e,completeCreateSectionAction:t,height:n,onClose:o,pinImport:s,url:a,width:d})=>{const c=(0,l.ZP)(),u=(0,r.useDispatch)(),[h,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(!1),[v,x]=(0,i.useState)(null);return(0,b.jsx)(F.Z,{accessibilityModalLabel:c._("Repin modal","save.pinToBoard.modal.label","Accessibility label on modal"),heading:(0,b.jsx)(f.xu,{padding:8,children:(0,b.jsx)(f.kC,{alignItems:"center",children:(0,b.jsx)(f.xu,{width:"66%",marginStart:"auto",children:(0,b.jsxs)(f.kC,{justifyContent:"between",children:[(0,b.jsx)(f.X6,{size:"md",children:c._("Add section","sectionCreateModal.title","Title in the add section modal")}),(0,b.jsx)(f.hU,{icon:"cancel",accessibilityLabel:c._("Close","sectionCreateModal.closeButton","close section create modal button"),size:"md",iconColor:"darkGray",onClick:o})]})})})}),footer:(0,b.jsx)(f.kC,{children:(0,b.jsx)(f.xu,{marginStart:"auto",children:(0,b.jsx)(f.zx,{fullWidth:!0,text:c._("Add","sectionCreateModal.add.button","add a new section"),color:"red",onClick:()=>{e&&(m(!0),u((0,K.Z)({boardId:e.id,name:h.trim(),pinImport:s},c)).then((n=>{t(e,n,!1)})).catch((e=>{x(e.message_detail||e.message)})).finally((()=>{m(!1)})))},disabled:g||!h.trim()||!!v,size:"lg"})})}),onDismiss:o,size:"sm",children:(0,b.jsx)(f.xu,{padding:8,children:(0,b.jsxs)(f.kC,{children:[(0,b.jsx)(f.zd,{rounding:4,height:n,width:d,children:(0,b.jsx)(f.Ee,{alt:"",fit:"cover",src:a||"",naturalHeight:null!=n?n:1,naturalWidth:null!=d?d:1})}),(0,b.jsx)(f.xu,{marginStart:8,dangerouslySetInlineStyle:{__style:{width:d?`calc(100% - ${d}px)`:"100%"}},children:(0,b.jsx)(f.nv,{errorMessage:v,id:"sectionEditName",onChange:e=>{p(e.value),x(null)},placeholder:c._('Like "Lighting"',"sectionCreateModal.boardSection.name","Placeholder for board section name"),label:c._("Name","section.create.label","label text for section input"),size:"lg",type:"text",value:h})})]})})})};function Q(){const e=(0,l.ZP)();return(0,b.jsxs)(f.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,b.jsx)(f.$j,{accessibilityLabel:e._("Pins being saved to new sections","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","accessibility label on spinner"),show:!0}),(0,b.jsx)(f.xu,{paddingY:2,children:(0,b.jsx)(f.X6,{children:e._("Hold, please...","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Heading on modal while saving pins")})}),(0,b.jsx)(f.xv,{children:e._("We're grouping the ideas you picked into sections. This will help organize all your ideas!","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Text explaining new pins are being saved")})]})}var ee=n(476865);function te({index:e,pin:t,sectionName:n}){const o=t.id,r=(0,i.useContext)(de),[s,a]=(0,i.useState)(!1),l=(0,i.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),r({type:s?"unselect":"select",payload:{sectionName:n,pinId:o}}),a(!s)}),[o,s]);return(0,b.jsx)(f.iP,{onTap:l,rounding:4,children:(0,b.jsx)(ee.default,{attributionOption:"hide",blockClickEvents:!0,pin:t,pinId:t.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:s?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}const ne=(0,i.memo)((function({sectionSuggestion:e,showSpinner:t}){const n=(0,l.ZP)(),o=(0,i.useRef)(),r=(0,p.Z)({name:"BatchP2PResource",options:{clientType:"84",page_size:10,pinIds:e.pins.map((e=>e.id))},noCache:!0});return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(f.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,b.jsx)(f.$j,{accessibilityLabel:n._("Loading pins","save.pin-to-board.PinToBoard.SectionSuggestions.SectionPinsSelection","Accessibility label on a loading spinner"),show:t&&r.isFetching})}),r.data&&(0,b.jsx)(f.xu,{paddingY:4,paddingX:8,children:(0,b.jsx)(f.X6,{align:"start",size:"sm",children:e.name})}),(0,b.jsx)(f.xu,{ref:o,children:r.data&&o&&o.current&&(0,b.jsx)(f.Rk,{columnWidth:152,comp:({data:t,itemIdx:n})=>(0,b.jsx)(te,{index:n,pin:t,sectionName:e.name}),gutterWidth:16,items:r.data||[],loadItems:()=>{},scrollContainer:()=>o.current})})]})}),((e,t)=>e.sectionSuggestion.id===t.sectionSuggestion.id));function ie({canSubmit:e,handleClose:t,handleSubmit:n,sectionSuggestions:o}){const r=(0,l.ZP)();(0,i.useEffect)((()=>{const e=[];o.forEach((t=>e.push(t.name))),(0,k.j)(13,{suggested_section_names_viewed:e,view:1,viewParameter:3461})}),[o]);return(0,b.jsx)(i.Fragment,{children:(0,b.jsxs)(f.xu,{width:"100%",children:[(0,b.jsx)(f.xu,{minHeight:"100%",marginBottom:12,width:"100%",children:o.map(((e,t)=>(0,b.jsx)(f.xu,{marginBottom:4,children:(0,b.jsx)(ne,{sectionSuggestion:e,showSpinner:0===t})},e.name)))}),(0,b.jsx)(f.xu,{borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{position:"sticky"}},bottom:!0,color:"white",display:"flex",justifyContent:"end",padding:4,width:720,children:(0,b.jsx)(f.zx,{color:e?"red":"gray",size:"lg",text:e?r._("Next","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"):r._("Skip","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"),onClick:()=>{e?n():t()}})})]})})}function oe({handleClose:e,handleSubmit:t,suggestions:n}){const o=(0,l.ZP)(),[r,s]=(0,i.useState)({}),a=!!Object.keys(r).length;return(0,b.jsxs)(f.xu,{children:[(0,b.jsx)(f.xu,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{height:"calc(100% - 88px)"}},children:(0,b.jsx)(f.xu,{display:"flex",wrap:!0,height:360,paddingX:6,children:n.map((e=>(0,b.jsx)(f.xu,{paddingX:1,height:160,children:(0,b.jsx)(f.iP,{onTap:()=>{const t={...r};t[e.name]?delete t[e.name]:t[e.name]=e,s(t)},rounding:6,children:(0,b.jsx)(f.xu,{rounding:7,dangerouslySetInlineStyle:{__style:{border:r[e.name]?"2px solid #111":"2px solid white",padding:"2px"}},children:(0,b.jsxs)(f.xu,{height:160,width:152,position:"relative",rounding:6,children:[(0,b.jsx)(f.zd,{rounding:6,height:160,width:152,children:(0,b.jsx)(f.Ee,{alt:e.name,fit:"cover",naturalHeight:e.images["236x"].height,naturalWidth:e.images["236x"].width,src:e.images["236x"].url})}),(0,b.jsx)(f.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},display:"flex",height:160,justifyContent:"center",left:!0,paddingX:5,position:"absolute",rounding:6,top:!0,width:152,children:(0,b.jsx)(f.X6,{align:"center",color:"white",size:"sm",children:e.name})})]})})})},e.name)))})}),(0,b.jsx)(f.xu,{display:"flex",width:"100%",justifyContent:"end",padding:5,children:(0,b.jsx)(f.zx,{color:a?"red":"gray",size:"lg",text:a?o._("Next","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"):o._("Skip","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"),onClick:()=>{a?t(Object.values(r)):e()}})})]})}var re=n(881220),se=n(921797),ae=n(855168),le=n(475446);const de=(0,i.createContext)();function ce(e,t){const{sectionName:n,pinId:i}=t.payload,o=[...e[n]||[]];switch(t.type){case"select":return{...e,[n]:[...o,i]};case"unselect":const t=o.indexOf(i);if(o.splice(t,1),!o.length){const t={...e};return delete t[n],t}return{...e,[n]:o};default:throw new Error("Unsupported action received by PinSelectionReducer")}}function ue({board:e,handleClose:t,setModalTitle:n,suggestions:o,viewer:s}){const a=(0,l.ZP)(),[d,c]=(0,i.useState)("sections"),[u,h]=(0,i.useState)([]),[p,g]=(0,i.useState)([]),[m,f]=(0,i.useReducer)(ce,{}),{showOneToast:v}=(0,le.F9)(),x=(0,r.useDispatch)(),y=(0,ae.k6)(),_=(0,i.useRef)(null);(0,i.useEffect)((()=>()=>{_.current&&clearTimeout(_.current)}),[]),(0,i.useEffect)((()=>{const e=[];o.forEach((t=>e.push(t.name))),g(e)}),[o]);const w=()=>{(0,k.j)(101,{component:20,view:52})},C=()=>{t(),v((({onHide:t})=>{var n;return(0,b.jsx)(re.Z,{duration:ge,onHide:t,text:(0,se.L)(a,e.name),href:e.url,imageUrl:null!==(n=e.image_cover_url)&&void 0!==n?n:"",onClick:w})})),(0,k.j)(101,{element:1150,view:1,viewParameter:3460,suggested_section_names:p})};return{sections:(0,b.jsx)(oe,{handleClose:C,handleSubmit:e=>{h(e),c("pins"),n&&((0,N.Z)(null,s)?n(a._("Great! Now pick a few ideas to add to your board's new section.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainerNewUser","Modal title for choosing ideas for a new board")):n(a._("Great! Now pick some ideas to start off with.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainer","Modal title for choosing ideas for a new board")));const t=[];e.forEach((e=>t.push(e.name))),(0,k.j)(101,{element:96,suggested_section_names_selected:t,suggested_section_names_viewed:p,view:1,viewParameter:3460})},suggestions:o}),pins:(0,b.jsx)(de.Provider,{value:f,children:(0,b.jsx)(ie,{canSubmit:!!Object.keys(m).length,handleClose:C,handleSubmit:()=>{let t=0;c("saving"),n&&n(null);const i=u.reduce(((e,t)=>(e[t.name]=null,e)),{});let o=0;const r=[];Object.entries({...i,...m}).forEach((([n,i])=>{o+=Array.isArray(i)&&i.length,r.push({[n]:i}),x((0,K.Z)({boardId:e.id,initialPinIds:i,name:n},a)).then((()=>{t+=1,t===u.length&&(_.current=setTimeout((()=>{var t;y.push(null!==(t=e.url)&&void 0!==t?t:"")}),1500),(0,k.j)(101,{element:76,number_pins_selected:o,number_sections_selected:u.length,selected_pin_ids:JSON.stringify(r),suggested_section_names:p,view:1,viewParameter:3460}))}))}))},sectionSuggestions:u})}),saving:(0,b.jsx)(Q,{})}[d]}var he=n(254821);function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ge=4e3,me={LOADING:"loading",SUCCESS:"success"};class fe extends i.PureComponent{constructor(...e){super(...e),pe(this,"state",{isFlyoutOpen:!1,isSavingPin:!1,newBoard:null}),pe(this,"pinImageRef",(0,i.createRef)()),pe(this,"unmounted",!1),pe(this,"handleSavePinToBoard",((e,t,n)=>{const{handleSaveToBoard:i,sectionSuggestions:o,setModalTitle:r,viewer:s}=this.props;i(e,t,n),n&&(this.setState({isSavingPin:!0,newBoard:e}),o&&o.length>0&&r&&((0,N.Z)(null,s)?r(this.props.i18n._("You can keep your boards organized with sections. Try adding a section to your new board now!","save.pin-to-board.PinToBoard.SectionPickerModalTitleNewUser","Modal title for selection recommended sections for a new board")):r(this.props.i18n._("Let's build out your new board! What topics will it include?","save.pin-to-board.PinToBoard.SectionPickerModalTitle","Modal title for selection recommended sections for a new board"))))})),pe(this,"handleToggleFlyout",(()=>this.setState((({isFlyoutOpen:e})=>({isFlyoutOpen:!e}))))),pe(this,"safeSetState",((e,t)=>{this.unmounted?t&&t():this.setState(e,t)})),pe(this,"close",(()=>{const{isFlyoutOpen:e}=this.state,{handleAbort:t}=this.props;e||t()})),pe(this,"dismissModal",(e=>{const{dismissModal:t}=this.props;t&&t()}))}componentWillUnmount(){this.unmounted=!0}render(){const{boardSavedTo:e,boardWithSection:t,color:n,displaySuccessAnimation:r,handleNewBoardAnimationCompletion:s,handleSocialConnectSet:a,isInModal:l,newPin:d,pin:c,preselectedCollaborators:u,onBoardCreated:h,sectionSuggestions:p,sensitiveContentNotice:g,setModalTitle:m,showCreate:v,shouldRenderContent:x,suggestedBoardTitle:y,updateDescription:_,viewer:w}=this.props;if(!c||!c&&!c.resourceLoaded||!x)return null;const{isSavingPin:C,newBoard:j}=this.state;if(v&&t){var S;const{url:e,width:n,height:i}=(null===(S=c.images)||void 0===S?void 0:S["236x"])||{};return(0,b.jsx)(J,{board:t,url:e,height:i,width:n,onClose:this.close,completeCreateSectionAction:this.handleSavePinToBoard})}let I=null;d&&d.board&&(I=d.board.name);const P=g&&g.title||this.props.modalTitle,E=g?(0,b.jsx)(he.Z,{inModal:!0,notices:[g]}):(0,b.jsx)(f.kC,{alignItems:"stretch",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:C&&j&&p&&p.length>0?(0,b.jsx)(ue,{board:j,handleClose:this.close,setModalTitle:m,suggestions:p,viewer:w}):(0,b.jsxs)(i.Fragment,{children:[(0,b.jsxs)(f.xu,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,b.jsxs)(f.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:[(0,b.jsx)(f.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,b.jsx)(z.Z,{color:n,pin:c,pinImageRef:this.pinImageRef,updateDescription:_})}),(0,b.jsx)(X,{onSocialConnect:a})]}),(0,b.jsx)(f.kC,{alignItems:"stretch",width:"60%",children:(0,b.jsx)(Z,{boardSavedTo:e,boardWithSection:t,isRepin:!0,onBoardCreated:h,onBoardSave:this.handleSavePinToBoard,onClose:this.close,onToggleFlyout:this.handleToggleFlyout,pinId:c.id,preselectedCollaborators:u,setModalTitle:l?m:void 0,showCreate:v,suggestedBoardTitle:y})})]}),r&&(0,b.jsx)(o.Z,{onDismiss:()=>{s(),this.dismissModal()},pin:c,pinImageRef:this.pinImageRef,selectedBoardName:I})]})});return l?(0,b.jsx)(F.Z,{accessibilityModalLabel:P||this.props.i18n._("Repin modal","save.pin-to-board.PinToBoard.PinToBoard","Accessibility label on modal"),heading:P,onDismiss:this.close,size:"md",children:E}):E}}pe(fe,"defaultProps",{pwtAuxData:{}});const be=function(e){const t=(0,l.ZP)(),n=(0,O.Z)();return(0,b.jsx)(fe,{...e,i18n:t,viewer:n})}},921797:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(667294),o=(n(631739),n(925265)),r=n(883119),s=n(785893);const a=(e,t,n)=>n?(0,o.Z)(e._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board","Toast for successfully saving to a section within a board"),{sectionName:n.title,boardName:null!=t?t:""}):(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(r.xv,{children:e._("Saved to"," - "," -- ")}),(0,s.jsx)(r.xv,{weight:"bold",children:t})]})},824820:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(667294),o=n(40142),r=n(631739),s=n(34411),a=n(273341),l=n(301314),d=n(174523),c=n(946753),u=n(164756),h=n(997993),p=n(785893);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){class t extends i.Component{constructor(...e){super(...e),g(this,"state",{createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[(0,h.aH)({message:this.props.i18n._("Don't forget to name your board!"," - "," -- ")}),(0,h.Gy)({max:r.Z.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,c.nk)(this.props.i18n._("Please enter no more than {{ maxLength }} characters.","Validation error when a user input is too long","Validation error when a user input is too long"),{maxLength:r.Z.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?r.Z.BoardPrivacy.PUBLIC:r.Z.BoardPrivacy.PROTECTED,saving:!1}),g(this,"invalidateResource",(e=>{const{dispatch:t,viewer:n}=this.props;t((0,l.jB)("BoardsResource",(0,a.Sd)(n.isAuth?n.username:"",e===r.Z.BoardPrivacy.SECRET)))})),g(this,"createBoard",(e=>{const{dispatch:t,viewer:n}=this.props,i=n.isAuth?n.username:"";return t((0,u.aX)(e,{isFBC:n.isAuth&&0===n.boardCount},i))})),g(this,"handleChangeName",((e,t)=>{this.setState((({nameValidators:t})=>({inputName:e,nameValidatorErrors:(0,h.FU)(t,e),createBoardError:null})),(()=>{t&&this.handleCreate()}))})),g(this,"handleChangePrivacy",(()=>{this.setState((({privacy:e})=>({privacy:e===r.Z.BoardPrivacy.SECRET?r.Z.BoardPrivacy.PUBLIC:r.Z.BoardPrivacy.SECRET})))})),g(this,"handleCreate",(()=>{const{inputName:e,privacy:t}=this.state,{isAdAccountOwner:n,onCreate:i,advertiser_id:o}=this.props,r={privacy:t,name:e,...!n&&o?{advertiser_id:o}:{}};this.setState({saving:!0,createBoardError:null}),this.createBoard(r).then((e=>{this.setState({saving:!1}),i(e)})).catch((e=>{let t=this.props.i18n._("Uh oh! Something went wrong."," - "," -- ");if("string"==typeof e)t=e;else if(e.message){const{message:n,message_detail:i}=e;t=i?`${n} ${i}`:n}this.setState({saving:!1,createBoardError:t})})),this.invalidateResource(t)}))}render(){return(0,p.jsx)(e,{onBoardCreate:this.handleCreate,onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,...this.props,...this.state})}}return g(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),function(e){const n=(0,d.ZP)(),i=(0,o.useSelector)((({advertiser:e})=>e)),r=(0,o.useDispatch)(),a=(0,s.Z)(),l=!i||a.isAuth&&i.owner_user_id===a.id,c=i&&i.id;return(0,p.jsx)(t,{...e,i18n:n,viewer:a,isAdAccountOwner:l,advertiser_id:null!=c?c:void 0,dispatch:r})}}},872284:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(551687),r=n(689859),s=n(174523),a=n(883119),l=n(785893);const d=(0,i.lazy)((()=>n.e(61116).then(n.bind(n,415339))));function c(e){const t=(0,s.ZP)();return(0,l.jsx)(o.Z,{name:"SafeSuspense_SendObjectLoader_SendObjectWrapper",children:(0,l.jsx)(r.Z,{fallback:(0,l.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:2,children:(0,l.jsx)(a.$j,{accessibilityLabel:t._("Loading sharing","Accessibility label for loading sharing UI","Accessibility label for loading sharing UI"),show:!0})}),children:(0,l.jsx)(d,{...e})})})}},237574:(e,t,n)=>{n.d(t,{d:()=>i});const i={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article",SEARCH:"search"}},388291:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(883119),r=n(785893);function s({onUpdate:e,showLabel:t=!0,value:n}){const s=(0,i.ZP)(),a=[{label:s._("Easy","storyboard.detailsList.field.difficulty","Easy difficulty rating for story pin"),value:String(1)},{label:s._("Medium","storyboard.detailsList.field.difficulty","Medium difficulty rating for story pin"),value:String(2)},{label:s._("Difficult","storyboard.detailsList.field.difficulty","Hard difficulty rating for story pin"),value:String(3)}];return(0,r.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",width:"100%",children:(0,r.jsx)(o.xu,{width:"100%",children:(0,r.jsx)(o.EI,{size:"lg",id:"servings",name:"servings",label:t?s._("Difficulty","storyboard.detailsList.field.difficulty","Header title for difficulty rating entry for story pin"):void 0,placeholder:s._("Pick a difficulty rating","storyboard.detailsList.field","Placeholder caption for difficulty rating input in story pin"),value:n,options:a,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},247093:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(631739),r=n(174523),s=n(883119),a=n(785893);const l=e=>{const t=e.split("\n");t.push("");const n=[];let i,o=[];return t.forEach((e=>{const t=e.indexOf("•");t>-1?(i||(i=""),o.push(e.substring(t+1).trim())):((i||o.length>0)&&n.push({heading:i,items:o}),i=e,o=[])})),n},d=e=>{let t="";return e.forEach(((n,i)=>{const{heading:o,items:r}=n;o&&(t+=o),r&&r.length>0&&(t+="\n• "+r.join("\n• ")),i<e.length-1&&(t+="\n\n")})),t};const c=function({header:e,helperText:t,listBlocks:n,onUpdate:c,placeholderListBlocks:u}){const h=(0,r.ZP)(),p=d(u||[{heading:h._("What you'll need","storyboard.detailsList.placeholder","Placeholder text header for details list of story Pin"),items:[h._("Write a bullet list of tools, materials and anything else!","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin"),h._("Type it up or copy and paste.","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin")]}]),[g,m]=(0,i.useState)(n?d(n):"");return(0,a.jsx)(s.xu,{children:(0,a.jsx)(s.Kx,{id:"storyboard-details-list",helperText:t,label:e,onChange:({value:e})=>{m(e),c(l(e))},onBlur:()=>{""===g.trim()&&m("")},onKeyDown:({event:e,value:t})=>{const{keyCode:n,target:i,shiftKey:r}=e;if(i instanceof HTMLTextAreaElement){const{selectionStart:s,selectionEnd:a}=i;if(s===a){let a=0,d=0,u="";if(n===o.Z.KeyCode.ENTER?"\n• "!==t.substring(s-3,s)||"\n"!==t.substring(s,s+1)&&s!==t.length?r||"\n"===t.substring(s-1,s)||(a=0,u="\n• "):(a=-3,u="\n"):n!==o.Z.KeyCode.BACKSPACE&&n!==o.Z.KeyCode.DELETE||("\n• "===t.substring(s-3,s)?a=-3:"\n•"===t.substring(s-2,s)?a=-2:"\n"===t.substring(s-1,s)&&"•"===t.substring(s,s+1)&&(a=-1,d=1)),0!==a||0!==d||""!==u){const n=t.substring(0,s+a)+u+t.substring(s+d);m(n);const o=s+a+u.length;setTimeout((()=>{i.selectionStart=o,i.selectionEnd=o}),10),c(l(n)),e.preventDefault()}}}},placeholder:p,rows:7,value:g})})}},910963:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(174523),o=n(946753),r=n(883119),s=n(785893);function a({onUpdate:e,showLabel:t=!0,value:n}){const a=(0,i.ZP)(),l=[];for(let i=1;i<=50;i+=1)l.push({value:String(i),label:(0,o.nk)(a.ngettext("{{ servings }} serving","{{ servings }} servings",i,"storyboard.detailsList.field.servings","Option for number of servings a story pin recipe will provide"),{servings:i}).join("")});return(0,s.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",width:"100%",children:(0,s.jsx)(r.xu,{width:"100%",position:"relative",children:(0,s.jsx)(r.EI,{size:"lg",id:"servings",name:"servings",label:t?a._("Servings","storyboard.detailsList.field.servings","Header title for serving count entry for story pin recipe"):void 0,placeholder:a._("Pick a serving size","storyboard.detailsList.recipe","Placeholder caption for servings count input in story pin recipe"),value:n,options:l,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},155643:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(174523),r=n(946753),s=n(883119),a=n(785893);function l({header:e,onUpdate:t,value:n}){const l=(0,o.ZP)(),[d,c]=(0,i.useState)(n?String(Math.floor(Number.parseInt(n,10)/60)):"0"),[u,h]=(0,i.useState)(n?String(Number.parseInt(n,10)%60):"0"),p=(e,n)=>{t(String(Number.parseInt(n,10)+60*Number.parseInt(e,10)))},g=[];for(let i=0;i<=9;i+=1)g.push({value:String(i),label:(0,r.nk)(l.ngettext("{{ hours }} hour","{{ hours }} hours",i,"storyboard.detailsList.recipe","Option for number of hours a story pin recipe will take"),{hours:i}).join("")});const m=[];for(let i=0;i<60;i+=1)m.push({value:String(i),label:(0,r.nk)(l.ngettext("{{ minutes }} minute","{{ minutes }} minutes",i,"storyboard.detailsList.recipe","Option for number of minutes a story pin recipe will take"),{minutes:i}).join("")});return(0,a.jsxs)(s.kC,{alignItems:"end",justifyContent:"start",width:"100%",children:[(0,a.jsx)(s.xu,{width:"50%",marginEnd:2,children:(0,a.jsx)(s.EI,{size:"lg",id:"hours",name:"hours",label:e,placeholder:l._("Hours","storyboard.detailsList.recipe","Placeholder caption for hours input in story pin recipe cooktime"),value:d,options:g,onChange:({value:e})=>{Number.isNaN(e)||(c(e),p(e,u))}})}),(0,a.jsx)(s.xu,{width:"50%",marginStart:2,children:(0,a.jsx)(s.EI,{size:"lg",id:"minutes",name:"minutes",placeholder:l._("Minutes","storyboard.detailsList.recipe","Placeholder caption for minutes input in story pin recipe cooktime"),value:u,options:m,onChange:({value:e})=>{Number.isNaN(e)||(h(e),p(d,e))}})})]})}},757839:(e,t,n)=>{n.d(t,{CH:()=>o,_i:()=>r,Fe:()=>s});const i=[0,2,1];function o(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map((e=>{const{heading:t,blocks:n}=e;return{heading:t,blocks:(null!=n?n:[]).map((e=>({text:e.text?e.text:"",type:9}))),type:7}})):[];return{key_value_blocks:n&&n.length>0?n.map((e=>({category_type:e.category_type,type:8,value:e.value}))):[],list_blocks:i}}function r(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map((e=>{const{heading:t,blocks:n}=e;return{heading:t,items:(null!=n?n:[]).map((e=>e.text?e.text:""))}})):[];return{keyValueBlocks:n&&n.length>0?n.reduce(((e,t)=>{const{category_type:n,value:i}=t;return e[null!=n?n:""]=i,e}),{}):{},listBlocks:i}}function s(e){const{keyValueBlocks:t,listBlocks:n}=e;if(!t&&!n)return null;return{list_blocks:n?n.map((e=>{const{heading:t,items:n}=e;let i=[];return n&&(i=n.map((e=>({text:e,type:9})))),{blocks:i,heading:t,type:7}})):[],key_value_blocks:(t?Object.keys(t).map((e=>{const n=t[e],o=Number.parseInt(e,10),r=i.indexOf(o)>-1&&n===Number.parseInt(n,10).toString();return n&&r?{value:n,category_type:o,type:8}:null})):[]).filter(Boolean)}}},432921:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(965035),o=n(174523),r=n(883119),s=n(785893);function a({duration:e}){const t=(0,o.ZP)();return(0,s.jsxs)(r.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,s.jsx)(r.JO,{accessibilityLabel:t._("Video camera icon","Video camera indicator icon for a Pin","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),(0,s.jsx)(r.xu,{marginStart:1,children:(0,s.jsx)(r.xv,{color:"white",size:"sm",lineClamp:1,children:(0,i.Z)(e)})})]})}},727407:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(667294),o=n(23279),r=n.n(o),s=n(102156);var a=n(30494),l=n(80078),d=n(549135),c=n(748455),u=n(883119),h=n(785893);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=[0,.25,.5,.75,.95,.97],m=[0,.5,.8,.99,1],f="-64px 0px 0px 0px",b={rootMargin:f,threshold:m},v={rootMargin:f,threshold:l.iM},x=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function y(){return(new Date).getTime()}function _(e){return!!e.volume&&e.volume>0}class w extends i.Component{constructor(e){super(e),p(this,"videoWrapperRef",(0,i.createRef)()),p(this,"handleWindowResize",(()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:n}=this.currentInterval;e.height!==t||e.width!==n?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}})),p(this,"handlePlayheadDown",(({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})})),p(this,"handlePlayheadUp",(({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})})),p(this,"handleLoop",(()=>{this.videoTime=0})),p(this,"handleTimeChange",(e=>{const{seeking:t,ready:n}=this.state;if(!this.currentInterval.videoDuration)return;const i=1e3*e.time,o=function(e,t,n,i){if(e>t)return null;if(n<=0)return null;for(const o of i){const i=o*n;if(e<=i&&t>i)return o}return null}(this.videoTime,i,this.currentInterval.videoDuration,g);if("number"==typeof o&&this.props.playing&&!t&&n){const e=y();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*o),quartilePercentValue:o})}this.videoTime=i,this.props.onTimeChange&&this.props.onTimeChange(e)})),p(this,"handleDurationChange",(e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)})),p(this,"handleReady",(e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)})),p(this,"handleEnded",(e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)})),p(this,"handleVisibilityChange",((e,t)=>{if(0===e.length)return;const n=e.slice(-1)[0],i=function(e,t){for(let n=0;n<t.length;n+=1){const i=t[n],o=t[n+1];if(null==o)return i;if(i<=e&&e<o)return i}return null}(Number.parseFloat(n.intersectionRatio.toFixed(2)),m);"number"==typeof i&&(this.visible=i>=.5),null==i||i===this.currentInterval.viewability||this.fullscreen||(0===i?this.startNewInterval({viewability:i,playbackState:x.PAUSED}):this.startNewInterval({viewability:i}))})),p(this,"handleFullscreenChange",(({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})})),p(this,"handleClose",(()=>{this.startNewInterval()})),p(this,"handleContextMenu",(e=>{e.preventDefault()})),this.state={ready:!1,seeking:!1};const t=y();this.handleWindowResize=r()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:_(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const n={};_(e)&&!_(this.props)?n.isAudible=!1:!_(e)&&_(this.props)&&(n.isAudible=!0);const i=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==i&&(n.playbackState=i),Object.keys(n).length>0&&this.startNewInterval(n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?x.PLAYING:x.PAUSED:x.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:n}=this.props,{height:i,width:o,windowHeight:r,windowWidth:s,viewability:a,...l}=t;if(null!=i&&null!=o&&null!=r&&null!=s&&null!=a){const t={...l,height:i,width:o,windowHeight:r,windowWidth:s,viewability:a};(0,d.j)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:n,endTime:i,videoStartTime:o,videoEndTime:r,isAudible:s,height:a,width:l,playbackState:d,quartile:c,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:g}},...m}=e;return{...m,eventData:{videoEventData:{videoDuration:t,time:n,endTime:i,videoTime:o,endVideoTime:r,isAudible:s,height:a,width:l,playbackState:d,quartile:c,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:g}}}}({...n,view:this.fullscreen?108:n.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=y();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=y();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:n,accessibilityPauseLabel:i,accessibilityPlayLabel:o,accessibilityUnmuteLabel:r,aspectRatio:l,captions:d,contextLogData:p,controls:g,cropHeight:m,hlsConfig:f,inAdsDesktopVideoExperiment:x,isAutoPlay:y,loop:_,objectFit:w,onLoadedChange:C,onPause:j,onPlay:S,onSeek:I,onVolumeChange:P,playbackRate:E,playing:T,playsInline:D,poster:k,preload:O,rootMargin:B,src:R,surface:M,videoStartTime:A,volume:L}=this.props,{seeking:Z}=this.state,N=x?v:b;return void 0!==B&&(N.rootMargin=M?(0,a.e)(M):B),(0,h.jsx)(s.Z,{options:N,onVisibilityChange:this.handleVisibilityChange,children:(0,h.jsx)(u.xu,{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,dangerouslySetInlineStyle:{__style:m?{display:"flex",alignItems:"center",height:"236px"}:{}},children:(0,h.jsx)(c.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:n,accessibilityPauseLabel:i,accessibilityPlayLabel:o,accessibilityUnmuteLabel:r,aspectRatio:l,captions:d,contextLogData:p,controls:g,hlsConfig:f,isAutoPlay:y,loop:_,objectFit:w,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:C,onLoop:this.handleLoop,onPause:j,onPlay:S,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:I,onTimeChange:this.handleTimeChange,onVolumeChange:P,playbackRate:E,playing:!Z&&T,playsInline:D,poster:k,preload:O,src:R,videoStartTime:A,visible:this.visible,volume:L})})})}}p(w,"defaultProps",u.nk.defaultProps)},357937:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(40142),o=n(500953),r=n(32529);function s({children:e}){const t=(0,i.useDispatch)();return(0,o.Z)((()=>(t((0,r._L)(!1)),()=>{t((0,r._L)(!0))}))),e}var a=n(883119),l=n(785893);const d=new a.Ry(1e3);function c({anchor:e,children:t,color:n,idealDirection:i,onDismiss:o,positionRelativeToAnchor:r,showCaret:c,shouldFocus:u,size:h}){return(0,l.jsx)(s,{children:(0,l.jsx)(a.xu,{zIndex:d,children:(0,l.jsx)(a.J2,{anchor:e,color:n,idealDirection:i,onDismiss:o,positionRelativeToAnchor:r,showCaret:c,shouldFocus:u,size:h,children:t})})})}},28745:(e,t,n)=>{function i(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}n.d(t,{Z:()=>i})},30494:(e,t,n)=>{n.d(t,{e:()=>i});const i=e=>{if("undefined"==typeof window)return"";let t=0;const n=document.querySelector('[data-test-id="header"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:n}=e.getBoundingClientRect();t+=n}break;case"SearchItem":const n=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}const i=document.querySelector('[data-test-id="search-tab-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const o=document.querySelector('[data-root-margin="search-one-bar"]');if(null!==o){const{height:e}=o.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"}},582418:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),o=n(40142),r=n(756103),s=n(708206),a=n(549135),l=n(998864),d=n(785893);const c=(0,s.compose)((0,o.connect)((({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:o}=i||{};return void 0!==n?{carouselSlotCurrentIndex:o||n||0}:{}})),(function(e){return function(t){const[n,o]=(0,i.useState)(!1),s=(0,l.Z)({shouldStopEventPropagation:!1}),{pinId:c,onDelete:u,onSubmit:h,carouselSlotCurrentIndex:p}=t;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(e,{...t,handlePinEditButtonClick:s((e=>{e&&e.stopPropagation();const{component:n,onToggleModal:i}=t;i&&i(!0),(0,a.j)(101,{element:3,...n?{component:n}:{}}),o(!0)}))}),n&&(0,d.jsx)(r.ZP,{carouselSlotCurrentIndex:p,onDelete:u,onHide:()=>{o(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:h,pinId:c})]})}}))},768491:(e,t,n)=>{n.d(t,{k:()=>o.k,Z:()=>s});var i=n(585967),o=n(625838),r=n(785893);const s=({dateFormatType:e,useUTC:t=!0,value:n})=>(0,r.jsx)(i.LC,{children:i=>(0,o.Z)(i.locale,n,e,t)})},756169:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(302199),o=n(585967),r=n(785893);const s=({currency:e,maximumFractionDigits:t,minimumFractionDigits:n,shortform:s,shortformMaximumFractionDigits:a,formatStyle:l,uplimit:d,value:c})=>{const u=(0,i.Z)();return(0,r.jsx)(o.LC,{children:i=>u(i.locale||"en-US",c,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:n,shortform:s,shortform_maximum_fraction_digits:a,style:l,uplimit:d})})}},482547:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r({ariaHidden:e=!1,color:t="darkGray",size:n}){return(0,o.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,o.jsx)(i.xv,{color:t,inline:!0,size:null!=n?n:"md",children:"·"})})}},442634:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(482547),r=n(883119),s=n(785893);function a(e){return null!=e}function l({additionalPadding:e,color:t="darkGray",inline:n,items:l}){const d=e?(0,s.jsx)("span",{style:{padding:`0 ${4*e}px`},children:(0,s.jsx)(o.Z,{color:t})}):(0,s.jsx)(o.Z,{color:t}),c=l.filter(a).reduce(((e,t,n)=>[...e,0!==n?d:null,t]),[]).filter(a).map(((e,t)=>(0,s.jsx)(i.Fragment,{children:e},t)));return 0===c.length?null:n?(0,s.jsx)(r.xu,{children:c}):(0,s.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:c})}},975151:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(8742);function o({children:e}){return e((0,i.Z)())}},475446:(e,t,n)=>{n.d(t,{Zo:()=>o,F9:()=>r,Cl:()=>s});var i=n(762803);const{Provider:o,useHook:r,HOC:s}=(0,i._D)("toastManagerContext")},207395:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(357937),o=n(883119),r=n(785893);function s({anchor:e,children:t,idealDirection:n,onDismiss:s,paddingX:a,paddingY:l,size:d="lg"}){return(0,r.jsx)(o.xu,{display:"flex",flex:"grow",zIndex:new o.Ry(1e3),children:(0,r.jsx)(i.Z,{anchor:e,idealDirection:null!=n?n:"down",onDismiss:s,positionRelativeToAnchor:!0,size:d,children:(0,r.jsx)(o.xu,{direction:"column",display:"flex",flex:"grow",paddingX:null!=a?a:2,paddingY:l,role:"list",children:t})})})}},803478:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r({children:e,label:t}){return(0,o.jsxs)(i.xu,{marginTop:2,paddingY:2,role:"listitem",children:[(0,o.jsx)(i.xu,{paddingX:2,children:(0,o.jsx)(i.xv,{size:"sm",children:t})}),(0,o.jsx)(i.xu,{marginTop:2,role:"list",children:e})]})}},101267:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(174523),r=n(883119),s=n(785893);function a({children:e,dataTestId:t,flexGrow:n,icon:a,onClick:l,url:d}){const c=(0,o.ZP)(),[u,h]=(0,i.useState)(!1);let p;"selected"===a?p=(0,s.jsx)(r.JO,{accessibilityLabel:c._("Selected option","flyoutMenu.selectedOptionCheckmark","Accessibility label for checkmark icon indicating which option is currently selected"),color:"darkGray",icon:"check",inline:!0}):"externalLink"===a&&(p=(0,s.jsx)(r.JO,{accessibilityLabel:c._("External page","header.accountsOptionsMenu.externalLinkIcon","Accessibility label for icon indicating a menu item is a link to an external page"),color:"darkGray",icon:"arrow-up-right",inline:!0,size:12}));const g="string"==typeof e?(0,s.jsx)(r.xu,{maxWidth:p?230:void 0,children:(0,s.jsx)(r.xv,{weight:"bold",children:e})}):e,m=d?"link":"button";return(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:u?"rgba(0, 0, 0, 0.06)":void 0}},"data-test-id":t,role:"listitem",rounding:2,flex:n?"grow":"shrink",children:(0,s.jsx)(r.iP,{role:m,href:d,onBlur:()=>h(!1),onFocus:()=>h(!0),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onTap:l,target:"externalLink"===a?"blank":null,children:(0,s.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",minHeight:35,paddingX:2,rounding:2,children:[g,p&&(0,s.jsx)(r.xu,{flex:"none",marginStart:"auto",children:p})]})})})}},32529:(e,t,n)=>{n.d(t,{LX:()=>i,jt:()=>o,D8:()=>r,Dm:()=>s,_L:()=>a,Sg:()=>l,Sp:()=>d});const i=e=>({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:{value:e}});function o(e){const{currentTime:t,isPromoted:n,pinId:i}=e;return{type:"SET_CURRENT_VIDEO",payload:{pinId:i,isPromoted:n,currentTime:t}}}function r(e){return{type:"SET_IS_AUTOPLAY",payload:{isAutoplay:e}}}function s(e){const{currentTime:t,isPromoted:n,pinId:i}=e;return{type:"PAUSE_CURRENT_VIDEO",payload:{currentTime:t,pinId:i,isPromoted:n}}}function a(e){return{type:"SET_APP_FOCUS_STATE",payload:{appInFocus:e}}}function l(e){return{type:"SET_VIEWPORT_SIZE",payload:{viewportSize:e}}}function d(e){return{type:"SET_FOOTER_VISIBILITY_STATE",payload:{footerPlusButtonVisible:e}}}},117937:(e,t,n)=>{n.d(t,{K:()=>o});var i=n(311866);function o(e){return t=>function(e){return i.ZP.create("BoardActionStatusResource",{board_id:e}).callGet({showError:!1}).then((e=>new Promise(((t,n)=>{const i=e&&e.resource_response&&e.resource_response.data&&e.resource_response.data.blocking_actions;i?t(i):n(new Error("No blocking actions found in the response"))}))))}(e).then((n=>(t({type:"BLOCKING_ACTIONS_UPDATED",payload:{boardId:e,blockingActions:n}}),n)))}},163880:(e,t,n)=>{n.d(t,{OA:()=>s,pS:()=>a,q1:()=>l,Jn:()=>d,Cf:()=>c,xx:()=>u});var i=n(454690),o=n(311866);const r="collaborator_approve_invite";function s(e,t){return o.ZP.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function a(e,t){return o.ZP.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function l(e,t){return n=>o.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then((()=>{i.Z.trackEvent(r,"success")})).catch((()=>i.Z.trackEvent(r,"error")))}function d(e,t,n){return t=>{const{invited_user:i,status:r,board:{id:s}}=e;return o.ZP.create("accepted"===r?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:s,field_set_key:"boardEdit",invited_user_id:i.id}).callDelete({showError:!1})}}function c(e,t){return async n=>{await o.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callCreate(),n(function(e,t){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}}}(e,t))}}function u(e,t){return async n=>{await o.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:t}}).callDelete(),n(function(e){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}}}(e))}}},108301:(e,t,n)=>{n.d(t,{Z:()=>a,f:()=>l});var i=n(454690),o=n(311866);function r(e){return o.ZP.create("BoardFollowResource",{board_id:e})}function s(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function a(e){const t="board-follow";return n=>{r(e).callCreate().then((()=>{i.Z.trackEvent(t,"success")})).catch((()=>{i.Z.trackEvent(t,"error"),n(s(e,!1))})),n(s(e,!0))}}function l(e){const t="board-unfollow";return n=>{r(e).callDelete().then((()=>{i.Z.trackEvent(t,"success")})).catch((()=>{i.Z.trackEvent(t,"error"),n(s(e,!0))})),n(s(e,!1))}}},40197:(e,t,n)=>{n.d(t,{oG:()=>o,xQ:()=>r,Br:()=>s,A8:()=>a,Cr:()=>l,ZP:()=>d});var i=n(357846);const o=(e,t)=>n=>n((0,i.U2)("BoardResource",{options:{board_id:e,field_set_key:t}})),r=e=>o(e,"pin_count"),s=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),a=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),l=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),d=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},164756:(e,t,n)=>{n.d(t,{Tq:()=>g,oL:()=>m,K8:()=>f,aX:()=>b,yT:()=>v,wN:()=>x,L1:()=>_,Ss:()=>w,xk:()=>C,YV:()=>j,xH:()=>S,Fi:()=>I});var i=n(454690),o=n(711349),r=n(311866),s=n(153155),a=n(613330),l=n(357846),d=n(273341),c=n(101691);const u="board_create",h="board_delete",p="board_edit";function g(e,t){return(0,l.U2)("BoardResource",{options:{board_id:e,field_set_key:t}})}function m(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}function f(e){return t=>{e&&(0,d.Q2)(e).forEach((e=>{t(e)}))}}function b(e,t,n){const o={...e};return a=>(a({type:"BOARD_CREATE",payload:{board:e}}),r.ZP.create("BoardResource",o).callCreate().then((e=>{i.Z.trackEvent(u,"success");const r=e.resource_response.data;return r&&(a(f(n)),null!=t&&t.isFBC||a(m(o,r)),a((0,s.Y)(r.owner.id))),r})).catch((e=>{throw i.Z.trackEvent(u,"error"),e})))}function v(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function x(e,t){return n=>{const o=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},s={board_id:e.id,name:e.name,description:e.description,category:e.category,collaborator_permissions_setting:e.collaborator_permissions_setting,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...t?{orbac_subject_id:t}:Object.freeze({}),...o};return n({type:"BOARD_UPDATE",payload:{boardUpdateOptions:s}}),r.ZP.create("BoardResource",s).callUpdate().then((t=>{i.Z.trackEvent(p,"success");const o=t&&t.resource_response&&t.resource_response.data||e;n(v(s,o))})).catch((e=>{throw i.Z.trackEvent(p,"error"),e}))}}function y(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function _(e,t){return(n,o)=>{var s;const a=o().boards.content[e],{pin_count:l}=a,{id:d=""}=null!==(s=a.owner)&&void 0!==s?s:{};return n({type:"BOARD_DELETE",payload:{boardId:e}}),r.ZP.create("BoardResource",{board_id:e,...t?{orbac_subject_id:t}:Object.freeze({})}).callDelete().then((()=>{i.Z.trackEvent(h,"error"),n(y(e)),n((0,c.JS)({userId:d,increment:"number"==typeof l?-l:0}))})).catch((e=>{throw i.Z.trackEvent(h,"error"),e}))}}function w(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function C(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),r.ZP.create("BoardArchiveResource",{boardId:e}).callUpdate())}function j(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),r.ZP.create("BoardArchiveResource",{boardId:e}).callDelete())}function S(e,t){return n=>r.ZP.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then((()=>Promise.all([n(y(e)),n(g(t,"pin_count")),n((0,o.Z)(a.DV.BOARD_SECTIONS,t))])))}function I(e){return{type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}}},717927:(e,t,n)=>{function i(){return{type:"SHOW_SECTION_TOOLTIP"}}function o(){return{type:"HIDE_SECTION_TOOLTIP"}}n.d(t,{W:()=>i,l:()=>o})},711349:(e,t,n)=>{function i(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,{Z:()=>i})},386004:(e,t,n)=>{function i(e){return{type:"FEED_ITEM_REORDERED",payload:e}}n.d(t,{Z:()=>i})},578429:(e,t,n)=>{function i(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,{Z:()=>i})},411221:(e,t,n)=>{function i(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}n.d(t,{Z:()=>i})},152214:(e,t,n)=>{function i(e,t){return{type:"SET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e,renderError:t}}}function o(e){return{type:"UNSET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e}}}n.d(t,{m:()=>i,L:()=>o})},742979:(e,t,n)=>{n.d(t,{Z:()=>m,S:()=>g});var i=n(646942),o=n(711349),r=n(578429),s=n(411221),a=n(311866),l=n(164756),d=n(613330),c=n(627578);const u=e=>t=>{c.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._("Please wait until the previous board action finishes."," - "," -- ");default:return e.message}}(t,e))},h=e=>(0,o.Z)(e.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,e.sectionId||e.boardId);function p(e,t){const{source:n,target:o}=e;o.boardId!==n.boardId?(t((0,l.Tq)(n.boardId,"pin_count")),t((0,l.Tq)(o.boardId,"pin_count"))):n.sectionId&&o.sectionId||t((0,l.Tq)(o.boardId,"pin_count")),n.sectionId&&t((0,i.Z)(n.sectionId)),o.sectionId&&t((0,i.Z)(o.sectionId))}function g(e){return t=>{const{selectedPinIds:n,source:i,target:o}=e;t((0,s.Z)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:n,itemType:"pin"})),t((0,r.Z)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:n,itemType:"pin"})),p(e,t)}}function m(e,t){return n=>function(e,t,n){const{inverseSelection:i,selectedPinIds:o,source:l,target:c}=e;if(l.boardId===c.boardId&&(l.sectionId||null)===(c.sectionId||null))return Promise.reject();if(i){const e={board_id:l.boardId,new_board_id:c.boardId,old_section_id:l.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:o};return a.ZP.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then((()=>Promise.all([t(h(l)),t(h(c))]))).catch(u(n))}{const e=(e,n)=>{t((0,s.Z)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:o,itemType:"pin"})),t((0,r.Z)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?d.DV.SECTION_PINS:d.DV.BOARD_PINS,itemIds:o,itemType:"pin"}))};e(l,c);const i=()=>e(c,l);if(c.boardId===l.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:o};return a.ZP.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch((e=>{i(),u(n)(e)}))}{const e={section_id:l.sectionId,pins:o};return a.ZP.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch((e=>{i(),u(n)(e)}))}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:o};return a.ZP.create("BulkEditResource",e).callUpdate({showError:!1}).catch((e=>{i(),u(n)(e)}))}}}(e,n,t).then((()=>p(e,n)))}},158276:(e,t,n)=>{n.d(t,{Nq:()=>r,H5:()=>s,Q_:()=>a,bJ:()=>l,HL:()=>d});var i=n(311866),o=n(924325);function r(e){const{updateUserData:t}=e,n={};let r=null;if(t.gender&&[o.W1,o.UV].includes(t.gender)?n.gender=t.gender:t.custom_gender&&(n.customGender=t.custom_gender,n.gender=o.vF),t.age?n.age=t.age:t.birthdate&&(n.birthdate=t.birthdate),t.locale&&(n.locale=t.locale),t.country&&(n.country=t.country),t.business_vertical&&(n.businessVertical=t.business_vertical),t.business_vertical_other&&(n.businessVerticalOther=t.business_vertical_other),t.number_employees&&(n.numberEmployees=t.number_employees),t.first_name&&(n.firstName=t.first_name),t.last_name&&(n.lastName=t.last_name),t.full_name&&(n.fullName=t.full_name),t.parent_email&&(n.parentEmail=t.parent_email),t.website_url&&(n.websiteUrl=t.website_url),void 0!==t.allow_analytic_cookies&&(n.allow_analytic_cookies=t.allow_analytic_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_marketing_cookies=t.allow_marketing_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_personalization_cookies=t.allow_personalization_cookies),t.advertising_intent||t.business_name||t.account_type||t.business_goals||t.selected_ecommerce_platforms||t.enable_profile_message||t.enable_profile_address){const{account_type:e,advertising_intent:n,business_name:i,business_goals:o,enable_profile_message:s,enable_profile_address:a,selected_ecommerce_platforms:l}=t;r={...n?{advertising_intent:n}:{},...e?{account_type:e}:{},...i?{business_name:i}:{},...o?{business_goals:o}:{},...s?{enable_profile_message:s}:{},...a?{enable_profile_address:a}:{},...l?{selected_ecommerce_platforms:l}:{}}}r&&(n.partner=r,r.business_name&&(n.firstName=r.business_name));const s=i.ZP.create("UserSettingsResource",t).callUpdate();return function(e,t){return s.then((t=>(e({type:"UPDATE_USER_SET",payload:n}),t)))}}function s(e){return{type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:{firstHomeFeedRequestAfterNux:e}}}function a(e,t){return n=>{i.ZP.create("UserStateResource",{state:e,value:t}).callCreate()}}function l(e,t=""){return n=>i.ZP.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate()}function d(e){return t=>i.ZP.create("OrientationContextResource",e).callCreate()}},507010:(e,t,n)=>{function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function r(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function s(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,{a1:()=>i,jg:()=>o,Vp:()=>r,ND:()=>s})},431260:(e,t,n)=>{n.d(t,{_:()=>o});var i=n(311866);function o(e,t,n,o){return async r=>{const s=i.ZP.create("ApiResource",{url:`/v3/pins/${e}/notes/`,data:{pin_note_content:n,...o?{orbac_subject_id:o}:Object.freeze({})}});let a;a=n?t?await s.callUpdate():await s.callCreate():await s.callDelete();const{resource_response:l}=a;r(function(e,t){return{type:"PIN_NOTE_UPDATE",payload:{pinId:e,pinNote:t}}}(e,null==l?void 0:l.data))}}},6582:(e,t,n)=>{function i({id:e,isProduct:t,isPromoted:n,videoDuration:i,viewParameter:o,viewType:r,type:s}){return{type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:t,isPromoted:n,videoDuration:i,viewParameter:o,viewType:r,type:s}}}function o(){return{type:"REPORT_CONTENT_DISMISS"}}n.d(t,{c:()=>i,O:()=>o})},234316:(e,t,n)=>{n.d(t,{h:()=>c,Z:()=>u});var i=n(711349),o=n(578429),r=n(742979),s=n(311866),a=n(164756),l=n(613330),d=n(301314);function c(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:h=[]},p,g){let m=0;"RECOMMENDATION"===n?m=1:"EDITED_RECOMMENDATION"===n&&(m=2);const f={board_id:e,initial_pins:u&&!u.all?u.pinIds:h,name:t,name_source:m,...g?{orbac_subject_id:g}:Object.freeze({})};return t=>s.ZP.create("BoardSectionResource",f).callCreate({showError:!1}).then((({resource_response:{data:n}})=>{t(c(e,n)),t((0,o.Z)({feedId:e,feedType:l.DV.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t((0,a.Tq)(e,"pin_count")),t((0,d.jB)("BoardSectionsRepinResource",{board_id:e}));const{all:s,pinIds:h}=u||{all:!1,pinIds:[]};return s?new Promise(((i,o)=>t((0,r.Z)({inverseSelection:!0,selectedPinIds:h,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}},p)).then((()=>i(n))).catch(o))):(h.length>0&&t((0,i.Z)(l.DV.BOARD_PINS,e)),n)}))}},325616:(e,t,n)=>{n.d(t,{H:()=>l,Z:()=>d});var i=n(411221),o=n(311866),r=n(164756),s=n(613330),a=n(301314);function l(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}function d(e,t,n){return d=>o.ZP.create("BoardSectionEditResource",{section_id:t,...n?{orbac_subject_id:n}:Object.freeze({})}).callDelete({showError:!1}).then((()=>Promise.all([d(l(e,t)),d((0,i.Z)({feedId:e,feedType:s.DV.BOARD_SECTIONS,itemIds:[t],itemType:"board_section"})),d((0,r.Tq)(e,"pin_count")),d((0,a.jB)("BoardSectionsRepinResource",{board_id:e}))])))}},646942:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(357846);function o(e,t){return n=>n((0,i.U2)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}},726369:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(646942),o=n(711349),r=n(311866),s=n(613330),a=n(301314),l=n(325616);function d(e,t,n){return d=>r.ZP.create("BoardSectionsMergeResource",{source_section_id:t,target_section_id:n}).callUpdate({showError:!1}).then((r=>Promise.all([d((0,l.H)(e,t)),d((0,a.jB)("BoardSectionsRepinResource",{board_id:e})),d((0,i.Z)(n)),d((0,o.Z)(s.DV.SECTION_PINS,n))]).then((()=>r))))}},920763:(e,t,n)=>{n.d(t,{F:()=>i,j:()=>o});const i={USER_FOLLOW:"USER_FOLLOW"},o={USER_BLOCK:"USER_BLOCK"}},289605:(e,t,n)=>{n.d(t,{ZN:()=>a,yA:()=>l,fv:()=>d,KF:()=>c});var i=n(311866),o=n(920763);function r(e,t){return i.ZP.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function s(e,t){return{type:o.F.USER_FOLLOW,payload:{id:e,value:t}}}function a(e,t=null){return n=>{r(e,t).callCreate().catch((()=>n(s(e,!1)))),n(s(e,!0))}}function l(e,t=null){return async n=>{n(s(e,!0)),await r(e,t).callCreate().catch((t=>{throw n(s(e,!1)),t}))}}function d(e,t=null){return n=>{r(e,t).callDelete().catch((()=>n(s(e,!0)))),n(s(e,!1))}}function c(e,t=null){return async n=>{n(s(e,!1)),await r(e,t).callDelete().catch((t=>{throw n(s(e,!0)),t}))}}},101691:(e,t,n)=>{function i(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function r(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function s(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,{JS:()=>i,hY:()=>o,h6:()=>r,V6:()=>s,fm:()=>a,GT:()=>l,hT:()=>d});const a=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),l=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}});function d(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}},955637:(e,t,n)=>{function i(e){return{type:"UPDATE_PROFILE_BOARD_VIEW",payload:{profileBoardView:e}}}function o(e){return{type:"UPDATE_BOARD_SORT_OPTION",payload:{updatedBoardOrder:e}}}function r(e){return{type:"UPDATE_BOARD_PIN_VIEW",payload:{boardPinView:e}}}function s(e){return{type:"UPDATE_PROFILE_PIN_VIEW",payload:{profilePinView:e}}}n.d(t,{HY:()=>i,gh:()=>o,VT:()=>r,QG:()=>s})},613330:(e,t,n)=>{n.d(t,{DV:()=>a,zX:()=>c,ZP:()=>u});var i=n(317461),o=n(527082),r=n(881219),s=n(451104);const a={AGGREGATED_COMMENTS:"aggregatedComments",BOARD_ACTIVITYITEMS:"boardActivityItems",BOARD_ACTIVITYCOMMENTS:"boardActivityComments",BOARD_PINS:"boardPins",BOARDLESS_PINS:"boardlessPins",BOARD_SECTIONS:"boardSections",CALL_TO_CREATE_RESPONSES_FEED:"callToCreateResponsesFeed",CREATED_TAB_STORY_PINS_FEED:"createdTabStoryPinsFeed",CREATED_TAB_ACTIVITY_PINS_FEED:"createdTabActivityPinsFeed",HOMEFEED_MORE_IDEAS_TABS:"homefeedMoreIdeasTabs",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",SECTION_PINS:"sectionPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unifiedComments",USER_DID_IT_DATA:"userDidItData"},l={ApiResource:({options:e})=>null!=e&&e.url.match(/\/v3\/call_to_create_pins\/([0-9]|[a-z]|[A-Z])+\/pins\//)?{type:a.CALL_TO_CREATE_RESPONSES_FEED,id:e.pin_id}:null,AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:a.USER_DID_IT_DATA,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:a.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{objectId:e}})=>({type:a.AGGREGATED_COMMENTS,id:e,reversed:!0}),BoardActivityFeedResource:({options:{board_id:e}})=>({type:a.BOARD_ACTIVITYITEMS,id:e}),BoardActivityCommentFeedResource:({options:{activityId:e,parentType:t}})=>({type:a.BOARD_ACTIVITYCOMMENTS,id:e,reversed:"boardactivitycomment"===t}),BoardFeedResource:({options:{board_id:e}})=>({type:a.BOARD_PINS,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:a.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:a.SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:a.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t}})=>({type:a.PROFILE_BOARDS,id:(0,r.OV)(e,t)}),BaseSearchResource:({options:{auto_correction_disabled:e,appliedProductFilters:t,scope:n,filters:r,query_pin_sigs:s,query:l,user:d},response:c})=>{var u;return{type:a.SEARCH_PINS,id:(0,o.Tb)({appliedProductFilters:t,autoCorrectionDisabled:e,filters:r,query:l,selectedPinImgSig:s,scope:n,user:d}),items:null!==(u=c.resource_response.data)&&void 0!==u&&u.results?(0,i.LM)(c.resource_response.data.results).filteredResults:[]}},DidItCommentsResource:({options:{objectId:e}})=>({type:a.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:a.USER_DID_IT_DATA,id:e}),IdeasHubTodayArticlesResource:({options:{interest_id:e}})=>({type:a.TODAY_TAB,id:e}),MoreIdeasTabsResource:({response:e})=>{var t;return{type:a.HOMEFEED_MORE_IDEAS_TABS,id:"hf",items:(null===(t=e.resource_response.data)||void 0===t?void 0:t.tabs)||[]}},RelatedArticlesResource:({options:{article_id:e}})=>({type:a.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:a.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:a.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:a.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:a.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e}})=>({type:a.UNIFIED_COMMENTS,id:e,reversed:!0}),UserActivityPinsResource:({options:{user_id:e}})=>({type:a.CREATED_TAB_ACTIVITY_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:a.CREATED_TAB_STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},d={aggregatedComments:{},boardActivityItems:{},boardActivityComments:{},boardlessPins:{},boardPins:{},boardSections:{},callToCreateResponsesFeed:{},createdTabStoryPinsFeed:{},createdTabActivityPinsFeed:{},homefeedMoreIdeasTabs:{},profileBoards:{},searchPins:{},sectionPins:{},storyPinData:{},todayArticleInterestFeed:{},todayTabFeed:{},unifiedComments:{},userDidItData:{}};function c(e,t,n){const i=[...e],o=i.splice(t,1)[0];return i.splice(n,0,o),i}const u=(e=d,t)=>{switch(t.type){case s.zP:case s.aW:{var n;const{payload:i}=t,o=i.response.resource_response.data;if(null===(n=i.options)||void 0===n||!n.redux_normalize_feed)return e;const r=l[i.resource](i);if(r){const{type:n,id:i,items:l,reversed:d}=r;let c=(l||o||[]).map((e=>((e,t)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===a.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"boardactivity":return{id:e.id,type:"boardactivity"};case"boardactivitycomment":return{id:e.id,type:"boardactivitycomment"};case"board_section":return{type:"board_section",id:e.id};case"userdiditdata":return{type:"userdiditdata",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"userdiditdata",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:return{type:"pin",id:e.id}}})(e,n)));d&&(c=c.reverse());const u=e[n][i];if(u||t.type!==s.aW){const o=u||[];let r=c;return t.type===s.aW&&(r=d?c.concat(o):o.concat(c)),{...e,[n]:{...e[n],[i]:r}}}}break}case"FEED_ITEM_REORDERED":{const{payload:{feedType:n,feedId:i,itemType:o,targetItemId:r,sourceItemId:s}}=t,l=e[n]||{},d=l[i]||[];let u=-1,h=-1;if([a.BOARD_PINS,a.SECTION_PINS,a.BOARD_SECTIONS,"profileBoards"].includes(n)&&(u=d.findIndex((e=>e.type===o&&e.id===s)),h=d.findIndex((e=>e.type===o&&e.id===r))),-1!==u&&-1!==h)return{...e,[n]:{...l,[i]:c(d,u,h)}};break}case"FEED_ITEMS_REMOVED":{const{payload:{feedType:n,feedId:i,inverseSelection:o,itemType:r,itemIds:s=[]}}=t,l=e[n]||{},d=l[i];if(d&&d.length>0&&(n===a.SECTION_PINS||n===a.BOARD_PINS)){const t=d.filter((e=>{const t=s.includes(e.id);return!(e.type===r&&(o&&!t||!o&&t))})),a=!!t.find((e=>"pin"===e.type));return{...e,[n]:{...l,[i]:a?t:[]}}}if(d&&d.length>0&&n===a.BOARD_SECTIONS){const t=d.filter((e=>{const t=s.includes(e.id);return!(e.type===r&&t)}));return{...e,[n]:{...l,[i]:t}}}if(d&&d.length>0&&(n===a.BOARD_ACTIVITYITEMS||n===a.AGGREGATED_COMMENTS||n===a.BOARD_ACTIVITYCOMMENTS||n===a.BOARDLESS_PINS||n===a.UNIFIED_COMMENTS||n===a.USER_DID_IT_DATA||n===a.STORY_PIN_DATA)){const t=d.filter((e=>{const t=s.includes(e.id);return!(e.type===r&&t)}));return{...e,[n]:{...l,[i]:t}}}break}case"FEED_ITEMS_ADDED":{const{payload:{feedType:n,feedId:i,itemType:o,itemIds:r=[],prepend:s}}=t,l=e[n]||{},d=l[i];if(d&&(n===a.SECTION_PINS||n===a.BOARD_PINS||n===a.BOARDLESS_PINS)){const t=r.map((e=>({id:e,type:o})));let s=0;"story"===(d[0]||{}).type&&(s=1),"story"===(d[1]||{}).type&&(s=2);const a=[...d.slice(0,s),...t,...d.slice(s)];return{...e,[n]:{...l,[i]:a}}}if(d&&n===a.BOARD_SECTIONS){const t=[...r].reverse().map((e=>({id:e,type:"board_section"}))),o=d?[...t,...d]:[...t];return{...e,[n]:{...l,[i]:o}}}if(n===a.BOARD_ACTIVITYITEMS||n===a.AGGREGATED_COMMENTS||n===a.BOARD_ACTIVITYCOMMENTS||n===a.UNIFIED_COMMENTS){const t=r.map((e=>({id:e,type:o}))),a=d?[...s?t:d,...s?d:t]:t;return{...e,[n]:{...l,[i]:a}}}if(n===a.USER_DID_IT_DATA){const t=r.map((e=>({id:e,type:o}))),s=d?[...t,...d]:t;return{...e,[n]:{...e[n],[i]:s}}}break}case"FEED_INVALIDATE":{const{payload:{feedType:n,feedId:i}}=t,o=e[n]||{};if(o[i])return{...e,[n]:{...o,[i]:null}};break}}return e}},881219:(e,t,n)=>{n.d(t,{OV:()=>i,M0:()=>o,$k:()=>r});const i=(e,t)=>`${e}:${t||""}`,o=(e,t)=>e.feeds.profileBoards[i(t.username,t.boardOrder)],r=(e,t)=>t.isOverview||t.inActivityView?"xxWide":t.isOwnProfile&&e.ui.views&&e.ui.views.profileBoardView||"wide"},604213:(e,t,n)=>{n.d(t,{Z:()=>o});const i=e=>e.startsWith("enabled")||e.startsWith("employee");class o{constructor(e={},t={},n=!1){var i,o,r;r=!1,(o="useBatching")in(i=this)?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r,this.active=e,this.triggerable=t,this.useBatching=n}flush(){}v2GetGroup(e){let t=this.active[e];return void 0===t&&(t=this.triggerable[e]),t||null}v2InGroup(e,t){const n=this.v2GetGroup(e);return"string"==typeof t&&(t=[t]),!!n&&-1!==t.indexOf(n)}v2ActivateExperiment(e){throw new Error("Method must be implemented by subclass.")}v2LogExperimentGroupOverride(e,t){throw new Error("Method must be implemented by subclass.")}getWithActivation(e){const t=this.v2ActivateExperiment(e)||"";return{anyEnabled:i(t),group:t}}getWithoutActivation(e){const t=this.v2GetGroup(e)||"";return{anyEnabled:i(t),group:t}}}},202923:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(604213);class o extends i.Z{constructor(){super({},{},!1)}v2ActivateExperiment(e){return null}v2LogExperimentGroupOverride(e,t){}}},74339:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(177979),o=n(311866),r=n(604213);class s extends r.Z{v2ActivateExperiment(e){return this._getGroupForExperiment(e,!0)}flush(){this._queuedResource&&this._queuedResource.flush()}v2LogExperimentGroupOverride(e,t){this._reportExperimentActivated(e,!1,t,t)}_getGroupForExperiment(e,t,n){void 0===t&&(t=!0);let i=this.active[e];return void 0===i&&t&&(i=this.triggerable[e],void 0!==i&&(this.active[e]=i,this._reportExperimentActivated(e,n,i))),i||null}_reportExperimentActivated(e,t,n,r){const s={add_to_experiment:!!t,experiment_name:e};if(r&&(s.override_group=r),n&&(s.experiment_group=n),this.useBatching)this._queuedResource||(this._queuedResource=new i.Z("ActivateExperimentResource",(e=>({experiments:e})))),this._queuedResource.enqueue(s);else{o.ZP.create("ActivateExperimentResource",s).callCreate({showError:!1})}}}},920349:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(164215);function o(e){e||(e={});const{active_experiments:t,triggerable_experiments:n,batch_exp:o}=e;return{experiments:new i.Z(t,n,o)}}},164215:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(74339).Z},155656:(e,t,n)=>{n.d(t,{Z:()=>r});n(441143);var i=n(785893);class o{static factory(e){return e instanceof o?e:new o(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function r(e){const{css:t,unsafeCSS:n,...r}=e,s=String(t||"")||n||"";return!!s?(0,i.jsx)("style",{...r,dangerouslySetInnerHTML:{__html:String(o.factory(s))}}):null}},549156:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(883119),o=n(785893);function r(e){const{children:t,display:n,id:r}=e;return(0,o.jsx)(i.xu,{"data-test-id":r,display:n,children:t})}},966427:(e,t,n)=>{n.d(t,{o:()=>i,u:()=>o});const i=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),o=e=>{switch(!0){case e.includes("Chrome"):return i.CHROME;case e.includes("Safari"):return i.SAFARI;case e.includes("Firefox"):return i.FIREFOX;case e.includes("Opera"):return i.OPERA;case e.includes("IE"):return i.IE;case e.includes("Edge"):return i.EDGE;default:return i.OTHER}}},799881:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(296882),o=n(641483);function r(e,t){if(t&&!(()=>{try{return window.localStorage.test=2,!1}catch(e){return!0}})()){const t=window.open(e,"_blank");return t&&(t.opener=null),t}{const t=(0,i.Z)(e);return setTimeout((()=>{(0,o.ZP)("setting_new_window_location")}),0),window.location.href=t,window}}},589444:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(657121),o=n(444488);function r({pin:e,shouldUnifyImageSizes:t,additionalImages:n}){const r=(0,i.Z)({richPinData:(null==e?void 0:e.rich_metadata)||(null==e?void 0:e.rich_summary)});return r&&n&&n.length>0?(0,o.Z)(null,n,e.carousel_data&&e.carousel_data.index,t,r.id):r&&r.additional_images&&r.additional_images.length>0?(0,o.Z)(e.images,r.additional_images,e.carousel_data&&e.carousel_data.index,t,r.id):e&&e.carousel_data}},444488:(e,t,n)=>{n.d(t,{Z:()=>r});const i=["236x","474x","564x","736x"];function o(e){function t(e,{imageKey:t,height:n,width:i}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:n,width:i}}}),e}const n=i.map((function(t){const n=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].height||1/0))),i=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].width||1/0)));return{imageKey:t,height:n,width:i}}));return e.map((e=>n.reduce(t,e)))}function r(e,t,n,i,r){const s=(null==t?void 0:t.map((({canonical_images:e,image_signature:t})=>({images:e||void 0,image_signature:t||void 0}))))||[],a=e?[{images:e},...s]:s;return{carousel_slots:i?o(a):a,index:n||0,id:r}}},457175:(e,t,n)=>{n.d(t,{B:()=>o,v:()=>r});var i=n(762803);const{Provider:o,useHook:r}=(0,i.ZP)("ContextLogger")},304966:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(457175);const o=()=>(0,i.v)().logContextEvent},44062:(e,t,n)=>{n.d(t,{I:()=>l,s:()=>a});var i=n(667294),o=n(762803),r=n(785893);const{Provider:s,useHook:a}=(0,o.ZP)("View");function l({children:e,initialState:t={}}){const[n,o]=(0,i.useState)(t),a=(0,i.useCallback)((()=>o({})),[]);return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(s,{value:{...n,clearViewContextData:a,setViewContextData:o},children:e})})}},72984:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(e,t)=>{const n=new Date(e);return n.setDate(e.getDate()+t),n}},980767:(e,t,n)=>{n.d(t,{DH:()=>i,FS:()=>o,UK:()=>r,F4:()=>s,VL:()=>a,N9:()=>l,v6:()=>d,N1:()=>c});const i=1e3,o=60*i,r=60*o,s=24*r,a=7*s,l=30*s,d=31*s,c=365*s},625838:(e,t,n)=>{n.d(t,{k:()=>i,Z:()=>o});const i={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour"};function o(e,t,n,o=!0){const r=function(e){switch(e){case i.YEAR:return{year:"numeric"};case i.LONG:return{year:"numeric",month:"long",day:"numeric"};case i.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case i.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.MONTH_DAY:return{month:"long",day:"numeric"};case i.SHORT_MONTH:return{month:"short"};case i.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case i.DAY:return{day:"numeric"};case i.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case i.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case i.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case i.TIME:return{hour:"numeric",minute:"2-digit"};case i.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}}(n);o&&(r.timeZone="UTC");return new Intl.DateTimeFormat(e,r).format(t)}},848101:(e,t,n)=>{n.d(t,{I7:()=>l,B$:()=>d,Cw:()=>s,c4:()=>a});var i=n(667294),o=n(762803);const r=(0,i.createContext)(null),s=()=>(0,i.useContext)(r),a=r.Provider,{Provider:l,useHook:d}=(0,o.ZP)("DesktopCoreLogin")},292900:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(731164),r=n(372833);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.Component{constructor(...e){super(...e),s(this,"state",{error:null,info:null}),s(this,"resetError",(()=>{this.setState({error:null,info:null})}))}componentDidCatch(e,t){try{const t=this.props.name,n=this.props.type||"secondary";(0,r.B)({errorBoundary:t,errorBoundaryType:n,message:e.message,name:e.name,stack:e.stack}),o.Z.increment("react.error_boundary",.1,{component:void 0,name:this.props.name})}catch(n){o.Z.increment("react.error_boundary.error",1,{name:this.props.name})}this.setState({error:e,info:t})}render(){const{renderErrorState:e}=this.props,{error:t,info:n}=this.state;return t&&n?e?e({error:t,info:n,resetError:this.resetError}):null:this.props.children}}},551687:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(292900).Z},264221:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(667294),o=n(855356),r=n(514319),s=n(883119),a=n(785893);class l extends i.Component{renderPulsar(){const{anchor:e,handleComplete:t,handlePulsarCompleteOnHover:n,zIndex:i}=this.props;return(0,a.jsx)(r.Z,{anchor:e,onTouch:t,onMouseEnter:n,zIndex:i})}renderFlyout(){const{anchor:e,tooltip:t,handleDismiss:n,handleComplete:i}=this.props;if(!t)return null;const{cancelButtonText:o,confirmButtonText:r,mainText:l,idealDirection:d="down"}=t,c=o&&n&&r&&i;return(0,a.jsx)(s.J2,{anchor:e,color:"blue",idealDirection:d,onDismiss:n,shouldFocus:!1,showCaret:!0,size:"flexible",children:(0,a.jsxs)(s.xu,{maxWidth:284,padding:3,width:"max-content",children:[(0,a.jsx)(s.xv,{color:"white",overflow:"breakWord",weight:"bold",children:l}),c?(0,a.jsxs)(s.xu,{marginTop:2,display:"flex",alignItems:"center",children:[(0,a.jsx)(s.xu,{column:6,marginEnd:1,children:(0,a.jsx)(s.zx,{fullWidth:!0,color:"transparentWhiteText",onClick:e=>n(e),size:"md",text:String(o)})}),(0,a.jsx)(s.xu,{column:6,children:(0,a.jsx)(s.zx,{fullWidth:!0,color:"white",size:"md",text:String(r),onClick:i})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}var d=n(354783),c=n(85831),u=n(505343);function h({anchor:e,anchorElementRef:t,children:n,containerBoxConfig:r,experience:h,isHidden:p,onCompleteClick:g,zIndex:m}){var f;const{completeExperience:b,dismissExperience:v,experiences:x,viewExperience:y}=(0,u.M)(),_=(({anchor:e,anchorExperiences:t,passedExperience:n})=>n||(t?t[e]:null))({anchor:e,anchorExperiences:Object.values(x).reduce(((e,t)=>(8===t.type&&(e[(0,c.A0)(t)]=t),e)),{}),passedExperience:h}),w=(null==_||null===(f=_.display_data)||void 0===f?void 0:f.delay)||0,[C,j]=(0,i.useState)(!!w);if((0,i.useEffect)((()=>{if(w>0&&C){const e=setTimeout((()=>{j(!1)}));return()=>clearTimeout(e)}return()=>{}}),[w,C]),(0,i.useEffect)((()=>{!C&&_&&y(_.placement_id,_.experience_id)}),[C,_]),!_||C||p)return i.Children.only(n);const S=(e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,o.Z)(d.Z,!0)(t)})(_),I=()=>{var e;null!==(e=_.display_data)&&void 0!==e&&e.complete_on_hover&&b(_.placement_id,_.experience_id)};return(0,a.jsxs)(s.xu,{position:"relative",height:null==r?void 0:r.height,display:null==r?void 0:r.display,children:[(0,a.jsx)(s.iP,{onMouseEnter:I,onTap:()=>{g&&g(),S.skipComplete||b(_.placement_id,_.experience_id)},children:i.Children.only(n)}),(0,a.jsx)(l,{anchor:t||null,handlePulsarCompleteOnHover:I,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),v(_.placement_id,_.experience_id)},pulserOnly:!!S.pulserOnly,tooltip:S.tooltip,tooltipOnly:!!S.tooltipOnly,zIndex:m})]})}},505343:(e,t,n)=>{n.d(t,{F:()=>h,M:()=>u});var i=n(667294),o=n(40142),r=n(708206),s=n(50351),a=n(762803),l=n(910289),d=n(785893);const{Provider:c,useHook:u}=(0,a.ZP)("ExperienceContext");function h({children:e}){const[t,n]=(0,i.useReducer)(((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,[t.payload]:!0};if("UNMOUNT_PLACEMENT"===t.type){const n={...e};return delete n[t.payload],n}return e}),{}),a=(0,o.useDispatch)(),u=(0,o.useSelector)((e=>e.experiences)),h=(0,i.useMemo)((()=>{const e=(0,r.bindActionCreators)({completeExperience:l.CK,dismissExperience:l.Qu,fetchAllExperiences:l.fO,fetchAllExperiencesMulti:s.NW,fetchExperienceForPlacements:l.pz,mountPlacement:l.N,triggerExperimentsForPlacement:l.kd,viewExperience:l.UT},a);return{...e,mountPlacement:(t,...i)=>{e.mountPlacement(t,...i),n({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{n({type:"UNMOUNT_PLACEMENT",payload:e})}}}),[a,n]);return(0,d.jsx)(c,{value:{experiences:u,mountedPlacements:t,...h},children:e})}},910289:(e,t,n)=>{n.d(t,{fO:()=>l,pz:()=>d,UT:()=>u,CK:()=>h,Qu:()=>p,d9:()=>g,kd:()=>m,YX:()=>f,N:()=>b});var i=n(311866),o=n(85831),r=n(731164),s=n(50351);let a;const l=(e,t)=>n=>{const o=t?{extra_context:e,targeting:t}:{extra_context:e};return i.ZP.create("UserExperiencePlatformResource",o).callGet().then((e=>e.resource_response?n((0,s.OD)(e.resource_response.data)):void 0))},d=(e,t,n,r)=>(l,d)=>{if(t)return Promise.resolve();if(r&&(a=r),1===e.length){const t=e[0],i=d().experiences[t],r=(null==i?void 0:i.extraContext)||null;if(JSON.stringify(r)===JSON.stringify(n)||(0,o.E3)(i)&&!(n&&Object.keys(n).length>0))return Promise.resolve()}return i.ZP.create("UserExperienceResource",{placement_ids:e,extra_context:n||null,targeting:r}).callGet().then((e=>e.resource_response?l((0,s.cL)(e.resource_response.data)):void 0))},c=(e,t)=>(n,o,r,d=!1,c,u)=>(h,p)=>{const{experiences:g,experiencesMulti:m}=p();let f=null,b=!0;var v;d||(b=g[n]&&g[n].experience_id===o,f=b?g[n]:null===(v=m[n])||void 0===v?void 0:v.find((e=>e.experience_id===o)));if(f&&f.experience_id===o||d&&n&&o){const d=i.ZP.create(e,{placed_experience_id:`${n}%3A${o}`,extra_context:null!=c?c:{},targeting:u}),p=b?s.Yb:s.xW;switch(t){case"dismissed":return d.callDelete().then((()=>{h((0,s.fQ)(n)),h(p(n,o,t)),h(l(void 0,a))}));case"completed":return d.callUpdate().then((()=>{h((0,s.fQ)(n)),r||(h(p(n,o,t)),h(l(void 0,a)))}));case"viewed":return h(p(n,o,t)),d.callUpdate().then((()=>{1000162===n&&h(l())}));case"completedWithoutHomefeed":return d.callUpdate().then((()=>{h((0,s.fQ)(n)),r||h(p(n,o,t))}));default:return Promise.resolve()}}return Promise.resolve()},u=c("UserExperienceViewedResource","viewed"),h=c("UserExperienceCompletedResource","completed"),p=c("UserExperienceResource","dismissed"),g=c("UserExperienceCompletedResource","completedWithoutHomefeed"),m=(e,t)=>(n,o)=>{const{experiences:s}=o(),a=s[e];a&&a.triggerable_placed_exps&&a.triggerable_placed_exps.length&&a.triggerable_placed_exps.forEach((n=>{const[,o]=n.split(":");let s=t;a.metadata&&a.metadata[o]&&(s=Object.assign({},t,a.metadata[o])),i.ZP.create("UserExperienceTriggerResource",{placed_experience_id:n.replace(":","%3A"),extra_context:s}).callUpdate().then((()=>{((e,t,n={})=>{r.Z.increment(`${e}.${t}`,1,n)})("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:o})}))}))},f=e=>(t,n)=>{t(m(e));const{experiences:i}=n();return i[e]},b=(e,t,n)=>i=>{n&&(a=n),i(m(e,t)),t&&Object.keys(t).length>0&&i(d([e],!1,t,n))}},85831:(e,t,n)=>{function i(e){return!!e&&0!==e.type}n.d(t,{E3:()=>i,MQ:()=>o,A0:()=>r});const o=(e,t,n)=>{const o=e[n];return t[n]&&i(o)?o:null};function r(e){var t;return null===(t=e.display_data)||void 0===t?void 0:t.anchor}},944163:(e,t,n)=>{n.d(t,{$S:()=>i,V$:()=>o,mR:()=>r,_4:()=>s,iY:()=>a,Ib:()=>l});const i="REFRESH_ALL_EXPERIENCES_MULTI",o="UPDATE_EXPERIENCE_MULTI",r="FETCH_EXPERIENCES",s="REFRESH_ALL_EXPERIENCES",a="UPDATE_EXPERIENCE",l="EXPERIENCE_RESOURCE_UPDATED"},50351:(e,t,n)=>{n.d(t,{xW:()=>r,NW:()=>s,Yb:()=>a,OD:()=>l,cL:()=>d,fQ:()=>c});var i=n(311866),o=n(944163);const r=(e,t,n)=>({type:o.V$,payload:{placementId:e,experienceId:t,status:n}}),s=e=>t=>i.ZP.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then((e=>{return e.resource_response?t((n=e.resource_response.data,{type:o.$S,payload:{experiencesMulti:n}})):void 0;var n})),a=(e,t,n)=>({type:o.iY,payload:{placementId:e,experienceId:t,status:n}}),l=e=>({type:o._4,payload:{experiences:e}}),d=e=>({type:o.mR,payload:{experiences:e}}),c=e=>({type:o.Ib,payload:{placementId:e}})},514319:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(883119),r=n(785893);function s({anchor:e,children:t,zIndex:n}){const s=(0,i.useRef)(null),[a,l]=(0,i.useState)(0),[d,c]=(0,i.useState)(0),{height:u,width:h}=e.getBoundingClientRect();return(0,i.useEffect)((()=>{const{current:t}=s;if(e&&t){const{height:e,width:n}=t.getBoundingClientRect(),{horizontalOffset:i,verticalOffset:o}=((e,t,n,i)=>({horizontalOffset:-(i/2-t/2),verticalOffset:-(n/2-e/2)}))(u,h,e,n);l(i),c(o)}}),[u,h,s.current]),(0,r.jsx)(o.xu,{position:"absolute",zIndex:n?new o.Ry(n):void 0,dangerouslySetInlineStyle:{__style:{left:a,top:d}},ref:s,children:t})}const a=function(e){const{anchor:t,onTouch:n,onMouseEnter:i,paused:a,size:l,zIndex:d}=e;return t?(0,r.jsx)(s,{anchor:t,zIndex:d,children:(0,r.jsx)(o.iP,{fullWidth:!1,onTap:({event:e})=>n(e),onMouseEnter:i,rounding:"circle",children:(0,r.jsx)(o.o3,{paused:a,size:l})})}):null}},459123:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294),o=n(514319),r=n(883119),s=n(785893);const a=new r.Ry(669),l={1:"up",2:"right",3:"down",4:"left"},d=({anchors:e={},complete:t,dismiss:n,displayData:d,idealDirection:c,onCompleteByAnchor:u={},platform:h,positionRelativeToAnchor:p=!0,touchToDismiss:g=!0,useMasonryFlyout:m=!1})=>{var f;const{anchors_by_platform:b={},button_text:v,button_uri:x,display_type:y,flyout_direction:_,scroll_to_dismiss:w,scroll_to_dismiss_delay_in_seconds:C=0,text:j}=d||{},S=null===(f=b[h])||void 0===f?void 0:f.anchor,I=e[S],P=(0,i.useCallback)((()=>{w&&(window.removeEventListener("scroll",P),window.removeEventListener("touchmove",P)),g&&I&&I.removeEventListener("click",P),setTimeout((()=>n()),1e3*C)}),[I]);if((0,i.useEffect)((()=>{I&&(w&&(window.addEventListener("scroll",P),window.addEventListener("touchmove",P)),g&&I.addEventListener("click",P))}),[I]),!I)return null;const{FLYOUT:E,PULSAR:T}={FLYOUT:1,PULSAR:2},D=({children:e})=>{if(m)return(0,s.jsx)(r.mh,{zIndex:a,children:e});if(y===T){const t={};if(p)t.top=I.offsetTop,t.left=I.offsetLeft,t.width=I.offsetWidth,t.height=I.offsetHeight;else{const e=I.getBoundingClientRect();t.top=e.top+window.pageYOffset,t.left=e.left+window.pageXOffset,t.width=e.width,t.height=e.height}return(0,s.jsx)(r.xu,{position:"absolute",top:!0,left:!0,zIndex:a,dangerouslySetInlineStyle:{__style:t},children:e})}return(0,s.jsx)(r.xu,{zIndex:a,children:e})},k=l[_],O=x&&(x.startsWith("https://")||x.startsWith("http://")),B=(u||{})[S],R=()=>{w&&(window.removeEventListener("scroll",P),window.removeEventListener("touchmove",P)),g&&I.removeEventListener("click",P),t()};return(0,s.jsxs)(i.Fragment,{children:[y===T&&(0,s.jsx)(D,{children:(0,s.jsx)(o.Z,{anchor:I,onTouch:()=>{R(),B?B():I instanceof HTMLElement&&I.click()},zIndex:670})}),y===E&&(0,s.jsx)(D,{children:(0,s.jsx)(r.J2,{anchor:I,color:"blue",idealDirection:k||c||"down",onDismiss:P,positionRelativeToAnchor:!m&&p,shouldFocus:!1,showCaret:!0,size:"md",children:(0,s.jsxs)(r.xu,{padding:4,width:"220px",children:[(0,s.jsx)(r.xv,{align:"center",color:"white",weight:"bold",children:j}),v?(0,s.jsx)(r.xu,{display:"flex",justifyContent:"center",marginTop:4,children:(0,s.jsx)(r.xu,{column:8,children:x?(0,s.jsx)(r.zx,{fullWidth:!0,color:"white",href:x,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),R()},role:"link",size:"md",target:O?"blank":null,text:v}):(0,s.jsx)(r.zx,{fullWidth:!0,color:"white",onClick:R,size:"md",text:v})})}):null]})})})]})}},151101:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(883119),o=n(785893);const r=(e,t)=>{const n=null==e?void 0:e.includes("images/user/default");return Boolean(n&&t)};function s({accessibilityLabel:e,name:t,outline:n,size:s,src:a,verified:l}){return(0,o.jsx)(i.qE,{accessibilityLabel:e,name:t,outline:n,size:s,src:r(a,t)?void 0:a,verified:l})}},451190:(e,t,n)=>{n.d(t,{b:()=>l,Z:()=>d});var i=n(667294),o=n(241933),r=n(51610),s=n(883119),a=n(785893);const l=new s.Ry(1e3);function d({_dangerouslyDisableScrollBoundaryContainer:e,accessibilityModalLabel:t,align:n,allowClickAndDrag:d,allowMediaPlay:c,allowScroll:u,children:h,closeOnOutsideClick:p,footer:g,heading:m,onDismiss:f,role:b,size:v,subHeading:x}){(0,i.useEffect)((()=>(o.Z.pause(),function(){o.Z.resume()})),[]);return(0,a.jsx)(s.mh,{zIndex:l,children:(0,a.jsx)(r.Z,{allowClickAndDrag:d,allowEsc:!0,allowMediaPlay:c,allowScroll:u,children:(0,a.jsx)(s.u_,{_dangerouslyDisableScrollBoundaryContainer:e,accessibilityModalLabel:t,align:n,closeOnOutsideClick:p,heading:m,footer:g,onDismiss:()=>{o.Z.resume(),f()},role:b,size:v,subHeading:x,children:h})})})}},881220:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(667294),o=n(500953),r=n(16539),s=n(883119),a=n(785893);function l({button:e,dataTestId:t,duration:n=2e3,href:l,iconThumbnail:d,imageUrl:c,onClick:u,onHide:h,openNewPage:p,text:g,thumbnailShape:m="square",variant:f="default"}){const[b,v]=(0,i.useState)(!1),[x,y]=(0,i.useState)(!1),_=(0,i.useRef)(),w=()=>{v(!0),_.current=setTimeout(h,r.V)},C=()=>{_.current&&clearTimeout(_.current)},j=()=>{_.current=setTimeout(w,n)};(0,o.Z)((()=>(setTimeout((()=>y(!0)),100),j(),C)));const S="string"==typeof g?g:`${g[0]} ${g[1]}`,I=c?(0,a.jsx)(s.xu,{height:48,overflow:"hidden",width:48,children:(0,a.jsx)(s.Ee,{alt:S,fit:"cover",naturalHeight:1,naturalWidth:1,src:c})}):void 0,P=(0,a.jsx)(s.FN,{button:e,text:g,thumbnail:null!=d?d:I,thumbnailShape:m,variant:f});return(0,a.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:(0,r.Z)(x,b)},"data-test-id":null!=t?t:"toast",onMouseEnter:C,onMouseLeave:j,children:l?(0,a.jsx)(s.iP,{role:"link",href:l,onTap:({event:e})=>null==u?void 0:u(e),target:p?"blank":null,rounding:"pill",children:P}):P})}},16539:(e,t,n)=>{n.d(t,{V:()=>i,Z:()=>o});const i=200,o=(e,t)=>({marginTop:10,opacity:0,position:"relative",transform:"translateY(200px)",transition:"opacity 0.1s ease-in-out",visibility:"hidden",...e?{opacity:1,transform:"translateY(0)",transition:"all 0.7s cubic-bezier(.19, 1.15, .48, 1)",visibility:"visible"}:{},...e&&t?{opacity:0,transform:"scale(1.1)",transition:"opacity transform 0.2s"}:{}})},658726:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523),o=n(946753),r=n(980767);function s(){const e=(0,i.ZP)();return function(t,n){const i=new Date(t),s=new Date-i,a=Math.floor(s/r.FS),l=Math.floor(s/r.UK),d=Math.floor(s/r.F4),c=Math.floor(s/r.VL),u=Math.floor(s/r.N1),h=e.ngettext("{{ minutes }} minute ago","{{ minutes }} minutes ago",a," - "," -- "),p=e.ngettext("{{ hours }} hour ago","{{ hours }} hours ago",l," - "," -- "),g=e.ngettext("{{ days }} day ago","{{ days }} days ago",d," - "," -- "),m=e.ngettext("{{ weeks }} week ago","{{ weeks }} weeks ago",c," - "," -- "),f=e.ngettext("{{ years }} year ago","{{ years }} years ago",u," - "," -- "),b=e.ngettext("{{ minutes }}m","{{ minutes }}m",a,"minutes ago abbreviated","minutes ago abbreviated"),v=e.ngettext("{{ hours }}h","{{ hours }}h",l,"hours ago abbreviated","hours ago abbreviated"),x=e.ngettext("{{ days }}d","{{ days }}d",d,"days ago abbreviated","days ago abbreviated"),y=e.ngettext("{{ weeks }}w","{{ weeks }}w",c,"weeks ago abbreviated","weeks ago abbreviated"),_=e.ngettext("{{ years }}y","{{ years }}y",u,"years ago abbreviated","years ago abbreviated");return u>0?(0,o.nk)(n?_:f,{years:u}).join(""):c>0?(0,o.nk)(n?y:m,{weeks:c}).join(""):d>0?(0,o.nk)(n?x:g,{days:d}).join(""):l>0?(0,o.nk)(n?v:p,{hours:l}).join(""):a>0?(0,o.nk)(n?b:h,{minutes:a}).join(""):e._("Just now"," - "," -- ")}}},174523:(e,t,n)=>{n.d(t,{oz:()=>r,q6:()=>o,ZP:()=>a});var i=n(762803);const{Provider:o,Consumer:r,useHook:s}=(0,i.ZP)("i18n"),a=s},302199:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(174523);const o=(e,t)=>{const n=t||0,i=10**n,o=+(n?e*i:e).toFixed(8),r=Math.floor(o),s=o-r,a=s>.5-1e-8&&s<.5+1e-8?r%2==0?r:r+1:Math.round(o);return n?a/i:a},r=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0};function s(){const e=(0,i.ZP)();return(t,n,i)=>{let s=0,a=0;const l=i&&i.style||void 0,d=i&&i.shortform||!1,c=i&&i.uplimit||void 0,u=i&&i.currency||void 0,h=!!c&&n>=c,p=c&&h?c:n;if("currency"===l?(s=void 0===i||void 0===i.maximum_fraction_digits?2:i.maximum_fraction_digits,a=void 0===i||void 0===i.minimum_fraction_digits?2:i.minimum_fraction_digits):(s=void 0===i||void 0===i.maximum_fraction_digits?0:i.maximum_fraction_digits,a=void 0===i||void 0===i.minimum_fraction_digits?0:i.minimum_fraction_digits),d&&p>999&&(s=void 0===i||void 0===i.shortform_maximum_fraction_digits?2:i.shortform_maximum_fraction_digits,a=0),s<a)return String(p);let g=p,m="";const f=[{"100M":{value:1e8,localeKey:e._("億","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.")}},{"10k":{value:1e4,localeKey:e._("万","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.")}}],b=[{b:{value:1e9,localeKey:e._("B","Abbreviation for one billion.","Abbreviation for one billion.")}},{m:{value:1e6,localeKey:e._("M","Abbreviation for one million.","Abbreviation for one million.")}},{k:{value:1e3,localeKey:e._("k","Abbreviation for one thousand.","Abbreviation for one thousand.")}}],v=/^zh|ja|ko/.test(t);if(d&&p>999){const e=v?f:b;for(let t=0;t<e.length;t+=1){const n=Object.keys(e[t])[0],i=e[t][n].value;if(p>=i){g=o(p/i*Math.pow(10,s))/Math.pow(10,s),m=e[t][n].localeKey;break}}}if(null==g)return"";return g.toLocaleString([r(t)&&"ar-SA"!==t?t:"en-US"],(({maximumFractionDigits:e,minimumFractionDigits:t,style:n,currency:i})=>{const o={maximumFractionDigits:e,minimumFractionDigits:t};return n?{...o,style:n,..."currency"===n?{currency:i,currencyDisplay:"symbol"}:{}}:o})({maximumFractionDigits:s,minimumFractionDigits:a,currency:u,style:l}))+m+(h?"+":"")}}},946753:(e,t,n)=>{function i(e,t,n){return e.split(n).map((e=>{if(e.match(n)){const n=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}return e}))}n.d(t,{nk:()=>r,Wc:()=>s,bF:()=>l});const o=/(\{\{\s*\w+\s*\}\})/g;function r(e,t){return i(e,t,o)}function s(e,t){return i(e,t,o).join("")}const a=/(\{\s*\w+\s*\})/g;function l(e,t){return i(e,t,a)}},304194:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(311866);const o=e=>i.ZP.create("InviteAttributionResource",{invite_code:e}).callCreate();var r=n(221469);const s=(e=(e=>{}))=>{const t=(0,r.mB)(window.location.search),n=t.invite_code;n?o(n):e(t)}},885106:(e,t,n)=>{function i(e){return e&&e[1000069]&&500417===e[1000069].experience_id}n.d(t,{Z:()=>i})},588527:(e,t,n)=>{n.d(t,{Z:()=>i});const i={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},855356:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(968630),o=n.n(i);function r(e,t=!1){return n=>{if(!o()(n))return t&&Array.isArray(n)?n.map(r(e,t)):n;const i={};return Object.keys(n).forEach((s=>{const a=e(n[s],s);o()(n[s])||t&&Array.isArray(n[s])?i[a]=r(e,t)(n[s]):i[a]=n[s]})),i}}function s(e,t=!1){const n=(t,n)=>e(n);return e=>r(n,t)(e)}},445443:(e,t,n)=>{n.d(t,{Z:()=>i});const i=function(e){return function(t){return null!=t?e(t):null}}},912397:(e,t,n)=>{n.d(t,{h5:()=>i,n$:()=>o,W7:()=>r,hC:()=>s,vI:()=>a,YC:()=>l,s7:()=>d,BX:()=>c,a7:()=>u,JT:()=>h,a2:()=>p,X6:()=>g,PF:()=>m,I6:()=>f,oo:()=>b,vq:()=>v,Ib:()=>x,Tr:()=>y,jq:()=>_,lA:()=>w,u2:()=>C});const i="MULTIPLE_ACCOUNTS",o="MULTIPLE_ACCOUNTS_GROUP",r="account_switcher_flyout",s="account_switcher_modal",a="vmp_account_switcher_modal",l="account_recovery",d="closeup",c="flashlight_grid",u="google_one_tap_modal",h="inspired_banner",p="hybrid_clickthrough",g="hybrid_banner",m="pin_image",f="response_flyout",b="unauth_header",v="facebook",x="twitter",y="google",_="gplus",w="microsoft",C="yahoo"},384832:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>`//connect.facebook.net/${(e=>{const t=e.replace(/-/g,"_");if(t.startsWith("es"))return"es_LA";if(t.startsWith("ar"))return"ar_AR";switch(t){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return t}})(e)}/sdk.js`},21755:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(667294),o=n(551687),r=n(181307),s=n(785893);const a=(0,i.memo)((({activate:e=!0,isEligible:t=!0,name:n,group:a,children:l})=>{const d=(0,r.tc)(n);(0,i.useEffect)((()=>{e&&t&&d&&d()}),[]);const c=a,u=`Experiment(${n}:${c})`,h=t&&c&&(c.startsWith("enabled")||c.startsWith("employee"))||!1,p={group:t?c:"",anyEnabled:h,customActivate:t&&!e?d:null};return(0,s.jsx)(o.Z,{name:u,children:l(p)})}))},197801:(e,t,n)=>{n.d(t,{u:()=>o,Y:()=>r});var i=n(762803);const{Provider:o,useHook:r}=(0,i.ZP)("ExperimentContext")},181307:(e,t,n)=>{n.d(t,{tc:()=>r,aq:()=>s});var i=n(667294),o=n(197801);function r(e){const t=(0,o.Y)(),n=t.v2GetGroup(e)||"",r=function(e){return e.startsWith("enabled")||e.startsWith("employee")}(n),s=(e=>{const t=(0,i.useRef)(!1),n=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{t.current=!0,n.current&&e()}),[]),()=>{t.current?e():n.current=!0}})((()=>{t.v2ActivateExperiment(e)}));return e=>(null!=e&&e.dangerouslySkipActivation||s(),{group:n,anyEnabled:r})}function s(e,t=!0){const n=r(e);return t?n():{group:"",anyEnabled:!1}}},255038:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(164485),o=n(667294),r=n(226806),s=n(139585);function a({children:e,isAtEndOfFeed:t,pinData:n,itemCount:a,includeBackgroundImages:l=!1,includeVideos:d=!1}){return(0,i.Z)({pinData:n,isAtEndOfFeed:t,includeBackgroundImages:l,includeVideos:d}),function(e){const t=(0,r.EV)(),n=(0,o.useRef)(null);(0,o.useEffect)((()=>{e!==n.current&&(n.current=e,t&&(0,s.ZP)(s.at))}),[!!t,e])}(a),e}},670473:(e,t,n)=>{n.d(t,{ad:()=>a,MH:()=>l,iN:()=>d});var i=n(840059),o=n(169039);const{Provider:r,useHook:s}=(0,o.Z)({name:"board_picker",v2LoggerMetricName:16,sampleRate:i.DQ?1:.1}),a=(e,t)=>{let n="unknown";null!=t&&t.includes("pin/")?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},l=r,d=s},169039:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(667294),o=n(762803),r=n(778170),s=n(46509),a=n(954321),l=n(403369),d=n(590606),c=n(299962),u=n(842310),h=n(974780),p=n(182513),g=n(940094),m=n(26382),f=n(576618),b=n(939606);const v=(0,p.X)("PwtStopwatch"),x=(e,t)=>{if(h.Z){if("start"===t.type&&!e.isTiming){const{name:n,startTime:i,navigationType:o}=t;return(0,b.A9)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof i?i:h.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:o},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId}}if(!e.isTiming){if(!t.bypassIsTimingCheck){const n=t.name||e.name;return v("ignoring action - stopwatch is not actively timing",t),(0,b.A9)(`WARN.${n}.noTiming.${t.type}`),e}v("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t)}if("annotate"===t.type){const n=h.Z.now();return v(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return v(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){const{value:n,type:i}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const o=e.binaryAnnotations[t.name].value||0;return v(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(o)}\n          operand: ${String(n)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(o,n):o,type:i}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:i}}}}if("addSubspan"===t.type){v(`adding subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&v(`WARNING: adding duplicate subspan name {${t.name}}`);const n=t.id||(0,d.Z)();-1!==e.spans.findIndex((e=>e.id===n))&&v(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let i=0;return t.startTime?i=t.startTime:e.startTime?i=e.startTime:v(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:i,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){var n;v(`starting subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&v(`WARNING: starting duplicate subspan name {${t.name}}`);const i=t.id||(0,d.Z)();-1!==e.spans.findIndex((e=>e.id===i))&&v(`WARNING: starting duplicate subspan id {${t.name}: ${i}}`);const o=t.parentName?null===(n=e.spans.find((e=>e.name===t.parentName)))||void 0===n?void 0:n.id:null;return{...e,spans:[...e.spans,{name:t.name,id:i,parentId:t.parentId||o,startTime:h.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(v(`stopping subspan {${t.name}}`),!t.id){e.spans.reduce(((e,n)=>(n.name===t.name&&e.push(n),e)),[]).length>1&&(0,b.H)("duplicate_subspan_stop_name",{name:t.name})}const n=t.id?e.spans.findIndex((e=>e.id===t.id)):e.spans.findIndex((e=>e.name===t.name));return n>-1?(e.spans[n].endTime=h.Z.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,b.H)("invalid_subspan_stop_name",{name:t.name}),e}if("stop"===t.type&&e.isTiming){const{startTime:n,metricId:i,pwtStaticContext:o,annotations:r,binaryAnnotations:l,isSampled:p,spans:b,traceId:v}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),p){const e=t.stopTime||h.Z.now(),p=[...b.map((t=>(t.endTime===1/0&&(t.endTime=e),t)))];if(t.manualAndResourceSpans||0===b.length){const i=(0,d.Z)();p.push({name:"network_resources",id:i,startTime:n,endTime:e,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map((e=>(0,u.Z)((0,g.p)(e,[]),i))).filter(Boolean))}const x="initial_app_load"===i.navigationType&&(0,a.Z)(),y={type:"COMPLETE",traceId:v,startTime:n,endTime:e,spans:p,annotationMap:{...(0,s.Z)(r),...(0,f.jh)("browser_",x?(0,f.D3)(x):{})},binaryAnnotationMap:(0,m.n)({metricId:i,pwtStaticContext:o,binaryAnnotations:l,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,c.Z)({metricId:i,pwtStaticContext:o,result:y})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)()}}if("error"===t.type){const{error:n,stopwatchPerformanceObserver:i}=t;return n&&(0,b.H)(n),i&&i.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)()}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:n,pwtStaticContext:i}=e,o=t.reason||"";return(0,c.Z)({metricId:n,pwtStaticContext:i,result:{type:"ABORT",reason:o}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)()}}}return e},y=({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:o=!1})=>{const s=(0,r.N5)(),a=(0,i.useRef)([]),c=(0,i.useRef)(null),[u,h]=(0,i.useReducer)(x,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,d.Z)()});return s?{isTiming:u.isTiming,start:i=>{if(window.PerformanceObserver){const e=1e3;a.current=[],c.current=(0,l.Z)({entryTypes:["resource"]},(t=>{a.current=a.current.concat(t.getEntries()),a.current.length>e&&(a.current=a.current.slice(-e))}))}const o={type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:s,isSampled:!t||Math.random()<t};return h(o)},stop:e=>h({type:"stop",stopTime:e,stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,manualAndResourceSpans:o}),error:e=>{h({type:"error",stopwatchPerformanceObserver:c.current,error:e})},abort:e=>h({type:"abort",stopwatchPerformanceObserver:c.current,customStopwatchBuffer:a.current,reason:e}),annotate:(e,t,n=!1)=>h({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,i,o=!1)=>h({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i,bypassIsTimingCheck:o}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:o=!1})=>h({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:o}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:o={},parentId:r=null,id:s=null,bypassIsTimingCheck:a=!1})=>h({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:o,parentId:r,id:s,bypassIsTimingCheck:a}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,parentName:o=null,id:r=null,bypassIsTimingCheck:s=!1})=>h({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:o,id:r,bypassIsTimingCheck:s}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o,bypassIsTimingCheck:r=!1})=>h({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o,bypassIsTimingCheck:r}),getSpans:(e,t)=>u.spans.filter((n=>n[e]===t)),getTraceId:()=>u.traceId}:null};var _=n(785893);const w=({name:e,v2LoggerMetricName:t,sampleRate:n,abortOnUnloadOrClientNavigation:s=!0,navigationType:a,manualAndResourceSpans:l=!1})=>{const{Provider:d,useHook:c}=(0,o.js)(`Stopwatch_${e}`);return{Provider:function({children:t}){const o=y({name:e,sampleRate:n,navigationType:a,manualAndResourceSpans:l}),c=(0,r.fM)(),u=c?c.time:0,h=(0,i.useRef)(!1),p=null==o?void 0:o.isTiming,g=t=>{h.current?(h.current=!1,null==o||o.abort(t)):(0,b.A9)(`WARN.${e}.noTiming.abort`)};return(0,i.useEffect)((()=>()=>{s&&g("unloadOrClientNavigation")}),[u]),(0,_.jsx)(d,{value:{isTiming:p,abort:g,addAnnotation:(e,t)=>{null==o||o.annotate(e,t)},addBinaryAnnotation:(e,t,n,i)=>{null==o||o.binaryAnnotate(e,t,n,i)},binaryAnnotationOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:r})=>{null==o||o.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:r})},addSubspan:({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:r,parentId:s,id:a,bypassIsTimingCheck:l})=>{null==o||o.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:r,parentId:s,id:a,bypassIsTimingCheck:l})},subspanStart:({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:r,id:s,bypassIsTimingCheck:a})=>{null==o||o.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:r,id:s,bypassIsTimingCheck:a})},subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:r,bypassIsTimingCheck:s})=>{null==o||o.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:r,bypassIsTimingCheck:s})},getSpans:(e,t)=>o?o.getSpans(e,t):[],getTraceId:()=>o?o.getTraceId():0,error:t=>{h.current?(h.current=!1,null==o||o.error(t)):(0,b.A9)(`WARN.${e}.noTiming.error`)},start:e=>{h.current&&(null==o||o.abort("duplicated_init_stopwatch_action")),h.current=!0,null==o||o.start(e)},stop:t=>{h.current?(h.current=!1,null==o||o.stop(t)):(0,b.A9)(`WARN.${e}.noTiming.stop`)}},children:t})},useHook:c}}},46509:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>{let t={};e.forEach((({label:e,timestamp:n})=>{t={...t,[e]:(t[e]||[]).concat([n])}}));let n=Object.freeze({});return Object.keys(t).forEach((e=>{(t[e]||[]).forEach(((t,i)=>{const o=i?`${e}_${i+1}`:e;n={...n,[o]:t}}))})),n}},265355:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}}},139848:(e,t,n)=>{n.d(t,{e:()=>r,Z:()=>s});const i=new Set(["bookmarks","client_tracking_params","get_page_metadata","in_nux","invite_code","no_fetch_context_on_resource","original_referrer","source","top_level_source","top_level_source_depth"]),o=e=>!i.has(e)&&!e.startsWith("__track__"),r=e=>e?Object.keys("object"==typeof e&&e||{}).filter((e=>"string"==typeof e)).filter(o).sort().map((t=>`${t}=${JSON.stringify(null==e[t]?null:e[t])}`)).join(","):"",s=r},886550:(e,t,n)=>{n.d(t,{UZ:()=>d,Z8:()=>c});var i=n(667294),o=(n(40142),n(311866)),r=n(762803),s=n(785893);const{Provider:a,useHook:l}=(0,r.ZP)("ResourceContext");function d({children:e}){const[t,n]=(0,i.useReducer)(((e,t)=>{var n;switch(t.type){case"addListener":const i=[...null!==(n=e[t.payload.name])&&void 0!==n?n:[],t.payload.handler];return{...e,[t.payload.name]:i};case"removeListener":if(!e[t.payload.name])return e;const o=e[t.payload.name].filter((e=>e!==t.payload.handler));return{...e,[t.payload.name]:o};default:return e}}),{});o.ZP.fetchCompleteCallback=({resource:e,options:n,response:i,normalizedResponse:o,refresh:r,resourceSchema:s})=>{t[e]&&t[e].forEach((t=>t({isRefresh:r,normalizedResponse:o,options:n,schema:s,resource:e,response:i})))};const r=(0,i.useMemo)((()=>({listenerDispatch:n})),[]);return(0,s.jsx)(a,{value:r,children:e})}function c(e,t){const{listenerDispatch:n}=l();(0,i.useEffect)((()=>(n({type:"addListener",payload:{name:e,handler:t}}),()=>{n({type:"removeListener",payload:{name:e,handler:t}})})))}},357846:(e,t,n)=>{n.d(t,{U2:()=>l,bi:()=>d,v_:()=>c});var i=n(139848),o=n(311866),r=n(301314),s=n(678929);function a({fetchOptions:e,resource:t,retry:n}){return(l,d)=>{var c,u,h;const{bookmark:p,headers:g,options:m,refresh:f,schema:b}=e,v=(0,i.Z)(m);if(null!==(c=d().resources)&&void 0!==c&&null!==(u=c[t])&&void 0!==u&&null!==(h=u[v])&&void 0!==h&&h.fetching&&!n)return Promise.resolve();const x=n?n.bookmark:p,y=x?{...m,bookmarks:[x]}:m;return l((0,r.LQ)(t,m,!0)),o.ZP.create(t,y).callGet(void 0,g).then((i=>{var d,c,u;const h=null===(d=i.resource_response)||void 0===d?void 0:d.data,[g]=i.bookmarks||[];if(Array.isArray(h)&&0===h.length&&g&&g!==s.q){const i=n?n.count:0;if(!(i>=s.s))return l(a({resource:t,fetchOptions:e,retry:{count:i+1,bookmark:g}}))}null===(c=o.ZP.customDataManipulations)||void 0===c||c.call(o.ZP,t,h,m);const{normalizedResponse:v,resourceSchema:x}=(null===(u=o.ZP.normalizeResponse)||void 0===u?void 0:u.call(o.ZP,{data:h,opts:{bookmark:p,options:m,schema:b},resource:t}))||{normalizedResponse:null,resourceSchema:void 0};return p?l((0,r.Dm)(t,m,i,v,x)):(l((0,r.Sr)(t,m,i,v,f,x)),o.ZP.fetchCompleteCallback&&o.ZP.fetchCompleteCallback({resource:t,options:m,response:i,normalizedResponse:v,refresh:f,resourceSchema:x})),Promise.resolve()}),(e=>{l((0,r.Tl)(t,m,e))}))}}const l=(e,{bookmark:t,headers:n,options:i,schema:o})=>a({resource:e,fetchOptions:{bookmark:t,headers:n,options:i,refresh:!1,schema:o}}),d=(e,{headers:t,options:n,schema:i})=>a({resource:e,fetchOptions:{headers:t,options:n,refresh:!0,schema:i}});function c(e,t,n){return i=>{const{options:s}=t;return o.ZP.create(e,s).callCreate().then((t=>{var o;if(null!==(o=t.resource_response)&&void 0!==o&&o.data){const o=t.resource_response.data,a=(null==n?void 0:n(o))||null;i((0,r.XM)(e,s,t,a))}return t}),(t=>(i((0,r.Tl)(e,s,t)),t)))}}},678929:(e,t,n)=>{n.d(t,{q:()=>i,s:()=>o});const i="-end-",o=10},451104:(e,t,n)=>{n.d(t,{AF:()=>i,KK:()=>o,cR:()=>r,zP:()=>s,aW:()=>a,se:()=>l});const i="CREATE_COMPLETE",o="FETCHING",r="FETCH_ERROR",s="FETCH_COMPLETE",a="FETCH_MORE_COMPLETE",l="RESOURCE_INVALIDATE"},301314:(e,t,n)=>{n.d(t,{XM:()=>o,LQ:()=>r,Tl:()=>s,Sr:()=>a,Dm:()=>l,jB:()=>d});var i=n(451104);function o(e,t,n,o){return{type:i.AF,payload:{resource:e,options:t,response:n,normalizedResponse:o}}}function r(e,t,n){return{type:i.KK,payload:{resource:e,options:t,isFetching:n}}}const s=(e,t,n)=>({type:i.cR,payload:{resource:e,options:t,error:n}});function a(e,t,n,o,r,s){return{type:i.zP,payload:{isRefresh:r,normalizedResponse:o,options:t,resource:e,response:n,schema:s}}}function l(e,t,n,o,r){return{type:i.aW,payload:{resource:e,options:t,response:n,normalizedResponse:o,schema:r}}}function d(e,t={}){return{type:i.se,payload:{resource:e,options:t}}}},535718:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(667294),o=n(40142),r=n(139848),s=n(678929),a=n(855168),l=n(585967),d=n(357846);const c={};function u({enabledRouteRefresh:e,dangerouslyDisableFetch:t,headers:n,name:u,noCache:h,options:p,schema:g}){const m=(0,o.useDispatch)(),f=(0,r.e)(p),b=(0,i.useRef)(),v=(0,a.k6)(),x=v&&"POP"!==v.action,y=e=>(e[u]||c)[f]||c,_=(0,o.useSelector)((({resources:e})=>y(e).nextBookmark)),w=(0,o.useSelector)((({resources:e})=>y(e).data)),C=(0,o.useSelector)((({resources:e})=>y(e).auxData)),j=(0,o.useSelector)((({resources:e})=>y(e).error)),S=(0,o.useSelector)((({resources:e})=>Boolean(y(e).fetching))),I=Boolean(j)||void 0!==w,P=I&&!S&&_===s.q,E=Boolean(I&&e&&x&&!t),[T,D]=(0,i.useState)(E),k=(0,i.useCallback)((e=>m((0,d.U2)(u,{options:p,schema:g,bookmark:e,headers:n}))),[m,u,f,g,n]),O=()=>m((0,d.bi)(u,{options:p,schema:g,headers:n})),{isBot:B}=(0,l.B)();(0,i.useEffect)((()=>{if(!t&&b.current!==f){const e=void 0===b.current;b.current=f,!I&&!S||e&&j&&(({httpStatus:e})=>!e||e>=500)(j)?k():(!B&&h||E)&&O()}}));const R=(0,i.useCallback)((()=>{t||(O(),D(!0))}),[t,d.bi,u,f,n,D]),M=(0,i.useCallback)((()=>{!_||P||S||t||k(_)}),[t,k,_,P,S]),A=(0,i.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:M,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:R}),L={auxData:C,data:w,error:j,fetchMore:M,isAtEnd:P,isFetching:S,isLoaded:I,isRefreshing:T,nextBookmark:_,refresh:R};return(0,o.shallowEqual)(L,A.current)||(!T||!A.current.data&&E||(0,o.shallowEqual)(L.data,A.current.data)||(L.isRefreshing=!1,D(!1)),A.current=L),A.current}},620813:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(667294),o=n(785893);function r({children:e,fallback:t,dangerouslyServerRenderForGraphQL:n=!1}){const r=t||null;return(0,o.jsx)(i.Suspense,{fallback:r,children:e})}},689859:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(620813).Z},658551:(e,t,n)=>{n.d(t,{Jg:()=>r,ZP:()=>s,c5:()=>a});var i=n(731164);const o=.01,r=Object.freeze({OTHER:0,FACEBOOK:1,GPLUS_ONE:2,GSI:3});function s(e){return new Promise(((t,n)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const i=document.createElement("script");i.src=e,i.async=!0,i.addEventListener("load",t),i.addEventListener("error",n),document.getElementsByTagName("head")[0].appendChild(i)}))}function a(e,t=r.OTHER,n=!1){const s=n?"web":"mweb";return new Promise(((n,a)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if(t===r.GPLUS_ONE)if(window.gapi)n();else{const t=setInterval((()=>{window.gapi||20===e?(clearInterval(t),n()):(e+=1,i.Z.increment(`${s}.loadScript.gplus_one.tries_${e}`,o))}),100)}else if(t===r.FACEBOOK)if(window.FB)n();else{const t=setInterval((()=>{window.FB||20===e?(clearInterval(t),n()):(e+=1,i.Z.increment(`${s}.loadScript.facebook.tries_${e}`,o))}),100)}else if(t===r.GSI)if(window.google)n();else{const t=setInterval((()=>{window.google||20===e?(clearInterval(t),n()):(e+=1,i.Z.increment(`${s}.loadScript.gsi.tries_${e}`,o))}),100)}else n()}else{const t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",n),t.addEventListener("error",a),document.getElementsByTagName("head")[0].appendChild(t)}}))}},420043:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(667294),o=n(823493),r=n.n(o);function s(e=1400){const[t,n]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1),a=r()((()=>{if(window&&window.scrollY){const i=window.scrollY>=e;if(i&&!t?n(!0):!i&&t&&n(!1),document&&document.body){window.innerHeight+window.scrollY+1>=document.body.offsetHeight&&s(!0)}}}),50);return(0,i.useEffect)((()=>(window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)})),[a]),{hasScrolledToBottom:o,isScrolledToThreshold:t}}},203620:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(667294),o=n(68006);function r({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:n,resourceName:r,resourceOptions:s,value:a}){const l=(0,o.Z)({allowSearchOnMount:e,resourceName:r,resourceOptions:s,value:a});return(0,i.useEffect)((()=>{null!=l&&l.length&&n(l)}),[l]),t||null}},660310:(e,t,n)=>{n.d(t,{R3:()=>r,NO:()=>s,Jc:()=>a,th:()=>l,ge:()=>c});var i=n(238402);const o=["and","that","but","or","as","if","when","than","because","while","where","after","so","though","since","until","whether","before","although","nor","like","once","unless","now","except","the","a","an","san","for","in","with"],r={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function s(e){return(e||"").trim().replace(/\s+/g," ")}function a({type:e,term:t="",index:n}){switch(e){case r.USER_INPUT:case r.AUTO_COMPLETE_HASHTAG:case r.TYPO_AUTO_CORRECT_ORIGINAL:return`${t}|${e}`;case r.AUTO_COMPLETE_DEFAULT:return`${t}|autocomplete|${n}`;case r.AUTO_COMPLETE_RECENT_SEARCH:return`${t}|recentsearch|${n}`;case r.AUTO_COMPLETE_TRENDING:return`${t}|trending|${n}`;case r.AUTO_COMPLETE_RECOMMENDED_SEARCH:return`${t}|recommended|${n}`;case r.SEARCH_GUIDE:return`${t}|guide|word|${n}`;default:return""}}function l({queryStates:e}){return 0===e.length?"":"&"+(0,i.Z)({term_meta:e.map((e=>a(e)))})}function d(e){if(e){const t=e.trim().split(/\s+/);return t.find((e=>o.includes(e.toLowerCase())))?[e]:t}return[]}function c({type:e,query:t="",index:n}){switch(e){case r.USER_INPUT:case r.AUTO_COMPLETE_HASHTAG:case r.TYPO_AUTO_CORRECT_ORIGINAL:return d(t).map((t=>({index:n,term:t,type:e})));case r.AUTO_COMPLETE_RECENT_SEARCH:case r.AUTO_COMPLETE_RECOMMENDED_SEARCH:case r.AUTO_COMPLETE_TRENDING:case r.AUTO_COMPLETE_DEFAULT:return d(t).map((t=>({term:t,type:e,index:n})));default:return[]}}},68006:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(667294);const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};const s=r;var a=n(311866);function l({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},i=a.ZP.create(e,n),o=new s,r=()=>{i.abort()};return async function(e,t){const n=o.get(`${t}-${e}`);if(n){const t=n.items;if(t&&t.length){r();return{hint:n.hint,items:t,term:e}}}return e.length>=0?(async(e,t)=>{var n;if(i.isCalling()){var s,a;const n=null===(s=i.options)||void 0===s?void 0:s.term,o=null===(a=i.options)||void 0===a?void 0:a.pin_scope;if(e===n&&t===o)return;r()}const{bookmarks:l,...d}=i.options||{};i.options={...d,term:e,pin_scope:t};const c=null===(n=(await i.callGet({showError:!1})).resource_response)||void 0===n?void 0:n.data,u=null==c?void 0:c.items,h=(null==c?void 0:c.hint)||{},p={hint:h,items:u};return o.set(`${t}-${e}`,p),{term:e,items:u,hint:h}})(e,t):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:o}){const r=(0,i.useRef)(!1),s=(0,i.useRef)({}),[a,d]=(0,i.useState)([]),c=function({resourceName:e,resourceOptions:t}){const n=(0,i.useRef)();return n.current||(n.current=l({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n}),u=n.pin_scope||"pins",h=`${u}-${o}`;return(0,i.useEffect)((()=>{(async()=>{if(null!=o&&(e||r.current))if(h in s.current)d(s.current[h]);else try{const e=await c(o,u);if(e){const{items:t}=e;s.current[h]=t,d(t)}}catch(t){if("Resource call aborted"===t)return;throw t}r.current||(r.current=!0)})()}),[o,u,h]),a}},281996:(e,t,n)=>{n.d(t,{lw:()=>i,_R:()=>o,wF:()=>r});const i={PINS:"pins",PINS_BUYABLE:"buyable_pins",PINS_MINE:"my_pins",PINS_VIDEO:"videos",BOARDS:"boards",USERS:"users",IDEA_PINS:"idea_pins"},o=e=>{switch(e){case i.PINS:return 43;case i.PINS_MINE:return 107;case i.PINS_BUYABLE:return 254;case i.PINS_VIDEO:return 3306;case i.BOARDS:return 44;case i.USERS:return 45;default:return null}},r=e=>{switch(e){case i.PINS:return 60;case i.PINS_MINE:return 63;case i.PINS_BUYABLE:return 3800;case i.PINS_VIDEO:return 64;case i.BOARDS:return 61;case i.USERS:return 62;default:return null}}},657121:(e,t,n)=>{function i({richPinData:e={}}){return((null==e?void 0:e.products)||[])[0]}n.d(t,{Z:()=>i})},51610:(e,t,n)=>{n.d(t,{U:()=>s,Z:()=>a});var i=n(588527),o=n(785893);const r=()=>{},s=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function a({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:n,allowScroll:a,children:l}){const d=e=>function(e,t){t&&e.keyCode===i.Z.ESCAPE||s(e)}(e,t);return(0,o.jsx)("div",{onAbort:s,onAnimationEnd:s,onAnimationIteration:s,onAnimationStart:s,onBlur:r,onCanPlay:n?r:s,onCanPlayThrough:s,onChange:s,onClick:e?r:s,onCompositionEnd:s,onCompositionStart:s,onCompositionUpdate:s,onContextMenu:s,onCopy:s,onCut:s,onDoubleClick:s,onDurationChange:s,onEmptied:s,onEncrypted:s,onEnded:s,onError:s,onFocus:r,onInput:s,onInvalid:s,onKeyDown:d,onKeyPress:d,onKeyUp:d,onLoad:s,onLoadedData:s,onLoadedMetadata:s,onLoadStart:s,onMouseDown:s,onMouseEnter:s,onMouseLeave:s,onMouseMove:e?r:s,onMouseOut:s,onMouseOver:s,onMouseUp:e?r:s,onPaste:s,onPause:s,onPlay:s,onPlaying:s,onProgress:s,onRateChange:s,onScroll:a?r:s,onSeeked:s,onSeeking:s,onSelect:s,onStalled:s,onSubmit:s,onSuspend:s,onTimeUpdate:s,onTouchCancel:s,onTouchEnd:e?r:s,onTouchMove:e?r:s,onTouchStart:e?r:s,onTransitionEnd:s,onVolumeChange:s,onWaiting:s,onWheel:s,children:l})}},903945:(e,t,n)=>{n.d(t,{qn:()=>i,L_:()=>o,Nh:()=>r});const i=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(n){return console.error("Cannot access localStorage."),t}},o=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(t){console.error("Cannot access localStorage.")}},r=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(n){console.error("Cannot access localStorage.")}}},81260:(e,t,n)=>{n.d(t,{RR:()=>i,YB:()=>o,yR:()=>r,YL:()=>s,pE:()=>a,h8:()=>l,Cc:()=>d});const i="0.8.0",o=9/16,r=8,s=10;function a(e,t=1){return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}const l={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},d={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},361509:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{n:()=>o,B:()=>r});const o=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(null==e||!e.match(n)||null==t||!t.match(n))return null;const i=null==e?void 0:e.split("."),o=null==t?void 0:t.split("."),r=Math.max((null!=i?i:"").length,(null!=o?o:"").length);for(let l=0;l<r;l+=1){var s,a;const e=l<(null!==(s=null==i?void 0:i.length)&&void 0!==s?s:0)?parseInt(null==i?void 0:i[l],10):0,t=l<(null!==(a=null==o?void 0:o.length)&&void 0!==a?a:0)?parseInt(null==o?void 0:o[l],10):0;if(e<t)return-1;if(e>t)return 1}return 0};class r{constructor(e,t,n){i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"!=typeof window&&(this.intervalId=window.setInterval((()=>{const e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)}),500),this.resume())}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;const e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}},925265:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(561077);const o=/\{\{\s*(\w+)\s*\}\}/g,r=(e,t)=>(0,i.Z)(o,e,t)},730060:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},561077:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(e,t,n)=>t?t.replace(e,((e,t)=>n&&Object.prototype.hasOwnProperty.call(n,t)?n[t]:"")):""},754999:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(925265),o=n(730060);const r=(e,t)=>{const n={};return Object.keys(t).forEach((e=>{n[e]=t[e]?(0,o.Z)(t[e].toString()):""})),(0,i.Z)(e,n)}},354783:(e,t,n)=>{function i(e){return e.replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))}n.d(t,{Z:()=>i})},280313:(e,t,n)=>{n.d(t,{z_:()=>i,Yq:()=>o,T7:()=>r,Yj:()=>l,pe:()=>d,xt:()=>c,E5:()=>u});n(883119);const i="/today/",o=(e,t=0)=>({num_days:3,referrer:t,...e?{}:{redux_normalize_feed:!0}});function r(e,t,n){const i=function(e){return 0===e||2===e?"trending":1===e?"best":"article"}(e),o=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-")}(t);return`/today/${i}/${encodeURIComponent(o)}/${n}/`}const s={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},a={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},l=(e,t)=>{const n=a[e];return!(null===n||n!==t&&!t.startsWith(n))},d=e=>s[e],c=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)||""),u=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner))},807824:(e,t,n)=>{function i(e,t){if(!t)return e;const n=new RegExp(/http(s?):/);if(!n.test(e)){const i=n.exec(t);if(i&&i.length){e=i[0]+e}}return e}n.d(t,{Z:()=>i})},500953:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(667294);const o=e=>{(0,i.useEffect)(e,[])}},8742:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(667294);const o=()=>{const[e,t]=(0,i.useState)(!1),[n,o]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1);return{active:e,focused:n,hovered:r,onBlur:()=>{o(!1),t(!1)},onFocus:()=>o(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>{s(!1),t(!1)},onMouseUp:()=>t(!1)}}},34411:(e,t,n)=>{n.d(t,{$:()=>o,Z:()=>s});var i=n(762803);const{Provider:o,useHook:r}=(0,i.ZP)("viewer"),s=r},997993:(e,t,n)=>{n.d(t,{aH:()=>r,CU:()=>s,GT:()=>a,VG:()=>l,ZA:()=>d,Bh:()=>c,qA:()=>u,VC:()=>h,Jx:()=>p,Zt:()=>g,Gy:()=>m,MZ:()=>f,sG:()=>b,G$:()=>v,nw:()=>x,oR:()=>y,xk:()=>_,J_:()=>w,qp:()=>C,vd:()=>j,FU:()=>S,a3:()=>I});var i=n(542756);const o=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach(((e,i)=>{const o=t[e];o&&(n[i]=o)})),n.join("")};function r(e){return function(t,n){const i=[];t&&/\S/.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}const s=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function a(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(s)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function l(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function d(e){return function(t,n){const i=o(t.trim()),r=[];if(i)if(i.length<2&&r.push(e.ageTooShortString),/^\d+$/.test(i)){const t=parseInt(i,10);t<=0||t>=300?r.push(e.invalidAgeString):e.checkUnderAgeWithString&&t<12&&r.push(e.checkUnderAgeWithString)}else r.push(e.invalidAgeString);const s={errors:r,warnings:[]};return n&&n(s),s}}function c(e){return function(t,n){const i=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),o=[],r=!1!==e.checkLength&&i.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!r||o.push(e.message);const s={errors:o,warnings:[]};return n&&n(s),s}}function u(e){return function(t,n){const i=/^\d+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=o(t))&&!t.match(i)&&r.push(e.message));const s={errors:r,warnings:[]};return n&&n(s),s}}function h(e){return function(t,n){const i=/^[\d\ -]+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=o(t))&&!t.match(i)&&r.push(e.message));const s={errors:r,warnings:[]};return n&&n(s),s}}function p(e){return function(t,n){const i=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function g(e){return function(t,n){const o=[];if(t)try{const n=(0,i.Z)(t);n&&n.protocol&&("http"!==n.protocol||"localhost"===n.hostname)||o.push(e.message)}catch(s){o.push(e.message)}const r={errors:o,warnings:[]};return n&&n(r),r}}function m(e){return function(t,n){const i=[];(e.should_trim||!1)&&(t=t&&t.trim());const o=t.length;e.min&&o<e.min?i.push(e.minErrorString):e.max&&o>e.max&&i.push(e.maxErrorString);const r={errors:i,warnings:[]};return n&&n(r),r}}function f(e){return function(t,n){const i=!e.checkExclusion,o=e.substrings,r=[];(i&&!o.some((e=>t.includes(e)))||!i&&o.some((e=>t.includes(e))))&&r.push(e.message);const s={errors:r,warnings:[]};return n&&n(s),s}}function b(e){return function(t,n){const i=[];t!==(e&&e.targetValue)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function v(e){return function(t,n){t&&(t=parseFloat(t));const i=[];t<=e.value&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function x(e){return function(t,n){t&&(t=parseFloat(t));const i=[];t<e.value&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function y(e){return function(t,n){const i=[];/^[\040-\176]*$/.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function _(e){return function(t,n){const i=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,o=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(i)&&(t=t&&t.trim(),o.push(e.message));const r={errors:o,warnings:[]};return n&&n(r),r}}function w(e){return function(t,n){t=t&&t.trim();const i=[],o=new Date(t);t&&!o.getTime()&&i.push(e.message);const r={errors:i,warnings:[]};return n&&n(r),r}}function C(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function j(e){return function(t,n){const i=[];e.pattern.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function S(e,t){const n=e.map((e=>e(t).errors));return[].concat(...n)}function I(e,t){let n="";return t.some((t=>{const i=t(e);return i.errors.length>0&&(n=i.errors[0],!0)})),n}},526947:(e,t,n)=>{n.r(t),n.d(t,{RoleBasedAccessControlProvider:()=>x,useRoleBasedAccessControlContext:()=>v});var i=n(667294),o=n(616627),r=n(535718),s=n(34411),a=n(181307),l=n(354783);const d=e=>{const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&("object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?t[(0,l.Z)(n)]=e[n]:t[(0,l.Z)(n)]=d(e[n]));return t},c=(e,t)=>{const n=[];for(const r in e)r!==t&&n.push({id:r,...d(e[r])});const i=n.sort((({user:{businessName:e}},{user:{businesName:t}})=>e.localeCompare(t))),o=new Map;for(const r of i)o.set(r.id,r);return o};var u=n(652382);const h={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},p=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=e=>{const[t,n]=(0,i.useReducer)(p,h),o=(({dispatch:e,isEnabled:t,state:n})=>{const{orbacVisibility:o,disableProfileChanger:r,headerVisible:s}=n;return{changeProfile:(0,i.useCallback)((n=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:n})}),[t,e]),toggleORBACVisibility:(0,i.useCallback)((n=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=n?n:!o})}),[t,e,o]),toggleDisableProfileChanger:(0,i.useCallback)((n=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=n?n:!r})}),[t,e,r]),toggleHeaderVisibility:(0,i.useCallback)((n=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=n?n:!s})}),[t,e,s])}})({dispatch:n,isEnabled:e,state:t}),{activeProfile:r,orbacVisibility:s}=t;(0,i.useEffect)((()=>{const e=(0,u.qn)("orbacActiveProfile",!1);e&&n({type:"SET_ACTIVE_PROFILE",payload:e})}),[]),(0,i.useEffect)((()=>{const e=(0,u.qn)("orbacVisibilty",!1);e&&n({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})}),[]),(0,i.useEffect)((()=>{(0,u.Nh)("orbacVisibility",s)}),[s]),(0,i.useEffect)((()=>{(0,u.Nh)("orbacActiveProfile",r)}),[r]);return{state:t,actions:o,receiveProfiles:(0,i.useCallback)(((e,t)=>{n({type:"LOAD_PROFILES",payload:c(e,t)})}),[n])}};var m=n(762803),f=n(785893);const{Provider:b,useHook:v}=(0,m.js)("RoleBasedAccessControlContext"),x=({children:e})=>{const t=(0,a.tc)("web_m10n_business_access_orbac_www"),n=(0,s.Z)(),l=Boolean(n.isAuth&&n.isPartner&&t().anyEnabled),{state:d,actions:c,receiveProfiles:u}=g(l),{activeProfile:h,headerVisible:p,profiles:m=[]}=d,v=m?Array.from(m.values()):[],x=(0,o.Z)(v),y=!!(n.isAuth&&v.length>0)&&x,_=n.isAuth?n.id:"",w=n.isAuth?n.username:"",{changeProfile:C,toggleORBACVisibility:j,toggleDisableProfileChanger:S,toggleHeaderVisibility:I}=c;(0,i.useEffect)((()=>{l&&("string"!=typeof x?h||C(_):C(x))}),[x,_,l,C,h]),(0,i.useEffect)((()=>{l&&(y&&!p&&I(!0),!y&&p&&I(!1))}),[I,y,l,p,m]);const{data:P}=(0,r.Z)({name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0},dangerouslyDisableFetch:!l}),E=null==P?void 0:P.profiles;let T;n&&n.isAuth&&d.activeProfile===n.id?T={id:n.id,permissions:["OWNER"],user:{username:w,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:h&&d.profiles&&(T=d.profiles.get(h)),(0,i.useEffect)((()=>{E&&u(E,_)}),[u,E,_]);const D=d.profiles?Array.from(d.profiles.values()):[];return(0,f.jsx)(b,{value:{profiles:D,headerVisible:d.headerVisible,activeProfile:T,changeProfile:C,toggleORBACVisibility:j,toggleDisableProfileChanger:S,toggleHeaderVisibility:I},children:e})}},767523:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(181307),o=n(526947);const r=()=>{const e=(0,i.tc)("web_m10n_business_access_orbac_www"),t=(0,o.useRoleBasedAccessControlContext)(),{activeProfile:n}=t||{};return e().anyEnabled&&n||Object.freeze({})}},616627:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(40142),o=n(34411),r=n(382745),s=n(855168);const a=e=>{var t;const n=(0,s.TH)(),a=(0,o.Z)(),l=(0,s.$B)("/:username"),d=null==l||null===(t=l.params)||void 0===t?void 0:t.username,c=(0,s.$B)("/pin/:id"),u=(0,i.useSelector)((e=>{var t,n,i,o;return!(null==c||null===(t=c.params)||void 0===t||!t.id)&&(null==e||null===(n=e.pins)||void 0===n||null===(i=n[c.params.id])||void 0===i||null===(o=i.pinner)||void 0===o?void 0:o.id)}));if((0,r.ej)(n))return!1;if((0,r.RU)(n))return!0;const h=e.concat(a.isAuth?{user:{username:a.username},id:a.id}:{}).find((e=>{const{user:t={},id:n}=e||{},{username:i}=t;return!!(i&&d||u&&n)&&(i===d||u===n)}));return!!h&&h.id}},192830:(e,t,n)=>{n.d(t,{i5:()=>y,sX:()=>w,Z5:()=>x,NG:()=>_,MT:()=>C});var i=n(667294),o=n(40142),r=n(311866),s=n(682492),a=n.n(s);const l=(e,t)=>e.data[t]&&e.data[t].messages||[];function d(e,t){const n={};return e.filter((e=>!!e)).reduce(((e,i)=>{const o=t(i);return n[o]?(a()(n[o],i),e):(n[o]=i,e.concat([i]))}),[])}function c(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function u(e,t,n){let i=l(e,t).concat(n);return i=d(i,(e=>e.id)),c(i)}const h={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,showConversationsDropdown:!1,ui:{},unread:0};function p(e=h,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:n}=t.payload;return{...e,data:{...e.data,[n]:{...e[n]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const n={...e,data:{...e.data}},{id:i}=t.payload;return delete n.data[i],n}if("FETCH_COMPLETE"===t.type){const{options:n,resource:i,response:o}=t.payload,r=o.resource_response.data;if("ConversationMessagesResource"===i){const t=r||[],i=(null==n?void 0:n.conversation_id)||"",o=u(e,i,t),s=o[o.length-1];return{...e,data:{...e.data,[i]:{...e.data[i],id:i,messages:o,unread:0,last_message:s}}}}if("ConversationsResource"===i){const t=r||[],n={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:i,name:o,board:r,emails:s,unread:a,users:l,last_message:d}=e,c=u(n,t,[d]);n.data[t]={...n.data[t],id:t,created_at:i,name:o,board:r,emails:s||[],unread:a||0,users:l||[],last_message:d,messages:c}})),n}if("ConversationResource"===i){const t=r||{},{id:n}=t,i={...e,data:{...e.data}};return n&&(i.data[n]={...i.data[n],...t}),i}if("NewsHubBadgeResource"===i){if(r){const t=r.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:n,message:i}=t.payload;if(e.data[n]){const t=u(e,n,[i]);return{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:t,last_message:i}}}}return e}if("MESSAGE_SEND_PENDING_CLEAR"===t.type){const{id:n,messageId:i,newMessageId:o}=t.payload;if(e.data[n]){const t=l(e,n).find((e=>e.id===i));if(t){const r={...t,id:o};let s=l(e,n).filter((e=>e.id!==i)).concat([r]);return s=d(s,(e=>e.id)),s=c(s),{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:s}}}}}return e}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload}}return e}var g=n(762803),m=n(886550),f=n(785893);const b=(()=>{let e=0;return()=>e++})(),{Provider:v,useHook:x}=(0,g.ZP)("Conversations");function y({children:e}){const[t,n]=(0,i.useReducer)(p,h),o=(0,i.useCallback)((e=>n({type:"FETCH_COMPLETE",payload:e})),[]);(0,m.Z8)("ConversationMessagesResource",o),(0,m.Z8)("ConversationsResource",o),(0,m.Z8)("ConversationResource",o),(0,m.Z8)("NewsHubBadgeResource",o);const s=(0,i.useMemo)((()=>({conversations:t,conversationOpen:(e,t=!1,i="")=>n({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:i}}),conversationClose:(e,t="",i=!1)=>n({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:i}}),conversationCreate:e=>n({type:"CONVERSATION_CREATE",payload:e}),conversationDelete:e=>n({type:"CONVERSATION_DELETE",payload:{id:e}}),conversationGet:(e,t,i)=>{r.ZP.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;n({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";i(t)}))},dropdownClose:()=>{n({type:"CLOSE_DROPDOWN"})},dropdownOpen:()=>{n({type:"OPEN_DROPDOWN"})},pendingMessageSend:(e,t)=>n({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}),pendingMessageClear:(e,t,i)=>n({type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:i}}),updateNewsHubCount:e=>n({type:"UPDATE_NEWSHUB_COUNT",payload:e}),updateUnreadCount:e=>n({type:"UPDATE_UNREAD_COUNT",payload:e})})),[t]);return(0,f.jsx)(v,{value:s,children:e})}function _(){const{conversations:e,conversationCreate:t,pendingMessageSend:n,pendingMessageClear:i}=x(),s=(0,o.useSelector)((({pins:e})=>e));return(o,a,l,d)=>new Promise(((c,u)=>{const{text:h,pinId:p,boardId:g,userId:m,didItId:f}=a;function v(){const e=r.ZP.create("ConversationMessagesResource",{conversation_id:o,text:h,pin:p,board:g,user:m,user_did_it_data:f,source:l}),t=`${b()}`;n(o,{text:h,sender:d,created_at:(new Date).toString(),created_ms:Date.now(),id:t,board:null,event_type:null,pin:p?s[p]:null,type:"message",user_did_it_data:null,user:null}),e.callCreate().then((e=>{i(o,t,e.resource_response.data.id),c()})).catch(u)}e.data[o]?v():r.ZP.create("ConversationResource",{conversation_id:o}).callGet().then((e=>{const n=e&&e.resource_response&&e.resource_response.data;t(n),v()}))}))}function w(e){const{conversations:t}=x();return t.data[e]}function C(e){const{conversations:t}=x();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}},121809:(e,t,n)=>{n.d(t,{e:()=>o,p:()=>r});var i=n(762803);const{Provider:o,useHook:r}=(0,i.ZP)("headerButtonContext")},159617:(e,t,n)=>{n.d(t,{hu:()=>i,cI:()=>o,L1:()=>r,WZ:()=>s,fe:()=>a,Rz:()=>l});const i=64,o=80,r=22,s="HeaderContent",a=671,l={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},463111:(e,t,n)=>{n.d(t,{l:()=>c,E:()=>d});var i=n(667294),o=n(762803);function r(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:o}=t;if("ShareSuggestionsResource"===o.resource){var n;const i=t.payload.response.resource_response.data||[],{term:r=""}=null!==(n=o.options)&&void 0!==n?n:{};return{...e,[r]:e[r]?[...e[r],...i]:i}}if("ShareSuggestionsTypeaheadResource"===o.resource){var i;const n=(t.payload.response.resource_response.data||{}).items||[],{term:r=""}=null!==(i=o.options)&&void 0!==i?i:{};return{...e,[r]:e[r]?[...e[r],...n]:n}}}return e}var s=n(886550),a=n(785893);const{Provider:l,useHook:d}=(0,o.ZP)("ShareSuggestions");function c({children:e}){const[t,n]=(0,i.useReducer)(r,{}),o=e=>{n({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};return(0,s.Z8)("ShareSuggestionsResource",o),(0,s.Z8)("ShareSuggestionsTypeaheadResource",o),(0,a.jsx)(l,{value:{shareSuggestions:t},children:e})}},737989:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(40142),o=n(246767),r=n(619581),s=n(174523),a=n(869950),l=n(691951),d=n(221469),c=n(883119),u=n(855168),h=n(785893);function p({boardResource:{data:e,refresh:t}}){const n=(0,s.ZP)(),p=null==e?void 0:e.id,g=(0,i.useSelector)((e=>p&&(e.boards.content||{})[p]))||null,{search:m,state:f}=(0,u.TH)();if((0,r.Z)(),!g)return(0,h.jsx)(c.$j,{accessibilityLabel:n._("Loading Board page","ExperimentalBoardPageContainer.Spinner","Accessibility label on loading spinner"),show:!0});const b=null==f?void 0:f.newBoard,v=(0,a.Uz)(null==e?void 0:e.sensitivity),x=b&&!v&&null!=e&&e.should_show_more_ideas?l.s.jumpstartBoard:null,y=(0,d.mB)(m);return(0,h.jsx)(o.Z,{board:g,initialModalType:x,refreshBoardData:t,showPulsar:Boolean(y.showPulsar)})}var g=n(602033),m=n(34411),f=n(896829);function b(){const e=(0,m.Z)(),{username:t}=(0,u.UO)(),n=e.isAuth&&e.username===t;(0,f.Q)({view_type:5,view_parameter:n?3069:3070});const i=(0,g.Z)({name:"BoardResource",getOptions:({routeData:{params:{slug:e,username:t}}})=>({username:t,slug:unescape(e||""),field_set_key:"detailed"})});return(0,h.jsx)(p,{boardResource:i})}},372833:(e,t,n)=>{n.d(t,{B:()=>s,Z:()=>a});var i=n(858875),o=n(704170);const r=[];function s(e){let t;try{t=JSON.stringify({errorObj:e})}catch(l){t=JSON.stringify({errorObj:{message:e.message,name:"logToServer stringify exception"}})}const n=(s={report_context:JSON.stringify({current_url:window.location.href,client_version:"f2bf91b"}),report_data:t},Object.keys(s).map((e=>e+"="+encodeURIComponent(s[e]))).join("&"));var s;const a=window.btoa(n);if(-1===r.indexOf(a)){const e=new XMLHttpRequest;e.open("post","/_/_/report/error/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded");const t=(0,o.H)();t&&e.setRequestHeader("X-Pinterest-PWS-Handler",t),e.setRequestHeader("X-CSRFToken",function(e){const t=("; "+document.cookie).split("; "+e.name+"=");return 2===t.length?t.pop().split(";").shift():""}(i.fS)),e.send(n),r.push(a)}r.length>100&&r.shift()}function a(){window.addEventListener("error",(e=>{const t=e.error||{};s({name:t.name,message:t.message||e.message,stack:t.stack,filename:e.filename,line:e.lineno,column:e.colno})})),window.addEventListener("unhandledrejection",(e=>{var t,n,i,o,r;if(!((null==e?void 0:e.reason)instanceof Error))return;const{reason:a}=e,l="string"==typeof(null==a?void 0:a.message)?a.message:String(a);s({name:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"unhandledrejection",message:l,message_detail:null==a?void 0:a.message_detail,original_message:null==a?void 0:a.original_message,stack:null==a?void 0:a.stack,filename:null==a?void 0:a.fileName,line:null!==(n=null!==(i=null==a?void 0:a.lineno)&&void 0!==i?i:null==a?void 0:a.line)&&void 0!==n?n:null==a?void 0:a.lineNumber,column:null!==(o=null!==(r=null==a?void 0:a.column)&&void 0!==r?r:null==a?void 0:a.colno)&&void 0!==o?o:null==a?void 0:a.columnNumber})}))}}},e=>{e.O(0,[11450],(()=>{[76030,98402,63880,92982,46760,77560,56103,48035,5035,29694,43473,22347,22538,1593].map(e.E)}),5),e.O(0,[11450],(()=>{[76030,98402,63880,92982,46760,77560,56103,48035,5035,29694,43473,22347,22538,1593].map(e.E)}),5),e.O(0,[11450],(()=>{[76030,98402,63880,92982,46760,77560,56103,48035,5035,29694,43473,22347,22538,1593].map(e.E)}),5);var t=t=>e(e.s=t);e.O(0,[97270,83119,67631,85486,26623,93653,22777,9136,48455,7914,68648,98791,39752,51514],(()=>(t(227608),t(733237),t(617911))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/[username]/[slug]-authdesktop-7ca627cc1458ba11.mjs.map